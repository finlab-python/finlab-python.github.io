(window.webpackJsonp=window.webpackJsonp||[]).push([[104,50],{1026:function(t,e,r){"use strict";r.r(e);r(65),r(148),r(60),r(192),r(39),r(53),r(86),r(45),r(54),r(66),r(67),r(56);var n=r(32),o=r(28),l=r(12),d=(r(429),r(928),r(934),r(935),r(207),r(279),r(23),r(30),r(44),r(64),r(937),r(945),r(947),r(948),r(949),r(951),r(952),r(953),r(954),r(955),r(956),r(957),r(958),r(960),r(961),r(962),r(963),r(964),r(965),r(966),r(967),r(968),r(969),r(970),r(43),r(534)),c=r(26);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach(function(e){Object(o.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var k={components:{Modal:d.default},data:function(){return{tab:"我的主題",nameInput:"",thumbnailInput:"",abstractInput:"",userIdeas:{},userOrdered:[],ideas:{xxxx:{name:"測試1",thumbnail:"1231",abstract:"4561"},yyyy:{name:"測試2",thumbnail:"1232",abstract:"4562"}},openModal:!1,modalContent:"",modalId:"",openEditModal:!1,scores:{}}},mounted:function(){this.download()},methods:{shuffle:function(t){for(var e,r=t.length;0!=r;){e=Math.floor(Math.random()*r),r--;var n=[t[e],t[r]];t[r]=n[0],t[e]=n[1]}return t},upload:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$store.state.user.uid,(n={})[r]={ideas:t.userIdeas,order:t.userOrdered},e.next=1,c.c.collection("vote").doc("all").set(n,{merge:!0});case 1:alert("success");case 2:case"end":return e.stop()}},e)}))()},download:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark(function e(){var r,n,o,l,i,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=2,c.c.collection("vote").doc("all").get();case 2:r=e.sent.data(),e.next=4;break;case 3:return e.prev=3,e.catch(1),e.abrupt("return");case 4:for(l in console.log(r),n=t.$store.state.user.uid,console.log(n),n in r&&(console.log("uid in download data"),o=r[n],t.userIdeas=o.ideas,t.userOrdered=o.order,t.$forceUpdate()),t.ideas={},t.scores={},r)for(i in l!=n&&(t.ideas=v(v({},t.ideas),r[l].ideas)),r[l].order)(d=r[l].order[i])in t.scores||(t.scores[d]=0),t.scores[d]+=parseInt(i),parseInt(i);t.ideas=v(v({},t.ideas),t.userIdeas);case 5:case"end":return e.stop()}},e,null,[[1,3]])}))()},addIdea:function(){console.log("add user idea"),this.userIdeas[this.uuidv4()]={name:this.nameInput,thumbnail:this.thumbnailInput,abstract:this.abstractInput},this.nameInput="",this.thumbnailInput="",this.abstractInput="",console.log(this.userIdeas),this.$forceUpdate()},uuidv4:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})},addFavorate:function(){this.userOrdered.push(this.modalId),this.openEditModal=!1,this.$forceUpdate()},moveForward:function(){var t=this.userOrdered.indexOf(this.modalId),e=Math.max(t-1,0);this.userOrdered[t]=this.userOrdered[e],this.userOrdered[e]=this.modalId,this.$forceUpdate()},moveBackward:function(){var t=this.userOrdered.indexOf(this.modalId),e=Math.min(t+1,this.userOrdered.length-1);this.userOrdered[t]=this.userOrdered[e],this.userOrdered[e]=this.modalId,this.$forceUpdate()}},computed:{unSelectedIdeas:function(){var t={};for(var e in this.ideas)this.userOrdered.includes(e)||(t[e]=this.ideas[e]);return t},sortedRanking:function(){var t=Object.fromEntries(Object.entries(this.scores).sort(function(t,e){return Object(n.a)(t,2)[1]-Object(n.a)(e,2)[1]}));return console.log(t),t}}},f=r(52),component=Object(f.a)(k,function(){var t=this,e=t._self._c;return e("div",{staticClass:"dark-muted uk-container uk-section",staticStyle:{"min-height":"100vh"}},[e("h1",{staticClass:"uk-text-primary",on:{click:function(e){t.tab="排序成果",t.$forceUpdate()}}},[t._v("FinLab 主題庫")]),t._v(" "),e("ul",{staticClass:"uk-margin-large-top",attrs:{"uk-tab":""}},[e("li",{on:{click:function(e){t.tab="我的主題",t.$forceUpdate()}}},[e("a",[t._v("我的主題")])]),t._v(" "),e("li",{on:{click:function(e){t.tab="創意擇優",t.$forceUpdate()}}},[e("a",[t._v("創意擇優")])]),t._v(" "),"排序成果"===t.tab?e("li",[e("a",[t._v("排序成果")])]):t._e()]),t._v(" "),"我的主題"===t.tab?e("div",[e("div",{staticClass:"uk-margin"},[e("label",{staticClass:"uk-form-label",attrs:{for:"form-stacked-text"}},[t._v("名稱")]),t._v(" "),e("div",{staticClass:"uk-form-controls"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.nameInput,expression:"nameInput"}],staticClass:"uk-input",attrs:{id:"form-stacked-text",type:"text",placeholder:"名稱"},domProps:{value:t.nameInput},on:{input:function(e){e.target.composing||(t.nameInput=e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"uk-margin"},[e("label",{staticClass:"uk-form-label",attrs:{for:"form-stacked-text"}},[t._v("縮圖")]),t._v(" "),e("div",{staticClass:"uk-form-controls"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.thumbnailInput,expression:"thumbnailInput"}],staticClass:"uk-input",attrs:{id:"form-stacked-text",type:"text",placeholder:"文字、網址、base64"},domProps:{value:t.thumbnailInput},on:{input:function(e){e.target.composing||(t.thumbnailInput=e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"uk-margin"},[e("label",{staticClass:"uk-form-label",attrs:{for:"form-stacked-text"}},[t._v("簡介")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.abstractInput,expression:"abstractInput"}],staticClass:"uk-textarea",attrs:{rows:"5",placeholder:"簡介","aria-label":"Textarea"},domProps:{value:t.abstractInput},on:{input:function(e){e.target.composing||(t.abstractInput=e.target.value)}}})]),t._v(" "),e("button",{staticClass:"uk-button uk-button-primary",on:{click:function(e){return t.addIdea()}}},[t._v("新增")]),t._v(" "),e("div",{staticClass:"uk-flex uk-flex-wrap uk-flex-wrap-around uk-margin-large-top"},t._l(t.userIdeas,function(r,n){return e("div",{staticClass:"uk-card shadow uk-background-default uk-margin-large-right uk-margin-large-bottom",staticStyle:{width:"300px"}},[e("div",{staticClass:"uk-text-right",on:{click:function(e){delete t.userIdeas[n],t.$forceUpdate()}}},[e("a",{staticClass:"uk-icon-button",attrs:{"uk-icon":"close"}})]),t._v(" "),e("div",{on:{click:function(e){t.openModal=!0,t.modalContent=r.abstract}}},["https"===r.thumbnail.slice(0,5)||"data:"===r.thumbnail.slice(0,5)?e("img",{staticStyle:{"aspect-ratio":"16 / 9","border-radius":"15px","margin-bottom":"12px","object-fit":"cover"},attrs:{width:"300px",src:r.thumbnail,alt:"image"}}):e("div",{staticClass:"uk-padding-small round-border",staticStyle:{"aspect-ratio":"16 / 9",background:"gray",color:"white",width:"300px"}},[t._v("\n                        "+t._s(r.thumbnail)+"\n                    ")]),t._v(" "),e("div",{staticClass:"uk-padding-small uk-padding-remove-top",staticStyle:{"font-weight":"500",color:"black","font-size":"1.2rem"}},[t._v("\n                        "+t._s(r.name)+"\n                    ")])])])}),0),t._v(" "),e("button",{staticClass:"uk-button uk-button-primary",on:{click:t.upload}},[t._v("上傳")])]):"創意擇優"===t.tab?e("div",{staticClass:"uk-margin-large-top"},[e("hr",{staticClass:"uk-divider"}),t._v(" "),e("div",{staticClass:"uk-flex uk-flex-middle"},[e("h3",{staticStyle:{margin:"0"}},[t._v("已經排序")]),t._v(" "),e("button",{staticClass:"uk-button uk-button-primary uk-margin-large-left",on:{click:t.upload}},[t._v("上傳排序")])]),t._v(" "),e("div",{staticClass:"uk-flex uk-flex-wrap uk-flex-wrap-around uk-margin-large-top"},t._l(t.userOrdered,function(r,i){return e("div",{staticClass:"uk-card shadow uk-background-default uk-margin-large-right uk-margin-large-bottom",staticStyle:{width:"300px"}},[e("div",{staticClass:"uk-text-right",on:{click:function(e){t.userOrdered.splice(i,1),t.$forceUpdate()}}},[e("a",{staticClass:"uk-icon-button",attrs:{"uk-icon":"close"}})]),t._v(" "),e("div",{on:{click:function(e){t.openEditModal=!0,t.modalId=r,t.modalContent=t.ideas[r].abstract}}},["https"===t.ideas[r].thumbnail.slice(0,5)||"data:"===t.ideas[r].thumbnail.slice(0,5)?e("img",{staticStyle:{"aspect-ratio":"16 / 9","border-radius":"15px","margin-bottom":"12px","object-fit":"cover"},attrs:{width:"300px",src:t.ideas[r].thumbnail,alt:"image"}}):e("div",{staticClass:"uk-padding-small round-border",staticStyle:{"aspect-ratio":"16 / 9",background:"gray",color:"white",width:"300px"}},[t._v("\n                        "+t._s(t.ideas[r].thumbnail)+"\n                    ")]),t._v(" "),e("div",{staticClass:"uk-padding-small uk-padding-remove-top",staticStyle:{"font-weight":"500",color:"black","font-size":"1.2rem"}},[t._v("\n                        "+t._s(t.ideas[r].name)+"\n                    ")])])])}),0),t._v(" "),e("hr",{staticClass:"uk-divider"}),t._v(" "),e("div",{staticClass:"uk-flex uk-flex-middle"},[e("h3",{staticStyle:{margin:"0"}},[t._v("尚未排序")]),t._v(" "),e("button",{staticClass:"uk-button uk-button-primary uk-margin-large-left",on:{click:t.download}},[t._v("重新整理")])]),t._v(" "),e("div",{staticClass:"uk-flex uk-flex-wrap uk-flex-wrap-around uk-margin-large-top"},t._l(t.shuffle(Object.keys(t.unSelectedIdeas)),function(r){return e("div",{key:t.shuffle(Object.keys(t.unSelectedIdeas)).join("_"),staticClass:"uk-card shadow uk-background-default uk-margin-large-right uk-margin-large-bottom",staticStyle:{width:"300px"}},[e("div",{on:{click:function(e){t.openEditModal=!0,t.modalId=r,t.modalContent=t.ideas[r].abstract}}},["https"===t.ideas[r].thumbnail.slice(0,5)||"data:"===t.ideas[r].thumbnail.slice(0,5)?e("img",{staticStyle:{"aspect-ratio":"16 / 9","border-radius":"15px","margin-bottom":"12px","object-fit":"cover"},attrs:{width:"300px",src:t.ideas[r].thumbnail,alt:"image"}}):e("div",{staticClass:"uk-padding-small round-border",staticStyle:{"aspect-ratio":"16 / 9",background:"gray",color:"white",width:"300px"}},[t._v("\n                        "+t._s(t.ideas[r].thumbnail)+"\n                    ")]),t._v(" "),e("div",{staticClass:"uk-padding-small uk-padding-remove-top",staticStyle:{"font-weight":"500",color:"black","font-size":"1.2rem"}},[t._v("\n                        "+t._s(t.ideas[r].name)+"\n                    ")])])])}),0)]):e("div",[e("div",{staticClass:"uk-margin-large-top"},t._l(Object.keys(t.sortedRanking),function(r){return e("div",{staticClass:"uk-card shadow uk-background-default uk-margin-large-right uk-margin-large-bottom",staticStyle:{width:"300px"}},[t.ideas[r]?e("div",{on:{click:function(e){t.openEditModal=!0,t.modalId=r,t.modalContent=t.ideas[r].abstract}}},[e("div",{staticClass:"uk-text-large uk-text-bold uk-padding-small"},[t._v(t._s(t.scores[r]))]),t._v(" "),!t.ideas[r]||"https"!==t.ideas[r].thumbnail.slice(0,5)&&"data:"!==t.ideas[r].thumbnail.slice(0,5)?e("div",{staticClass:"uk-padding-small round-border",staticStyle:{"aspect-ratio":"16 / 9",background:"gray",color:"white",width:"300px"}},[t._v("\n                        "+t._s(t.ideas[r].thumbnail)+"\n                    ")]):e("img",{staticStyle:{"aspect-ratio":"16 / 9","border-radius":"15px","margin-bottom":"12px","object-fit":"cover"},attrs:{width:"300px",src:t.ideas[r].thumbnail,alt:"image"}}),t._v(" "),e("div",{staticClass:"uk-padding-small uk-padding-remove-top",staticStyle:{"font-weight":"500",color:"black","font-size":"1.2rem"}},[t._v("\n                        "+t._s(t.ideas[r].name)+"\n                        "),e("span",{staticClass:"uk-text-small"},[t._v("\n                            "+t._s(r)+"\n                        ")])])]):t._e()])}),0)]),t._v(" "),e("Modal",{attrs:{title:"簡介"},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[t._v("\n        "+t._s(t.modalContent)+"\n    ")]),t._v(" "),e("Modal",{attrs:{title:"簡介與設定"},model:{value:t.openEditModal,callback:function(e){t.openEditModal=e},expression:"openEditModal"}},[t.modalId?e("div",["https"===t.ideas[t.modalId].thumbnail.slice(0,5)||"data:"===t.ideas[t.modalId].thumbnail.slice(0,5)?e("img",{staticStyle:{"aspect-ratio":"16 / 9","border-radius":"15px","margin-bottom":"12px","object-fit":"cover"},attrs:{width:"300px",src:t.ideas[t.modalId].thumbnail,alt:"image"}}):e("div",{staticStyle:{"aspect-ratio":"16 / 9",background:"gray",color:"white",width:"300px"}},[t._v("\n                "+t._s(t.ideas[t.modalId].thumbnail)+"\n            ")]),t._v(" "),e("div",{staticStyle:{"font-weight":"500",color:"black","font-size":"1.2rem"}},[t._v("\n                "+t._s(t.ideas[t.modalId].name)+"\n            ")])]):t._e(),t._v("\n        "+t._s(t.modalContent)),e("br"),e("br"),e("br"),e("br"),t._v(" "),t.userOrdered.includes(t.modalId)?e("div",[e("button",{staticClass:"uk-button uk-button-large uk-button-danger",on:{click:function(e){t.moveForward(),t.openEditModal=!1}}},[t._v("向前一名")]),t._v(" "),e("button",{staticClass:"uk-button uk-button-large uk-button-danger",on:{click:function(e){t.moveBackward(),t.openEditModal=!1}}},[t._v("向後一名")])]):e("button",{staticClass:"uk-button uk-button-large uk-button-danger",on:{click:t.addFavorate}},[t._v("新增")])])],1)},[],!1,null,null,null);e.default=component.exports;installComponents(component,{Modal:r(534).default})},534:function(t,e,r){"use strict";r.r(e);var n={props:{confirm:{default:null},title:{default:null},value:{default:!1}},methods:{confirmClose:function(){this.confirm&&this.confirm(),this.hide()},hide:function(){this.$emit("input",!1)}}},o=r(52),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"uk-modal uk-open",style:t.value?"display: initial":""},[e("div",{staticClass:"uk-modal-dialog",staticStyle:{"border-radius":"15px",overflow:"hidden"}},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.hide}}),t._v(" "),t.title?e("div",{staticClass:"uk-modal-header"},[e("h2",{staticClass:"uk-modal-title uk-text-primary"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),e("div",{staticClass:"uk-modal-body"},[t._t("default")],2),t._v(" "),e("div",{staticClass:"uk-modal-footer uk-text-right"},[t.confirm?e("button",{staticClass:"uk-button uk-button-default",attrs:{type:"button"},on:{click:t.hide}},[t._v("取消")]):t._e(),t._v(" "),e("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"button"},on:{click:t.confirmClose}},[t._v("確定")])])])])},[],!1,null,null,null);e.default=component.exports}}]);