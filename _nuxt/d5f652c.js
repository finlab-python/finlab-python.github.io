(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{149:function(t,e,n){"use strict";var o=n(94),r=n.n(o),c=n(220),l=n.n(c),d=n(5),h=n(65),f=n.n(h),m=n(221),_=n.n(m),v=n(226);n(245);d.default.config.devtools=!0,f.a.registerLanguage("python",_.a),window.hljs=f.a,d.default.use(v.a),r.a.use(l.a)},150:function(t,e,n){"use strict";var o=n(8),r=(n(38),n(18),n(68),n(19)),c=n(94),l=n.n(c);n(78);e.a=function(t){var e=t.store;return new Promise((function(t,n){r.a.onAuthStateChanged((function(n){if(e.commit("setUser",n),n){var r=0,c=l.a.modal("#login-ui");c&&c.hide(),function t(){n.getIdTokenResult(!0).then(function(){var c=Object(o.a)(regeneratorRuntime.mark((function o(c){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:"api_token"in c.claims?(e.commit("set_api_token",c.claims.api_token),e.commit("set_role",c.claims.role),e.commit("set_expire_date",c.claims.expire_date),window.dataLayer=window.dataLayer||[],window.dataLayer.push({user_id:n.uid,role:c.claims.role})):(r+=1)<3?setTimeout(t,3e3):alert("找不到 Token 設定，請洽 finlab.company@finlab.tw");case 1:case"end":return o.stop()}}),o)})));return function(t){return c.apply(this,arguments)}}())}()}n?e.dispatch("userInfo/setRealtimeUpdate",{uid:n.uid}):e.dispatch("userInfo/cancelRealtimeUpdate",{}),t()}))}))}},151:function(t,e,n){"use strict";var o=n(5),r=n(7),c=n(9),l=n(222),d=n(152);r.c.add(c.A),r.c.add(c.g),r.c.add(c.d),r.c.add(c.w),r.c.add(c.k),r.c.add(c.c),r.c.add(c.B),r.c.add(c.i),r.c.add(c.h),r.c.add(c.s),r.c.add(c.f),r.c.add(c.m),r.c.add(c.p),r.c.add(c.e),r.c.add(c.j),r.c.add(d.a),r.c.add(c.x),r.c.add(c.q),r.c.add(c.r),r.c.add(c.t),r.c.add(c.o),r.c.add(d.b),r.c.add(c.a),r.c.add(c.b),r.c.add(c.v),r.c.add(c.n),r.c.add(c.u),r.c.add(c.y),r.c.add(c.z),r.c.add(c.l),o.default.component("font-awesome-icon",l.a)},153:function(t,e,n){"use strict";n(48),n(31),n(49),n(33),n(30),n(50),n(51),n(28);var o=n(76),r=n(77),c=n(22);n(18),n(66),n(60),n(155),n(44),n(58);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function h(t,i){var e=Object.assign({},t);for(var n in i)"object"!=Object(c.a)(t[n])||null===t[n]||Array.isArray(t[n])?void 0!==i[n]&&(e[n]=i[n]):e[n]=h(t[n],i[n]);return e}var f={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},m={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};var _=function(){function t(e){if(Object(o.a)(this,t),this._id="tradingview_".concat((1048576*(1+Math.random())|0).toString(16).substring(1)),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");if(this._options=h(m,e),e.preset){var n=f[e.preset];n?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(n.disabled_features):this._options.disabled_features=n.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(n.enabled_features):this._options.enabled_features=n.enabled_features):console.warn("Unknown preset: `"+e.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return Object(r.a)(t,[{key:"onChartReady",value:function(t){this._ready?t.call(this):this._readyHandlers.push(t)}},{key:"headerReady",value:function(){var t=this;return this._innerWindowLoaded.then((function(){return t._innerWindow().headerReady()}))}},{key:"onGrayedObjectClicked",value:function(t){this._innerAPI().onGrayedObjectClicked(t)}},{key:"onShortcut",value:function(t,e){this._innerWindow().createShortcutAction(t,e)}},{key:"subscribe",value:function(t,e){this._innerAPI().subscribe(t,e)}},{key:"unsubscribe",value:function(t,e){this._innerAPI().unsubscribe(t,e)}},{key:"chart",value:function(t){return this._innerAPI().chart(t)}},{key:"getLanguage",value:function(){return this._options.locale}},{key:"setSymbol",value:function(t,e,i){this._innerAPI().changeSymbol(t,e,i)}},{key:"remove",value:function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}},{key:"closePopupsAndDialogs",value:function(){this._innerAPI().closePopupsAndDialogs()}},{key:"selectLineTool",value:function(t){this._innerAPI().selectLineTool(t)}},{key:"selectedLineTool",value:function(){return this._innerAPI().selectedLineTool()}},{key:"save",value:function(t){this._innerAPI().saveChart(t)}},{key:"load",value:function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})}},{key:"getSavedCharts",value:function(t){this._innerAPI().getSavedCharts(t)}},{key:"loadChartFromServer",value:function(t){this._innerAPI().loadChartFromServer(t)}},{key:"saveChartToServer",value:function(t,e,i){this._innerAPI().saveChartToServer(t,e,i)}},{key:"removeChartFromServer",value:function(t,e){this._innerAPI().removeChartFromServer(t,e)}},{key:"onContextMenu",value:function(t){this._innerAPI().onContextMenu(t)}},{key:"createButton",value:function(t){return this._innerWindow().createButton(t)}},{key:"showNoticeDialog",value:function(t){this._innerAPI().showNoticeDialog(t)}},{key:"showConfirmDialog",value:function(t){this._innerAPI().showConfirmDialog(t)}},{key:"showLoadChartDialog",value:function(){this._innerAPI().showLoadChartDialog()}},{key:"showSaveAsChartDialog",value:function(){this._innerAPI().showSaveAsChartDialog()}},{key:"symbolInterval",value:function(){return this._innerAPI().getSymbolInterval()}},{key:"mainSeriesPriceFormatter",value:function(){return this._innerAPI().mainSeriesPriceFormatter()}},{key:"getIntervals",value:function(){return this._innerAPI().getIntervals()}},{key:"getStudiesList",value:function(){return this._innerAPI().getStudiesList()}},{key:"addCustomCSSFile",value:function(t){this._innerWindow().addCustomCSSFile(t)}},{key:"applyOverrides",value:function(t){this._options=h(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)}},{key:"applyStudiesOverrides",value:function(t){this._innerWindow().applyStudiesOverrides(t)}},{key:"watchList",value:function(){return this._innerAPI().watchlist()}},{key:"activeChart",value:function(){return this._innerAPI().activeChart()}},{key:"chartsCount",value:function(){return this._innerAPI().chartsCount()}},{key:"layout",value:function(){return this._innerAPI().layout()}},{key:"setLayout",value:function(t){this._innerAPI().setLayout(t)}},{key:"layoutName",value:function(){return this._innerAPI().layoutName()}},{key:"changeTheme",value:function(t,e){this._innerWindow().changeTheme(t,e)}},{key:"getTheme",value:function(){return this._innerWindow().getTheme()}},{key:"takeScreenshot",value:function(){this._innerAPI().takeScreenshot()}},{key:"lockAllDrawingTools",value:function(){return this._innerAPI().lockAllDrawingTools()}},{key:"hideAllDrawingTools",value:function(){return this._innerAPI().hideAllDrawingTools()}},{key:"drawOnAllCharts",value:function(t){this._innerAPI().drawOnAllCharts(t)}},{key:"magnetEnabled",value:function(){return this._innerAPI().magnetEnabled()}},{key:"magnetMode",value:function(){return this._innerAPI().magnetMode()}},{key:"undoRedoState",value:function(){return this._innerAPI().undoRedoState()}},{key:"setIntervalLinkingEnabled",value:function(t){this._innerAPI().setIntervalLinkingEnabled(t)}},{key:"setTimeFrame",value:function(t){this._innerAPI().setTimeFrame(t)}},{key:"symbolSync",value:function(){return this._innerAPI().symbolSync()}},{key:"intervalSync",value:function(){return this._innerAPI().intervalSync()}},{key:"crosshairSync",value:function(){return this._innerAPI().crosshairSync()}},{key:"timeSync",value:function(){return this._innerAPI().timeSync()}},{key:"getAllFeatures",value:function(){return this._innerWindow().getAllFeatures()}},{key:"clearUndoHistory",value:function(){return this._innerAPI().clearUndoHistory()}},{key:"undo",value:function(){return this._innerAPI().undo()}},{key:"redo",value:function(){return this._innerAPI().redo()}},{key:"startFullscreen",value:function(){this._innerAPI().startFullscreen()}},{key:"exitFullscreen",value:function(){this._innerAPI().exitFullscreen()}},{key:"takeClientScreenshot",value:function(t){return this._innerAPI().takeClientScreenshot(t)}},{key:"_innerAPI",value:function(){return this._innerWindow().tradingViewApi}},{key:"_innerWindow",value:function(){return this._iFrame.contentWindow}},{key:"_autoResizeChart",value:function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")}},{key:"_create",value:function(){var t=this,e=this._render();this._options.container_id&&console.warn("`container_id` is now deprecated. Please use `container` instead to either still pass a string or an `HTMLElement`.");var n=this._options.container_id||this._options.container,i="string"==typeof n?document.getElementById(n):n;if(null===i)throw new Error("There is no such element - #".concat(this._options.container));i.innerHTML=e,this._iFrame=i.querySelector("#".concat(this._id));var o=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(o.style.width="100%",this._options.fullscreen||(o.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise((function(t){o.addEventListener("load",(function e(){o.removeEventListener("load",e,!1),t()}),!1)})),this._innerWindowLoaded.then((function(){t._innerWindow().widgetReady((function(){t._ready=!0;var e,n=l(t._readyHandlers);try{for(n.s();!(e=n.n()).done;){var o=e.value;try{o.call(t)}catch(t){console.error(t)}}}catch(t){n.e(t)}finally{n.f()}t._innerWindow().initializationFinished()}))}))}},{key:"_render",value:function(){var t=window;if(t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode},this._options.saved_data)t[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(t[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");var e=(this._options.library_path||"")+"".concat(encodeURIComponent(this._options.locale),"-tv-chart.64d1f18e.html#symbol=")+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+e+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'}}]),t}();window.TradingView=window.TradingView||{},window.TradingView.version=function(){return"CL v20.035 (internal id 64d1f18e @ 2022-01-25T15:08:34.498Z)"};var v=_;e.a=function(t,e){e("TVChart",{Widget:v})}},163:function(t,e,n){"use strict";n.r(e);var o=n(19),r={name:"Login",mounted:function(){var t=n(277),e=t.auth.AuthUI.getInstance()||new t.auth.AuthUI(o.a),r={credentialHelper:t.auth.CredentialHelper.GOOGLE_YOLO,signInOptions:[{provider:o.b.Google,clientId:"748308483506-f8sffts5tn8cnogd9nk73u5427j9rev0.apps.googleusercontent.com"}],signInFlow:"redirect",tosUrl:"/terms",privacyPolicyUrl:"/terms",callbacks:{signInSuccessWithAuthResult:this.signInResult}};if(this.$store.state.user);else try{e.start("#firebaseui-auth-container",r)}catch(t){console.log("ui render error",t)}},methods:{signInResult:function(){return this.openAppPage(),!1},openAppPage:function(){}}},c=(n(284),n(40)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"firebaseui-auth-container"}})])}],!1,null,null,null);e.default=component.exports},164:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return m}));var o=n(8),r=(n(38),n(44),n(158),n(18),n(66),n(28),n(19)),c=n(4);function l(t){if(0===t.length)return[!1,"請輸入策略名稱。"];if(null!==t.match(/[\u3400-\u9FBF]/)&&null===t[0].match(/[\u3400-\u9FBF]/))return[!1,"策略如包含中文，必須以「中文開頭」，否則可以用全英文命名。"];if(-1!==t.indexOf("."))return[!1,"策略不可包含英文句號「.」。"];if(-1!==t.indexOf("/")||-1!==t.indexOf("\\"))return[!1,"策略不可包含斜線。"];var s="()[]+-|!@#$~%^={}&*";for(var e in s)if(-1!==t.indexOf(s[e]))return[!1,"策略名稱不可包含"+s[e]];return[!0]}function d(t,e){var i=1,n=t+i.toString();if(e.info&&e.info.strategies)for(;n in e.info.strategies;)n=t+(i+=1).toString();return n}function h(t,e){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var o,l,d,h,f,m,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.c.collection("users").doc(e),l=o.collection("strategies").doc(n),d=l.collection("codes").doc("code"),h=l.collection("positions").doc("position"),f=l.collection("articles").doc("article"),(m={})["strategies."+n]=c.a.firestore.FieldValue.delete(),(_=r.c.batch()).update(o,m),_.delete(l),_.delete(d),_.delete(h),_.delete(f),t.prev=14,t.next=17,_.commit();case 17:t.next=23;break;case 19:throw t.prev=19,t.t0=t.catch(14),alert("cannot remove strategy!",t.t0),t.t0;case 23:case"end":return t.stop()}}),t,null,[[14,19]])})))).apply(this,arguments)}function m(t,e,n,o){return _.apply(this,arguments)}function _(){return(_=Object(o.a)(regeneratorRuntime.mark((function t(e,n,o,c){var l,d,h,f,m,_,v,y,k,w,I,C,x,S,O,A,P,R;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=r.c.collection("users").doc(e),d=r.c.collection("users").doc(o),h=l.collection("strategies").doc(n),f=d.collection("strategies").doc(c),t.next=6,h.get();case 6:m=t.sent,_=["code","position","article"],v={},t.t0=regeneratorRuntime.keys(_);case 10:if((t.t1=t.t0()).done){t.next=21;break}return y=t.t1.value,y=_[y],console.log("getting",y),k=h.collection(y+"s").doc(y),t.next=17,k.get();case 17:(w=t.sent).exists&&(console.log("exists!"),v[y]=w.data()),t.next=10;break;case 21:return I=null,t.prev=22,t.next=25,l.get();case 25:I=t.sent,t.next=31;break;case 28:throw t.prev=28,t.t2=t.catch(22),"使用者開啟策略權限，但沒有開啟他的清單權限，可以請他開啟才能複製！";case 31:return C=I.data(),t.next=34,d.get();case 34:return x=t.sent,S=x.data()||{},O={},"strategies"in S&&(O=S.strategies),A={strategies:O},n in C.strategies&&(A.strategies[c]=C.strategies[n]),t.next=42,d.set(A,{merge:!0});case 42:if(!m.exists){t.next=46;break}return t.next=45,f.set(m.data());case 45:console.log("upload",f);case 46:t.t3=regeneratorRuntime.keys(_);case 47:if((t.t4=t.t3()).done){t.next=57;break}if(P=t.t4.value,P=_[P],R=f.collection(P+"s").doc(P),!(P in v)){t.next=55;break}return t.next=54,R.set(v[P]);case 54:console.log("upload",P,R,v[P]);case 55:t.next=47;break;case 57:console.log("update strategy name successfully!");case 58:case"end":return t.stop()}}),t,null,[[22,28]])})))).apply(this,arguments)}},19:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return h}));var o=n(8),r=(n(38),n(4));n(194),n(317),n(316);r.a.apps.length||r.a.initializeApp({apiKey:"AIzaSyB9Ogv6Vbwfy6_I0aLEfcpsPhqhlc4FSTw",authDomain:"auth.finlab.tw",projectId:"fdata-299302",storageBucket:"fdata-299302.appspot.com",messagingSenderId:"748308483506",appId:"1:748308483506:web:7c78dd82b422cd4ea5a8ab"});var c={Google:r.a.auth.GoogleAuthProvider.PROVIDER_ID},l=r.a.auth(),d=r.a.firestore(),h=(r.a.storage(),function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(e,n,o){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=d.collection(e).doc(n),c=null,!o){t.next=6;break}return t.next=5,r.get({source:"cache"});case 5:c=t.sent;case 6:if(null!==c&&c.exists){t.next=10;break}return t.next=9,r.get();case 9:c=t.sent;case 10:if(c.exists){t.next=12;break}return t.abrupt("return",null);case 12:return t.abrupt("return",c.data());case 13:case"end":return t.stop()}}),t)})));return function(e,n,o){return t.apply(this,arguments)}}())},196:function(t,e,n){},224:function(t,e,n){"use strict";n(46),n(30),n(47),n(62),n(42),n(63);var o=n(8),r=n(25),c=(n(38),n(60),n(55)),l=n(163),d=n(164);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={components:{FirebaseUi:l.default},data:function(){return{isinIframe:this.inIframe(),coupon:"",loadingCouponResult:!1,cancelPaymentResponse:null,cancelPaymentSucess:!1,menu:[{name:"策略總覽",icon:"category"},{name:"FinLab 策略",icon:"flask",link:"/strategies?tab=FinLab台股"},{name:"我的策略",icon:"chart-line",link:"/strategies?tab=我的策略"},{name:"創建策略",icon:"plus-circle",link:"method",func:"createStrategy"},{name:"資料圖表",icon:"category"},{name:"個股資訊",icon:"search-dollar",link:"/stock/?stock_id=1101"},{name:"產業資訊",icon:"shapes",link:"/industry"},{name:"大盤市況",icon:"industry",link:"/tw_market"},{name:"教學文件",icon:"category"},{name:"Python 影音教學",icon:"chalkboard-teacher",link:"/courses"},{name:"程式碼手冊",icon:"book",link:"https://doc.finlab.tw/getting-start/"},{name:"資料庫目錄",icon:"database",link:"/database"},{name:"社群",icon:"category"},{name:"Discord 聊天室",icon:["fab","discord"],link:"https://discord.gg/tAr4ysPqvR"},{name:"粉絲團",icon:["fab","facebook"],link:"https://www.facebook.com/finlab.python"}],mobile:window.innerWidth<600,menuSmall:window.innerWidth<600?"0px":"64px",menuLarge:window.innerWidth<600?"100%":"200px"}},methods:f(f({createStrategy:function(){if(this.$store.state.userInfo&&this.$store.state.user){var t=Object(d.d)("未命名",this.$store.state.userInfo);"/notebook/"!==this.$route.path?this.$router.push("/notebook/?uid=".concat(this.$store.state.user.uid,"&sid=").concat(t)):window.open("/notebook/?uid=".concat(this.$store.state.user.uid,"&sid=").concat(t),"_blank")}else alert("請登入來創建策略")}},Object(c.b)({signOut:"signOut",updateUserClaims:"updateUserClaims",updateUserInfo:"userInfo/setRealtimeUpdate",cancelUserInfo:"userInfo/cancelRealtimeUpdate"})),{},{signOutAndRedirect:function(){this.signOut(),this.$router.push({path:"/"}),this.cancelUserInfo()},inIframe:function(){try{return window.self!==window.top}catch(t){return!1}},useCoupon:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingCouponResult=!0,n=t.coupon,t.coupon="",e.prev=3,e.next=6,t.$axios.post("https://asia-northeast1-fdata-299302.cloudfunctions.net/auth_use_coupon",{uid:t.$store.state.user.uid,api_token:t.$store.state.api_token,coupon:n});case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(3),alert("無法使用特惠碼："+e.t0.response.data),t.loadingCouponResult=!1,e.abrupt("return");case 13:t.$store.state.user&&t.updateUserClaims(),t.loadingCouponResult=!1;case 15:case"end":return e.stop()}}),e,null,[[3,8]])})))()},cancelPayment:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,t.$axios.post("http://0.0.0.0:8080/cancel_order",{uid:t.$store.state.user.uid,TradeNo:t.creditCardPayent.MerchantTradeNo});case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return");case 11:t.cancelPaymentSucess=!0,t.cancelPaymentResponse=n.data;case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))()},btnClickAction:function(){"0px"===this.menuSmall&&this.$store.commit("setSidebar",!1)}}),mounted:function(){var t=!(window.innerWidth<600||this.isinIframe);this.$store.commit("setSidebar",t),this.isinIframe&&(this.menuSmall="0px");var e=window.pageYOffset;window&&(window.onscroll=function(){var t=window.pageYOffset;document.getElementById("navbar").style.top=e>t||t<20?"0":"-80px",e=t}),this.$store.state.user?(this.updateUserInfo(),this.updateUserClaims()):this.cancelUserInfo()},computed:f(f({},Object(c.c)({sidebarOpen:function(t){return t.sidebarOpen}})),{},{creditCardPayent:function(){return null===this.$store.state.userInfo.info?null:this.$store.state.userInfo.info.payment},contentPadding:function(){return this.sidebarOpen&&("0px"!==this.menuSmall||this.isinIframe)?this.menuLarge:this.menuSmall},memoryUsage:function(){if(!this.$store.state.userInfo||!this.$store.state.userInfo.info||!this.$store.state.userInfo.info.last_date_data_quota)return 0;var t=this.$store.state.userInfo.info.last_date_data_quota.size;return Math.round(10*t)/10}})},_=(n(285),n(40)),component=Object(_.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.isinIframe?t._e():o("nav",{staticClass:"uk-navbar-container uk-navbar-transparent",attrs:{id:"navbar","uk-navbar":""}},[o("div",{staticClass:"uk-navbar-left",staticStyle:{"margin-left":"24px"}},[o("ul",{staticClass:"uk-navbar-nav"},[o("li",{staticClass:"uk-navbar-item",style:{width:t.sidebarOpen?"100px":"100%"},on:{click:function(e){return e.preventDefault(),t.$store.commit("setSidebar",!t.sidebarOpen)}}},[o("div",{staticStyle:{width:"30px"}},[o("font-awesome-icon",{staticClass:"icon",style:{color:"#383b9a"},attrs:{icon:"bars",size:"2x"}})],1)]),t._v(" "),t.mobile||t.isinIframe?t._e():o("li",{staticClass:"uk-navbar-item",staticStyle:{cursor:"pointer","z-index":"2"}},[o("div",{staticClass:"uk-text-center",staticStyle:{"font-size":"1.5rem",width:"45px"},on:{click:function(e){return e.preventDefault(),t.$store.commit("setSidebar",!t.sidebarOpen)}}},[t.sidebarOpen?o("div",{staticClass:"menuToggle",staticStyle:{"border-top-left-radius":"0","border-bottom-left-radius":"0","padding-left":"36px"}},[o("font-awesome-icon",{attrs:{icon:"angle-left"}})],1):o("div",{staticClass:"menuToggle",staticStyle:{"border-top-left-radius":"0","border-bottom-left-radius":"0","margin-left":"-24px"}},[o("font-awesome-icon",{attrs:{icon:"angle-right"}})],1)])])])]),t._v(" "),o("div",{staticClass:"uk-navbar-right uk-margin-large-right"},[o("ul",{staticClass:"uk-navbar-nav"},[o("li",[o("a",[o("nuxt-link",{attrs:{to:"/pricing"}},[t._v(" 價格 ")])],1)]),t._v(" "),t._m(0),t._v(" "),o("li",[o("nuxt-link",{attrs:{to:"/about"}},[o("a",[t._v("關於")])])],1),t._v(" "),t._m(1),t._v(" "),t.$store.state.user?o("li",[o("nuxt-link",{attrs:{to:"/member_info"}},[o("a",[o("img",{staticClass:"uk-border-circle",attrs:{width:"40",height:"40",src:t.$store.state.user.photoURL}})])])],1):o("li",[o("a",{staticClass:"uk-button uk-button-small uk-button-primary",staticStyle:{width:"60px",color:"white"},attrs:{type:"button","uk-toggle":"target: #login-ui"}},[t._v("\n            登入\n          ")])])])])]),t._v(" "),o("div",[o("div",{staticClass:"sidebar shadow uk-light",style:{width:t.sidebarOpen?t.menuLarge:t.menuSmall,"overflow-y":t.sidebarOpen?"auto":t.mobile?"hidden":""}},[o("div",{staticStyle:{width:"100%","padding-top":"10px"}},[o("NuxtLink",{attrs:{to:"/"}},[o("div",[o("div",{on:{click:function(e){return t.$store.commit("setSidebar",!t.sidebarOpen)}}},[t.sidebarOpen?o("img",{staticStyle:{display:"block",height:"45px","margin-left":"15px"},attrs:{src:n(244),height:"45px"}}):o("img",{staticStyle:{display:"block",height:"45px","margin-left":"15px"},attrs:{src:n(275),height:"45px"}})]),t._v(" "),t.mobile?o("div",{staticStyle:{cursor:"pointer","z-index":"2",margin:"10px"}},[o("div",{staticClass:"uk-text-center",staticStyle:{"font-size":"1.5rem",width:"45px"},on:{click:function(e){return e.preventDefault(),t.$store.commit("setSidebar",!t.sidebarOpen)}}},[t.sidebarOpen?o("div",{staticClass:"menuToggle"},[o("font-awesome-icon",{attrs:{icon:"angle-left"}})],1):o("div",{staticClass:"menuToggle"},[o("font-awesome-icon",{attrs:{icon:"angle-right"}})],1)])]):t._e()])])],1),t._v(" "),o("div",{staticClass:"uk-margin-top"},t._l(t.menu,(function(e){return o("div",{key:e.name},["category"===e.icon?o("div",[t.sidebarOpen?o("div",{staticClass:"menu-divider"},[t._v(t._s(e.name))]):t._e()]):"method"===e.link?o("a",{on:{click:t.createStrategy}},[o("div",{staticClass:"menu-icon",style:t.sidebarOpen?"":"text-align:center",attrs:{"uk-tooltip":!t.sidebarOpen&&"title: "+e.name+"; pos: right"}},[o("span",{staticClass:"uk-text-middle",staticStyle:{"font-size":"1.1rem",width:"20px",display:"inline-block"}},[o("font-awesome-icon",{attrs:{icon:e.icon}})],1),t._v(" "),t.sidebarOpen?o("span",{staticClass:"menu-text uk-text-middle"},[t._v(t._s(e.name))]):t._e()])]):"https"!==e.link.substring(0,5)?o("NuxtLink",{attrs:{to:e.link},nativeOn:{click:function(e){return t.btnClickAction.apply(null,arguments)}}},[o("div",{staticClass:"menu-icon",style:!t.sidebarOpen&&"text-align:center",attrs:{"uk-tooltip":!t.sidebarOpen&&"title: "+e.name+"; pos: right;duration:0"}},[o("span",{staticClass:"uk-text-middle",staticStyle:{"font-size":"1.1rem",width:"20px",display:"inline-block"}},[o("font-awesome-icon",{attrs:{icon:e.icon}})],1),t._v(" "),t.sidebarOpen?o("span",{staticClass:"menu-text uk-text-middle"},[t._v(t._s(e.name))]):t._e()])]):o("a",{attrs:{href:e.link,target:"_blank"},on:{click:t.btnClickAction}},[o("div",{staticClass:"menu-icon",style:t.sidebarOpen?"":"text-align:center",attrs:{"uk-tooltip":!t.sidebarOpen&&"title: "+e.name+"; pos: right;duration:0"}},[o("span",{staticClass:"uk-text-middle",staticStyle:{"font-size":"1.1rem",width:"20px",display:"inline-block"}},[o("font-awesome-icon",{attrs:{icon:e.icon}})],1),t._v(" "),t.sidebarOpen?o("span",{staticClass:"menu-text uk-text-middle"},[t._v(t._s(e.name))]):t._e()])])],1)})),0),t._v(" "),!t.isinIframe&&t.sidebarOpen?o("div",[o("div",{staticClass:"uk-padding-small boundary",staticStyle:{"font-size":"11px"}},[t._v("\n          COPYRIGHT © 2022 FinLab. ALL RIGHTS RESERVED.\n          "),o("button",{staticClass:"uk-button uk-button-small uk-button-default",attrs:{type:"button"}},[t._v("\n            使用聲明\n          ")]),t._v(" "),o("div",{staticStyle:{"z-index":"3000"},attrs:{"uk-dropdown":"boundary: .boundary"}},[t._v("\n            本網站內容係用戶自行操作程式邏輯，統計公開一般性財經數據之結果，所有回測皆為歷史資料模擬教學，不代表未來實際績效，"),o("br"),t._v("純屬參考性質，請勿視為買賣金融商品或其他投資之建議或邀約。\n            〈"),o("nuxt-link",{attrs:{to:"/terms"}},[o("span",{staticStyle:{color:"black"}},[t._v("FinLab 網際網路課程購買暨服務契約")])]),t._v("〉\n          ")],1),t._v(" "),o("br"),t._v("芬嚮資訊有限公司"),o("br"),t._v("統一編號：54931115"),o("br"),t._v("客服：週一到五9:00～17:00\n        ")])]):t._e()]),t._v(" "),o("div",{staticClass:"dark-muted",style:{"padding-left":t.contentPadding,"padding-top":t.isinIframe?"0":"48px"}},[o("div",[o("Nuxt")],1)])]),t._v(" "),o("div",{attrs:{id:"login-ui","uk-modal":""}},[o("div",{staticClass:"uk-modal-dialog uk-modal-body",staticStyle:{"border-radius":"15px"}},[o("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),t._v(" "),o("h2",{staticClass:"uk-modal-title",staticStyle:{"font-size":"24px","font-weight":"300"}},[t._v("\n        "+t._s(t.$store.state.user?"已":"")+"登入\n      ")]),t._v(" "),o("p",[o("firebase-ui")],1)])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("a",{attrs:{href:"https://www.finlab.tw/",target:"_blank"}},[t._v("部落格")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"uk-visible@s"},[e("a",{staticClass:"uk-icon-link",attrs:{href:"mailto:finlab.company@finlab.tw","uk-icon":"mail"}})])}],!1,null,"55fb3096",null);e.a=component.exports},225:function(t,e,n){"use strict";var o=n(40),component=Object(o.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("nuxt")}),[],!1,null,null,null);e.a=component.exports},244:function(t,e,n){t.exports=n.p+"img/logo3.8a9f1c9.svg"},246:function(t,e,n){n(247),t.exports=n(248)},273:function(t,e,n){},275:function(t,e,n){t.exports=n.p+"img/logo5.0aacd58.svg"},285:function(t,e,n){"use strict";n(196)},286:function(t,e,n){"use strict";n.r(e),n.d(e,"strict",(function(){return c})),n.d(e,"state",(function(){return l})),n.d(e,"mutations",(function(){return d})),n.d(e,"actions",(function(){return h}));var o=n(8),r=(n(38),n(19)),c=!1,l=function(){return{user:null,api_token:null,role:"",expire_date:"",sidebarOpen:!1}},d={setUser:function(t,e){t.user=e},set_api_token:function(t,e){t.api_token=e},set_role:function(t,e){t.role=e},set_expire_date:function(t,e){t.expire_date=e},setSidebar:function(t,e){t.sidebarOpen=e}},h={signOut:function(t){var e=t.commit;r.a.signOut().then((function(){e("setUser",null)})).catch((function(t){return alert(t)}))},updateUserClaims:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,r.a.currentUser.getIdTokenResult(!0);case 4:o=e.sent,n("set_api_token",o.claims.api_token),n("set_role",o.claims.role),n("set_expire_date",o.claims.expire_date),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),alert("cannot fetch user custom claims"),console.log(e.t0),e.abrupt("return");case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))()}}},287:function(t,e,n){"use strict";n.r(e),n.d(e,"state",(function(){return c})),n.d(e,"mutations",(function(){return l})),n.d(e,"actions",(function(){return d}));var o=n(19),r=null,c=function(){return{info:null}},l={set:function(t,e){t.info=null!==e?Object.assign({},t.info,e):null}},d={setRealTimeUpdate:function(t,e){if(t.rootState.user){r&&r(),t.commit("set",null);var n=o.c.collection("global").doc("sim");r=n.onSnapshot((function(e){var n=e.data();t.commit("set",n)}),(function(e){alert("cannot find "+sid+":"+e),t.commit("set",null)}))}},cancelRealtimeUpdate:function(t){r&&r(),t.commit("set",null)}}},288:function(t,e,n){"use strict";n.r(e),n.d(e,"state",(function(){return c})),n.d(e,"mutations",(function(){return l})),n.d(e,"actions",(function(){return d}));var o=n(19),r=null,c=function(){return{info:null,isListening:null,isUploading:!1}},l={set:function(t,e){e?(t.info=Object.assign({},t.info,e),t.isUploading=!1):t.info=e},setListening:function(t,e){t.isListening=e},setUploading:function(t,e){t.isUploading=e}},d={setRealTimeUpdate:function(t,e){var n=e.uid,l=e.sid;if(c.isListening!==n+l){r&&r(),t.commit("set",null),t.commit("setListening",n+l);var d=o.c.collection("users").doc(n).collection("strategies").doc(l);r=d.onSnapshot((function(e){var n=e.data();t.commit("set",n),t.commit("setUploading",!1)}),(function(e){alert("cannot find "+l+":"+e),t.commit("set",null),t.commit("setListening",null)})),t.commit("setListening",n+l)}},cancelRealtimeUpdate:function(t){r&&r(),t.commit("set",null),t.commit("setListening",null)}}},289:function(t,e,n){"use strict";n.r(e),n.d(e,"state",(function(){return c})),n.d(e,"mutations",(function(){return l})),n.d(e,"actions",(function(){return d}));var o=n(19),r=null,c=function(){return{info:null,isListening:!1}},l={set:function(t,e){t.info=null===e?null:Object.assign({},t.info,e)},setListening:function(t,e){t.isListening=e}},d={setRealtimeUpdate:function(t){if(!c.isListening&&t.rootState.user){var e=t.rootState.user.uid,n=o.c.collection("users").doc(e);r=n.onSnapshot((function(e){var n=e.data();t.commit("set",n),t.commit("setListening",!0)}),(function(e){t.commit("set",null),t.commit("setListening",!1)}))}},cancelRealtimeUpdate:function(t){console.log("cancel realtime update user info"),t.commit("set",null),t.commit("setListening",!1),r&&r()}}}},[[246,102,18,103]]]);