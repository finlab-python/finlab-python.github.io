(window.webpackJsonp=window.webpackJsonp||[]).push([[97,15,17,38,43,55,59,62,63,68,110],{1018:function(t,e,n){"use strict";n.r(e);n(23),n(38);var r=n(12),o=(n(43),n(60),n(6)),l=n(512),c=(n(531),n(26)),d=Object(o.b)({components:{cumulativeReturnChart:l.default},data:function(){return{strategyA:null,strategyB:null,values:[[0,0,0]],index:["2020-01-01","2021-01-02","2022-01-03"],names:["機器學習有用嗎","麒麟"],benchmark:[0,0,0],show_left:!0,show_right:!0}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark(function e(){var n,r,o,l,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t.downloadStrategy("TJN4FDuqrwU8DML7DAjUYFIMutp2","機器學習有用嗎");case 1:return t.strategyA=e.sent,e.next=2,t.downloadStrategy("TJN4FDuqrwU8DML7DAjUYFIMutp2","麒麟");case 2:t.strategyB=e.sent,n=t.getTimeIndex(t.strategyA),r=t.getTimeIndex(t.strategyB),o=t.strategyA.returns.value.slice(n),l=t.strategyA.returns.time.slice(n),c=t.strategyB.returns.value.slice(r),d=t.strategyB.returns.time.slice(r),t.values=[o,c],t.index=l,t.benchmark=t.strategyA.benchmark.slice(n),console.log(o,l,c,d);case 3:case"end":return e.stop()}},e)}))()},methods:{downloadStrategy:function(t,e){return Object(r.a)(regeneratorRuntime.mark(function n(){var r,o,l,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="users/".concat(t,"/strategies/"),o=e,l=c.c.collection(r).doc(o),n.next=1,l.get();case 1:return d=n.sent,console.log(d.data()),n.abrupt("return",d.data());case 2:case"end":return n.stop()}},n)}))()},getTimeIndex:function(t){for(var i in t.returns.time)if(t.returns.time[i]>="2023-05-22")return console.log("find t",t.returns.time[i],i),i}}}),h=n(52),component=Object(h.a)(d,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t._m(0),t._v(" "),e("cumulativeReturnChart",{attrs:{values:t.values,valueName:t.names,index:t.index,colors:["#05b39f","#de7118"],benchmark:t.benchmark}}),t._v(" "),e("div",{staticClass:"uk-container uk-margin-large-top uk-text-center"},[e("div",{staticClass:"uk-hidden@m uk-margin-large-bottom"},[e("ul",{staticClass:"uk-child-width-expand",attrs:{"uk-tab":""}},[e("li",{staticClass:"uk-active",on:{click:function(e){t.show_left=!0,t.show_right=!1}}},[e("a",[t._v(t._s(t.names[0]))])]),t._v(" "),e("li",{on:{click:function(e){t.show_left=!1,t.show_right=!0}}},[e("a",[t._v(t._s(t.names[1]))])])])]),t._v(" "),e("div",{staticClass:"uk-grid uk-margin-large-bottom"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show_left,expression:"show_left"}],staticClass:"uk-width-1-2@m uk-width-1-1 uk-margin-large-bottom"},[e("h2",{staticStyle:{color:"#05b39f"}},[t._v(t._s(t.names[0]))]),t._v(" "),e("p",{staticStyle:{color:"#078275"}},[t._v("AI策略，探勘 300 種技術指標，每日換股")]),t._v(" "),t.strategyA?e("div",{staticClass:"uk-card uk-card-default uk-padding-small shadow"},[t.strategyA?e("PositionPanel",{attrs:{uid:"TJN4FDuqrwU8DML7DAjUYFIMutp2",strategy_id:t.names[0],position_id:t.strategyA.position_id}}):t._e()],1):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.show_right,expression:"show_right"}],staticClass:"uk-width-1-2@m uk-width-1-1"},[e("h2",{staticStyle:{color:"#de7118"}},[t._v(t._s(t.names[1]))]),t._v(" "),e("p",{staticStyle:{color:"#b35305"}},[t._v("經典策略，長期有效因子融合而成，每週換股")]),t._v(" "),t.strategyB?e("div",{staticClass:"uk-card uk-card-default uk-padding-small shadow"},[t.strategyB?e("PositionPanel",{attrs:{uid:"TJN4FDuqrwU8DML7DAjUYFIMutp2",strategy_id:t.names[1],position_id:t.strategyB.position_id}}):t._e()],1):t._e()])])])],1)},[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"uk-container uk-text-center"},[e("h1",{staticClass:"uk-margin-large-top uk-text-primary"},[t._v("績效大比拼")]),t._v(" "),e("h2",{staticClass:"uk-text-primary",staticStyle:{"margin-top":"0"}},[e("span",{staticStyle:{color:"#05b39f"}},[t._v("AI 策略")]),t._v("。"),e("span",{staticStyle:{color:"#de7118"}},[t._v("經典策略")])]),t._v(" "),e("p",{staticClass:"uk-margin-large-top"},[t._v("\n        傳統策略通常是基於人類的經驗、直覺和分析能力，而AI策略則基於機器學習和大數據分析。\n      ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{PositionPanel:n(531).default})},429:function(t,e,n){"use strict";var r=n(4),o=n(8),l=n(55),c=n(50),d=n(76),h=n(274),f=n(24),m=n(9),v=n(275),y=n(191),_=n(434),x=n(435),k=n(121),S=n(436),w=[],C=o(w.sort),O=o(w.push),I=m(function(){w.sort(void 0)}),A=m(function(){w.sort(null)}),D=y("sort"),M=!m(function(){if(k)return k<70;if(!(_&&_>3)){if(x)return!0;if(S)return S<603;var code,t,e,n,r="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(n=0;n<47;n++)w.push({k:t+n,v:e})}for(w.sort(function(a,b){return b.v-a.v}),n=0;n<w.length;n++)t=w[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}});r({target:"Array",proto:!0,forced:I||!A||!D||!M},{sort:function(t){void 0!==t&&l(t);var e=c(this);if(M)return void 0===t?C(e):C(e,t);var n,r,o=[],m=d(e);for(r=0;r<m;r++)r in e&&O(o,e[r]);for(v(o,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:f(e)>f(n)?1:-1}}(t)),n=d(o),r=0;r<n;)e[r]=o[r++];for(;r<m;)h(e,r++);return e}})},434:function(t,e,n){"use strict";var r=n(85).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},435:function(t,e,n){"use strict";var r=n(85);t.exports=/MSIE|Trident/.test(r)},436:function(t,e,n){"use strict";var r=n(85).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},443:function(t,e,n){"use strict";var r=n(4),o=n(461),l=n(149);r({target:"Array",proto:!0},{fill:o}),l("fill")},451:function(t,e,n){"use strict";var r=n(424),o=n(431),l=n(457),c=n(573),d=n(432),h=n(430),f=n(452),m=n(423),v=n(428),y=n(438),_=function(t){function e(data,e,n,r){var o=t.call(this)||this;return o.updateData(data,e,n,r),o}return Object(r.a)(e,t),e.prototype._createSymbol=function(t,data,e,n,r){this.removeAll();var l=Object(o.a)(t,-1,-1,2,2,null,r);l.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),l.drift=x,this._symbolType=t,this.add(l)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Object(h.r)(this.childAt(0))},e.prototype.downplay=function(){Object(h.C)(this.childAt(0))},e.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},e.prototype.setDraggable=function(t,e){var n=this.childAt(0);n.draggable=t,n.cursor=!e&&t?"move":n.cursor},e.prototype.updateData=function(data,t,n,r){this.silent=!1;var o=data.getItemVisual(t,"symbol")||"circle",c=data.hostModel,d=e.getSymbolSize(data,t),h=o!==this._symbolType,f=r&&r.disableAnimation;if(h){var m=data.getItemVisual(t,"symbolKeepAspect");this._createSymbol(o,data,t,d,m)}else{(y=this.childAt(0)).silent=!1;var v={scaleX:d[0]/2,scaleY:d[1]/2};f?y.attr(v):l.g(y,v,c,t),Object(l.f)(y)}if(this._updateCommon(data,t,d,n,r),h){var y=this.childAt(0);if(!f){v={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:y.style.opacity}};y.scaleX=y.scaleY=0,y.style.opacity=0,l.b(y,v,c,t)}}f&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(data,t,e,n,r){var l,c,d,_,x,k,S,w,C,O=this.childAt(0),I=data.hostModel;if(n&&(l=n.emphasisItemStyle,c=n.blurItemStyle,d=n.selectItemStyle,_=n.focus,x=n.blurScope,S=n.labelStatesModels,w=n.hoverScale,C=n.cursorStyle,k=n.emphasisDisabled),!n||data.hasItemOption){var A=n&&n.itemModel?n.itemModel:data.getItemModel(t),D=A.getModel("emphasis");l=D.getModel("itemStyle").getItemStyle(),d=A.getModel(["select","itemStyle"]).getItemStyle(),c=A.getModel(["blur","itemStyle"]).getItemStyle(),_=D.get("focus"),x=D.get("blurScope"),k=D.get("disabled"),S=Object(v.d)(A),w=D.getShallow("scale"),C=A.getShallow("cursor")}var M=data.getItemVisual(t,"symbolRotate");O.attr("rotation",(M||0)*Math.PI/180||0);var j=Object(o.b)(data.getItemVisual(t,"symbolOffset"),e);j&&(O.x=j[0],O.y=j[1]),C&&O.attr("cursor",C);var N=data.getItemVisual(t,"style"),T=N.fill;if(O instanceof y.a){var P=O.style;O.useStyle(Object(m.m)({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},N))}else O.__isEmptyBrush?O.useStyle(Object(m.m)({},N)):O.useStyle(N),O.style.decal=null,O.setColor(T,r&&r.symbolInnerColor),O.style.strokeNoScale=!0;var L=data.getItemVisual(t,"liftZ"),z=this._z2;null!=L?null==z&&(this._z2=O.z2,O.z2+=L):null!=z&&(O.z2=z,this._z2=null);var E=r&&r.useNameLabel;Object(v.f)(O,S,{labelFetcher:I,labelDataIndex:t,defaultText:function(t){return E?data.getName(t):Object(f.b)(data,t)},inheritColor:T,defaultOpacity:N.opacity}),this._sizeX=e[0]/2,this._sizeY=e[1]/2;var R=O.ensureState("emphasis");R.style=l,O.ensureState("select").style=d,O.ensureState("blur").style=c;var V=null==w||!0===w?Math.max(1.1,3/this._sizeY):isFinite(w)&&w>0?+w:1;R.scaleX=this._sizeX*V,R.scaleY=this._sizeY*V,this.setSymbolScale(1),Object(h.J)(this,_,x,k)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e,n){var r=this.childAt(0),o=Object(d.a)(this).dataIndex,c=n&&n.animation;if(this.silent=r.silent=!0,n&&n.fadeLabel){var h=r.getTextContent();h&&l.d(h,{style:{opacity:0}},e,{dataIndex:o,removeOpt:c,cb:function(){r.removeTextContent()}})}else r.removeTextContent();l.d(r,{style:{opacity:0},scaleX:0,scaleY:0},e,{dataIndex:o,cb:t,removeOpt:c})},e.getSymbolSize=function(data,t){return Object(o.c)(data.getItemVisual(t,"symbolSize"))},e}(c.a);function x(t,e){this.parent.drift(t,e)}e.a=_},452:function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return c});var r=n(510),o=n(423);function l(data,t){var e=data.mapDimensionsAll("defaultedLabel"),n=e.length;if(1===n){var o=Object(r.e)(data,t,e[0]);return null!=o?o+"":null}if(n){for(var l=[],i=0;i<e.length;i++)l.push(Object(r.e)(data,t,e[i]));return l.join(" ")}}function c(data,t){var e=data.mapDimensionsAll("defaultedLabel");if(!Object(o.t)(t))return t+"";for(var n=[],i=0;i<e.length;i++){var r=data.getDimensionIndex(e[i]);r>=0&&n.push(t[r])}return n.join(" ")}},453:function(t,e,n){t.exports={}},454:function(t,e,n){t.exports={}},456:function(t,e,n){"use strict";n.r(e);n(75),n(23),n(38);var r=n(6),o=n(462),l=n(595),c=n(1040),d=n(546),h=n(827),f=n(656),m=n(658);Object(o.a)([c.a,h.a,f.a,d.a,m.a]);var v=Object(r.b)({name:"RadarChart",props:{height:{type:String,default:"300px"},names:{default:function(){return null}},indicators:{default:function(){return["a","b","c"]}},values:{default:function(){return{values:{a:.5,b:.8,c:.3}}}}},data:function(){return{chartInstance:null,resizeObserver:null}},mounted:function(){var t=this;this.initChart(),this.updateChart(),window.addEventListener("resize",this.resizeChart),"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(function(){t.resizeChart()}),this.$refs.chart&&this.resizeObserver.observe(this.$refs.chart))},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChart),this.resizeObserver&&this.resizeObserver.disconnect(),this.chartInstance&&this.chartInstance.dispose()},watch:{values:{handler:"updateChart",deep:!0},indicators:{handler:"updateChart",deep:!0},names:{handler:"updateChart",deep:!0}},computed:{option:function(){return{scale:{pointLabels:{fontSize:20}},color:["rgba(255, 133, 182, 0.5)","#FFE43488","#56A3F188","#FF917C88"],legend:{data:this.seriesNames,bottom:0,right:0,textStyle:{fontSize:18}},radar:{indicator:this.indicators_,shape:"circle",startAngle:135,axisName:{fontSize:18}},series:[{type:"radar",data:this.valueData}]}},indicators_:function(){return this.indicators.map(function(t){return{name:t,max:1}})},seriesNames:function(){if(this.names)return this.names;var t=[];for(var e in this.values)t.push(e);return t},valueData:function(){var label={show:1==this.seriesNames.length,formatter:function(t){return Math.round(1e3*t.value)/10+"%"}},t={},e=[];for(var n in this.values){var r=this.values[n],o=[];for(var i in this.indicators)o.push(r[this.indicators[i]]);e.push({value:o,name:this.seriesNames[n],label:label,areaStyle:t,textStyle:{color:"black",fontSize:20}})}return e}},methods:{initChart:function(){this.$refs.chart&&(this.chartInstance=Object(l.b)(this.$refs.chart,"light"))},resizeChart:function(){this.chartInstance&&this.chartInstance.resize()},updateChart:function(){this.chartInstance&&this.chartInstance.setOption(this.option,!0)}}}),y=(n(488),n(52)),component=Object(y.a)(v,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{ref:"chart",staticClass:"chart",style:{height:t.height,zIndex:0}})},[],!1,null,"38f8178d",null);e.default=component.exports},461:function(t,e,n){"use strict";var r=n(50),o=n(123),l=n(76);t.exports=function(t){for(var e=r(this),n=l(e),c=arguments.length,d=o(c>1?arguments[1]:void 0,n),h=c>2?arguments[2]:void 0,f=void 0===h?n:o(h,n);f>d;)e[d++]=t;return e}},464:function(t,e,n){"use strict";n.r(e);n(54),n(23),n(30),n(64);var r=n(26),o={props:{value:{type:String},autocomplete:{type:String,default:"true"}},data:function(){return{sid:[],sdict:{},candidates:[],currentStock:"",text:"",target:0,composing:!1,history:[]}},created:function(){this.text=this.value;var t=this;r.c.collection("twStock").doc("searchTree").get().then(function(e){if(e.exists){var data=e.data();t.sdict=data.searchTree.sdict,t.slist=data.searchTree.slist}else console.log("cannot find strategy menu")})},methods:{moveCursor:function(t){0!=this.candidates.length?this.target+=t:this.target=-1},selectStock:function(t){t.preventDefault(),-1!=this.target&&this.chooseStock(this.candidates[this.target])},chooseStock:function(s){if(!this.composing){var t=this;console.log("emit",s),this.$emit("input",s),this.history.unshift(s),this.history=this.history.filter(function(e,n){return t.history.indexOf(e)==n}),this.history.length>3&&(this.history=[this.history[0],this.history[1],this.history[2]]),this.currentStock=s,this.candidates=[],this.text=s,this.target=-1,document.getElementById("search-box").blur()}},clearStock:function(t){this.text="",this.candidates=[],this.target=-1,this.$emit("update","")},digitupdate:function(t){var s,e=t.target.value;this.$emit("update",e),(s=e).replace(/[^\x00-\xff]/g,"rr").length==s.length&&this.update(t)},update:function(t){var e=event.target.value;if(this.text=e,""!=e){var n=this.sdict;for(var i in e){var r=e[i];if(!(r in n))return void(this.candidates=["找不到此股票代號"]);n=n[r]}for(var o=[],l=[n];l&&0!=l.length&&!((n=l.pop())===parseInt(n,10)&&(o.push(this.slist[n]),o.length>20));)for(var c in n)l.unshift(n[c]);this.candidates=o,1==this.candidates.length&&this.chooseStock(this.candidates[0])}else this.candidates=[]}}},l=(n(489),n(52)),component=Object(l.a)(o,function(){var t=this,e=t._self._c;return e("div",[e("form",{staticClass:"uk-search uk-search-navbar uk-card uk-flex",staticStyle:{width:"100%",border:"1px solid #ddd",background:"rgba(255, 255, 255, 0.2)"}},[e("span",{staticStyle:{"padding-left":"10px"},attrs:{"uk-search-icon":""}}),t._v(" "),e("input",{staticClass:"uk-search-input uk-text-primary uk-text-light",staticStyle:{"padding-left":"60px"},attrs:{id:"search-box",name:"Search",type:"search",placeholder:"股票代號",autocomplete:"off"},domProps:{value:t.text},on:{change:t.digitupdate,input:t.digitupdate,compositionstart:function(e){t.composing=!0},compositionend:function(e){t.composing=!1,t.update()},focus:t.clearStock,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.moveCursor(1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.moveCursor(-1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.selectStock.apply(null,arguments))}]}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.candidates.length>0&&"true"==t.autocomplete,expression:"candidates.length > 0 && autocomplete == 'true'"}],staticClass:"uk-flex uk-flex-wrap uk-flex-wrap-around"},t._l(t.candidates,function(n,i){return e("div",{key:n,staticClass:"uk-card uk-card-default uk-card-body uk-padding-small uk-card-hover",staticStyle:{cursor:"pointer","border-radius":"10px",margin:"20px 20px 0 0"},on:{click:function(e){return t.chooseStock(n)}}},[t._v("\n        "+t._s(i==t.target?n+" * ":n)+"\n      ")])}),0)])},[],!1,null,"3c0325ef",null);e.default=component.exports},465:function(t,e,n){"use strict";n.r(e);var r=n(479);n(276),n(277),n(30),n(44),n(64),n(193),n(87);var o={name:"TVChartContainer",props:{symbol:{default:"stock",type:String},price:{default:function(){},type:Object},indicators:{default:function(){},type:Object},interval:{default:"D",type:String},containerId:{default:"tv_chart_container",type:String},datafeedUrl:{default:"https://demo_feed.tradingview.com",type:String},libraryPath:{default:"/charting_library/",type:String},chartsStorageUrl:{default:"https://saveload.tradingview.com",type:String},chartsStorageApiVersion:{default:"1.1",type:String},clientId:{default:"tradingview.com",type:String},userId:{default:"public_user_id",type:String},fullscreen:{default:!1,type:Boolean},autosize:{default:!0,type:Boolean},studiesOverrides:{type:Object,default:function(){return{}}}},data:function(){return{isReady:!1,predictionOption:"未來20天"}},watch:{price:function(){null!==this.tvWidget&&this.isReady&&this.tvWidget.setSymbol(this.$props.symbol,"1D")},indicators:function(){console.log("change indicator"),this.isReady&&this.initStudies()}},tvWidget:null,mounted:function(){this.deleteTvWidget(),this.createTvWidget(),this.predictionOption=localStorage.getItem("predictionOption"),null===this.predictionOption&&(this.predictionOption="未來10天")},destroyed:function(){this.deleteTvWidget()},methods:{initStudies:function(){null!==this.tvWidget&&(console.log("----aaa----"),console.log(this.predictionOption),this.tvWidget.activeChart().removeAllStudies(),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[5]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[20]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[60]),this.tvWidget.activeChart().createStudy("Volume"))},deleteTvWidget:function(){this.tvWidget&&(this.tvWidget.remove(),this.tvWidget=null,this.isReady=!1)},createTvWidget:function(){var t,e=this,n=this.createDatafeed(),r={symbol:this.symbol,datafeed:n,interval:this.interval,container:this.containerId,library_path:this.libraryPath,locale:(t=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search),(null===t?null:decodeURIComponent(t[1].replace(/\+/g," ")))||"zh_TW"),disabled_features:["header_widget","header_widget_dom_node","compare_symbol","display_market_status","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","timeframes_toolbar","use_localstorage_for_settings","volume_force_overlay","header_saveload","go_to_date","edit_buttons_in_legend","symbol_search_hot_key","border_around_the_chart","control_bar","context_menus","show_chart_property_page","countdown","study_market_minimized","main_series_scale_menu","display_market_status","remove_library_container_border","chart_property_page_style","property_pages","chart_property_page_scales","chart_property_page_background","source_selection_markers"],detail:!0,enabled_features:["hide_left_toolbar_by_default"],charts_storage_url:this.chartsStorageUrl,charts_storage_api_version:this.chartsStorageApiVersion,client_id:this.clientId,user_id:this.userId,fullscreen:this.fullscreen,autosize:!0,studies_overrides:this.studiesOverrides,debug:!1},o=this.$TVChart.Widget;this.isReady=!1;var l=new o(r);this.tvWidget=l,l.onChartReady(function(){l.activeChart().dataReady(function(){e.initStudies(),e.isReady=!0;var iframe=document.getElementsByTagName("iframe")[0],t=document.getElementsByClassName("TVChartContainer")[0];iframe.style.height=t.offsetHeight+"px"})})},createDatafeed:function(){var t=this,e=this;return{onReady:function(t){var e={supported_resolutions:["1D","1W","1M"],exchanges:[{value:"TPEX",name:"TPEX",desc:"TPEX"}],symbols_types:[{name:"stock",value:"stock"}]};console.log("[onReady]: Method call"),setTimeout(function(){return t(e)})},searchSymbols:function(t,e,n,r){console.log("[searchSymbol]: Method call",symbolName)},resolveSymbol:function(e,n,r){var o=e===t.$props.symbol?e:e+"-"+t.$props.symbol,l={ticker:o,name:o,description:o,type:"TYPE",session:"0900-1330",timezone:"Asia/Taipei",exchange:"TWII",minmov:.01,pricescale:.01,has_intraday:!1,has_weekly_and_monthly:!1,supported_resolutions:["1D","1W","1M"]};setTimeout(function(){return n(l)},0),console.log("[resolveSymbol]: Method call",e)},getBars:function(n,o,l,c,d){if(n.ticker==t.$props.symbol){var p=[];for(var i in e.$props.price.close){var h=e.$props.price.date[i].seconds;if("number"==typeof e.$props.price.date[i]){var f=e.$props.price.date[i];Number(f/1e6);Object(r.a)("t")}if(!(h<l.from||h>=l.to)){var m={open:e.$props.price.open[i],close:e.$props.price.close[i],high:e.$props.price.high[i],low:e.$props.price.low[i],volume:e.$props.price.volume[i],time:1e3*h};isNaN(m.open)||p.push(m)}}console.log(p),c(p,{noData:0===p.length})}else{var v=t.$props.indicators[n.ticker.split("-")[0]],y=t.$props.indicators.date,_=[];for(var x in v){var k=y[x].seconds;if(!(k<l.from||k>=l.to)){var S={open:v[x],close:v[x],high:v[x],low:v[x],time:1e3*k};isNaN(S.open)||_.push(S)}}c(_,{noData:0===_.length})}},subscribeBars:function(t,e,n,r,o){console.log("[subscribeBars]: Method call with subscribeUID:",r)},unsubscribeBars:function(t){console.log("[unsubscribeBars]: Method call with subscriberUID:",t)}}}}},l=n(52),component=Object(l.a)(o,function(){return(0,this._self._c)("div",{staticClass:"TVChartContainer",staticStyle:{height:"100%"},attrs:{id:this.containerId}})},[],!1,null,null,null);e.default=component.exports},467:function(t,e,n){"use strict";function r(t,e){return t.type===e}n.d(e,"a",function(){return r})},469:function(t,e,n){t.exports={}},472:function(t,e,n){"use strict";var r=n(423),o=n(468),l=n(478),c=n(529),d=n(426),h=n(501),f=function(t){this.coordSysDims=[],this.axisMap=Object(r.f)(),this.categoryAxisMap=Object(r.f)(),this.coordSysName=t};var m={cartesian2d:function(t,e,n,r){var o=t.getReferringComponents("xAxis",d.b).models[0],l=t.getReferringComponents("yAxis",d.b).models[0];e.coordSysDims=["x","y"],n.set("x",o),n.set("y",l),v(o)&&(r.set("x",o),e.firstCategoryDimIndex=0),v(l)&&(r.set("y",l),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,r){var o=t.getReferringComponents("singleAxis",d.b).models[0];e.coordSysDims=["single"],n.set("single",o),v(o)&&(r.set("single",o),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var o=t.getReferringComponents("polar",d.b).models[0],l=o.findAxisModel("radiusAxis"),c=o.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",l),n.set("angle",c),v(l)&&(r.set("radius",l),e.firstCategoryDimIndex=0),v(c)&&(r.set("angle",c),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,o){var l=t.ecModel,c=l.getComponent("parallel",t.get("parallelIndex")),d=e.coordSysDims=c.dimensions.slice();Object(r.k)(c.parallelAxisIndex,function(t,r){var c=l.getComponent("parallelAxis",t),h=d[r];n.set(h,c),v(c)&&(o.set(h,c),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=r))})}};function v(t){return"category"===t.get("type")}var y=n(495),_=n(441),x=n(509),k=n(484);e.a=function(t,e,n){n=n||{};var source,v=e.getSourceManager(),S=!1;t?(S=!0,source=Object(y.c)(t)):S=(source=v.getSource()).sourceFormat===k.f;var w=function(t){var e=t.get("coordinateSystem"),n=new f(e),r=m[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}(e),C=function(t,e){var n,o=t.get("coordinateSystem"),l=h.a.get(o);return e&&e.coordSysDims&&(n=r.H(e.coordSysDims,function(t){var n={name:t},r=e.axisMap.get(t);if(r){var o=r.get("type");n.type=Object(c.a)(o)}return n})),n||(n=l&&(l.getDimensionsInfo?l.getDimensionsInfo():l.dimensions.slice())||["x","y"]),n}(e,w),O=n.useEncodeDefaulter,I=r.w(O)?O:O?r.h(x.c,C,e):null,A={coordDimensions:C,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:I,canOmitUnusedDimensions:!S},D=Object(l.a)(source,A),M=function(t,e,n){var o,l;return n&&r.k(t,function(t,r){var c=t.coordDim,d=n.categoryAxisMap.get(c);d&&(null==o&&(o=r),t.ordinalMeta=d.getOrdinalMeta(),e&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(l=!0)}),l||null==o||(t[o].otherDims.itemName=0),o}(D.dimensions,n.createInvertedIndices,w),j=S?null:v.getSharedDataStore(D),N=Object(_.a)(e,{schema:D,store:j}),data=new o.a(D,e);data.setCalculationInfo(N);var T=null!=M&&function(source){if(source.sourceFormat===k.f){var t=function(t){var i=0;for(;i<t.length&&null==t[i];)i++;return t[i]}(source.data||[]);return!r.t(Object(d.h)(t))}}(source)?function(t,e,n,r){return r===M?n:this.defaultDimValueGetter(t,e,n,r)}:null;return data.hasItemOption=!1,data.initData(S?source:j,null,T),data}},474:function(t,e,n){t.exports={}},476:function(t,e,n){t.exports={}},479:function(t,e,n){"use strict";function r(t){throw new TypeError('"'+t+'" is read-only')}n.d(e,"a",function(){return r})},480:function(t,e,n){"use strict";n.d(e,"a",function(){return L});var r=n(424),o=n(423),l=n(504),c=n(470),d=n(492),h=n(437),f=l.a.value;function m(t,e){return o.i({show:e},t)}var v=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),r=this.get("axisLine"),l=this.get("axisTick"),h=this.get("axisLabel"),f=this.get("axisName"),m=this.get(["axisName","show"]),v=this.get(["axisName","formatter"]),y=this.get("axisNameGap"),_=this.get("triggerEvent"),x=o.H(this.get("indicator")||[],function(x){null!=x.max&&x.max>0&&!x.min?x.min=0:null!=x.min&&x.min<0&&!x.max&&(x.max=0);var k=f;null!=x.color&&(k=o.i({color:x.color},f));var S=o.I(o.d(x),{boundaryGap:t,splitNumber:e,scale:n,axisLine:r,axisTick:l,axisLabel:h,name:x.text,showName:m,nameLocation:"end",nameGap:y,nameTextStyle:k,triggerEvent:_},!1);if(o.C(v)){var w=S.name;S.name=v.replace("{value}",null!=w?w:"")}else o.w(v)&&(S.name=v(S.name,S));var C=new c.a(S,null,this.ecModel);return o.K(C,d.a.prototype),C.mainType="radar",C.componentIndex=this.componentIndex,C},this);this._indicatorModels=x},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:o.I({lineStyle:{color:"#bbb"}},f.axisLine),axisLabel:m(f.axisLabel,!1),axisTick:m(f.axisTick,!1),splitLine:m(f.splitLine,!0),splitArea:m(f.splitArea,!0),indicator:[]},e}(h.a),y=v,_=n(491),x=n(678),k=n(761),S=n(681),w=n(680),C=n(425),O=n(439),I=["axisLine","axisTickLabel","axisName"],A=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.render=function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),r=o.H(n,function(t){var n=t.model.get("showName")?t.name:"";return new _.a(t.model,{axisName:n,position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});o.k(r,function(t){o.k(I,t.add,t),this.group.add(t.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var r=t.get("shape"),l=t.getModel("splitLine"),c=t.getModel("splitArea"),d=l.getModel("lineStyle"),h=c.getModel("areaStyle"),f=l.get("show"),m=c.get("show"),v=d.get("color"),y=h.get("color"),_=o.t(v)?v:[v],O=o.t(y)?y:[y],I=[],A=[];if("circle"===r)for(var D=n[0].getTicksCoords(),M=e.cx,j=e.cy,i=0;i<D.length;i++){if(f)I[V(I,_,i)].push(new x.a({shape:{cx:M,cy:j,r:D[i].coord}}));if(m&&i<D.length-1)A[V(A,O,i)].push(new k.a({shape:{cx:M,cy:j,r0:D[i].coord,r:D[i+1].coord}}))}else{var N,T=o.H(n,function(t,n){var r=t.getTicksCoords();return N=null==N?r.length-1:Math.min(r.length-1,N),o.H(r,function(t){return e.coordToPoint(t.coord,n)})}),P=[];for(i=0;i<=N;i++){for(var L=[],z=0;z<n.length;z++)L.push(T[z][i]);if(L[0]&&L.push(L[0].slice()),f)I[V(I,_,i)].push(new S.a({shape:{points:L}}));if(m&&P)A[V(A,O,i-1)].push(new w.a({shape:{points:L.concat(P)}}));P=L.slice().reverse()}}var E=d.getLineStyle(),R=h.getAreaStyle();o.k(A,function(t,e){this.group.add(C.mergePath(t,{style:o.i({stroke:"none",fill:O[e%O.length]},R),silent:!0}))},this),o.k(I,function(t,e){this.group.add(C.mergePath(t,{style:o.i({fill:"none",stroke:_[e%_.length]},E),silent:!0}))},this)}function V(t,e,n){var r=n%e.length;return t[r]=t[r]||[],r}},e.type="radar",e}(O.a),D=A,M=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.type="value",o.angle=0,o.name="",o}return Object(r.a)(e,t),e}(n(486).a),j=n(496),N=n(427),T=n(503),P=function(){function t(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=Object(o.H)(t.getIndicatorModels(),function(t,e){var n="indicator_"+e,r=new M(n,new j.a);return r.name=t.get("name"),r.model=t,t.axis=r,this.dimensions.push(n),r},this),this.resize(t,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,r=Math.sqrt(e*e+n*n);e/=r,n/=r;for(var o,l=Math.atan2(-n,e),c=1/0,d=-1,i=0;i<this._indicatorAxes.length;i++){var h=this._indicatorAxes[i],f=Math.abs(l-h.angle);f<c&&(o=h,d=i,c=f)}return[d,+(o&&o.coordToData(r))]},t.prototype.resize=function(t,e){var n=t.get("center"),r=e.getWidth(),l=e.getHeight(),c=Math.min(r,l)/2;this.cx=N.n(n[0],r),this.cy=N.n(n[1],l),this.startAngle=t.get("startAngle")*Math.PI/180;var d=t.get("radius");(Object(o.C)(d)||Object(o.z)(d))&&(d=[0,d]),this.r0=N.n(d[0],c),this.r=N.n(d[1],c),Object(o.k)(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n},this)},t.prototype.update=function(t,e){var n=this._indicatorAxes,r=this._model;Object(o.k)(n,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(e,l){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===r){var data=e.getData();Object(o.k)(n,function(t){t.scale.unionExtentFromData(data,data.mapDimension(t.dim))})}},this);var l=r.get("splitNumber"),c=new j.a;c.setExtent(0,l),c.setInterval(1),Object(o.k)(n,function(t,e){Object(T.a)(t.scale,t.model,c)})},t.prototype.convertToPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.create=function(e,n){var r=[];return e.eachComponent("radar",function(o){var l=new t(o,e,n);r.push(l),o.coordinateSystem=l}),e.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=r[t.get("radarIndex")||0])}),r},t.dimensions=[],t}();function L(t){t.registerCoordinateSystem("radar",P),t.registerComponentModel(y),t.registerComponentView(D),t.registerVisual({seriesType:"radar",reset:function(t){var data=t.getData();data.each(function(t){data.setItemVisual(t,"legendIcon","roundRect")}),data.setVisual("legendIcon","roundRect")}})}},482:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(478),o=n(468),l=n(423);function c(t,e,n){e=Object(l.t)(e)&&{coordDimensions:e}||Object(l.m)({encodeDefine:t.getEncode()},e);var source=t.getSource(),c=Object(r.a)(source,e).dimensions,d=new o.a(c,t);return d.initData(source,n),d}},485:function(t,e,n){"use strict";var r=n(573),o=n(457),l=n(425),c=n(451),d=n(423),h=n(428);function f(data,t,e,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(e))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&"none"!==data.getItemVisual(e,"symbol")}function m(t){return null==t||Object(d.A)(t)||(t={isIgnore:t}),t||{}}function v(data){var t=data.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:Object(h.d)(t),cursorStyle:t.get("cursor")}}var y=function(){function t(t){this.group=new r.a,this._SymbolCtor=t||c.a}return t.prototype.updateData=function(data,t){this._progressiveEls=null,t=m(t);var e=this.group,n=data.hostModel,r=this._data,l=this._SymbolCtor,c=t.disableAnimation,d=v(data),h={disableAnimation:c},y=t.getSymbolPoint||function(t){return data.getItemLayout(t)};r||e.removeAll(),data.diff(r).add(function(n){var r=y(n);if(f(data,r,n,t)){var o=new l(data,n,d,h);o.setPosition(r),data.setItemGraphicEl(n,o),e.add(o)}}).update(function(m,v){var _=r.getItemGraphicEl(v),x=y(m);if(f(data,x,m,t)){var k=data.getItemVisual(m,"symbol")||"circle",S=_&&_.getSymbolType&&_.getSymbolType();if(!_||S&&S!==k)e.remove(_),(_=new l(data,m,d,h)).setPosition(x);else{_.updateData(data,m,d,h);var w={x:x[0],y:x[1]};c?_.attr(w):o.g(_,w,n)}e.add(_),data.setItemGraphicEl(m,_)}else e.remove(_)}).remove(function(t){var o=r.getItemGraphicEl(t);o&&o.fadeOut(function(){e.remove(o)},n)}).execute(),this._getSymbolPoint=y,this._data=data},t.prototype.updateLayout=function(){var t=this,data=this._data;data&&data.eachItemGraphicEl(function(e,n){var r=t._getSymbolPoint(n);e.setPosition(r),e.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(data){this._seriesScope=v(data),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,data,e){function n(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],e=m(e);for(var r=t.start;r<t.end;r++){var o=data.getItemLayout(r);if(f(data,o,r,e)){var l=new this._SymbolCtor(data,r,this._seriesScope);l.traverse(n),l.setPosition(o),this.group.add(l),data.setItemGraphicEl(r,l),this._progressiveEls.push(l)}}},t.prototype.eachRendered=function(t){l.traverseElements(this._progressiveEls||this.group,t)},t.prototype.remove=function(t){var e=this.group,data=this._data;data&&t?data.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)},data.hostModel)}):e.removeAll()},t}();e.a=y},488:function(t,e,n){"use strict";n(453)},489:function(t,e,n){"use strict";n(454)},497:function(t,e,n){"use strict";n(469)},498:function(t,e,n){"use strict";n.r(e);n(39),n(429),n(192),n(53);var r=n(6),o=n(26),l=n(456),c=n(464),d=n(465),h=Object(r.b)({name:"line-chart",components:{RadarChart:l.default,SearchBar:c.default,TVChartContainer:d.default},props:{stock_id:{default:"1101"},displaySearchBar:{default:!0}},data:function(){return{stock:null,tab:"AI技術指標",currentCategory:null,indicators:["成長率","獲利能力","單位基本面","安全性"],headerHeight:64,orgHeadHeight:64}},mounted:function(){this.headMaxHeight=this.orgHeadHeight,this.getStock(this.stock_id)},computed:{stockEvaluation:function(){if(null===this.stock)return null},categories:function(){var t=this;return this.stock&&this.stock.fundamentalSummaryIndustry?Object.keys(this.stock.fundamentalSummaryIndustry).sort(function(a,b){return-t.stock.fundamentalSummaryIndustry[a]["檔數"]+t.stock.fundamentalSummaryIndustry[b]["檔數"]}).splice(0,3):[]},radarValues:function(){var t={};return t[this.stock_id]=this.stock.fundamentalSummaryIndustry[this.currentCategory],t},importance:function(){if(!this.stock)return[];var t=[];for(var e in this.stock.fundamentalContribution)t.push({name:e,value:this.stock.fundamentalContribution[e]});return t.sort(function(a,b){return Math.abs(b.value)-Math.abs(a.value)})}},watch:{categories:function(){this.categories&&this.stock&&(this.currentCategory=this.categories[0])},stock_id:{handler:function(t){console.log("stock panel id change!",t),this.getStock(t)},deep:!0}},methods:{getStock:function(t){if(""!==t){var e=o.c.collection("twStock").doc(t),n=this;e.get().then(function(t){t.exists&&(n.stock=t.data(),console.log(n.stock))}).catch(function(e){console.log("Error getting document:",e),console.log(t)})}},percentage:function(t){return t>0?"+"+Math.round(10*t)/10+"%":Math.round(10*t)/10+"%"},percentageColor:function(t){var th=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this.stock.fundamentalContribution[this.importance[0].name],n=Math.abs(t)/Math.abs(e)*th;return t>0?"rgba(255, 133, 182, ".concat(n,")"):"rgba(154, 145, 255, ".concat(n,")")},percentageColor2:function(t){return t>0?"rgba(255, 133, 182)":"rgba(154, 145, 255)"},changeStock:function(t){console.log("get change stock",t),this.headerHeight=this.orgHeadHeight;var e=t.split(" ")[0];this.stock_id=e,window.history.pushState({},null,window.location.href.split("?")[0]+"?stock_id="+e),this.getStock(e)},fitHeaderSize:function(text){0!==text.length?this.headerHeight=400:this.headerHeight=this.orgHeadHeight}}}),f=h,m=(n(497),n(52)),component=Object(m.a)(f,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticStyle:{height:"100%"}},[e("div",{staticClass:"dark-muted stock-head"},[t.stock&&t.displaySearchBar?e("div",[e("SearchBar",{ref:"searchBar",attrs:{value:t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id},on:{input:t.changeStock,update:t.fitHeaderSize}})],1):t._e(),t._v(" "),e("ul",{staticClass:"uk-flex-left",staticStyle:{"margin-top":"12px","margin-bottom":"0"},attrs:{"uk-tab":""}},[t.displaySearchBar?t._e():e("li",{staticClass:"uk-disabled"},[e("a",[t._v(t._s(t.stock&&t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id))])]),t._v(" "),e("li",{class:{"uk-active":"AI技術指標"==t.tab},on:{click:function(e){t.tab="AI技術指標"}}},[e("a",[t._v("技術指標")])]),t._v(" "),e("li",{class:{"uk-active":"AI財報分析"==t.tab},on:{click:function(e){t.tab="AI財報分析"}}},[e("a",[t._v("財報分析")])])])]),t._v(" "),e("div",{staticClass:"light-muted",staticStyle:{height:"calc(100% - 32px)"}},[t.stock&&t.stock.price?e("div",{style:{height:"AI技術指標"===t.tab?"100%":"0px"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"AI技術指標"===t.tab,expression:"tab === 'AI技術指標'"}],staticStyle:{height:"100%"}},[e("TVChartContainer",{attrs:{symbol:t.stock_id,price:t.stock.price,indicators:t.stock.indicatorPrediction}})],1)]):t._e(),t._v(" "),t.stock&&"AI財報分析"===t.tab?e("div",{staticClass:"uk-padding-small"},[t.stock.fundamentalValue?e("div",{staticClass:"uk-grid uk-grid-small",attrs:{"uk-height-match":"target: > div > .uk-card","uk-grid":""}},[e("div",{staticClass:"uk-width-1-2@m"},[t.stock?e("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[e("nuxt-link",{attrs:{to:"/ml_fundamental"}},[e("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),e("h3",{staticClass:"uk-card-title"},[t._v("\n              財報排名 "+t._s(t.stock.fundamentalValue.季別)+"\n            ")]),t._v(" "),e("p",{attrs:{"uk-margin":""}},t._l(t.categories,function(n){return e("button",{key:"category_"+n,staticClass:"uk-button uk-button-small",class:n===t.currentCategory?"uk-button-primary":"uk-button-default",on:{click:function(e){t.currentCategory=n}}},[t._v("\n                "+t._s(n)+"\n              ")])}),0),t._v(" "),e("p",[t._v("\n              "+t._s(t.currentCategory)+"排名：\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"]-Math.round(t.stock.fundamentalSummaryIndustry[t.currentCategory]["綜合評分"]*t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+1)+"\n              /\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+"\n              名\n            ")]),t._v(" "),e("RadarChart",{attrs:{names:[t.stock_id],indicators:t.indicators,values:t.radarValues}})],1):t._e()]),t._v(" "),e("div",{staticClass:"uk-width-1-2@m"},[e("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[e("nuxt-link",{attrs:{to:"/ml_fundamental"}},[e("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),e("h3",{staticClass:"uk-card-title"},[t._v("財報股價影響力")]),t._v(" "),e("div",{staticClass:"uk-grid-collapse",attrs:{"uk-grid":""}},[e("div",{staticStyle:{width:"150px"}},[e("div",{staticStyle:{height:"85px","padding-bottom":"70px"},style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution.綜合評分,1)},[e("span",{staticStyle:{"font-size":"2.2em"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution.綜合評分)))]),e("span",[t._v("/年")]),t._v(" "),e("br"),t._v(" "),e("span",{staticStyle:{"font-size":"1em"}},[t._v("股價總影響力")])]),t._v(" "),t._l(t.indicators,function(i){return e("div",{key:"score"+i,staticClass:"fundamental-tab uk-text-center",style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution[i],1)},[e("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution[i],100))+" ")]),e("br"),t._v(" "),e("span",[t._v(t._s(i))]),t._v(" "),e("div",{staticClass:"line"})])})],2),t._v(" "),e("div",{staticClass:"uk-width-expand"},[e("div",{staticClass:"table-value uk-overflow-auto",staticStyle:{"max-height":"400px"}},[e("table",{staticClass:"uk-table uk-table-small top-container",staticStyle:{width:"400px","font-size":"0.8rem"}},[t._m(0),t._v(" "),e("tbody",t._l(t.importance,function(n){return e("tr",{key:n.name+"fd",style:"background:"+t.percentageColor(n.value,.7)},[e("td",[t._v(t._s(n.name))]),t._v(" "),e("td",[t._v("\n                          "+t._s(t.percentage(n.value))+"\n                        ")]),t._v(" "),e("td",[t._v("\n                          "+t._s(Math.round(100*t.stock.fundamentalValue[n.name])/100)+"\n                        ")])])}),0)])])])])],1)])]):e("div",[t._v("\n        並無財報數據喔！\n      ")])]):t._e()])])},[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("th",[t._v("名稱")]),t._v(" "),e("th",[t._v("影響力（大⇀小）")]),t._v(" "),e("th",[t._v("數值")])])}],!1,null,"e5dbce3a",null);e.default=component.exports;installComponents(component,{SearchBar:n(464).default,TVChartContainer:n(465).default,RadarChart:n(456).default})},505:function(t,e,n){"use strict";n(474)},507:function(t,e,n){t.exports={}},508:function(t,e,n){"use strict";n(476)},512:function(t,e,n){"use strict";n.r(e);var r=n(12),o=(n(43),n(443),n(60),n(276),n(53),n(23),n(40),n(38),n(6)),l=n(462),c=n(595),d=n(1040),h=n(545),f=n(827),m=n(656),v=n(658);Object(l.a)([d.a,f.a,m.a,h.a,v.a]);var y=!1;function _(){return x.apply(this,arguments)}function x(){return(x=Object(r.a)(regeneratorRuntime.mark(function t(){var e,r,o,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!y){t.next=1;break}return t.abrupt("return");case 1:return t.next=2,Promise.all([n.e(16),n.e(113)]).then(n.bind(null,446));case 2:e=t.sent,r=e.MarkPointComponent,o=e.MarkLineComponent,c=e.VisualMapComponent,d=e.DataZoomComponent,Object(l.a)([r,o,c,d]),y=!0;case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}var k=Object(o.b)({name:"CumulativeReturnChart",props:{values:{type:Array,default:function(){return[[1,2,3,4]]}},index:{type:Array,default:function(){return["2020-01-01","2020-02-01","2020-03-01","2020-04-01"]}},benchmark:{type:Array,default:function(){return null}},height:{type:String,default:"300px"},valueName:{type:Array,default:function(){return[""]}},benchmarkName:{type:String,default:"大盤報酬"},fill:{type:Boolean,default:!0},secondaryBenchmark:{type:Boolean,default:!1},visualMap:{type:Object,default:function(){return null}},livePerformanceUpdate:{default:function(){return null}},maxSamples:{type:Number,default:100},dataZoom:{type:Object,default:function(){return null}},colors:{type:Array,default:function(){return["#37459c","#eb7e26","#14b363"]}}},data:function(){var t={animation:!1,type:"value",scale:!0,axisLabel:{formatter:"{value}%",inside:!0},show:!0,minorTick:{show:!1},minorSplitLine:{show:!1},axisTick:{show:!0,inside:!0},axisLine:{show:!1},splitLine:{show:!1},position:"right"},e=t;return this.secondaryBenchmark&&((e=[JSON.parse(JSON.stringify(t)),JSON.parse(JSON.stringify(t))])[0].position="right",e[0].axisLabel.formatter=null,e[0].axisLabel.inside=!0,e[1].position="left",e[1].axisLabel.inside=!0),{chartInstance:null,resizeObserver:null,chartOption:{visualMap:this.visualMap,dataZoom:this.dataZoom,legend:{bottom:80,left:5,orient:"vertical",show:!this.secondaryBenchmark},grid:{left:0,right:0,top:"12px",bottom:"20px"},xAxis:{type:"time",animation:!1,name:"日期",minorTick:{show:!1},minorSplitLine:{show:!1},axisLine:{lineStyle:{color:"#aaa"}},axisLabel:{inside:!0},inverval:1},yAxis:e,series:[],backgroundColor:"transparent"}}},watch:{index:{handler:"updateChart",deep:!0},values:{handler:"updateChart",deep:!0},benchmark:{handler:"updateChart",deep:!0}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.visualMap||t.dataZoom||t.livePerformanceUpdate)){e.next=1;break}return e.next=1,_();case 1:t.initChart(),t.updateChart(),window.addEventListener("resize",t.resizeChart),"undefined"!=typeof ResizeObserver&&(t.resizeObserver=new ResizeObserver(function(){t.resizeChart()}),t.resizeObserver.observe(t.$refs.chart));case 2:case"end":return e.stop()}},e)}))()},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChart),this.resizeObserver&&this.resizeObserver.disconnect(),this.chartInstance&&this.chartInstance.dispose()},methods:{initChart:function(){this.chartInstance=Object(c.b)(this.$refs.chart,"light")},resizeChart:function(){this.chartInstance&&this.chartInstance.resize()},makeSeriesData:function(t,e,i){var n=this.fill?[{offset:0,color:this.colors[i]+"99"},{offset:1,color:this.colors[i]+"00",alpha:1}]:[],r=this.secondaryBenchmark?null:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:n,global:!1}},o=null,l=null;if(this.livePerformanceUpdate){var c=this.livePerformanceUpdate;e[0][0]>c&&(c=e[0][0]),o={data:[{coord:[c,0],symbol:"circle",symbolSize:10,itemStyle:{color:"#55bd95"},value:"Live",label:{color:"#459979",offset:[-20,0]}}]},l={symbol:"circle",symbolSize:10,itemStyle:{color:"#55bd95"},data:[[{coord:[c,0]},{coord:[e.slice(-1)[0][0],0]}]],lineStyle:{type:"solid",cap:"round",width:3}}}return{name:t,data:e,markPoint:o,markLine:l,animation:!1,zlevel:100,type:"line",smooth:!1,areaStyle:r,itemStyle:{opacity:0},lineStyle:{color:this.secondaryBenchmark?null:this.colors[i]},silent:!0}},updateChart:function(){if(this.chartOption.series=[],this.values&&this.index&&Array.isArray(this.values)&&Array.isArray(this.index)){for(var i in this.values){var t=this.valueName[i],e=this.index,n=this.values[i];if(n&&Array.isArray(n)&&0!==n.length){var r=this.values[i][0],o=Math.max(Math.round(n.length/this.maxSamples),1),data=[];for(var l in e)(l=parseInt(l))%o!==0&&0!==l&&l!==e.length-1||(this.secondaryBenchmark?data.push([e[l],n[l]]):data.push([e[l],n[l]/r*100-100]));var c=this.makeSeriesData(t,data,i);this.chartOption.series.push(c)}}if(void 0!==this.benchmark&&null!==this.benchmark&&Array.isArray(this.benchmark)&&0!==this.benchmark.length){var d=Math.max(Math.round(this.index.length/this.maxSamples),1),h=[];for(var f in this.index)(f=parseInt(f))%d!==0&&f!==this.index.length-1&&0!==f||h.push([this.index[f],100*(this.benchmark[f]/this.benchmark[0]-1)]);this.chartOption.series.push({name:this.benchmarkName,data:h,animation:!1,smooth:!1,type:"line",itemStyle:{color:"#000",borderColor:"#000",opacity:0},lineStyle:{color:"#aaa"},yAxisIndex:this.secondaryBenchmark?1:0,silent:!0}),this.chartInstance&&this.chartInstance.setOption(this.chartOption,!0)}else this.chartInstance&&this.chartInstance.setOption(this.chartOption,!0)}}}}),S=(n(505),n(52)),component=Object(S.a)(k,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticStyle:{position:"relative"}},[e("div",{staticStyle:{"z-index":"1"}},[e("div",{ref:"chart",staticClass:"chart",style:{height:t.height,width:"100%",zIndex:0}})])])},[],!1,null,"710eede2",null);e.default=component.exports},513:function(t,e,n){"use strict";n.r(e);n(23),n(44);var r={props:{vip:{default:!1}},data:function(){return{fakeData:[["1258 其祥-KY",-.24226804123711343,.1,"2021-01-01"],["1336 台翰",-.015452538631346768,.1,"2021-01-01"],["1413 宏洲",-.08035714285714313,.1,"2021-01-01"],["1528 恩德",-.08727858293075608,.1,"2021-01-01"],["8916 光隆",.10973451327433681,.1,"2021-01-01"],["9962 有益",.00964630225080354,.1,"2021-01-01"]]}},methods:{stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()}}},o=(n(508),n(52)),component=Object(o.a)(r,function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"uk-inline uk-width-1-1",staticStyle:{"overflow-x":"hidden"}},[e("table",{staticClass:"uk-table uk-table-divider uk-width-1-1",staticStyle:{"white-space":"nowrap"}},[t._m(0),t._v(" "),e("tbody",t._l(t.fakeData,function(n){return e("tr",{key:n[0]},[e("td",{staticClass:"uk-text-primary"},[t._v(t._s(n[0]))]),t._v(" "),e("td",{style:"color:".concat(t.stockReturnColor(n[1]))},[t._v("\n            "+t._s(Math.round(100*t.sign(n[1]))/100)+"%\n          ")]),t._v(" "),e("td",{style:"color:".concat(t.stockReturnColor(n[2]))},[t._v("\n            "+t._s(100*n[2])+" %\n          ")]),t._v(" "),e("td",{staticClass:"uk-text-right"},[t._v(t._s(n[3]))])])}),0)]),t._v(" "),e("div",{staticClass:"blur uk-position-cover uk-overlay uk-overlay-default uk-flex uk-flex-center uk-flex-middle"},[e("nuxt-link",{attrs:{to:"/pricing"}},[t.vip?e("div",{staticClass:"uk-text-center vip uk-text-primary",attrs:{"uk-scrollspy":"cls: uk-animation-kenburns; repeat: true"}},[e("span",{attrs:{"uk-icon":"icon: lock; ratio: 3.5"}}),t._v(" "),e("h2",{staticClass:"uk-text-primary"},[t._v("FinLab VIP")]),t._v(" "),e("p",[t._v("\n            學程式、練投資一切搞定\n          ")])]):t._e()]),t._v(" "),t.vip?t._e():e("a",{attrs:{"uk-toggle":"target: #login-ui"}},[t._m(1)])],1)])])},[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("名稱")]),t._v(" "),e("th",[t._v("漲跌")]),t._v(" "),e("th",[t._v("權重")]),t._v(" "),e("th",{staticClass:"uk-text-right"},[t._v("清單新增")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"uk-text-center vip uk-text-primary",attrs:{"uk-scrollspy":"cls: uk-animation-kenburns; repeat: true"}},[e("span",{attrs:{"uk-icon":"icon: lock; ratio: 3.5"}}),t._v(" "),e("h2",{staticClass:"uk-text-primary"},[t._v("FinLab")]),t._v(" "),e("p",[t._v("\n            登入查看符合條件的清單\n          ")])])}],!1,null,"96fe9148",null);e.default=component.exports},531:function(t,e,n){"use strict";n.r(e);n(65),n(86);var r=n(21),o=n(12),l=(n(74),n(429),n(23),n(30),n(44),n(194),n(64),n(38),n(43),n(6)),c=n(26),d=n(122),h=n.n(d),f=Object(l.b)({components:{},props:{uid:{default:null,type:String},strategy_id:{default:null,type:String},position_id:{default:null,type:String},positionPredefined:{default:null,type:Object}},data:function(){var t=this;return window.goto=function(link){t.$router.push(link)},{showInfo:!1,position:null,mounted:!1,tableMode:"present",displayTableMode:["當前統計","近期更動清單"],sortTableCol:"股票",sortAscending:!0,table:[],weights:{},userCap:20,colabLink:null,buildingColab:!1,next_trading_date:null,update_date:null,last_updated:null,trade_at:null,stop_loss:-1/0,take_profit:1/0,displayStockId:"",failed:!1,freq:"1d"}},mounted:function(){this.init(),this.mounted=!0},methods:{openStockPanel:function(s){this.displayStockId=s.split(" ")[0],window.scrollTo(document.getElementById("stock-id-".concat(s)).top)},showStock:function(s){this.displayStockId=s,h.a.modal("#modal-stock").show()},setSortColumn:function(col){this.sortTableCol===col?this.sortAscending=!this.sortAscending:this.sortAscending=!1,this.sortTableCol=col},init:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,o,l,d,table,p,h,f,m,v,y,_,x,k,S,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.strategy_id&&t.position_id||t.positionPredefined){e.next=1;break}return e.abrupt("return");case 1:if(n=null,!t.positionPredefined){e.next=2;break}n=t.positionPredefined,e.next=5;break;case 2:return e.prev=2,e.next=3,c.c.collection("users").doc(t.uid).collection("strategies").doc(t.strategy_id).collection("positions").doc(t.position_id).get();case 3:o=e.sent,l=o.data(),n="position"in l?l.position:l,console.log(n),e.next=5;break;case 4:return e.prev=4,k=e.catch(2),console.log("PositionPanel: cannot read position "+k),t.failed=!0,e.abrupt("return");case 5:d=n,t.next_trading_date=d.next_trading_date,t.update_date=d.update_date,t.trade_at=d.trade_at,t.last_updated=d.last_updated.toDate(),t.position=d,table=[],t.weights={},S=regeneratorRuntime.keys(d);case 6:if((w=S()).done){e.next=9;break}if(p=w.value,h=d[p],"object"===Object(r.a)(h)){e.next=7;break}return"freq"==p?t.freq=h:"stop_loss"===p?t.stop_loss=h:"take_profit"===p&&(t.take_profit=h),e.abrupt("continue",6);case 7:if("NaT"===h.exit_date&&(h.exit_date=""),h.exit_date,"weight"in h||"return"in h){e.next=8;break}return e.abrupt("continue",6);case 8:f={close:"收盤",open:"開盤","open|close":"盤中"},m=t.trade_at in f?f[t.trade_at]:t.trade_at,console.log(m,t.trade_at),v={hold:"持有",exit:"移除",enter:"新增",sl:"".concat(m,"停損"),tp:"".concat(m,"停利"),sl_:"已停損",tp_:"已停利","買進":"新增","賣出":"移除","停損停利":h.return>0?"".concat(m,"停利"):"".concat(m,"停損")},y=h.status in v?v[h.status]:h.status,_=0,"next_weight"in h&&(_=h.next_weight),"string"==typeof h.exit_date&-1!=h.exit_date.indexOf("T")&&(h.exit_date=h.exit_date.split("T")[0]),"string"==typeof h.entry_date&-1!=h.entry_date.indexOf("T")&&(h.entry_date=h.entry_date.split("T")[0]),x={stock:p,action:y,profit:Math.round(1e3*h.return)/10,weight:Math.round(1e3*h.weight)/10,nextWeight:Math.round(1e3*_)/10,entry_sig_date:h.entry_date,exit_sig_date:h.exit_date,entry_price:h.entry_price},table.push(x),"買進"==h.status||"entry"==h.status?t.update_date=h.entry_date:"賣出"!=h.status&&"exit"!=h.status||(t.update_date=h.exit_date),"weight"in h&&(t.weights[p]=h.weight),e.next=6;break;case 9:t.table=table;case 10:case"end":return e.stop()}},e,null,[[2,4]])}))()},stockStatusColor:function(t){var output={"新增":"gray","持有":"lightgray","移除":"gray","停損停利":"#252786"};return t in output?output[t]:"gray"},stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()},formatDate:function(t){if(null===t)return"";var e=new Date,n=t.toLocaleString("en-us").replace(/(\d+)\/(\d+)\/(\d+)/,"$3-$1-$2").replace(/(\d+):(\d+):(\d+)/,"$1:$2").split(", ");return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?n[1]:n[0]},generate_colab_script:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,r,o,l,c,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t.buildingColab=!0,n="",t.weights)o=r.match(/\d+/)[0],n+='  "'.concat(o,'" : ').concat(t.weights[r],",\n");return l=["!pip install finlab -q","from finlab.online.order_executor import OrderExecutor\n\noe = OrderExecutor.from_weights({\n\n".concat(n,"\n}, ").concat(1e4*t.userCap,")"),"# 查看欲執行的委託單：\noe._calculate_new_orders()","# 市價下單（所有委託單）\noe.create_orders()","# 更新委託單價格到市價（所有未成交委託單）\noe.create_orders()","# 刪單（所有委託單）\noe.cancel_orders()"],c=null,e.prev=1,d={sid:t.$props.strategy_id,uid:t.$props.uid,code:JSON.stringify(l)},e.next=2,t.$axios.post("https://asia-northeast1-fdata-299302.cloudfunctions.net/generate_colab_strategy",d);case 2:c=e.sent,e.next=4;break;case 3:return e.prev=3,h=e.catch(1),alert("upload colab fail: "+h.data+" "+h),console.log(h),e.abrupt("return");case 4:t.colabLink=c.data;case 5:case"end":return e.stop()}},e,null,[[1,3]])}))()}},computed:{filteredCols:function(){return this.$store.state.user&&this.$route.query.uid===this.$store.state.user.uid?"present"===this.tableMode?["名稱","漲跌","權重","進場價格","清單新增"]:["名稱","新增移除","漲跌","權重更新","清單新增","清單移除"]:"present"===this.tableMode?["名稱","漲跌","權重","清單新增"]:["名稱","新增移除","漲跌","權重更新","清單新增","清單移除"]},realNextTradingDate:function(){if(0===this.table.length)return"";var t="1977-01-01";for(var e in this.table){var n=Object.assign({},this.table[e]);n.entry_sig_date>t&&(t=n.entry_sig_date),n.exit_sig_date>t&&(t=n.exit_sig_date)}return t},rows:function(){var t=this;if(0===this.table.length)return[];var e=[];for(var n in this.table)if("present"!==this.tableMode||0!=this.table[n].weight){var r=Object.assign({},this.table[n]);e.push(r)}return e.sort(function(a,b){var e={"名稱":"stock","漲跌":"profit","新增移除":"action","權重":"weight","權重更新":"nextWeight","進場價格":"entry_price","清單新增":"entry_sig_date","清單移除":"exit_sig_date"}[t.sortTableCol];return a[e]<b[e]^t.sortAscending?1:-1}),e},unrealizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,r=this.table[e].profit*(n/100);isNaN(r)||(t+=r,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},realizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,r=this.table[e].profit*(n/100);isNaN(r)||"移除"!==this.table[e].action||(t+=r,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},hasPermission:function(){var t=this.$store.state.strategy.info.public_position,e=null!==this.$store.state.user;return this.userPermission>=t||e&&this.$store.state.user.uid===this.$props.uid},userPermission:function(){return""===this.$store.state.role?0:"free"===this.$store.state.role?1:this.$store.state.role.includes("vip")?2:void 0}},watch:{userPermission:function(){this.init()}}}),m=(n(538),n(52)),component=Object(m.a)(f,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticStyle:{"padding-bottom":"24px"}},[null===t.$store.state.user?e("div",[e("FakePosition",{attrs:{vip:!1}})],1):t._e(),t._v(" "),null!==t.$store.state.user?e("div",[e("div",{staticClass:"uk-width-1-1"},[e("ul",{staticClass:"uk-flex uk-subnav uk-subnav-divider",attrs:{"uk-margin":""}},[e("li",{staticClass:"{ 'uk-active': tableMode === 'present' }"},[e("a",{on:{click:function(e){t.tableMode="present"}}},[e("div",{staticClass:"uk-text-primary uk-padding-small",staticStyle:{border:"1px solid","border-radius":"12px"},style:{background:"present"===t.tableMode?"#f0f0fa":"white","border-color":"present"===t.tableMode?"blue":"#aaa"}},[t._v("\n              "+t._s(t.displayTableMode[0])+" "),e("br"),t._v(" "),e("span",{staticClass:"uk-text-lead uk-text-bold",style:{color:t.stockReturnColor(t.unrealizedReturn)}},[t._v("\n                "+t._s(t.sign(t.unrealizedReturn))+" %\n              ")])])])]),t._v(" "),e("li",{class:{"uk-active":"future"===t.tableMode}},[e("a",{on:{click:function(e){t.tableMode="future"}}},[e("div",{staticClass:"uk-text-primary uk-padding-small",staticStyle:{border:"1px solid","border-radius":"12px"},style:{background:"future"===t.tableMode?"#f0f0fa":"white","border-color":"future"===t.tableMode?"blue":"#aaa"}},[t._v("\n              "+t._s(t.displayTableMode[1])+" "),e("br"),t._v(" "),e("span",{staticClass:"uk-text-lead uk-text-bold",staticStyle:{color:"#777"}},[t._v(t._s(t.realNextTradingDate))])])])])]),t._v(" "),"future"==t.tableMode?e("div",{staticClass:"uk-text-small uk-card uk-padding-small uk-margin-large-top uk-margin-large-bottom shadow"},[e("p",[t._v("此策略的模擬交易的細節")]),t._v(" "),e("ul",{staticClass:"uk-list"},[e("li",[t._v("於 "+t._s("1d"===t.freq?t.next_trading_date.split("T")[0]:t.next_trading_date)+" 之後的下個交易日\n            接近\n            "+t._s("close"===t.trade_at?"收盤":"開盤")+" 時調整部位\n          ")]),t._v(" "),t.stop_loss!=-1/0||t.take_profit!=1/0?e("li",[t._v("\n\n            "+t._s(t.stop_loss!=-1/0?"停損為".concat(100*t.stop_loss,"%，"):"")+"\n            "+t._s(t.take_profit!=1/0?"停利為".concat(100*t.take_profit,"%，"):"")+"\n            每日盤後檢查，如觸發則於下個交易日的\n            "+t._s("close"===t.trade_at?"收盤":"開盤")+"\n            出場\n          ")]):t._e()])]):t._e(),t._v(" "),t.mounted?e("div",{staticClass:"uk-overflow-auto"},[0!==t.rows.length?e("table",{staticClass:"uk-table uk-table-divider",staticStyle:{"white-space":"nowrap"}},[e("thead",[e("tr",{staticClass:"uk-text-right"},t._l(t.filteredCols,function(n,r){return e("th",{key:"table-col-".concat(n),staticStyle:{"padding-left":"0"},style:0===r?"text-align:left!important":"text-align:right!important",on:{click:function(e){return t.setSortColumn(n)}}},[t._v("\n                "+t._s(n)+"\n                "),t.sortTableCol===n?e("span",[t._v(t._s(t.sortAscending?"▲":"▼"))]):t._e()])}),0)]),t._v(" "),e("tbody",{staticClass:"uk-text-right"},t._l(t.rows,function(n){return e("tr",{key:"table-row-".concat(n.stock)},[t.filteredCols.includes("名稱")?e("td",{staticClass:"uk-text-left",staticStyle:{"padding-left":"0"}},[e("div",{staticClass:"uk-text-primary",staticStyle:{cursor:"pointer"},attrs:{id:"stock-id-".concat(n.stock)},on:{click:function(e){return t.openStockPanel(n.stock)}}},[t._v("\n                  "+t._s(n.stock)+"\n                  "),"持有"!==n.action&&"移除"!==n.action&&"新增"!==n.action?e("span",{staticClass:"round-border uk-background-primary",staticStyle:{"font-size":"0.9rem",color:"white",padding:"0 10px"}},[t._v(t._s(n.action))]):t._e()])]):t._e(),t._v(" "),t.filteredCols.includes("新增移除")?e("td",{style:"color:".concat(t.stockStatusColor(n.action))},[t._v("\n                "+t._s(n.action)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("漲跌")?e("td",{style:"color:".concat(t.stockReturnColor(n.profit))},[t._v("\n                "+t._s(t.sign(n.profit))+"%\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("權重")?e("td",{style:"color:".concat(t.stockReturnColor(n.weight))},[t._v("\n                "+t._s(n.weight)+" %\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("權重更新")?e("td",{style:"color:".concat(t.stockReturnColor(n.nextWeight))},[t._v("\n                "+t._s(n.nextWeight)+" %\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("進場價格")?e("td",[t._v("\n                "+t._s(n.entry_price)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("清單新增")?e("td",[t._v("\n                "+t._s(n.entry_sig_date)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("清單移除")?e("td",[t._v("\n                "+t._s(n.exit_sig_date)+"\n              ")]):t._e()])}),0)]):e("div",[t.failed?e("FakePosition",{attrs:{vip:!0}}):e("span",[t._v("目前策略無持股喔！")])],1)]):t._e(),t._v(" "),e("div",{staticClass:"uk-margin-large-top uk-margin-large-bottom"},[e("p",[t._v("\n          不知道怎麼使用？"),e("br"),t._v("趕快來看\n          "),e("nuxt-link",{attrs:{to:"/course?cid=LqYTLW3KkXRSPnci47xe"}},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v("平台速成教學")])]),t._v("\n          ！\n        ")],1)])])]):t._e(),t._v(" "),t.displayStockId?e("div",{staticClass:"stock-panel shadow"},[e("a",{staticClass:"uk-icon-button shadow",staticStyle:{border:"1px solid #ccc",top:"3px",right:"6px",position:"absolute","z-index":"100"},attrs:{"uk-icon":"close"},on:{click:function(e){t.displayStockId=""}}}),t._v(" "),e("div",{staticStyle:{height:"100%"}},[e("StockPanel",{attrs:{stock_id:t.displayStockId,displaySearchBar:!1}})],1)]):t._e()])},[],!1,null,"2fdfffc8",null);e.default=component.exports;installComponents(component,{FakePosition:n(513).default,StockPanel:n(498).default})},538:function(t,e,n){"use strict";n(507)},545:function(t,e,n){"use strict";n.d(e,"a",function(){return vt});var r=n(424),o=n(472),l=n(460),c=n(431),d=n(573),h=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(r.a)(e,t),e.prototype.getInitialData=function(option){return Object(o.a)(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new d.a,line=Object(c.a)("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(line),line.setStyle(t.lineStyle);var n=this.getData().getVisual("symbol"),r=this.getData().getVisual("symbolRotate"),o="none"===n?"circle":n,l=.8*t.itemHeight,symbol=Object(c.a)(o,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);e.add(symbol),symbol.setStyle(t.itemStyle);var h="inherit"===t.iconRotate?r:t.iconRotate||0;return symbol.rotation=h*Math.PI/180,symbol.setOrigin([t.itemWidth/2,t.itemHeight/2]),o.indexOf("empty")>-1&&(symbol.style.stroke=symbol.style.fill,symbol.style.fill="#fff",symbol.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(l.a),f=h,m=n(423),v=n(485),y=n(451),_=n(441);function x(t,data,e){var n=t.getBaseAxis(),r=t.getOtherAxis(n),o=function(t,e){var n=0,r=t.scale.getExtent();"start"===e?n=r[0]:"end"===e?n=r[1]:Object(m.z)(e)&&!isNaN(e)?n=e:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]);return n}(r,e),l=n.dim,c=r.dim,d=data.mapDimension(c),h=data.mapDimension(l),f="x"===c||"radius"===c?1:0,v=Object(m.H)(t.dimensions,function(t){return data.mapDimension(t)}),y=!1,x=data.getCalculationInfo("stackResultDimension");return Object(_.c)(data,v[0])&&(y=!0,v[0]=x),Object(_.c)(data,v[1])&&(y=!0,v[1]=x),{dataDimsForPoint:v,valueStart:o,valueAxisDim:c,baseAxisDim:l,stacked:!!y,valueDim:d,baseDim:h,baseDataOffset:f,stackedOverDimension:data.getCalculationInfo("stackedOverDimension")}}function k(t,e,data,n){var r=NaN;t.stacked&&(r=data.get(data.getCalculationInfo("stackedOverDimension"),n)),isNaN(r)&&(r=t.valueStart);var o=t.baseDataOffset,l=[];return l[o]=data.get(t.baseDim,n),l[1-o]=r,e.dataToPoint(l)}var S=n(445);var w=n(560),C=n(457),O=n(535),I=n(426),A=n(442),D=n(487),M=n(500),j=Math.min,N=Math.max;function T(t,e){return isNaN(t)||isNaN(e)}function P(t,e,n,r,o,l,c,d,h){for(var f,m,v,y,_,x,k=n,S=0;S<r;S++){var w=e[2*k],C=e[2*k+1];if(k>=o||k<0)break;if(T(w,C)){if(h){k+=l;continue}break}if(k===n)t[l>0?"moveTo":"lineTo"](w,C),v=w,y=C;else{var O=w-f,I=C-m;if(O*O+I*I<.5){k+=l;continue}if(c>0){for(var A=k+l,D=e[2*A],M=e[2*A+1];D===w&&M===C&&S<r;)S++,k+=l,D=e[2*(A+=l)],M=e[2*A+1],O=(w=e[2*k])-f,I=(C=e[2*k+1])-m;var P=S+1;if(h)for(;T(D,M)&&P<r;)P++,D=e[2*(A+=l)],M=e[2*A+1];var L=.5,z=0,E=0,R=void 0,V=void 0;if(P>=r||T(D,M))_=w,x=C;else{z=D-f,E=M-m;var B=w-f,H=D-w,$=C-m,F=M-C,G=void 0,W=void 0;if("x"===d){var U=z>0?1:-1;_=w-U*(G=Math.abs(B))*c,x=C,R=w+U*(W=Math.abs(H))*c,V=C}else if("y"===d){var Y=E>0?1:-1;_=w,x=C-Y*(G=Math.abs($))*c,R=w,V=C+Y*(W=Math.abs(F))*c}else G=Math.sqrt(B*B+$*$),_=w-z*c*(1-(L=(W=Math.sqrt(H*H+F*F))/(W+G))),x=C-E*c*(1-L),V=C+E*c*L,R=j(R=w+z*c*L,N(D,w)),V=j(V,N(M,C)),R=N(R,j(D,w)),x=C-(E=(V=N(V,j(M,C)))-C)*G/W,_=j(_=w-(z=R-w)*G/W,N(f,w)),x=j(x,N(m,C)),R=w+(z=w-(_=N(_,j(f,w))))*W/G,V=C+(E=C-(x=N(x,j(m,C))))*W/G}t.bezierCurveTo(v,y,_,x,w,C),v=R,y=V}else t.lineTo(w,C)}f=w,m=C,k+=l}return S}var L=function(){this.smooth=0,this.smoothConstraint=!0},z=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polyline",n}return Object(r.a)(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new L},e.prototype.buildPath=function(t,e){var n=e.points,i=0,r=n.length/2;if(e.connectNulls){for(;r>0&&T(n[2*r-2],n[2*r-1]);r--);for(;i<r&&T(n[2*i],n[2*i+1]);i++);}for(;i<r;)i+=P(t,n,i,r,r,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,r,data=this.path.data,o=D.a.CMD,l="x"===e,c=[],i=0;i<data.length;){var d=void 0,h=void 0,f=void 0,m=void 0,v=void 0,y=void 0,_=void 0;switch(data[i++]){case o.M:n=data[i++],r=data[i++];break;case o.L:if(d=data[i++],h=data[i++],(_=l?(t-n)/(d-n):(t-r)/(h-r))<=1&&_>=0){var x=l?(h-r)*_+r:(d-n)*_+n;return l?[t,x]:[x,t]}n=d,r=h;break;case o.C:d=data[i++],h=data[i++],f=data[i++],m=data[i++],v=data[i++],y=data[i++];var k=l?Object(M.f)(n,d,f,v,t,c):Object(M.f)(r,h,m,y,t,c);if(k>0)for(var S=0;S<k;S++){var w=c[S];if(w<=1&&w>=0){x=l?Object(M.a)(r,h,m,y,w):Object(M.a)(n,d,f,v,w);return l?[t,x]:[x,t]}}n=v,r=y}}},e}(A.b),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.a)(e,t),e}(L),R=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polygon",n}return Object(r.a)(e,t),e.prototype.getDefaultShape=function(){return new E},e.prototype.buildPath=function(t,e){var n=e.points,r=e.stackedOnPoints,i=0,o=n.length/2,l=e.smoothMonotone;if(e.connectNulls){for(;o>0&&T(n[2*o-2],n[2*o-1]);o--);for(;i<o&&T(n[2*i],n[2*i+1]);i++);}for(;i<o;){var c=P(t,n,i,o,o,1,e.smooth,l,e.connectNulls);P(t,r,i+c-1,c,o,-1,e.stackedOnSmooth,l,e.connectNulls),i+=c+1,t.closePath()}},e}(A.b),V=n(458),B=n(647),H=n(843),$=n(427);function F(t,e,n,r,o){var rect=t.getArea(),l=rect.x,c=rect.y,d=rect.width,h=rect.height,f=n.get(["lineStyle","width"])||0;l-=f/2,c-=f/2,d+=f,h+=f,d=Math.ceil(d),l!==Math.floor(l)&&(l=Math.floor(l),d++);var v=new B.a({shape:{x:l,y:c,width:d,height:h}});if(e){var y=t.getBaseAxis(),_=y.isHorizontal(),x=y.inverse;_?(x&&(v.shape.x+=d),v.shape.width=0):(x||(v.shape.y+=h),v.shape.height=0);var k=Object(m.w)(o)?function(t){o(t,v)}:null;C.b(v,{shape:{width:d,height:h,x:l,y:c}},n,null,r,k)}return v}function G(t,e,n){var r=t.getArea(),o=Object($.s)(r.r0,1),l=Object($.s)(r.r,1),c=new H.a({shape:{cx:Object($.s)(t.cx,1),cy:Object($.s)(t.cy,1),r0:o,r:l,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});e&&("angle"===t.getBaseAxis().dim?c.shape.endAngle=r.startAngle:c.shape.r=o,C.b(c,{shape:{endAngle:r.endAngle,r:l}},n));return c}var W=n(467),U=n(430),Y=n(428),X=n(452),J=n(432),Z=n(463),K=n(450);function Q(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return;return!0}}function tt(t){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,i=0;i<t.length;){var l=t[i++],c=t[i++];isNaN(l)||(e=Math.min(l,e),r=Math.max(l,r)),isNaN(c)||(n=Math.min(c,n),o=Math.max(c,o))}return[[e,n],[r,o]]}function et(t,e){var n=tt(t),r=n[0],o=n[1],l=tt(e),c=l[0],d=l[1];return Math.max(Math.abs(r[0]-c[0]),Math.abs(r[1]-c[1]),Math.abs(o[0]-d[0]),Math.abs(o[1]-d[1]))}function at(t){return m.z(t)?t:t?.5:0}function it(t,e,n,r,o){var l=n.getBaseAxis(),c="x"===l.dim||"radius"===l.dim?0:1,d=[],i=0,h=[],f=[],m=[],v=[];if(o){for(i=0;i<t.length;i+=2){var y=e||t;isNaN(y[i])||isNaN(y[i+1])||v.push(t[i],t[i+1])}t=v}for(i=0;i<t.length-2;i+=2)switch(m[0]=t[i+2],m[1]=t[i+3],f[0]=t[i],f[1]=t[i+1],d.push(f[0],f[1]),r){case"end":h[c]=m[c],h[1-c]=f[1-c],d.push(h[0],h[1]);break;case"middle":var _=(f[c]+m[c])/2,x=[];h[c]=x[c]=_,h[1-c]=f[1-c],x[1-c]=m[1-c],d.push(h[0],h[1]),d.push(x[0],x[1]);break;default:h[c]=f[c],h[1-c]=m[1-c],d.push(h[0],h[1])}return d.push(t[i++],t[i++]),d}function nt(data,t,e){var n=data.getVisual("visualMeta");if(n&&n.length&&data.count()&&"cartesian2d"===t.type){for(var r,o,i=n.length-1;i>=0;i--){var l=data.getDimensionInfo(n[i].dimension);if("x"===(r=l&&l.coordDim)||"y"===r){o=n[i];break}}if(o){var c=t.getAxis(r),d=m.H(o.stops,function(t){return{coord:c.toGlobalCoord(c.dataToCoord(t.value)),color:t.color}}),h=d.length,f=o.outerColors.slice();h&&d[0].coord>d[h-1].coord&&(d.reverse(),f.reverse());var v=function(t,e){var n,r,o=[],l=t.length;function c(t,e,n){var r=t.coord,p=(n-r)/(e.coord-r);return{coord:n,color:Object(K.b)(p,[t.color,e.color])}}for(var i=0;i<l;i++){var d=t[i],h=d.coord;if(h<0)n=d;else{if(h>e){r?o.push(c(r,d,e)):n&&o.push(c(n,d,0),c(n,d,e));break}n&&(o.push(c(n,d,0)),n=null),o.push(d),r=d}}return o}(d,"x"===r?e.getWidth():e.getHeight()),y=v.length;if(!y&&h)return d[0].coord<0?f[1]?f[1]:d[h-1].color:f[0]?f[0]:d[0].color;var _=v[0].coord-10,x=v[y-1].coord+10,k=x-_;if(k<.001)return"transparent";m.k(v,function(t){t.offset=(t.coord-_)/k}),v.push({offset:y?v[y-1].offset:.5,color:f[1]||"transparent"}),v.unshift({offset:y?v[0].offset:.5,color:f[0]||"transparent"});var S=new w.a(0,0,0,0,v,!0);return S[r]=_,S[r+"2"]=x,S}}}function st(t,data,e){var n=t.get("showAllSymbol"),r="auto"===n;if(!n||r){var o=e.getAxesByScale("ordinal")[0];if(o&&(!r||!function(t,data){var e=t.getExtent(),n=Math.abs(e[1]-e[0])/t.scale.count();isNaN(n)&&(n=0);for(var r=data.count(),o=Math.max(1,Math.round(r/5)),l=0;l<r;l+=o)if(1.5*y.a.getSymbolSize(data,l)[t.isHorizontal()?1:0]>n)return!1;return!0}(o,data))){var l=data.mapDimension(o.dim),c={};return m.k(o.getViewLabels(),function(t){var e=o.scale.getRawOrdinalNumber(t.tickValue);c[e]=1}),function(t){return!c.hasOwnProperty(data.get(l,t))}}}}function ot(t,e){return isNaN(t)||isNaN(e)}function lt(t,e){return[t[2*e],t[2*e+1]]}function ct(t){if(t.get(["endLabel","show"]))return!0;for(var i=0;i<U.g.length;i++)if(t.get([U.g[i],"endLabel","show"]))return!0;return!1}function ut(t,e,n,r){if(Object(W.a)(e,"cartesian2d")){var o=r.getModel("endLabel"),l=o.get("valueAnimation"),c=r.getData(),d={lastFrameIndex:0},h=ct(r)?function(n,r){t._endLabelOnDuring(n,r,c,d,l,o,e)}:null,f=e.getBaseAxis().isHorizontal(),m=F(e,n,r,function(){var e=t._endLabel;e&&n&&null!=d.originalX&&e.attr({x:d.originalX,y:d.originalY})},h);if(!r.get("clip",!0)){var v=m.shape,y=Math.max(v.width,v.height);f?(v.y-=y,v.height+=2*y):(v.x-=y,v.width+=2*y)}return h&&h(1,m),m}return G(e,n,r)}var ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.a)(e,t),e.prototype.init=function(){var t=new d.a,e=new v.a;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t,this._changePolyState=m.c(this._changePolyState,this)},e.prototype.render=function(t,e,n){var r=t.coordinateSystem,o=this.group,data=t.getData(),l=t.getModel("lineStyle"),c=t.getModel("areaStyle"),d=data.getLayout("points")||[],h="polar"===r.type,f=this._coordSys,v=this._symbolDraw,polyline=this._polyline,polygon=this._polygon,y=this._lineGroup,_=!e.ssr&&t.get("animation"),w=!c.isEmpty(),O=c.get("origin"),I=x(r,data,O),A=w&&function(t,data,e){if(!e.valueDim)return[];for(var n=data.count(),r=Object(S.a)(2*n),o=0;o<n;o++){var l=k(e,t,data,o);r[2*o]=l[0],r[2*o+1]=l[1]}return r}(r,data,I),D=t.get("showSymbol"),M=t.get("connectNulls"),j=D&&!h&&st(t,data,r),N=this._data;N&&N.eachItemGraphicEl(function(t,e){t.__temp&&(o.remove(t),N.setItemGraphicEl(e,null))}),D||v.remove(),o.add(y);var T,P=!h&&t.get("step");r&&r.getArea&&t.get("clip",!0)&&(null!=(T=r.getArea()).width?(T.x-=.1,T.y-=.1,T.width+=.2,T.height+=.2):T.r0&&(T.r0-=.5,T.r+=.5)),this._clipShapeForSymbol=T;var L=nt(data,r,n)||data.getVisual("style")[data.getVisual("drawType")];if(polyline&&f.type===r.type&&P===this._step){w&&!polygon?polygon=this._newPolygon(d,A):polygon&&!w&&(y.remove(polygon),polygon=this._polygon=null),h||this._initOrUpdateEndLabel(t,r,Object(Z.b)(L));var z=y.getClipPath();if(z){var E=ut(this,r,!1,t);C.b(z,{shape:E.shape},t)}else y.setClipPath(ut(this,r,!0,t));D&&v.updateData(data,{isIgnore:j,clipShape:T,disableAnimation:!0,getSymbolPoint:function(t){return[d[2*t],d[2*t+1]]}}),Q(this._stackedOnPoints,A)&&Q(this._points,d)||(_?this._doUpdateAnimation(data,A,r,n,P,O,M):(P&&(A&&(A=it(A,d,r,P,M)),d=it(d,null,r,P,M)),polyline.setShape({points:d}),polygon&&polygon.setShape({points:d,stackedOnPoints:A})))}else D&&v.updateData(data,{isIgnore:j,clipShape:T,disableAnimation:!0,getSymbolPoint:function(t){return[d[2*t],d[2*t+1]]}}),_&&this._initSymbolLabelAnimation(data,r,T),P&&(A&&(A=it(A,d,r,P,M)),d=it(d,null,r,P,M)),polyline=this._newPolyline(d),w?polygon=this._newPolygon(d,A):polygon&&(y.remove(polygon),polygon=this._polygon=null),h||this._initOrUpdateEndLabel(t,r,Object(Z.b)(L)),y.setClipPath(ut(this,r,!0,t));var R=t.getModel("emphasis"),V=R.get("focus"),B=R.get("blurScope"),H=R.get("disabled");(polyline.useStyle(m.i(l.getLineStyle(),{fill:"none",stroke:L,lineJoin:"bevel"})),Object(U.I)(polyline,t,"lineStyle"),polyline.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"]))&&(polyline.getState("emphasis").style.lineWidth=+polyline.style.lineWidth+1);Object(J.a)(polyline).seriesIndex=t.seriesIndex,Object(U.J)(polyline,V,B,H);var $=at(t.get("smooth")),F=t.get("smoothMonotone");if(polyline.setShape({smooth:$,smoothMonotone:F,connectNulls:M}),polygon){var G=data.getCalculationInfo("stackedOnSeries"),W=0;polygon.useStyle(m.i(c.getAreaStyle(),{fill:L,opacity:.7,lineJoin:"bevel",decal:data.getVisual("style").decal})),G&&(W=at(G.get("smooth"))),polygon.setShape({smooth:$,stackedOnSmooth:W,smoothMonotone:F,connectNulls:M}),Object(U.I)(polygon,t,"areaStyle"),Object(J.a)(polygon).seriesIndex=t.seriesIndex,Object(U.J)(polygon,V,B,H)}var Y=this._changePolyState;data.eachItemGraphicEl(function(t){t&&(t.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=data,this._coordSys=r,this._stackedOnPoints=A,this._points=d,this._step=P,this._valueOrigin=O,t.get("triggerLineEvent")&&(this.packEventData(t,polyline),polygon&&this.packEventData(t,polygon))},e.prototype.packEventData=function(t,e){Object(J.a)(e).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,e,n,r){var data=t.getData(),o=I.t(data,r);if(this._changePolyState("emphasis"),!(o instanceof Array)&&null!=o&&o>=0){var l=data.getLayout("points"),symbol=data.getItemGraphicEl(o);if(!symbol){var c=l[2*o],d=l[2*o+1];if(isNaN(c)||isNaN(d))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,d))return;var h=t.get("zlevel")||0,f=t.get("z")||0;(symbol=new y.a(data,o)).x=c,symbol.y=d,symbol.setZ(h,f);var m=symbol.getSymbolPath().getTextContent();m&&(m.zlevel=h,m.z=f,m.z2=this._polyline.z2+1),symbol.__temp=!0,data.setItemGraphicEl(o,symbol),symbol.stopSymbolAnimation(!0),this.group.add(symbol)}symbol.highlight()}else V.a.prototype.highlight.call(this,t,e,n,r)},e.prototype.downplay=function(t,e,n,r){var data=t.getData(),o=I.t(data,r);if(this._changePolyState("normal"),null!=o&&o>=0){var symbol=data.getItemGraphicEl(o);symbol&&(symbol.__temp?(data.setItemGraphicEl(o,null),this.group.remove(symbol)):symbol.downplay())}else V.a.prototype.downplay.call(this,t,e,n,r)},e.prototype._changePolyState=function(t){var polygon=this._polygon;Object(U.H)(this._polyline,t),polygon&&Object(U.H)(polygon,t)},e.prototype._newPolyline=function(t){var polyline=this._polyline;return polyline&&this._lineGroup.remove(polyline),polyline=new z({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(polyline),this._polyline=polyline,polyline},e.prototype._newPolygon=function(t,e){var polygon=this._polygon;return polygon&&this._lineGroup.remove(polygon),polygon=new R({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(polygon),this._polygon=polygon,polygon},e.prototype._initSymbolLabelAnimation=function(data,t,e){var n,r,o=t.getBaseAxis(),l=o.inverse;"cartesian2d"===t.type?(n=o.isHorizontal(),r=!1):"polar"===t.type&&(n="angle"===o.dim,r=!0);var c=data.hostModel,d=c.get("animationDuration");m.w(d)&&(d=d(null));var h=c.get("animationDelay")||0,f=m.w(h)?h(null):h;data.eachItemGraphicEl(function(symbol,o){var c=symbol;if(c){var v=[symbol.x,symbol.y],y=void 0,_=void 0,x=void 0;if(e)if(r){var k=e,S=t.pointToCoord(v);n?(y=k.startAngle,_=k.endAngle,x=-S[1]/180*Math.PI):(y=k.r0,_=k.r,x=S[0])}else{var w=e;n?(y=w.x,_=w.x+w.width,x=symbol.x):(y=w.y+w.height,_=w.y,x=symbol.y)}var C=_===y?0:(x-y)/(_-y);l&&(C=1-C);var O=m.w(h)?h(o):d*C+f,I=c.getSymbolPath(),text=I.getTextContent();c.attr({scaleX:0,scaleY:0}),c.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:O}),text&&text.animateFrom({style:{opacity:0}},{duration:300,delay:O}),I.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,e,n){var r=t.getModel("endLabel");if(ct(t)){var o=t.getData(),polyline=this._polyline,l=o.getLayout("points");if(!l)return polyline.removeTextContent(),void(this._endLabel=null);var c=this._endLabel;c||((c=this._endLabel=new O.a({z2:200})).ignoreClip=!0,polyline.setTextContent(this._endLabel),polyline.disableLabelAnimation=!0);var d=function(t){for(var e=t.length/2;e>0&&ot(t[2*e-2],t[2*e-1]);e--);return e-1}(l);d>=0&&(Object(Y.f)(polyline,Object(Y.d)(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:d,defaultText:function(t,e,n){return null!=n?Object(X.a)(o,n):Object(X.b)(o,t)},enableTextSetter:!0},function(t,e){var n=e.getBaseAxis(),r=n.isHorizontal(),o=n.inverse,l=r?o?"right":"left":"center",c=r?"middle":o?"top":"bottom";return{normal:{align:t.get("align")||l,verticalAlign:t.get("verticalAlign")||c}}}(r,e)),polyline.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,data,n,r,o,l){var c=this._endLabel,polyline=this._polyline;if(c){t<1&&null==n.originalX&&(n.originalX=c.x,n.originalY=c.y);var d=data.getLayout("points"),h=data.hostModel,f=h.get("connectNulls"),m=o.get("precision"),v=o.get("distance")||0,y=l.getBaseAxis(),_=y.isHorizontal(),x=y.inverse,k=e.shape,S=x?_?k.x:k.y+k.height:_?k.x+k.width:k.y,w=(_?v:0)*(x?-1:1),C=(_?0:-v)*(x?-1:1),O=_?"x":"y",A=function(t,e,n){for(var a,b,r=t.length/2,o="x"===n?0:1,l=0,c=-1,i=0;i<r;i++)if(b=t[2*i+o],!isNaN(b)&&!isNaN(t[2*i+1-o]))if(0!==i){if(a<=e&&b>=e||a>=e&&b<=e){c=i;break}l=i,a=b}else a=b;return{range:[l,c],t:(e-a)/(b-a)}}(d,S,O),D=A.range,M=D[1]-D[0],j=void 0;if(M>=1){if(M>1&&!f){var N=lt(d,D[0]);c.attr({x:N[0]+w,y:N[1]+C}),r&&(j=h.getRawValue(D[0]))}else{(N=polyline.getPointOn(S,O))&&c.attr({x:N[0]+w,y:N[1]+C});var T=h.getRawValue(D[0]),P=h.getRawValue(D[1]);r&&(j=I.j(data,m,T,P,A.t))}n.lastFrameIndex=D[0]}else{var L=1===t||n.lastFrameIndex>0?D[0]:0;N=lt(d,L);r&&(j=h.getRawValue(L)),c.attr({x:N[0]+w,y:N[1]+C})}if(r){var z=Object(Y.e)(c);"function"==typeof z.setLabelText&&z.setLabelText(j)}}},e.prototype._doUpdateAnimation=function(data,t,e,n,r,o,l){var polyline=this._polyline,polygon=this._polygon,c=data.hostModel,d=function(t,e,n,r,o,l,c){for(var d=function(t,e){var n=[];return e.diff(t).add(function(t){n.push({cmd:"+",idx:t})}).update(function(t,e){n.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){n.push({cmd:"-",idx:t})}).execute(),n}(t,e),h=[],f=[],m=[],v=[],y=[],_=[],w=[],C=x(o,e,c),O=t.getLayout("points")||[],I=e.getLayout("points")||[],i=0;i<d.length;i++){var A=d[i],D=!0,M=void 0,j=void 0;switch(A.cmd){case"=":M=2*A.idx,j=2*A.idx1;var N=O[M],T=O[M+1],P=I[j],L=I[j+1];(isNaN(N)||isNaN(T))&&(N=P,T=L),h.push(N,T),f.push(P,L),m.push(n[M],n[M+1]),v.push(r[j],r[j+1]),w.push(e.getRawIndex(A.idx1));break;case"+":var z=A.idx,E=C.dataDimsForPoint,R=o.dataToPoint([e.get(E[0],z),e.get(E[1],z)]);j=2*z,h.push(R[0],R[1]),f.push(I[j],I[j+1]);var V=k(C,o,e,z);m.push(V[0],V[1]),v.push(r[j],r[j+1]),w.push(e.getRawIndex(z));break;case"-":D=!1}D&&(y.push(A),_.push(_.length))}_.sort(function(a,b){return w[a]-w[b]});var B=h.length,H=Object(S.a)(B),$=Object(S.a)(B),F=Object(S.a)(B),G=Object(S.a)(B),W=[];for(i=0;i<_.length;i++){var U=_[i],Y=2*i,X=2*U;H[Y]=h[X],H[Y+1]=h[X+1],$[Y]=f[X],$[Y+1]=f[X+1],F[Y]=m[X],F[Y+1]=m[X+1],G[Y]=v[X],G[Y+1]=v[X+1],W[i]=y[U]}return{current:H,next:$,stackedOnCurrent:F,stackedOnNext:G,status:W}}(this._data,data,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),h=d.current,f=d.stackedOnCurrent,m=d.next,v=d.stackedOnNext;if(r&&(f=it(d.stackedOnCurrent,d.current,e,r,l),h=it(d.current,null,e,r,l),v=it(d.stackedOnNext,d.next,e,r,l),m=it(d.next,null,e,r,l)),et(h,m)>3e3||polygon&&et(f,v)>3e3)return polyline.stopAnimation(),polyline.setShape({points:m}),void(polygon&&(polygon.stopAnimation(),polygon.setShape({points:m,stackedOnPoints:v})));polyline.shape.__points=d.current,polyline.shape.points=h;var y={shape:{points:m}};d.current!==h&&(y.shape.__points=d.next),polyline.stopAnimation(),C.g(polyline,y,c),polygon&&(polygon.setShape({points:h,stackedOnPoints:f}),polygon.stopAnimation(),C.g(polygon,{shape:{stackedOnPoints:v}},c),polyline.shape.points!==polygon.shape.points&&(polygon.shape.points=polyline.shape.points));for(var _=[],w=d.status,i=0;i<w.length;i++){if("="===w[i].cmd){var O=data.getItemGraphicEl(w[i].idx1);O&&_.push({el:O,ptIdx:i})}}polyline.animators&&polyline.animators.length&&polyline.animators[0].during(function(){polygon&&polygon.dirtyShape();for(var t=polyline.shape.__points,i=0;i<_.length;i++){var e=_[i].el,n=2*_[i].ptIdx;e.x=t[n],e.y=t[n+1],e.markRedraw()}})},e.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(t,r){t.__temp&&(e.remove(t),n.setItemGraphicEl(r,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(V.a),pt=ht,ft=n(527);var gt={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]||0;return e},max:function(t){for(var e=-1/0,i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,i=0;i<t.length;i++)t[i]<e&&(e=t[i]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},mt=function(t){return Math.round(t.length/2)};function vt(t){var e;t.registerChartView(pt),t.registerSeriesModel(f),t.registerLayout((e=!0,{seriesType:"line",plan:Object(ft.a)(),reset:function(t){var data=t.getData(),n=t.coordinateSystem,r=t.pipelineContext,o=e||r.large;if(n){var l=Object(m.H)(n.dimensions,function(t){return data.mapDimension(t)}).slice(0,2),c=l.length,d=data.getCalculationInfo("stackResultDimension");Object(_.c)(data,l[0])&&(l[0]=d),Object(_.c)(data,l[1])&&(l[1]=d);var h=data.getStore(),f=data.getDimensionIndex(l[0]),v=data.getDimensionIndex(l[1]);return c&&{progress:function(t,data){for(var e=t.end-t.start,r=o&&Object(S.a)(e*c),l=[],d=[],i=t.start,m=0;i<t.end;i++){var y=void 0;if(1===c){var _=h.get(f,i);y=n.dataToPoint(_,null,d)}else l[0]=h.get(f,i),l[1]=h.get(v,i),y=n.dataToPoint(l,null,d);o?(r[m++]=y[0],r[m++]=y[1]):data.setItemLayout(i,y.slice())}o&&data.setLayout("points",r)}}}}})),t.registerVisual({seriesType:"line",reset:function(t){var data=t.getData(),e=t.getModel("lineStyle").getLineStyle();e&&!e.stroke&&(e.stroke=data.getVisual("style").fill),data.setVisual("legendLineStyle",e)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(t){return{seriesType:t,reset:function(t,e,n){var data=t.getData(),r=t.get("sampling"),o=t.coordinateSystem,l=data.count();if(l>10&&"cartesian2d"===o.type&&r){var c=o.getBaseAxis(),d=o.getOtherAxis(c),h=c.getExtent(),f=n.getDevicePixelRatio(),v=Math.abs(h[1]-h[0])*(f||1),y=Math.round(l/v);if(isFinite(y)&&y>1){"lttb"===r?t.setData(data.lttbDownSample(data.mapDimension(d.dim),1/y)):"minmax"===r&&t.setData(data.minmaxDownSample(data.mapDimension(d.dim),1/y));var _=void 0;Object(m.C)(r)?_=gt[r]:Object(m.w)(r)&&(_=r),_&&t.setData(data.downSample(data.mapDimension(d.dim),1/y,_,mt))}}}}}("line"))}},546:function(t,e,n){"use strict";n.d(e,"a",function(){return L});var r=n(462),o=n(423);function l(t){t.eachSeriesByType("radar",function(t){var data=t.getData(),e=[],n=t.coordinateSystem;if(n){var r=n.getIndicatorAxes();o.k(r,function(t,o){data.each(data.mapDimension(r[o].dim),function(t,r){e[r]=e[r]||[];var l=n.dataToPoint(t,o);e[r][o]=c(l)?l:d(n)})}),data.each(function(t){var r=o.o(e[t],function(t){return c(t)})||d(n);e[t].push(r.slice()),data.setItemLayout(t,e[t])})}})}function c(t){return!isNaN(t[0])&&!isNaN(t[1])}function d(t){return[t.cx,t.cy]}function h(option){var t=option.polar;if(t){o.t(t)||(t=[t]);var e=[];o.k(t,function(t,n){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),option.radar=option.radar||[],o.t(option.radar)||(option.radar=[option.radar]),option.radar.push(t)):e.push(t)}),option.polar=e}o.k(option.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})}var f=n(424),m=n(425),v=n(680),y=n(681),_=n(457),x=n(573),k=n(430),symbol=n(431),S=n(458),w=n(428),C=n(438),O=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(f.a)(e,t),e.prototype.render=function(t,e,n){var r=t.coordinateSystem,l=this.group,data=t.getData(),c=this._data;function d(data,t){var e=data.getItemVisual(t,"symbol")||"circle";if("none"!==e){var n=symbol.c(data.getItemVisual(t,"symbolSize")),r=symbol.a(e,-1,-1,2,2),o=data.getItemVisual(t,"symbolRotate")||0;return r.attr({style:{strokeNoScale:!0},z2:100,scaleX:n[0]/2,scaleY:n[1]/2,rotation:o*Math.PI/180||0}),r}}function h(e,n,r,data,o,l){r.removeAll();for(var i=0;i<n.length-1;i++){var c=d(data,o);c&&(c.__dimIdx=i,e[i]?(c.setPosition(e[i]),m[l?"initProps":"updateProps"](c,{x:n[i][0],y:n[i][1]},t,o)):c.setPosition(n[i]),r.add(c))}}function f(t){return o.H(t,function(t){return[r.cx,r.cy]})}data.diff(c).add(function(e){var n=data.getItemLayout(e);if(n){var polygon=new v.a,polyline=new y.a,r={shape:{points:n}};polygon.shape.points=f(n),polyline.shape.points=f(n),_.b(polygon,r,t,e),_.b(polyline,r,t,e);var o=new x.a,l=new x.a;o.add(polyline),o.add(polygon),o.add(l),h(polyline.shape.points,n,l,data,e,!0),data.setItemGraphicEl(e,o)}}).update(function(e,n){var r=c.getItemGraphicEl(n),polyline=r.childAt(0),polygon=r.childAt(1),o=r.childAt(2),l={shape:{points:data.getItemLayout(e)}};l.shape.points&&(h(polyline.shape.points,l.shape.points,o,data,e,!1),Object(_.f)(polygon),Object(_.f)(polyline),_.g(polyline,l,t),_.g(polygon,l,t),data.setItemGraphicEl(e,r))}).remove(function(t){l.remove(c.getItemGraphicEl(t))}).execute(),data.eachItemGraphicEl(function(t,e){var n=data.getItemModel(e),polyline=t.childAt(0),polygon=t.childAt(1),r=t.childAt(2),c=data.getItemVisual(e,"style"),d=c.fill;l.add(t),polyline.useStyle(o.i(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:d})),Object(k.I)(polyline,n,"lineStyle"),Object(k.I)(polygon,n,"areaStyle");var h=n.getModel("areaStyle"),f=h.isEmpty()&&h.parentModel.isEmpty();polygon.ignore=f,o.k(["emphasis","select","blur"],function(t){var e=n.getModel([t,"areaStyle"]),r=e.isEmpty()&&e.parentModel.isEmpty();polygon.ensureState(t).ignore=r&&f}),polygon.useStyle(o.i(h.getAreaStyle(),{fill:d,opacity:.7,decal:c.decal}));var m=n.getModel("emphasis"),v=m.getModel("itemStyle").getItemStyle();r.eachChild(function(t){if(t instanceof C.a){var r=t.style;t.useStyle(o.m({image:r.image,x:r.x,y:r.y,width:r.width,height:r.height},c))}else t.useStyle(c),t.setColor(d),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=o.d(v);var l=data.getStore().get(data.getDimensionIndex(t.__dimIdx),e);(null==l||isNaN(l))&&(l=""),Object(w.f)(t,Object(w.d)(n),{labelFetcher:data.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:l,inheritColor:d,defaultOpacity:c.opacity})}),Object(k.J)(t,m.get("focus"),m.get("blurScope"),m.get("disabled"))}),this._data=data},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(S.a),I=O,A=n(460),D=n(482),M=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),j=n(502),N=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(f.a)(e,t),e.prototype.init=function(option){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new M(o.c(this.getData,this),o.c(this.getRawData,this))},e.prototype.getInitialData=function(option,t){return Object(D.a)(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,n){var data=this.getData(),r=this.coordinateSystem.getIndicatorAxes(),l=this.getData().getName(t),c=""===l?this.name:l,d=Object(j.e)(this,t);return Object(j.c)("section",{header:c,sortBlocks:!0,blocks:o.H(r,function(e){var n=data.get(data.mapDimension(e.dim),t);return Object(j.c)("nameValue",{markerType:"subItem",markerColor:d,name:e.name,value:n,sortParam:n})})})},e.prototype.getTooltipPosition=function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,r=e.getValues(o.H(n.dimensions,function(t){return e.mapDimension(t)}),t),i=0,l=r.length;i<l;i++)if(!isNaN(r[i])){var c=n.getIndicatorAxes();return n.coordToPoint(c[i].dataToCoord(r[i]),i)}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(A.a),T=N,P=n(480);function L(t){Object(r.a)(P.a),t.registerChartView(I),t.registerSeriesModel(T),t.registerLayout(l),t.registerProcessor({seriesType:"radar",reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var data=t.getData();data.filterSelf(function(t){for(var e=data.getName(t),i=0;i<n.length;i++)if(!n[i].isSelected(e))return!1;return!0})}}}),t.registerPreprocessor(h)}}}]);