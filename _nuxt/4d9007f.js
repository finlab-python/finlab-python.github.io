(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{373:function(e,t,o){"use strict";o.r(t);o(228),o(44),o(67),o(157),o(58),o(18),o(68),o(117);var r={name:"TVChartContainer",props:{symbol:{default:"stock",type:String},price:{default:function(){},type:Object},indicators:{default:function(){},type:Object},interval:{default:"D",type:String},containerId:{default:"tv_chart_container",type:String},datafeedUrl:{default:"https://demo_feed.tradingview.com",type:String},libraryPath:{default:"/charting_library/",type:String},chartsStorageUrl:{default:"https://saveload.tradingview.com",type:String},chartsStorageApiVersion:{default:"1.1",type:String},clientId:{default:"tradingview.com",type:String},userId:{default:"public_user_id",type:String},fullscreen:{default:!1,type:Boolean},autosize:{default:!0,type:Boolean},studiesOverrides:{type:Object,default:function(){return{}}}},data:function(){return{isReady:!1,predictionOption:"未來20天"}},watch:{price:function(){null!==this.tvWidget&&this.isReady&&this.tvWidget.setSymbol(this.$props.symbol,"1D")},indicators:function(){console.log("change indicator"),this.isReady&&this.initStudies()}},tvWidget:null,mounted:function(){this.deleteTvWidget(),this.createTvWidget(),this.predictionOption=localStorage.getItem("predictionOption"),null===this.predictionOption&&(this.predictionOption="未來10天")},destroyed:function(){this.deleteTvWidget()},methods:{initStudies:function(){null!==this.tvWidget&&(console.log("----aaa----"),console.log(this.predictionOption),this.tvWidget.activeChart().removeAllStudies(),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[5]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[20]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[60]),this.tvWidget.activeChart().createStudy("Volume"),this.tvWidget.activeChart().createStudy("Prediction ML",!1,!1,[this.predictionOption]))},deleteTvWidget:function(){this.tvWidget&&(this.tvWidget.remove(),this.tvWidget=null,this.isReady=!1)},createTvWidget:function(){var e,t=this,o=this.createDatafeed(),r={symbol:this.symbol,datafeed:o,interval:this.interval,container:this.containerId,library_path:this.libraryPath,locale:(e=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search),(null===e?null:decodeURIComponent(e[1].replace(/\+/g," ")))||"zh_TW"),disabled_features:["header_widget","header_widget_dom_node","compare_symbol","display_market_status","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","timeframes_toolbar","use_localstorage_for_settings","volume_force_overlay","header_saveload","go_to_date","edit_buttons_in_legend","symbol_search_hot_key","border_around_the_chart","control_bar","context_menus","show_chart_property_page","countdown","study_market_minimized","main_series_scale_menu","display_market_status","remove_library_container_border","chart_property_page_style","property_pages","chart_property_page_scales","chart_property_page_background","source_selection_markers"],detail:!0,enabled_features:["hide_left_toolbar_by_default"],charts_storage_url:this.chartsStorageUrl,charts_storage_api_version:this.chartsStorageApiVersion,client_id:this.clientId,user_id:this.userId,fullscreen:this.fullscreen,autosize:!0,studies_overrides:this.studiesOverrides,debug:!1,custom_indicators_getter:function(e){return Promise.resolve([{name:"Prediction ML",metainfo:{_metainfoVersion:40,id:"Prediction ML@tv-basicstudies-1",scriptIdPart:"",name:"Prediction ML",description:"Prediction ML",shortDescription:"AI 年化影響力預測",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,format:{type:"percent",precision:1},plots:[{id:"EMA",type:"line"},{id:"plot_1",type:"colorer",target:"EMA",palette:"paletteId1"}],defaults:{styles:{EMA:{linestyle:0,visible:!0,linewidth:1,plottype:2,trackPrice:!1}},palettes:{paletteId1:{colors:{0:{color:"#ff267d",width:3,style:0},1:{color:"#5A4FCF",width:3,style:0},2:{color:"#6b5eff",width:3,style:0}}}},precision:4,inputs:{options:"未來5天"}},palettes:{paletteId1:{colors:{0:{name:"First color"},1:{name:"Second color"}}}},styles:{EMA:{title:"ML APR",histogramBase:0}},inputs:[{id:"options",type:"text",name:"預測",defval:t.predictionOption,options:["未來5天","未來10天","未來20天"]}]},constructor:function(){this.init=function(e,o){console.log("------test------"),localStorage.setItem("predictionOption",o(0)),t.predictionOption=o(0);var symbol={"未來5天":"rank5","未來10天":"rank10","未來20天":"rank20"}[o(0)]+"-"+t.symbol;e.new_sym(symbol,"1D","1D")},this.main=function(t,o){this._context=t,this._input=o,this._context.select_sym(1);var r=e.Std.close(this._context);return[100*r,r>0?0:2]}}}])}},n=this.$TVChart.Widget;this.isReady=!1;var l=new n(r);this.tvWidget=l,l.onChartReady((function(){l.activeChart().dataReady((function(){t.initStudies(),t.isReady=!0;var iframe=document.getElementsByTagName("iframe")[0],e=document.getElementsByClassName("TVChartContainer")[0];iframe.style.height=e.offsetHeight+"px"}))}))},createDatafeed:function(){var e=this,t=this;return{onReady:function(e){var t={supported_resolutions:["1D","1W","1M"],exchanges:[{value:"TPEX",name:"TPEX",desc:"TPEX"}],symbols_types:[{name:"stock",value:"stock"}]};console.log("[onReady]: Method call"),setTimeout((function(){return e(t)}))},searchSymbols:function(e,t,o,r){console.log("[searchSymbol]: Method call",symbolName)},resolveSymbol:function(t,o,r){var n=t===e.$props.symbol?t:t+"-"+e.$props.symbol,l={ticker:n,name:n,description:n,type:"TYPE",session:"0900-1330",timezone:"Asia/Taipei",exchange:"TWII",minmov:.01,pricescale:.01,has_intraday:!1,has_weekly_and_monthly:!1,supported_resolutions:["1D","1W","1M"]};setTimeout((function(){return o(l)}),0),console.log("[resolveSymbol]: Method call",t)},getBars:function(o,r,n,l,c){if(console.log("getBars",o),o.ticker==e.$props.symbol){var p=[];for(var i in t.$props.price.close){var d=t.$props.price.date[i].seconds;if(!(d<n.from||d>=n.to)){var h={open:t.$props.price.open[i],close:t.$props.price.close[i],high:t.$props.price.high[i],low:t.$props.price.low[i],volume:t.$props.price.volume[i],time:1e3*d};isNaN(h.open)||p.push(h)}}l(p,{noData:0===p.length})}else{var _=e.$props.indicators[o.ticker.split("-")[0]],y=e.$props.indicators.date,m=[];for(var v in _){var f=y[v].seconds;if(!(f<n.from||f>=n.to)){var w={open:_[v],close:_[v],high:_[v],low:_[v],time:1e3*f};isNaN(w.open)||m.push(w)}}l(m,{noData:0===m.length})}},subscribeBars:function(e,t,o,r,n){console.log("[subscribeBars]: Method call with subscribeUID:",r)},unsubscribeBars:function(e){console.log("[unsubscribeBars]: Method call with subscriberUID:",e)}}}}},n=o(40),component=Object(n.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"TVChartContainer",staticStyle:{height:"100%"},attrs:{id:e.containerId}})}),[],!1,null,null,null);t.default=component.exports}}]);