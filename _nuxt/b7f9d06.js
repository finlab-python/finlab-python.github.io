(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{471:function(e,t,r){"use strict";r.r(t);var o=r(489);r(276),r(277),r(30),r(44),r(64),r(192),r(87);var n={name:"TVChartContainer",props:{symbol:{default:"stock",type:String},price:{default:function(){},type:Object},indicators:{default:function(){},type:Object},interval:{default:"D",type:String},containerId:{default:"tv_chart_container",type:String},datafeedUrl:{default:"https://demo_feed.tradingview.com",type:String},libraryPath:{default:"/charting_library/",type:String},chartsStorageUrl:{default:"https://saveload.tradingview.com",type:String},chartsStorageApiVersion:{default:"1.1",type:String},clientId:{default:"tradingview.com",type:String},userId:{default:"public_user_id",type:String},fullscreen:{default:!1,type:Boolean},autosize:{default:!0,type:Boolean},studiesOverrides:{type:Object,default:function(){return{}}}},data:function(){return{isReady:!1,predictionOption:"未來20天"}},watch:{price:function(){null!==this.tvWidget&&this.isReady&&this.tvWidget.setSymbol(this.$props.symbol,"1D")},indicators:function(){console.log("change indicator"),this.isReady&&this.initStudies()}},tvWidget:null,mounted:function(){this.deleteTvWidget(),this.createTvWidget(),this.predictionOption=localStorage.getItem("predictionOption"),null===this.predictionOption&&(this.predictionOption="未來10天")},destroyed:function(){this.deleteTvWidget()},methods:{initStudies:function(){null!==this.tvWidget&&(console.log("----aaa----"),console.log(this.predictionOption),this.tvWidget.activeChart().removeAllStudies(),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[5]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[20]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[60]),this.tvWidget.activeChart().createStudy("Volume"))},deleteTvWidget:function(){this.tvWidget&&(this.tvWidget.remove(),this.tvWidget=null,this.isReady=!1)},createTvWidget:function(){var e,t=this,r=this.createDatafeed(),o={symbol:this.symbol,datafeed:r,interval:this.interval,container:this.containerId,library_path:this.libraryPath,locale:(e=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search),(null===e?null:decodeURIComponent(e[1].replace(/\+/g," ")))||"zh_TW"),disabled_features:["header_widget","header_widget_dom_node","compare_symbol","display_market_status","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","timeframes_toolbar","use_localstorage_for_settings","volume_force_overlay","header_saveload","go_to_date","edit_buttons_in_legend","symbol_search_hot_key","border_around_the_chart","control_bar","context_menus","show_chart_property_page","countdown","study_market_minimized","main_series_scale_menu","display_market_status","remove_library_container_border","chart_property_page_style","property_pages","chart_property_page_scales","chart_property_page_background","source_selection_markers"],detail:!0,enabled_features:["hide_left_toolbar_by_default"],charts_storage_url:this.chartsStorageUrl,charts_storage_api_version:this.chartsStorageApiVersion,client_id:this.clientId,user_id:this.userId,fullscreen:this.fullscreen,autosize:!0,studies_overrides:this.studiesOverrides,debug:!1},n=this.$TVChart.Widget;this.isReady=!1;var l=new n(o);this.tvWidget=l,l.onChartReady(function(){l.activeChart().dataReady(function(){t.initStudies(),t.isReady=!0;var iframe=document.getElementsByTagName("iframe")[0],e=document.getElementsByClassName("TVChartContainer")[0];iframe.style.height=e.offsetHeight+"px"})})},createDatafeed:function(){var e=this,t=this;return{onReady:function(e){var t={supported_resolutions:["1D","1W","1M"],exchanges:[{value:"TPEX",name:"TPEX",desc:"TPEX"}],symbols_types:[{name:"stock",value:"stock"}]};console.log("[onReady]: Method call"),setTimeout(function(){return e(t)})},searchSymbols:function(e,t,r,o){console.log("[searchSymbol]: Method call",symbolName)},resolveSymbol:function(t,r,o){var n=t===e.$props.symbol?t:t+"-"+e.$props.symbol,l={ticker:n,name:n,description:n,type:"TYPE",session:"0900-1330",timezone:"Asia/Taipei",exchange:"TWII",minmov:.01,pricescale:.01,has_intraday:!1,has_weekly_and_monthly:!1,supported_resolutions:["1D","1W","1M"]};setTimeout(function(){return r(l)},0),console.log("[resolveSymbol]: Method call",t)},getBars:function(r,n,l,c,d){if(r.ticker==e.$props.symbol){var p=[];for(var i in t.$props.price.close){var h=t.$props.price.date[i].seconds;if("number"==typeof t.$props.price.date[i]){var _=t.$props.price.date[i];Number(_/1e6);Object(o.a)("t")}if(!(h<l.from||h>=l.to)){var y={open:t.$props.price.open[i],close:t.$props.price.close[i],high:t.$props.price.high[i],low:t.$props.price.low[i],volume:t.$props.price.volume[i],time:1e3*h};isNaN(y.open)||p.push(y)}}console.log(p),c(p,{noData:0===p.length})}else{var v=e.$props.indicators[r.ticker.split("-")[0]],m=e.$props.indicators.date,f=[];for(var w in v){var S=m[w].seconds;if(!(S<l.from||S>=l.to)){var W={open:v[w],close:v[w],high:v[w],low:v[w],time:1e3*S};isNaN(W.open)||f.push(W)}}c(f,{noData:0===f.length})}},subscribeBars:function(e,t,r,o,n){console.log("[subscribeBars]: Method call with subscribeUID:",o)},unsubscribeBars:function(e){console.log("[unsubscribeBars]: Method call with subscriberUID:",e)}}}}},l=r(52),component=Object(l.a)(n,function(){return(0,this._self._c)("div",{staticClass:"TVChartContainer",staticStyle:{height:"100%"},attrs:{id:this.containerId}})},[],!1,null,null,null);t.default=component.exports},489:function(e,t,r){"use strict";function o(e){throw new TypeError('"'+e+'" is read-only')}r.d(t,"a",function(){return o})}}]);