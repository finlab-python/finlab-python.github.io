(window.webpackJsonp=window.webpackJsonp||[]).push([[64,12,37,42,47,49,53,57,59,60,61,66],{332:function(t,e,n){"use strict";var o=n(318),r=n(337),l=n(322),c=o.k,d=o.A,h=-1,f=function(){function t(option){var e=option.mappingMethod,n=option.type,r=this.option=o.d(option);this.type=n,this.mappingMethod=e,this._normalizeData=O[e];var l=t.visualHandlers[n];this.applyVisual=l.applyVisual,this.getColorMapper=l.getColorMapper,this._normalizedToVisual=l._normalizedToVisual[e],"piecewise"===e?(m(r),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,o.k(e,(function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)}))}(r)):"category"===e?r.categories?function(t){var e=t.categories,n=t.categoryMap={},r=t.visual;if(c(e,(function(t,e){n[t]=e})),!o.t(r)){var l=[];o.A(r)?c(r,(function(t,e){var o=n[e];l[null!=o?o:h]=t})):l[-1]=r,r=M(t,l)}for(var i=e.length-1;i>=0;i--)null==r[i]&&(delete n[e[i]],e.pop())}(r):m(r,!0):(o.b("linear"!==e||r.dataExtent),m(r))}return t.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},t.prototype.getNormalizer=function(){return o.c(this._normalizeData,this)},t.listVisualTypes=function(){return o.E(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(t,e,n){o.A(t)?o.k(t,e,n):e.call(n,t)},t.mapVisual=function(e,n,r){var l,c=o.t(e)?[]:o.A(e)?{}:(l=!0,null);return t.eachVisual(e,(function(t,e){var o=n.call(r,t,e);l?c=o:c[e]=o})),c},t.retrieveVisuals=function(e){var n,o={};return e&&c(t.visualHandlers,(function(t,r){e.hasOwnProperty(r)&&(o[r]=e[r],n=!0)})),n?o:null},t.prepareVisualTypes=function(t){if(o.t(t))t=t.slice();else{if(!d(t))return[];var e=[];c(t,(function(t,n){e.push(n)})),t=e}return t.sort((function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1})),t},t.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},t.findPieceIndex=function(t,e,n){for(var o,r=1/0,i=0,l=e.length;i<l;i++){var c=e[i].value;if(null!=c){if(c===t||"string"==typeof c&&c===t+"")return i;n&&m(c,i)}}for(i=0,l=e.length;i<l;i++){var d=e[i],h=d.interval,f=d.close;if(h){if(h[0]===-1/0){if(C(f[1],t,h[1]))return i}else if(h[1]===1/0){if(C(f[0],h[0],t))return i}else if(C(f[0],h[0],t)&&C(f[1],t,h[1]))return i;n&&m(h[0],i),n&&m(h[1],i)}}if(n)return t===1/0?e.length-1:t===-1/0?0:o;function m(e,n){var l=Math.abs(e-t);l<r&&(r=l,o=n)}},t.visualHandlers={color:{applyVisual:_("color"),getColorMapper:function(){var t=this.option;return o.c("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),x.call(this,t)}:function(e,n,o){var l=!!o;return!n&&(e=this._normalizeData(e)),o=r.a(e,t.parsedVisual,o),l?o:r.h(o,"rgba")},this)},_normalizedToVisual:{linear:function(t){return r.h(r.a(t,this.option.parsedVisual),"rgba")},category:x,piecewise:function(t,e){var n=k.call(this,e);return null==n&&(n=r.h(r.a(t,this.option.parsedVisual),"rgba")),n},fixed:S}},colorHue:v((function(t,e){return r.f(t,e)})),colorSaturation:v((function(t,e){return r.f(t,null,e)})),colorLightness:v((function(t,e){return r.f(t,null,null,e)})),colorAlpha:v((function(t,e){return r.e(t,e)})),decal:{applyVisual:_("decal"),_normalizedToVisual:{linear:null,category:x,piecewise:null,fixed:null}},opacity:{applyVisual:_("opacity"),_normalizedToVisual:w([0,1])},liftZ:{applyVisual:_("liftZ"),_normalizedToVisual:{linear:S,category:S,piecewise:S,fixed:S}},symbol:{applyVisual:function(t,e,n){n("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:y,category:x,piecewise:function(t,e){var n=k.call(this,e);return null==n&&(n=y.call(this,t)),n},fixed:S}},symbolSize:{applyVisual:_("symbolSize"),_normalizedToVisual:w([0,1])}},t}();function m(t,e){var n=t.visual,r=[];o.A(n)?c(n,(function(t){r.push(t)})):null!=n&&r.push(n);e||1!==r.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(r[1]=r[0]),M(t,r)}function v(t){return{applyVisual:function(e,n,o){var r=this.mapValueToVisual(e);o("color",t(n("color"),r))},_normalizedToVisual:w([0,1])}}function y(t){var e=this.option.visual;return e[Math.round(Object(l.j)(t,[0,1],[0,e.length-1],!0))]||{}}function _(t){return function(e,n,o){o(t,this.mapValueToVisual(e))}}function x(t){var e=this.option.visual;return e[this.option.loop&&t!==h?t%e.length:t]}function S(){return this.option.visual[0]}function w(t){return{linear:function(e){return Object(l.j)(e,t,this.option.visual,!0)},category:x,piecewise:function(e,n){var o=k.call(this,n);return null==o&&(o=Object(l.j)(e,t,this.option.visual,!0)),o},fixed:S}}function k(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var o=n[f.findPieceIndex(t,n)];if(o&&o.visual)return o.visual[this.type]}}function M(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=o.G(e,(function(t){return r.g(t)}))),e}var O={linear:function(t){return Object(l.j)(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=f.findPieceIndex(t,e,!0);if(null!=n)return Object(l.j)(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?h:e},fixed:o.J};function C(t,a,b){return t?a<=b:a<b}e.a=f},333:function(t,e,n){"use strict";var o=n(10),r=n(81),l=n(41),c=n(59),d=n(21),h=n(11),f=n(343),m=n(154),v=n(344),y=n(345),_=n(92),x=n(346),S=[],w=S.sort,k=h((function(){S.sort(void 0)})),M=h((function(){S.sort(null)})),O=m("sort"),C=!h((function(){if(_)return _<70;if(!(v&&v>3)){if(y)return!0;if(x)return x<603;var code,t,e,n,o="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(n=0;n<47;n++)S.push({k:t+n,v:e})}for(S.sort((function(a,b){return b.v-a.v})),n=0;n<S.length;n++)t=S[n].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));o({target:"Array",proto:!0,forced:k||!M||!O||!C},{sort:function(t){void 0!==t&&r(t);var e=l(this);if(C)return void 0===t?w.call(e):w.call(e,t);var n,o,h=[],m=c(e);for(o=0;o<m;o++)o in e&&h.push(e[o]);for(h=f(h,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:d(e)>d(n)?1:-1}}(t)),n=h.length,o=0;o<n;)e[o]=h[o++];for(;o<m;)delete e[o++];return e}})},342:function(t,e,n){"use strict";function o(t,e,n,o,c,d){t=t||0;var h=n[1]-n[0];if(null!=c&&(c=l(c,[0,h])),null!=d&&(d=Math.max(d,null!=c?c:0)),"all"===o){var f=Math.abs(e[1]-e[0]);f=l(f,[0,h]),c=d=l(f,[c,d]),o=0}e[0]=l(e[0],n),e[1]=l(e[1],n);var m=r(e,o);e[o]+=t;var v,y=c||0,_=n.slice();return m.sign<0?_[0]+=y:_[1]-=y,e[o]=l(e[o],_),v=r(e,o),null!=c&&(v.sign!==m.sign||v.span<c)&&(e[1-o]=e[o]+m.sign*c),v=r(e,o),null!=d&&v.span>d&&(e[1-o]=e[o]+v.sign*d),e}function r(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function l(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}n.d(e,"a",(function(){return o}))},343:function(t,e){var n=Math.floor,o=function(t,e){var c=t.length,d=n(c/2);return c<8?r(t,e):l(o(t.slice(0,d),e),o(t.slice(d),e),e)},r=function(t,e){for(var element,n,o=t.length,i=1;i<o;){for(n=i,element=t[i];n&&e(t[n-1],element)>0;)t[n]=t[--n];n!==i++&&(t[n]=element)}return t},l=function(t,e,n){for(var o=t.length,r=e.length,l=0,c=0,d=[];l<o||c<r;)l<o&&c<r?d.push(n(t[l],e[c])<=0?t[l++]:e[c++]):d.push(l<o?t[l++]:e[c++]);return d};t.exports=o},344:function(t,e,n){var o=n(80).match(/firefox\/(\d+)/i);t.exports=!!o&&+o[1]},345:function(t,e,n){var o=n(80);t.exports=/MSIE|Trident/.test(o)},346:function(t,e,n){var o=n(80).match(/AppleWebKit\/(\d+)\./);t.exports=!!o&&+o[1]},353:function(t,e,n){var o=n(10),r=n(362),l=n(120);o({target:"Array",proto:!0},{fill:r}),l("fill")},357:function(t,e,n){"use strict";function o(t,e){return t.type===e}n.d(e,"a",(function(){return o}))},362:function(t,e,n){"use strict";var o=n(41),r=n(119),l=n(59);t.exports=function(t){for(var e=o(this),n=l(e),c=arguments.length,d=r(c>1?arguments[1]:void 0,n),h=c>2?arguments[2]:void 0,f=void 0===h?n:r(h,n);f>d;)e[d++]=t;return e}},363:function(t,e,n){"use strict";var o=n(319),r=n(328),l=n(375),c=n(477),d=n(329),h=n(325),f=n(364),m=n(318),v=n(326),y=n(336),_=function(t){function e(data,e,n,o){var r=t.call(this)||this;return r.updateData(data,e,n,o),r}return Object(o.a)(e,t),e.prototype._createSymbol=function(t,data,e,n,o){this.removeAll();var l=Object(r.a)(t,-1,-1,2,2,null,o);l.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),l.drift=x,this._symbolType=t,this.add(l)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Object(h.q)(this.childAt(0))},e.prototype.downplay=function(){Object(h.B)(this.childAt(0))},e.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},e.prototype.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},e.prototype.updateData=function(data,t,n,o){this.silent=!1;var r=data.getItemVisual(t,"symbol")||"circle",c=data.hostModel,d=e.getSymbolSize(data,t),h=r!==this._symbolType,f=o&&o.disableAnimation;if(h){var m=data.getItemVisual(t,"symbolKeepAspect");this._createSymbol(r,data,t,d,m)}else{(y=this.childAt(0)).silent=!1;var v={scaleX:d[0]/2,scaleY:d[1]/2};f?y.attr(v):l.f(y,v,c,t),Object(l.e)(y)}if(this._updateCommon(data,t,d,n,o),h){var y=this.childAt(0);if(!f){v={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:y.style.opacity}};y.scaleX=y.scaleY=0,y.style.opacity=0,l.a(y,v,c,t)}}f&&this.childAt(0).stopAnimation("remove"),this._seriesModel=c},e.prototype._updateCommon=function(data,t,e,n,o){var l,c,d,_,x,S,w,k,M=this.childAt(0),O=data.hostModel;if(n&&(l=n.emphasisItemStyle,c=n.blurItemStyle,d=n.selectItemStyle,_=n.focus,x=n.blurScope,S=n.labelStatesModels,w=n.hoverScale,k=n.cursorStyle),!n||data.hasItemOption){var C=n&&n.itemModel?n.itemModel:data.getItemModel(t),I=C.getModel("emphasis");l=I.getModel("itemStyle").getItemStyle(),d=C.getModel(["select","itemStyle"]).getItemStyle(),c=C.getModel(["blur","itemStyle"]).getItemStyle(),_=I.get("focus"),x=I.get("blurScope"),S=Object(v.d)(C),w=I.getShallow("scale"),k=C.getShallow("cursor")}var A=data.getItemVisual(t,"symbolRotate");M.attr("rotation",(A||0)*Math.PI/180||0);var D=Object(r.b)(data.getItemVisual(t,"symbolOffset"),e);D&&(M.x=D[0],M.y=D[1]),k&&M.attr("cursor",k);var T=data.getItemVisual(t,"style"),j=T.fill;if(M instanceof y.a){var P=M.style;M.useStyle(Object(m.m)({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},T))}else M.__isEmptyBrush?M.useStyle(Object(m.m)({},T)):M.useStyle(T),M.style.decal=null,M.setColor(j,o&&o.symbolInnerColor),M.style.strokeNoScale=!0;var L=data.getItemVisual(t,"liftZ"),N=this._z2;null!=L?null==N&&(this._z2=M.z2,M.z2+=L):null!=N&&(M.z2=N,this._z2=null);var z=o&&o.useNameLabel;Object(v.f)(M,S,{labelFetcher:O,labelDataIndex:t,defaultText:function(t){return z?data.getName(t):Object(f.b)(data,t)},inheritColor:j,defaultOpacity:T.opacity}),this._sizeX=e[0]/2,this._sizeY=e[1]/2;var V=M.ensureState("emphasis");if(V.style=l,M.ensureState("select").style=d,M.ensureState("blur").style=c,w){var R=Math.max(1.1,3/this._sizeY);V.scaleX=this._sizeX*R,V.scaleY=this._sizeY*R}this.setSymbolScale(1),Object(h.n)(this,_,x)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e){var n=this.childAt(0),o=this._seriesModel,r=Object(d.a)(this).dataIndex,c=e&&e.animation;if(this.silent=n.silent=!0,e&&e.fadeLabel){var h=n.getTextContent();h&&l.c(h,{style:{opacity:0}},o,{dataIndex:r,removeOpt:c,cb:function(){n.removeTextContent()}})}else n.removeTextContent();l.c(n,{style:{opacity:0},scaleX:0,scaleY:0},o,{dataIndex:r,cb:t,removeOpt:c})},e.getSymbolSize=function(data,t){return Object(r.c)(data.getItemVisual(t,"symbolSize"))},e}(c.a);function x(t,e){this.parent.drift(t,e)}e.a=_},364:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return c}));var o=n(410),r=n(318);function l(data,t){var e=data.mapDimensionsAll("defaultedLabel"),n=e.length;if(1===n){var r=Object(o.e)(data,t,e[0]);return null!=r?r+"":null}if(n){for(var l=[],i=0;i<e.length;i++)l.push(Object(o.e)(data,t,e[i]));return l.join(" ")}}function c(data,t){var e=data.mapDimensionsAll("defaultedLabel");if(!Object(r.t)(t))return t+"";for(var n=[],i=0;i<e.length;i++){var o=data.getDimensionIndex(e[i]);o>=0&&n.push(t[o])}return n.join(" ")}},365:function(t,e,n){},366:function(t,e,n){"use strict";n.r(e);var o=n(25),r=(n(61),n(18),n(28),n(340)),l=n(562),c=n(318);function d(t){t.eachSeriesByType("radar",(function(t){var data=t.getData(),e=[],n=t.coordinateSystem;if(n){var o=n.getIndicatorAxes();c.k(o,(function(t,r){data.each(data.mapDimension(o[r].dim),(function(t,o){e[o]=e[o]||[];var l=n.dataToPoint(t,r);e[o][r]=h(l)?l:f(n)}))})),data.each((function(t){var o=c.o(e[t],(function(t){return h(t)}))||f(n);e[t].push(o.slice()),data.setItemLayout(t,e[t])}))}}))}function h(t){return!isNaN(t[0])&&!isNaN(t[1])}function f(t){return[t.cx,t.cy]}function m(option){var t=option.polar;if(t){c.t(t)||(t=[t]);var e=[];c.k(t,(function(t,n){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),option.radar=option.radar||[],c.t(option.radar)||(option.radar=[option.radar]),option.radar.push(t)):e.push(t)})),option.polar=e}c.k(option.series,(function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)}))}var v=n(319),y=n(320),_=n(575),x=n(576),S=n(375),w=n(477),k=n(325),symbol=n(328),M=n(369),O=n(326),C=n(336),I=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(v.a)(e,t),e.prototype.render=function(t,e,n){var o=t.coordinateSystem,r=this.group,data=t.getData(),l=this._data;function d(data,t){var e=data.getItemVisual(t,"symbol")||"circle";if("none"!==e){var n=symbol.c(data.getItemVisual(t,"symbolSize")),o=symbol.a(e,-1,-1,2,2),r=data.getItemVisual(t,"symbolRotate")||0;return o.attr({style:{strokeNoScale:!0},z2:100,scaleX:n[0]/2,scaleY:n[1]/2,rotation:r*Math.PI/180||0}),o}}function h(e,n,o,data,r,l){o.removeAll();for(var i=0;i<n.length-1;i++){var c=d(data,r);c&&(c.__dimIdx=i,e[i]?(c.setPosition(e[i]),y[l?"initProps":"updateProps"](c,{x:n[i][0],y:n[i][1]},t,r)):c.setPosition(n[i]),o.add(c))}}function f(t){return c.G(t,(function(t){return[o.cx,o.cy]}))}data.diff(l).add((function(e){var n=data.getItemLayout(e);if(n){var polygon=new _.a,polyline=new x.a,o={shape:{points:n}};polygon.shape.points=f(n),polyline.shape.points=f(n),S.a(polygon,o,t,e),S.a(polyline,o,t,e);var r=new w.a,l=new w.a;r.add(polyline),r.add(polygon),r.add(l),h(polyline.shape.points,n,l,data,e,!0),data.setItemGraphicEl(e,r)}})).update((function(e,n){var o=l.getItemGraphicEl(n),polyline=o.childAt(0),polygon=o.childAt(1),r=o.childAt(2),c={shape:{points:data.getItemLayout(e)}};c.shape.points&&(h(polyline.shape.points,c.shape.points,r,data,e,!1),Object(S.e)(polygon),Object(S.e)(polyline),S.f(polyline,c,t),S.f(polygon,c,t),data.setItemGraphicEl(e,o))})).remove((function(t){r.remove(l.getItemGraphicEl(t))})).execute(),data.eachItemGraphicEl((function(t,e){var n=data.getItemModel(e),polyline=t.childAt(0),polygon=t.childAt(1),o=t.childAt(2),l=data.getItemVisual(e,"style"),d=l.fill;r.add(t),polyline.useStyle(c.j(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:d})),Object(k.H)(polyline,n,"lineStyle"),Object(k.H)(polygon,n,"areaStyle");var h=n.getModel("areaStyle"),f=h.isEmpty()&&h.parentModel.isEmpty();polygon.ignore=f,c.k(["emphasis","select","blur"],(function(t){var e=n.getModel([t,"areaStyle"]),o=e.isEmpty()&&e.parentModel.isEmpty();polygon.ensureState(t).ignore=o&&f})),polygon.useStyle(c.j(h.getAreaStyle(),{fill:d,opacity:.7,decal:l.decal}));var m=n.getModel("emphasis"),v=m.getModel("itemStyle").getItemStyle();o.eachChild((function(t){if(t instanceof C.a){var o=t.style;t.useStyle(c.m({image:o.image,x:o.x,y:o.y,width:o.width,height:o.height},l))}else t.useStyle(l),t.setColor(d),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=c.d(v);var r=data.getStore().get(data.getDimensionIndex(t.__dimIdx),e);(null==r||isNaN(r))&&(r=""),Object(O.f)(t,Object(O.d)(n),{labelFetcher:data.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:r,inheritColor:d,defaultOpacity:l.opacity})})),Object(k.n)(t,m.get("focus"),m.get("blurScope"))})),this._data=data},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(M.a),A=I,D=n(370),T=n(384),j=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),P=n(330),L=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(v.a)(e,t),e.prototype.init=function(option){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new j(c.c(this.getData,this),c.c(this.getRawData,this))},e.prototype.getInitialData=function(option,t){return Object(T.a)(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,n){var data=this.getData(),o=this.coordinateSystem.getIndicatorAxes(),r=this.getData().getName(t),l=""===r?this.name:r,d=Object(P.e)(this,t);return Object(P.c)("section",{header:l,sortBlocks:!0,blocks:c.G(o,(function(e){var n=data.get(data.mapDimension(e.dim),t);return Object(P.c)("nameValue",{markerType:"subItem",markerColor:d,name:e.name,value:n,sortParam:n})}))})},e.prototype.getTooltipPosition=function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,o=e.getValues(c.G(n.dimensions,(function(t){return e.mapDimension(t)})),t),i=0,r=o.length;i<r;i++)if(!isNaN(o[i])){var l=n.getIndicatorAxes();return n.coordToPoint(l[i].dataToCoord(o[i]),i)}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={zlevel:0,z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(D.a),N=L,z=n(432),V=n(355),R=n(433),E=n(334),B=z.a.value;function H(t,e){return c.j({show:e},t)}var G=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(v.a)(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),o=this.get("axisLine"),r=this.get("axisTick"),l=this.get("axisLabel"),d=this.get("axisName"),h=this.get(["axisName","show"]),f=this.get(["axisName","formatter"]),m=this.get("axisNameGap"),v=this.get("triggerEvent"),y=c.G(this.get("indicator")||[],(function(y){null!=y.max&&y.max>0&&!y.min?y.min=0:null!=y.min&&y.min<0&&!y.max&&(y.max=0);var _=d;null!=y.color&&(_=c.j({color:y.color},d));var x=c.H(c.d(y),{boundaryGap:t,splitNumber:e,scale:n,axisLine:o,axisTick:r,axisLabel:l,name:y.text,nameLocation:"end",nameGap:m,nameTextStyle:_,triggerEvent:v},!1);if(h||(x.name=""),"string"==typeof f){var S=x.name;x.name=f.replace("{value}",null!=S?S:"")}else"function"==typeof f&&(x.name=f(x.name,x));var w=new V.a(x,null,this.ecModel);return c.I(w,R.a.prototype),w.mainType="radar",w.componentIndex=this.componentIndex,w}),this);this._indicatorModels=y},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:c.H({lineStyle:{color:"#bbb"}},B.axisLine),axisLabel:H(B.axisLabel,!1),axisTick:H(B.axisTick,!1),splitLine:H(B.splitLine,!0),splitArea:H(B.splitArea,!0),indicator:[]},e}(E.a),W=G,F=n(430),U=n(572),Y=n(653),X=n(335),Z=["axisLine","axisTickLabel","axisName"],$=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(v.a)(e,t),e.prototype.render=function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),o=c.G(n,(function(t){return new F.a(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}));c.k(o,(function(t){c.k(Z,t.add,t),this.group.add(t.getGroup())}),this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var o=t.get("shape"),r=t.getModel("splitLine"),l=t.getModel("splitArea"),d=r.getModel("lineStyle"),h=l.getModel("areaStyle"),f=r.get("show"),m=l.get("show"),v=d.get("color"),S=h.get("color"),w=c.t(v)?v:[v],k=c.t(S)?S:[S],M=[],O=[];if("circle"===o)for(var C=n[0].getTicksCoords(),I=e.cx,A=e.cy,i=0;i<C.length;i++){if(f)M[V(M,w,i)].push(new U.a({shape:{cx:I,cy:A,r:C[i].coord}}));if(m&&i<C.length-1)O[V(O,k,i)].push(new Y.a({shape:{cx:I,cy:A,r0:C[i].coord,r:C[i+1].coord}}))}else{var D,T=c.G(n,(function(t,n){var o=t.getTicksCoords();return D=null==D?o.length-1:Math.min(o.length-1,D),c.G(o,(function(t){return e.coordToPoint(t.coord,n)}))})),j=[];for(i=0;i<=D;i++){for(var P=[],L=0;L<n.length;L++)P.push(T[L][i]);if(P[0]&&P.push(P[0].slice()),f)M[V(M,w,i)].push(new x.a({shape:{points:P}}));if(m&&j)O[V(O,k,i-1)].push(new _.a({shape:{points:P.concat(j)}}));j=P.slice().reverse()}}var N=d.getLineStyle(),z=h.getAreaStyle();c.k(O,(function(t,e){this.group.add(y.mergePath(t,{style:c.j({stroke:"none",fill:k[e%k.length]},z),silent:!0}))}),this),c.k(M,(function(t,e){this.group.add(y.mergePath(t,{style:c.j({fill:"none",stroke:w[e%w.length]},N),silent:!0}))}),this)}function V(t,e,n){var o=n%e.length;return t[o]=t[o]||[],o}},e.type="radar",e}(X.a),K=$,J=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;return r.type="value",r.angle=0,r.name="",r}return Object(v.a)(e,t),e}(n(437).a),Q=n(420),tt=n(322),et=n(352),it=n(387),nt=function(){function t(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=Object(c.G)(t.getIndicatorModels(),(function(t,e){var n="indicator_"+e,o=new J(n,new Q.a);return o.name=t.get("name"),o.model=t,t.axis=o,this.dimensions.push(n),o}),this),this.resize(t,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,o=Math.sqrt(e*e+n*n);e/=o,n/=o;for(var r,l=Math.atan2(-n,e),c=1/0,d=-1,i=0;i<this._indicatorAxes.length;i++){var h=this._indicatorAxes[i],f=Math.abs(l-h.angle);f<c&&(r=h,d=i,c=f)}return[d,+(r&&r.coordToData(o))]},t.prototype.resize=function(t,e){var n=t.get("center"),o=e.getWidth(),r=e.getHeight(),l=Math.min(o,r)/2;this.cx=tt.n(n[0],o),this.cy=tt.n(n[1],r),this.startAngle=t.get("startAngle")*Math.PI/180;var d=t.get("radius");"string"!=typeof d&&"number"!=typeof d||(d=[0,d]),this.r0=tt.n(d[0],l),this.r=tt.n(d[1],l),Object(c.k)(this._indicatorAxes,(function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n}),this)},t.prototype.update=function(t,e){var n=this._indicatorAxes,o=this._model;Object(c.k)(n,(function(t){t.scale.setExtent(1/0,-1/0)})),t.eachSeriesByType("radar",(function(e,r){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===o){var data=e.getData();Object(c.k)(n,(function(t){t.scale.unionExtentFromData(data,data.mapDimension(t.dim))}))}}),this);var r=o.get("splitNumber");function l(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),n=t/e;return 2===n?n=5:n*=2,n*e}Object(c.k)(n,(function(t,e){var n=Object(et.f)(t.scale,t.model).extent;Object(et.i)(t.scale,t.model);var o=t.model,c=t.scale,d=Object(it.b)(c,o.get("min",!0)),h=Object(it.b)(c,o.get("max",!0)),f=c.getInterval();if(null!=d&&null!=h)c.setExtent(+d,+h),c.setInterval((h-d)/r);else if(null!=d){var m=void 0;do{m=d+f*r,c.setExtent(+d,m),c.setInterval(f),f=l(f)}while(m<n[1]&&isFinite(m)&&isFinite(n[1]))}else if(null!=h){var v=void 0;do{v=h-f*r,c.setExtent(v,+h),c.setInterval(f),f=l(f)}while(v>n[0]&&isFinite(v)&&isFinite(n[0]))}else{c.getTicks().length-1>r&&(f=l(f));m=Math.ceil(n[1]/f)*f,v=tt.r(m-f*r);c.setExtent(v,m),c.setInterval(f)}}))},t.prototype.convertToPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.create=function(e,n){var o=[];return e.eachComponent("radar",(function(r){var l=new t(r,e,n);o.push(l),r.coordinateSystem=l})),e.eachSeriesByType("radar",(function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=o[t.get("radarIndex")||0])})),o},t.dimensions=[],t}();function ot(t){t.registerCoordinateSystem("radar",nt),t.registerComponentModel(W),t.registerComponentView(K),t.registerVisual({seriesType:"radar",reset:function(t){var data=t.getData();data.each((function(t){data.setItemVisual(t,"legendIcon","roundRect")})),data.setVisual("legendIcon","roundRect")}})}var at=n(412),st=n(870),lt=n(868),ut=n(359);Object(r.a)([l.a,at.a,st.a,function(t){Object(r.a)(ot),t.registerChartView(A),t.registerSeriesModel(N),t.registerLayout(d),t.registerProcessor({seriesType:"radar",reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var data=t.getData();data.filterSelf((function(t){for(var e=data.getName(t),i=0;i<n.length;i++)if(!n[i].isSelected(e))return!1;return!0}))}}}),t.registerPreprocessor(m)},lt.a]);var ct={name:"HelloWorld",props:{height:"300px",names:{default:function(){return null}},indicators:{default:function(){return["a","b","c"]}},values:{default:function(){return{values:{a:.5,b:.8,c:.3}}}}},components:{VChart:ut.b},provide:Object(o.a)({},ut.a,"light"),data:function(){return{}},mounted:function(){},computed:{option:function(){return{scale:{pointLabels:{fontSize:20}},color:["rgba(255, 133, 182, 0.5)","#FFE43488","#56A3F188","#FF917C88"],legend:{data:this.seriesNames,bottom:0,right:0,textStyle:{fontSize:18}},radar:{indicator:this.indicators_,shape:"circle",startAngle:135,axisName:{fontSize:18}},series:[{type:"radar",data:this.valueData}]}},indicators_:function(){return this.indicators.map((function(t){return{name:t,max:1}}))},seriesNames:function(){if(this.names)return this.names;var t=[];for(var e in this.values)t.push(e);return t},valueData:function(){var label={show:1==this.seriesNames.length,formatter:function(t){return Math.round(1e3*t.value)/10+"%"}},t={},e=[];for(var n in this.values){var o=this.values[n],r=[];for(var i in this.indicators)r.push(o[this.indicators[i]]);e.push({value:r,name:this.seriesNames[n],label:label,areaStyle:t,textStyle:{color:"black",fontSize:20}})}return e}}},ht=n(40),component=Object(ht.a)(ct,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-chart",{staticClass:"chart",staticStyle:{"z-index":"0"},style:"height:300px",attrs:{option:t.option,autoresize:""}})}),[],!1,null,"768cd074",null);e.default=component.exports},371:function(t,e,n){"use strict";var o=n(477),r=n(375),l=n(363),c=n(318),d=n(326);function h(data,t,e,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(e))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&"none"!==data.getItemVisual(e,"symbol")}function f(t){return null==t||Object(c.A)(t)||(t={isIgnore:t}),t||{}}function m(data){var t=data.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),hoverScale:e.get("scale"),labelStatesModels:Object(d.d)(t),cursorStyle:t.get("cursor")}}var v=function(){function t(t){this.group=new o.a,this._SymbolCtor=t||l.a}return t.prototype.updateData=function(data,t){t=f(t);var e=this.group,n=data.hostModel,o=this._data,l=this._SymbolCtor,c=t.disableAnimation,d=m(data),v={disableAnimation:c},y=t.getSymbolPoint||function(t){return data.getItemLayout(t)};o||e.removeAll(),data.diff(o).add((function(n){var o=y(n);if(h(data,o,n,t)){var r=new l(data,n,d,v);r.setPosition(o),data.setItemGraphicEl(n,r),e.add(r)}})).update((function(f,m){var _=o.getItemGraphicEl(m),x=y(f);if(h(data,x,f,t)){var S=data.getItemVisual(f,"symbol")||"circle",w=_&&_.getSymbolType&&_.getSymbolType();if(!_||w&&w!==S)e.remove(_),(_=new l(data,f,d,v)).setPosition(x);else{_.updateData(data,f,d,v);var k={x:x[0],y:x[1]};c?_.attr(k):r.f(_,k,n)}e.add(_),data.setItemGraphicEl(f,_)}else e.remove(_)})).remove((function(t){var n=o.getItemGraphicEl(t);n&&n.fadeOut((function(){e.remove(n)}))})).execute(),this._getSymbolPoint=y,this._data=data},t.prototype.isPersistent=function(){return!0},t.prototype.updateLayout=function(){var t=this,data=this._data;data&&data.eachItemGraphicEl((function(e,n){var o=t._getSymbolPoint(n);e.setPosition(o),e.markRedraw()}))},t.prototype.incrementalPrepareUpdate=function(data){this._seriesScope=m(data),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,data,e){function n(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}e=f(e);for(var o=t.start;o<t.end;o++){var r=data.getItemLayout(o);if(h(data,r,o,e)){var l=new this._SymbolCtor(data,o,this._seriesScope);l.traverse(n),l.setPosition(r),this.group.add(l),data.setItemGraphicEl(o,l)}}},t.prototype.remove=function(t){var e=this.group,data=this._data;data&&t?data.eachItemGraphicEl((function(t){t.fadeOut((function(){e.remove(t)}))})):e.removeAll()},t}();e.a=v},372:function(t,e,n){"use strict";n.r(e);n(47),n(44),n(58);var o=n(19),r={props:{value:{type:String},autocomplete:{type:String,default:"true"}},data:function(){return{sid:[],sdict:{},candidates:[],currentStock:"",text:"",target:0,composing:!1,history:[]}},created:function(){this.text=this.value;var t=this;o.c.collection("twStock").doc("searchTree").get().then((function(e){if(e.exists){var data=e.data();t.sdict=data.searchTree.sdict,t.slist=data.searchTree.slist}else console.log("cannot find strategy menu")}))},methods:{moveCursor:function(t){0!=this.candidates.length?this.target+=t:this.target=-1},selectStock:function(t){t.preventDefault(),-1!=this.target&&this.chooseStock(this.candidates[this.target])},chooseStock:function(s){if(!this.composing){var t=this;console.log("emit",s),this.$emit("input",s),this.history.unshift(s),this.history=this.history.filter((function(e,n){return t.history.indexOf(e)==n})),this.history.length>3&&(this.history=[this.history[0],this.history[1],this.history[2]]),this.currentStock=s,this.candidates=[],this.text=s,this.target=-1,document.getElementById("search-box").blur()}},clearStock:function(t){this.text="",this.candidates=[],this.target=-1,this.$emit("update","")},digitupdate:function(t){var s,e=t.target.value;this.$emit("update",e),(s=e).replace(/[^\x00-\xff]/g,"rr").length==s.length&&this.update(t)},update:function(t){var e=event.target.value;if(this.text=e,""!=e){var n=this.sdict;for(var i in e){var o=e[i];if(!(o in n))return void(this.candidates=["找不到此股票代號"]);n=n[o]}for(var r=[],l=[n];l&&0!=l.length&&!((n=l.pop())===parseInt(n,10)&&(r.push(this.slist[n]),r.length>20));)for(var c in n)l.unshift(n[c]);this.candidates=r,1==this.candidates.length&&this.chooseStock(this.candidates[0])}else this.candidates=[]}}},l=(n(388),n(40)),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{staticClass:"uk-search uk-search-navbar uk-card uk-flex",staticStyle:{width:"100%",border:"1px solid #ddd",background:"rgba(255, 255, 255, 0.2)"}},[n("span",{staticStyle:{"padding-left":"10px"},attrs:{"uk-search-icon":""}}),t._v(" "),n("input",{staticClass:"uk-search-input uk-text-primary uk-text-light",staticStyle:{"padding-left":"60px"},attrs:{id:"search-box",name:"Search",type:"search",placeholder:"股票代號",autocomplete:"off"},domProps:{value:t.text},on:{change:t.digitupdate,input:t.digitupdate,compositionstart:function(e){t.composing=!0},compositionend:function(e){t.composing=!1,t.update()},focus:t.clearStock,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.moveCursor(1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.moveCursor(-1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.selectStock.apply(null,arguments))}]}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.candidates.length>0&&"true"==t.autocomplete,expression:"candidates.length > 0 && autocomplete == 'true'"}],staticClass:"uk-flex uk-flex-wrap uk-flex-wrap-around"},t._l(t.candidates,(function(e,i){return n("div",{key:e,staticClass:"\n          uk-card uk-card-default uk-card-body uk-padding-small uk-card-hover\n        ",staticStyle:{cursor:"pointer","border-radius":"10px",margin:"20px 20px 0 0"},on:{click:function(n){return t.chooseStock(e)}}},[t._v("\n        "+t._s(i==t.target?e+" * ":e)+"\n      ")])})),0)])}),[],!1,null,"3c0325ef",null);e.default=component.exports},373:function(t,e,n){"use strict";n.r(e);n(228),n(44),n(66),n(157),n(58),n(18),n(68),n(117);var o={name:"TVChartContainer",props:{symbol:{default:"stock",type:String},price:{default:function(){},type:Object},indicators:{default:function(){},type:Object},interval:{default:"D",type:String},containerId:{default:"tv_chart_container",type:String},datafeedUrl:{default:"https://demo_feed.tradingview.com",type:String},libraryPath:{default:"/charting_library/",type:String},chartsStorageUrl:{default:"https://saveload.tradingview.com",type:String},chartsStorageApiVersion:{default:"1.1",type:String},clientId:{default:"tradingview.com",type:String},userId:{default:"public_user_id",type:String},fullscreen:{default:!1,type:Boolean},autosize:{default:!0,type:Boolean},studiesOverrides:{type:Object,default:function(){return{}}}},data:function(){return{isReady:!1,predictionOption:"未來20天"}},watch:{price:function(){null!==this.tvWidget&&this.isReady&&this.tvWidget.setSymbol(this.$props.symbol,"1D")},indicators:function(){console.log("change indicator"),this.isReady&&this.initStudies()}},tvWidget:null,mounted:function(){this.deleteTvWidget(),this.createTvWidget(),this.predictionOption=localStorage.getItem("predictionOption"),null===this.predictionOption&&(this.predictionOption="未來10天")},destroyed:function(){this.deleteTvWidget()},methods:{initStudies:function(){null!==this.tvWidget&&(console.log("----aaa----"),console.log(this.predictionOption),this.tvWidget.activeChart().removeAllStudies(),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[5]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[20]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[60]),this.tvWidget.activeChart().createStudy("Volume"),this.tvWidget.activeChart().createStudy("Prediction ML",!1,!1,[this.predictionOption]))},deleteTvWidget:function(){this.tvWidget&&(this.tvWidget.remove(),this.tvWidget=null,this.isReady=!1)},createTvWidget:function(){var t,e=this,n=this.createDatafeed(),o={symbol:this.symbol,datafeed:n,interval:this.interval,container:this.containerId,library_path:this.libraryPath,locale:(t=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search),(null===t?null:decodeURIComponent(t[1].replace(/\+/g," ")))||"zh_TW"),disabled_features:["header_widget","header_widget_dom_node","compare_symbol","display_market_status","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","timeframes_toolbar","use_localstorage_for_settings","volume_force_overlay","header_saveload","go_to_date","edit_buttons_in_legend","symbol_search_hot_key","border_around_the_chart","control_bar","context_menus","show_chart_property_page","countdown","study_market_minimized","main_series_scale_menu","display_market_status","remove_library_container_border","chart_property_page_style","property_pages","chart_property_page_scales","chart_property_page_background","source_selection_markers"],detail:!0,enabled_features:["hide_left_toolbar_by_default"],charts_storage_url:this.chartsStorageUrl,charts_storage_api_version:this.chartsStorageApiVersion,client_id:this.clientId,user_id:this.userId,fullscreen:this.fullscreen,autosize:!0,studies_overrides:this.studiesOverrides,debug:!1,custom_indicators_getter:function(t){return Promise.resolve([{name:"Prediction ML",metainfo:{_metainfoVersion:40,id:"Prediction ML@tv-basicstudies-1",scriptIdPart:"",name:"Prediction ML",description:"Prediction ML",shortDescription:"AI 年化影響力預測",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,format:{type:"percent",precision:1},plots:[{id:"EMA",type:"line"},{id:"plot_1",type:"colorer",target:"EMA",palette:"paletteId1"}],defaults:{styles:{EMA:{linestyle:0,visible:!0,linewidth:1,plottype:2,trackPrice:!1}},palettes:{paletteId1:{colors:{0:{color:"#ff267d",width:3,style:0},1:{color:"#5A4FCF",width:3,style:0},2:{color:"#6b5eff",width:3,style:0}}}},precision:4,inputs:{options:"未來5天"}},palettes:{paletteId1:{colors:{0:{name:"First color"},1:{name:"Second color"}}}},styles:{EMA:{title:"ML APR",histogramBase:0}},inputs:[{id:"options",type:"text",name:"預測",defval:e.predictionOption,options:["未來5天","未來10天","未來20天"]}]},constructor:function(){this.init=function(t,n){console.log("------test------"),localStorage.setItem("predictionOption",n(0)),e.predictionOption=n(0);var symbol={"未來5天":"rank5","未來10天":"rank10","未來20天":"rank20"}[n(0)]+"-"+e.symbol;t.new_sym(symbol,"1D","1D")},this.main=function(e,n){this._context=e,this._input=n,this._context.select_sym(1);var o=t.Std.close(this._context);return[100*o,o>0?0:2]}}}])}},r=this.$TVChart.Widget;this.isReady=!1;var l=new r(o);this.tvWidget=l,l.onChartReady((function(){l.activeChart().dataReady((function(){e.initStudies(),e.isReady=!0;var iframe=document.getElementsByTagName("iframe")[0],t=document.getElementsByClassName("TVChartContainer")[0];iframe.style.height=t.offsetHeight+"px"}))}))},createDatafeed:function(){var t=this,e=this;return{onReady:function(t){var e={supported_resolutions:["1D","1W","1M"],exchanges:[{value:"TPEX",name:"TPEX",desc:"TPEX"}],symbols_types:[{name:"stock",value:"stock"}]};console.log("[onReady]: Method call"),setTimeout((function(){return t(e)}))},searchSymbols:function(t,e,n,o){console.log("[searchSymbol]: Method call",symbolName)},resolveSymbol:function(e,n,o){var r=e===t.$props.symbol?e:e+"-"+t.$props.symbol,l={ticker:r,name:r,description:r,type:"TYPE",session:"0900-1330",timezone:"Asia/Taipei",exchange:"TWII",minmov:.01,pricescale:.01,has_intraday:!1,has_weekly_and_monthly:!1,supported_resolutions:["1D","1W","1M"]};setTimeout((function(){return n(l)}),0),console.log("[resolveSymbol]: Method call",e)},getBars:function(n,o,r,l,c){if(console.log("getBars",n),n.ticker==t.$props.symbol){var p=[];for(var i in e.$props.price.close){var d=e.$props.price.date[i].seconds;if(!(d<r.from||d>=r.to)){var h={open:e.$props.price.open[i],close:e.$props.price.close[i],high:e.$props.price.high[i],low:e.$props.price.low[i],volume:e.$props.price.volume[i],time:1e3*d};isNaN(h.open)||p.push(h)}}l(p,{noData:0===p.length})}else{var f=t.$props.indicators[n.ticker.split("-")[0]],m=t.$props.indicators.date,v=[];for(var y in f){var _=m[y].seconds;if(!(_<r.from||_>=r.to)){var x={open:f[y],close:f[y],high:f[y],low:f[y],time:1e3*_};isNaN(x.open)||v.push(x)}}l(v,{noData:0===v.length})}},subscribeBars:function(t,e,n,o,r){console.log("[subscribeBars]: Method call with subscribeUID:",o)},unsubscribeBars:function(t){console.log("[unsubscribeBars]: Method call with subscriberUID:",t)}}}}},r=n(40),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"TVChartContainer",staticStyle:{height:"100%"},attrs:{id:t.containerId}})}),[],!1,null,null,null);e.default=component.exports},374:function(t,e,n){},378:function(t,e,n){"use strict";var o=n(318),r=n(348),l=n(381),c=n(428),d=n(321),h=n(396),f=function(t){this.coordSysDims=[],this.axisMap=Object(o.g)(),this.categoryAxisMap=Object(o.g)(),this.coordSysName=t};var m={cartesian2d:function(t,e,n,o){var r=t.getReferringComponents("xAxis",d.b).models[0],l=t.getReferringComponents("yAxis",d.b).models[0];e.coordSysDims=["x","y"],n.set("x",r),n.set("y",l),v(r)&&(o.set("x",r),e.firstCategoryDimIndex=0),v(l)&&(o.set("y",l),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,o){var r=t.getReferringComponents("singleAxis",d.b).models[0];e.coordSysDims=["single"],n.set("single",r),v(r)&&(o.set("single",r),e.firstCategoryDimIndex=0)},polar:function(t,e,n,o){var r=t.getReferringComponents("polar",d.b).models[0],l=r.findAxisModel("radiusAxis"),c=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",l),n.set("angle",c),v(l)&&(o.set("radius",l),e.firstCategoryDimIndex=0),v(c)&&(o.set("angle",c),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,o){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var l=t.ecModel,c=l.getComponent("parallel",t.get("parallelIndex")),d=e.coordSysDims=c.dimensions.slice();Object(o.k)(c.parallelAxisIndex,(function(t,o){var c=l.getComponent("parallelAxis",t),h=d[o];n.set(h,c),v(c)&&(r.set(h,c),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=o))}))}};function v(t){return"category"===t.get("type")}var y=n(391),_=n(338),x=n(409),S=n(389);e.a=function(t,e,n){n=n||{};var source,v=e.getSourceManager(),w=!1;t?(w=!0,source=Object(y.c)(t)):w=(source=v.getSource()).sourceFormat===S.f;var k=function(t){var e=t.get("coordinateSystem"),n=new f(e),o=m[e];if(o)return o(t,n,n.axisMap,n.categoryAxisMap),n}(e),M=function(t,e){var n,r=t.get("coordinateSystem"),l=h.a.get(r);return e&&e.coordSysDims&&(n=o.G(e.coordSysDims,(function(t){var n={name:t},o=e.axisMap.get(t);if(o){var r=o.get("type");n.type=Object(c.a)(r)}return n}))),n||(n=l&&(l.getDimensionsInfo?l.getDimensionsInfo():l.dimensions.slice())||["x","y"]),n}(e,k),O=n.useEncodeDefaulter,C=o.w(O)?O:O?o.i(x.c,M,e):null,I={coordDimensions:M,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:C,canOmitUnusedDimensions:!w},A=Object(l.a)(source,I),D=function(t,e,n){var r,l;return n&&o.k(t,(function(t,o){var c=t.coordDim,d=n.categoryAxisMap.get(c);d&&(null==r&&(r=o),t.ordinalMeta=d.getOrdinalMeta(),e&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(l=!0)})),l||null==r||(t[r].otherDims.itemName=0),r}(A.dimensions,n.createInvertedIndices,k),T=w?null:v.getSharedDataStore(A),j=Object(_.a)(e,{schema:A,store:T}),data=new r.a(A,e);data.setCalculationInfo(j);var P=null!=D&&function(source){if(source.sourceFormat===S.f){var t=function(t){var i=0;for(;i<t.length&&null==t[i];)i++;return t[i]}(source.data||[]);return null!=t&&!o.t(Object(d.h)(t))}}(source)?function(t,e,n,o){return o===D?n:this.defaultDimValueGetter(t,e,n,o)}:null;return data.hasItemOption=!1,data.initData(w?source:T,null,P),data}},379:function(t,e,n){},384:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n(381),r=n(348),l=n(318);function c(t,e,n){e=Object(l.t)(e)&&{coordDimensions:e}||Object(l.m)({encodeDefine:t.getEncode()},e);var source=t.getSource(),c=Object(o.a)(source,e).dimensions,d=new r.a(c,t);return d.initData(source,n),d}},385:function(t,e,n){},388:function(t,e,n){"use strict";n(365)},392:function(t,e,n){"use strict";n(374)},394:function(t,e,n){"use strict";n.r(e);n(46),n(333),n(155),n(31),n(44),n(117);var o=n(323),r=n(19),l=n(366),c=n(372),d=n(373),h=Object(o.c)({name:"line-chart",components:{RadarChart:l.default,SearchBar:c.default,TVChartContainer:d.default},props:{stock_id:{default:"1101"},displaySearchBar:{default:!0}},data:function(){return{stock:null,tab:"AI技術指標",currentCategory:null,indicators:["成長率","獲利能力","單位基本面","安全性"],headerHeight:64,orgHeadHeight:64}},mounted:function(){this.headMaxHeight=this.orgHeadHeight,this.getStock(this.stock_id)},computed:{stockEvaluation:function(){if(null===this.stock)return null},categories:function(){var t=this;return this.stock&&this.stock.fundamentalSummaryIndustry?Object.keys(this.stock.fundamentalSummaryIndustry).sort((function(a,b){return-t.stock.fundamentalSummaryIndustry[a]["檔數"]+t.stock.fundamentalSummaryIndustry[b]["檔數"]})).splice(0,3):[]},radarValues:function(){var t={};return t[this.stock_id]=this.stock.fundamentalSummaryIndustry[this.currentCategory],t},importance:function(){if(!this.stock)return[];var t=[];for(var e in this.stock.fundamentalContribution)t.push({name:e,value:this.stock.fundamentalContribution[e]});return t.sort((function(a,b){return Math.abs(b.value)-Math.abs(a.value)}))}},watch:{categories:function(){this.categories&&this.stock&&(this.currentCategory=this.categories[0])},stock_id:{handler:function(t){console.log("stock panel id change!",t),this.getStock(t)},deep:!0}},methods:{getStock:function(t){if(""!==t){var e=r.c.collection("twStock").doc(t),n=this;e.get().then((function(t){t.exists&&(n.stock=t.data(),console.log(n.stock))})).catch((function(e){console.log("Error getting document:",e),console.log(t)}))}},percentage:function(t){return t>0?"+"+Math.round(10*t)/10+"%":Math.round(10*t)/10+"%"},percentageColor:function(t){var th=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this.stock.fundamentalContribution[this.importance[0].name],n=Math.abs(t)/Math.abs(e)*th;return t>0?"rgba(255, 133, 182, ".concat(n,")"):"rgba(154, 145, 255, ".concat(n,")")},percentageColor2:function(t){return t>0?"rgba(255, 133, 182)":"rgba(154, 145, 255)"},changeStock:function(t){console.log("get change stock",t),this.headerHeight=this.orgHeadHeight;var e=t.split(" ")[0];this.stock_id=e,window.history.pushState({},null,window.location.href.split("?")[0]+"?stock_id="+e),this.getStock(e)},fitHeaderSize:function(text){0!==text.length?this.headerHeight=400:this.headerHeight=this.orgHeadHeight}}}),f=h,m=(n(392),n(40)),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[n("div",{staticClass:"dark-muted stock-head"},[t.stock&&t.displaySearchBar?n("div",[n("SearchBar",{ref:"searchBar",attrs:{value:t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id},on:{input:t.changeStock,update:t.fitHeaderSize}})],1):t._e(),t._v(" "),n("ul",{staticClass:"uk-flex-left",staticStyle:{"margin-top":"12px","margin-bottom":"0"},attrs:{"uk-tab":""}},[t.displaySearchBar?t._e():n("li",{staticClass:"uk-disabled"},[n("a",[t._v(t._s(t.stock&&t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id))])]),t._v(" "),n("li",{class:{"uk-active":"AI技術指標"==t.tab},on:{click:function(e){t.tab="AI技術指標"}}},[n("a",[t._v("技術指標")])]),t._v(" "),n("li",{class:{"uk-active":"AI財報分析"==t.tab},on:{click:function(e){t.tab="AI財報分析"}}},[n("a",[t._v("財報分析")])])])]),t._v(" "),n("div",{staticClass:"light-muted",staticStyle:{height:"calc(100% - 32px)"}},[t.stock&&t.stock.price?n("div",{style:{height:"AI技術指標"===t.tab?"100%":"0px"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"AI技術指標"===t.tab,expression:"tab === 'AI技術指標'"}],staticStyle:{height:"100%"}},[n("TVChartContainer",{attrs:{symbol:t.stock_id,price:t.stock.price,indicators:t.stock.indicatorPrediction}})],1)]):t._e(),t._v(" "),t.stock&&"AI財報分析"===t.tab?n("div",{staticClass:"uk-padding-small"},[t.stock.fundamentalValue?n("div",{staticClass:"uk-grid uk-grid-small",attrs:{"uk-height-match":"target: > div > .uk-card","uk-grid":""}},[n("div",{staticClass:"uk-width-1-2@m"},[t.stock?n("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[n("nuxt-link",{attrs:{to:"/ml_fundamental"}},[n("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),n("h3",{staticClass:"uk-card-title"},[t._v("\n              財報排名 "+t._s(t.stock.fundamentalValue.季別)+"\n            ")]),t._v(" "),n("p",{attrs:{"uk-margin":""}},t._l(t.categories,(function(e){return n("button",{key:"category_"+e,staticClass:"uk-button uk-button-small",class:e===t.currentCategory?"uk-button-primary":"uk-button-default",on:{click:function(n){t.currentCategory=e}}},[t._v("\n                "+t._s(e)+"\n              ")])})),0),t._v(" "),n("p",[t._v("\n              "+t._s(t.currentCategory)+"排名：\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"]-Math.round(t.stock.fundamentalSummaryIndustry[t.currentCategory]["綜合評分"]*t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+1)+"\n              /\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+"\n              名\n            ")]),t._v(" "),n("RadarChart",{attrs:{names:[t.stock_id],indicators:t.indicators,values:t.radarValues}})],1):t._e()]),t._v(" "),n("div",{staticClass:"uk-width-1-2@m"},[n("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[n("nuxt-link",{attrs:{to:"/ml_fundamental"}},[n("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),n("h3",{staticClass:"uk-card-title"},[t._v("財報股價影響力")]),t._v(" "),n("div",{staticClass:"uk-grid-collapse",attrs:{"uk-grid":""}},[n("div",{staticStyle:{width:"150px"}},[n("div",{staticStyle:{height:"85px","padding-bottom":"70px"},style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution.綜合評分,1)},[n("span",{staticStyle:{"font-size":"2.2em"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution.綜合評分)))]),n("span",[t._v("/年")]),t._v(" "),n("br"),t._v(" "),n("span",{staticStyle:{"font-size":"1em"}},[t._v("股價總影響力")])]),t._v(" "),t._l(t.indicators,(function(i){return n("div",{key:"score"+i,staticClass:"fundamental-tab uk-text-center",style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution[i],1)},[n("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution[i],100))+" ")]),n("br"),t._v(" "),n("span",[t._v(t._s(i))]),t._v(" "),n("div",{staticClass:"line"})])}))],2),t._v(" "),n("div",{staticClass:"uk-width-expand"},[n("div",{staticClass:"table-value uk-overflow-auto",staticStyle:{"max-height":"400px"}},[n("table",{staticClass:"uk-table uk-table-small top-container",staticStyle:{width:"400px","font-size":"0.8rem"}},[t._m(0),t._v(" "),n("tbody",t._l(t.importance,(function(e){return n("tr",{key:e.name+"fd",style:"background:"+t.percentageColor(e.value,.7)},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v("\n                          "+t._s(t.percentage(e.value))+"\n                        ")]),t._v(" "),n("td",[t._v("\n                          "+t._s(Math.round(100*t.stock.fundamentalValue[e.name])/100)+"\n                        ")])])})),0)])])])])],1)])]):n("div",[t._v("\n        並無財報數據喔！\n      ")])]):t._e()])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("名稱")]),t._v(" "),n("th",[t._v("影響力（大⇀小）")]),t._v(" "),n("th",[t._v("數值")])])}],!1,null,"4f9ffd63",null);e.default=component.exports;installComponents(component,{SearchBar:n(372).default,TVChartContainer:n(373).default,RadarChart:n(366).default})},395:function(t,e,n){"use strict";var o=n(319),r=n(383),l=n(339),c=n(444),d="\0_ec_interaction_mutex";function h(t,e){return!!f(t)[e]}function f(t){return t[d]||(t[d]={})}c.c({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},(function(){}));var m=n(318),v=function(t){function e(e){var n=t.call(this)||this;n._zr=e;var o=Object(m.c)(n._mousedownHandler,n),r=Object(m.c)(n._mousemoveHandler,n),l=Object(m.c)(n._mouseupHandler,n),c=Object(m.c)(n._mousewheelHandler,n),d=Object(m.c)(n._pinchHandler,n);return n.enable=function(t,n){this.disable(),this._opt=Object(m.j)(Object(m.d)(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",l)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",c),e.on("pinch",d))},n.disable=function(){e.off("mousedown",o),e.off("mousemove",r),e.off("mouseup",l),e.off("mousewheel",c),e.off("pinch",d)},n}return Object(o.a)(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!(l.d(t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(this._dragging&&x("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!h(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,o=this._x,r=this._y,c=e-o,d=n-r;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&l.g(t.event),_(this,"pan","moveOnMouseMove",t,{dx:c,dy:d,oldX:o,oldY:r,newX:e,newY:n,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){l.d(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=x("zoomOnMouseWheel",t,this._opt),n=x("moveOnMouseWheel",t,this._opt),o=t.wheelDelta,r=Math.abs(o),l=t.offsetX,c=t.offsetY;if(0!==o&&(e||n)){if(e){var d=r>3?1.4:r>1?1.2:1.1;y(this,"zoom","zoomOnMouseWheel",t,{scale:o>0?d:1/d,originX:l,originY:c,isAvailableBehavior:null})}if(n){var h=Math.abs(o);y(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(o>0?1:-1)*(h>3?.4:h>1?.15:.05),originX:l,originY:c,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){h(this._zr,"globalPan")||y(this,"zoom",null,t,{scale:t.pinchScale>1?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})},e}(r.a);function y(t,e,n,o,r){t.pointerChecker&&t.pointerChecker(o,r.originX,r.originY)&&(l.g(o.event),_(t,e,n,o,r))}function _(t,e,n,o,r){r.isAvailableBehavior=Object(m.c)(x,null,n,o),t.trigger(e,r)}function x(t,e,n){var o=n[t];return!t||o&&(!Object(m.B)(o)||e.event[o+"Key"])}e.a=v},406:function(t,e,n){"use strict";n(379)},407:function(t,e,n){},408:function(t,e,n){},411:function(t,e,n){"use strict";n.r(e);var o=n(25),r=(n(353),n(48),n(18),n(28),n(340)),l=n(562),c=n(448),d=n(412),h=n(870),f=n(868),m=n(318);function v(t,e){if(!t)return!1;for(var n=Object(m.t)(t)?t:[t],o=0;o<n.length;o++)if(n[o]&&n[o][e])return!0;return!1}var y=n(319),_=n(324),x=n(376),S=n(334),w=n(321),k=n(330);function M(t){Object(w.f)(t,"label",["show"])}var O=Object(w.n)(),C=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.createdBySelf=!1,n}return Object(y.a)(e,t),e.prototype.init=function(option,t,e){this.mergeDefaultAndTheme(option,e),this._mergeOption(option,e,!1,!0)},e.prototype.isAnimationEnabled=function(){if(_.a.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,e){this._mergeOption(t,e,!1,!1)},e.prototype._mergeOption=function(t,e,n,o){var r=this.mainType;n||e.eachSeries((function(t){var n=t.get(this.mainType,!0),l=O(t)[r];n&&n.data?(l?l._mergeOption(n,e,!0):(o&&M(n),m.k(n.data,(function(t){t instanceof Array?(M(t[0]),M(t[1])):M(t)})),l=this.createMarkerModelFromSeries(n,this,e),m.m(l,{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),l.__hostSeries=t),O(t)[r]=l):O(t)[r]=null}),this)},e.prototype.formatTooltip=function(t,e,n){var data=this.getData(),o=this.getRawValue(t),r=data.getName(t);return Object(k.c)("section",{header:this.name,blocks:[Object(k.c)("nameValue",{name:r,value:o,noName:!r,noValue:null==o})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(data){this._data=data},e.getMarkerModelFromSeries=function(t,e){return O(t)[e]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(S.a);m.I(C,x.a.prototype);var I=C,A=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,o){return new e(t,n,o)},e.type="markPoint",e.defaultOption={zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(I),D=A,T=n(371),j=n(322),P=n(348),L=n(338),N=n(431);function z(t,data,e,n,o,r){var l=[],c=Object(L.c)(data,n)?data.getCalculationInfo("stackResultDimension"):n,d=G(data,c,t),h=data.indicesOfNearest(c,d)[0];l[o]=data.get(e,h),l[r]=data.get(c,h);var f=data.get(n,h),m=j.f(data.get(n,h));return(m=Math.min(m,20))>=0&&(l[r]=+l[r].toFixed(m)),[l,f]}var V={min:Object(m.i)(z,"min"),max:Object(m.i)(z,"max"),average:Object(m.i)(z,"average"),median:Object(m.i)(z,"median")};function R(t,e){var data=t.getData(),n=t.coordinateSystem;if(e&&!function(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}(e)&&!Object(m.t)(e.coord)&&n){var o=n.dimensions,r=E(e,data,n,t);if((e=Object(m.d)(e)).type&&V[e.type]&&r.baseAxis&&r.valueAxis){var l=Object(m.r)(o,r.baseAxis.dim),c=Object(m.r)(o,r.valueAxis.dim),d=V[e.type](data,r.baseDataDim,r.valueDataDim,l,c);e.coord=d[0],e.value=d[1]}else{for(var h=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],i=0;i<2;i++)V[h[i]]&&(h[i]=G(data,data.mapDimension(o[i]),h[i]));e.coord=h}}return e}function E(t,data,e,n){var o={};return null!=t.valueIndex||null!=t.valueDim?(o.valueDataDim=null!=t.valueIndex?data.getDimension(t.valueIndex):t.valueDim,o.valueAxis=e.getAxis(function(t,e){var n=t.getData().getDimensionInfo(e);return n&&n.coordDim}(n,o.valueDataDim)),o.baseAxis=e.getOtherAxis(o.valueAxis),o.baseDataDim=data.mapDimension(o.baseAxis.dim)):(o.baseAxis=n.getBaseAxis(),o.valueAxis=e.getOtherAxis(o.baseAxis),o.baseDataDim=data.mapDimension(o.baseAxis.dim),o.valueDataDim=data.mapDimension(o.valueAxis.dim)),o}function B(t,e){return!(t&&t.containData&&e.coord&&!function(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}(e))||t.containData(e.coord)}function H(t,e){return t?function(t,n,o,r){var l=r<2?t.coord&&t.coord[r]:t.value;return Object(N.b)(l,e[r])}:function(t,n,o,r){return Object(N.b)(t.value,e[r])}}function G(data,t,e){if("average"===e){var n=0,o=0;return data.each(t,(function(t,e){isNaN(t)||(n+=t,o++)})),n/o}return"median"===e?data.getMedian(t):data.getDataExtent(t)["max"===e?1:0]}var W=n(335),F=n(325),U=Object(w.n)(),Y=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.prototype.init=function(){this.markerGroupMap=Object(m.g)()},e.prototype.render=function(t,e,n){var o=this,r=this.markerGroupMap;r.each((function(t){U(t).keep=!1})),e.eachSeries((function(t){var r=I.getMarkerModelFromSeries(t,o.type);r&&o.renderSeries(t,r,e,n)})),r.each((function(t){!U(t).keep&&o.group.remove(t.group)}))},e.prototype.markKeep=function(t){U(t).keep=!0},e.prototype.blurSeries=function(t){var e=this;Object(m.k)(t,(function(t){var n=I.getMarkerModelFromSeries(t,e.type);n&&n.getData().eachItemGraphicEl((function(t){t&&Object(F.p)(t)}))}))},e.type="marker",e}(W.a),X=Y,Z=n(329),$=n(351);function K(t,e,n){var o=e.coordinateSystem;t.each((function(r){var l,c=t.getItemModel(r),d=j.n(c.get("x"),n.getWidth()),h=j.n(c.get("y"),n.getHeight());if(isNaN(d)||isNaN(h)){if(e.getMarkerPosition)l=e.getMarkerPosition(t.getValues(t.dimensions,r));else if(o){var f=t.get(o.dimensions[0],r),m=t.get(o.dimensions[1],r);l=o.dataToPoint([f,m])}}else l=[d,h];isNaN(d)||(l[0]=d),isNaN(h)||(l[1]=h),t.setItemLayout(r,l)}))}var J=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=I.getMarkerModelFromSeries(t,"markPoint");e&&(K(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout())}),this)},e.prototype.renderSeries=function(t,e,n,o){var r=t.coordinateSystem,l=t.id,c=t.getData(),d=this.markerGroupMap,h=d.get(l)||d.set(l,new T.a),f=function(t,e,n){var o;o=t?Object(m.G)(t&&t.dimensions,(function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return Object(m.m)(Object(m.m)({},n),{name:t,ordinalMeta:null})})):[{name:"value",type:"float"}];var r=new P.a(o,n),l=Object(m.G)(n.get("data"),Object(m.i)(R,e));t&&(l=Object(m.n)(l,Object(m.i)(B,t)));var c=H(!!t,o);return r.initData(l,null,c),r}(r,t,e);e.setData(f),K(e.getData(),t,o),f.each((function(t){var n=f.getItemModel(t),symbol=n.getShallow("symbol"),o=n.getShallow("symbolSize"),r=n.getShallow("symbolRotate"),l=n.getShallow("symbolOffset"),d=n.getShallow("symbolKeepAspect");if(Object(m.w)(symbol)||Object(m.w)(o)||Object(m.w)(r)||Object(m.w)(l)){var h=e.getRawValue(t),v=e.getDataParams(t);Object(m.w)(symbol)&&(symbol=symbol(h,v)),Object(m.w)(o)&&(o=o(h,v)),Object(m.w)(r)&&(r=r(h,v)),Object(m.w)(l)&&(l=l(h,v))}var style=n.getModel("itemStyle").getItemStyle(),y=Object($.b)(c,"color");style.fill||(style.fill=y),f.setItemVisual(t,{symbol:symbol,symbolSize:o,symbolRotate:r,symbolOffset:l,symbolKeepAspect:d,style:style})})),h.updateData(f),this.group.add(h.group),f.eachItemGraphicEl((function(t){t.traverse((function(t){Object(Z.a)(t).dataModel=e}))})),this.markKeep(h),h.group.silent=e.get("silent")||t.get("silent")},e.type="markPoint",e}(X);var Q=J;var tt=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,o){return new e(t,n,o)},e.type="markLine",e.defaultOption={zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(I),et=tt,it=n(477),nt=n(368),ot=n(328),at=n(573),st=n(654),lt=n(354),ut=at.a.prototype,ct=st.a.prototype,ht=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Object(y.a)(e,t)}(ht);function pt(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var ft=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-line",n}return Object(y.a)(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new ht},e.prototype.buildPath=function(t,e){pt(e)?ut.buildPath.call(this,t,e):ct.buildPath.call(this,t,e)},e.prototype.pointAt=function(t){return pt(this.shape)?ut.pointAt.call(this,t):ct.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var e=this.shape,p=pt(e)?[e.x2-e.x1,e.y2-e.y1]:ct.tangentAt.call(this,t);return nt.j(p,p)},e}(lt.b),gt=n(375),mt=n(326),vt=["fromSymbol","toSymbol"];function yt(t){return"_"+t+"Type"}function _t(t,e,n){var o=e.getItemVisual(n,t);if(o&&"none"!==o){var r=e.getItemVisual(n,t+"Size"),l=e.getItemVisual(n,t+"Rotate"),c=e.getItemVisual(n,t+"Offset"),d=e.getItemVisual(n,t+"KeepAspect"),h=ot.c(r),f=ot.b(c||0,h),m=ot.a(o,-h[0]/2+f[0],-h[1]/2+f[1],h[0],h[1],null,d);return m.__specifiedRotation=null==l||isNaN(l)?void 0:+l*Math.PI/180||0,m.name=t,m}}function bt(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}var xt=function(t){function e(e,n,o){var r=t.call(this)||this;return r._createLine(e,n,o),r}return Object(y.a)(e,t),e.prototype._createLine=function(t,e,n){var o=t.hostModel,line=function(t){var line=new ft({name:"line",subPixelOptimize:!0});return bt(line.shape,t),line}(t.getItemLayout(e));line.shape.percent=0,gt.a(line,{shape:{percent:1}},o,e),this.add(line),Object(m.k)(vt,(function(n){var symbol=_t(n,t,e);this.add(symbol),this[yt(n)]=t.getItemVisual(e,n)}),this),this._updateCommonStl(t,e,n)},e.prototype.updateData=function(t,e,n){var o=t.hostModel,line=this.childOfName("line"),r=t.getItemLayout(e),l={shape:{}};bt(l.shape,r),gt.f(line,l,o,e),Object(m.k)(vt,(function(n){var o=t.getItemVisual(e,n),r=yt(n);if(this[r]!==o){this.remove(this.childOfName(n));var symbol=_t(n,t,e);this.add(symbol)}this[r]=o}),this),this._updateCommonStl(t,e,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,e,n){var o=t.hostModel,line=this.childOfName("line"),r=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,c=n&&n.selectLineStyle,d=n&&n.labelStatesModels;if(!n||t.hasItemOption){var h=t.getItemModel(e);r=h.getModel(["emphasis","lineStyle"]).getLineStyle(),l=h.getModel(["blur","lineStyle"]).getLineStyle(),c=h.getModel(["select","lineStyle"]).getLineStyle(),d=Object(mt.d)(h)}var f=t.getItemVisual(e,"style"),v=f.stroke;line.useStyle(f),line.style.fill=null,line.style.strokeNoScale=!0,line.ensureState("emphasis").style=r,line.ensureState("blur").style=l,line.ensureState("select").style=c,Object(m.k)(vt,(function(t){var symbol=this.childOfName(t);if(symbol){symbol.setColor(v),symbol.style.opacity=f.opacity;for(var i=0;i<F.g.length;i++){var e=F.g[i],n=line.getState(e);if(n){var o=n.style||{},r=symbol.ensureState(e),l=r.style||(r.style={});null!=o.stroke&&(l[symbol.__isEmptyBrush?"stroke":"fill"]=o.stroke),null!=o.opacity&&(l.opacity=o.opacity)}}symbol.markRedraw()}}),this);var y=o.getRawValue(e);Object(mt.f)(this,d,{labelDataIndex:e,labelFetcher:{getFormattedLabel:function(e,n){return o.getFormattedLabel(e,n,t.dataType)}},inheritColor:v||"#000",defaultOpacity:f.opacity,defaultText:(null==y?t.getName(e):isFinite(y)?Object(j.r)(y):y)+""});var label=this.getTextContent();if(label){var _=d.normal;label.__align=label.style.align,label.__verticalAlign=label.style.verticalAlign,label.__position=_.get("position")||"middle";var x=_.get("distance");Object(m.t)(x)||(x=[x,x]),label.__labelDistance=x}this.setTextConfig({position:null,local:!0,inside:!1}),Object(F.n)(this)},e.prototype.highlight=function(){Object(F.q)(this)},e.prototype.downplay=function(){Object(F.B)(this)},e.prototype.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},e.prototype.setLinePoints=function(t){var e=this.childOfName("line");bt(e.shape,t),e.dirty()},e.prototype.beforeUpdate=function(){var t=this,e=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),label=t.getTextContent();if(e||n||label&&!label.ignore){for(var o=1,r=this.parent;r;)r.scaleX&&(o/=r.scaleX),r=r.parent;var line=t.childOfName("line");if(this.__dirty||line.__dirty){var l=line.shape.percent,c=line.pointAt(0),d=line.pointAt(l),h=nt.l([],d,c);if(nt.j(h,h),e&&(e.setPosition(c),I(e,0),e.scaleX=e.scaleY=o*l,e.markRedraw()),n&&(n.setPosition(d),I(n,1),n.scaleX=n.scaleY=o*l,n.markRedraw()),label&&!label.ignore){label.x=label.y=0,label.originX=label.originY=0;var f=void 0,m=void 0,v=label.__labelDistance,y=v[0]*o,_=v[1]*o,x=l/2,S=line.tangentAt(x),w=[S[1],-S[0]],k=line.pointAt(x);w[1]>0&&(w[0]=-w[0],w[1]=-w[1]);var M=S[0]<0?-1:1;if("start"!==label.__position&&"end"!==label.__position){var O=-Math.atan2(S[1],S[0]);d[0]<c[0]&&(O=Math.PI+O),label.rotation=O}var C=void 0;switch(label.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":C=-_,m="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":C=_,m="top";break;default:C=0,m="middle"}switch(label.__position){case"end":label.x=h[0]*y+d[0],label.y=h[1]*_+d[1],f=h[0]>.8?"left":h[0]<-.8?"right":"center",m=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":label.x=-h[0]*y+c[0],label.y=-h[1]*_+c[1],f=h[0]>.8?"right":h[0]<-.8?"left":"center",m=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":label.x=y*M+c[0],label.y=c[1]+C,f=S[0]<0?"right":"left",label.originX=-y*M,label.originY=-C;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":label.x=k[0],label.y=k[1]+C,f="center",label.originY=-C;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":label.x=-y*M+d[0],label.y=d[1]+C,f=S[0]>=0?"right":"left",label.originX=y*M,label.originY=-C}label.scaleX=label.scaleY=o,label.setStyle({verticalAlign:label.__verticalAlign||m,align:label.__align||f})}}}function I(symbol,t){var e=symbol.__specifiedRotation;if(null==e){var n=line.tangentAt(t);symbol.attr("rotation",(1===t?-1:1)*Math.PI/2-Math.atan2(n[1],n[0]))}else symbol.attr("rotation",e)}},e}(it.a);function St(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["emphasis","lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),labelStatesModels:Object(mt.d)(e)}}function wt(t){return isNaN(t[0])||isNaN(t[1])}function kt(t){return!wt(t[0])&&!wt(t[1])}var Mt=function(){function t(t){this.group=new it.a,this._LineCtor=t||xt}return t.prototype.isPersistent=function(){return!0},t.prototype.updateData=function(t){var e=this,n=this,o=n.group,r=n._lineData;n._lineData=t,r||o.removeAll();var l=St(t);t.diff(r).add((function(n){e._doAdd(t,n,l)})).update((function(n,o){e._doUpdate(r,t,o,n,l)})).remove((function(t){o.remove(r.getItemGraphicEl(t))})).execute()},t.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl((function(e,n){e.updateLayout(t,n)}),this)},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=St(t),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e){function n(t){t.isGroup||function(t){return t.animators&&t.animators.length>0}(t)||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){if(kt(e.getItemLayout(o))){var r=new this._LineCtor(e,o,this._seriesScope);r.traverse(n),this.group.add(r),e.setItemGraphicEl(o,r)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype._doAdd=function(t,e,n){if(kt(t.getItemLayout(e))){var o=new this._LineCtor(t,e,n);t.setItemGraphicEl(e,o),this.group.add(o)}},t.prototype._doUpdate=function(t,e,n,o,r){var l=t.getItemGraphicEl(n);kt(e.getItemLayout(o))?(l?l.updateData(e,o,r):l=new this._LineCtor(e,o,r),e.setItemGraphicEl(o,l),this.group.add(l)):this.group.remove(l)},t}(),Ot=n(357),Ct=Object(w.n)(),It=function(t,e,n,o){var r,data=t.getData();if(Object(m.t)(o))r=o;else{var l=o.type;if("min"===l||"max"===l||"average"===l||"median"===l||null!=o.xAxis||null!=o.yAxis){var c=void 0,d=void 0;if(null!=o.yAxis||null!=o.xAxis)c=e.getAxis(null!=o.yAxis?"y":"x"),d=Object(m.M)(o.yAxis,o.xAxis);else{var h=E(o,data,e,t);c=h.valueAxis,d=G(data,Object(L.b)(data,h.valueDataDim),l)}var f="x"===c.dim?0:1,v=1-f,y=Object(m.d)(o),_={coord:[]};y.type=null,y.coord=[],y.coord[v]=-1/0,_.coord[v]=1/0;var x=n.get("precision");x>=0&&"number"==typeof d&&(d=+d.toFixed(Math.min(x,20))),y.coord[f]=_.coord[f]=d,r=[y,_,{type:l,valueIndex:o.valueIndex,value:d}]}else r=[]}var S=[R(t,r[0]),R(t,r[1]),Object(m.m)({},r[2])];return S[2].type=S[2].type||null,Object(m.H)(S[2],S[0]),Object(m.H)(S[2],S[1]),S};function At(t){return!isNaN(t)&&!isFinite(t)}function Dt(t,e,n,o){var r=1-t,l=o.dimensions[t];return At(e[r])&&At(n[r])&&e[t]===n[t]&&o.getAxis(l).containData(e[t])}function Tt(t,e){if("cartesian2d"===t.type){var n=e[0].coord,o=e[1].coord;if(n&&o&&(Dt(1,n,o,t)||Dt(0,n,o,t)))return!0}return B(t,e[0])&&B(t,e[1])}function jt(data,t,e,n,o){var r,l=n.coordinateSystem,c=data.getItemModel(t),d=j.n(c.get("x"),o.getWidth()),h=j.n(c.get("y"),o.getHeight());if(isNaN(d)||isNaN(h)){if(n.getMarkerPosition)r=n.getMarkerPosition(data.getValues(data.dimensions,t));else{var f=l.dimensions,m=data.get(f[0],t),v=data.get(f[1],t);r=l.dataToPoint([m,v])}if(Object(Ot.a)(l,"cartesian2d")){var y=l.getAxis("x"),_=l.getAxis("y");f=l.dimensions;At(data.get(f[0],t))?r[0]=y.toGlobalCoord(y.getExtent()[e?0:1]):At(data.get(f[1],t))&&(r[1]=_.toGlobalCoord(_.getExtent()[e?0:1]))}isNaN(d)||(r[0]=d),isNaN(h)||(r[1]=h)}else r=[d,h];data.setItemLayout(t,r)}var Pt=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=I.getMarkerModelFromSeries(t,"markLine");if(e){var o=e.getData(),r=Ct(e).from,l=Ct(e).to;r.each((function(e){jt(r,e,!0,t,n),jt(l,e,!1,t,n)})),o.each((function(t){o.setItemLayout(t,[r.getItemLayout(t),l.getItemLayout(t)])})),this.markerGroupMap.get(t.id).updateLayout()}}),this)},e.prototype.renderSeries=function(t,e,n,o){var r=t.coordinateSystem,l=t.id,c=t.getData(),d=this.markerGroupMap,h=d.get(l)||d.set(l,new Mt);this.group.add(h.group);var f=function(t,e,n){var o;o=t?Object(m.G)(t&&t.dimensions,(function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return Object(m.m)(Object(m.m)({},n),{name:t,ordinalMeta:null})})):[{name:"value",type:"float"}];var r=new P.a(o,n),l=new P.a(o,n),c=new P.a([],n),d=Object(m.G)(n.get("data"),Object(m.i)(It,e,t,n));t&&(d=Object(m.n)(d,Object(m.i)(Tt,t)));var h=H(!!t,o);return r.initData(Object(m.G)(d,(function(t){return t[0]})),null,h),l.initData(Object(m.G)(d,(function(t){return t[1]})),null,h),c.initData(Object(m.G)(d,(function(t){return t[2]}))),c.hasItemOption=!0,{from:r,to:l,line:c}}(r,t,e),v=f.from,y=f.to,_=f.line;Ct(e).from=v,Ct(e).to=y,e.setData(_);var x=e.get("symbol"),S=e.get("symbolSize"),w=e.get("symbolRotate"),k=e.get("symbolOffset");function M(data,e,n){var r=data.getItemModel(e);jt(data,e,n,t,o);var style=r.getModel("itemStyle").getItemStyle();null==style.fill&&(style.fill=Object($.b)(c,"color")),data.setItemVisual(e,{symbolKeepAspect:r.get("symbolKeepAspect"),symbolOffset:Object(m.N)(r.get("symbolOffset",!0),k[n?0:1]),symbolRotate:Object(m.N)(r.get("symbolRotate",!0),w[n?0:1]),symbolSize:Object(m.N)(r.get("symbolSize"),S[n?0:1]),symbol:Object(m.N)(r.get("symbol",!0),x[n?0:1]),style:style})}Object(m.t)(x)||(x=[x,x]),Object(m.t)(S)||(S=[S,S]),Object(m.t)(w)||(w=[w,w]),Object(m.t)(k)||(k=[k,k]),f.from.each((function(t){M(v,t,!0),M(y,t,!1)})),_.each((function(t){var e=_.getItemModel(t).getModel("lineStyle").getLineStyle();_.setItemLayout(t,[v.getItemLayout(t),y.getItemLayout(t)]),null==e.stroke&&(e.stroke=v.getItemVisual(t,"style").fill),_.setItemVisual(t,{fromSymbolKeepAspect:v.getItemVisual(t,"symbolKeepAspect"),fromSymbolOffset:v.getItemVisual(t,"symbolOffset"),fromSymbolRotate:v.getItemVisual(t,"symbolRotate"),fromSymbolSize:v.getItemVisual(t,"symbolSize"),fromSymbol:v.getItemVisual(t,"symbol"),toSymbolKeepAspect:y.getItemVisual(t,"symbolKeepAspect"),toSymbolOffset:y.getItemVisual(t,"symbolOffset"),toSymbolRotate:y.getItemVisual(t,"symbolRotate"),toSymbolSize:y.getItemVisual(t,"symbolSize"),toSymbol:y.getItemVisual(t,"symbol"),style:e})})),h.updateData(_),f.line.eachItemGraphicEl((function(t,n){t.traverse((function(t){Object(Z.a)(t).dataModel=e}))})),this.markKeep(h),h.group.silent=e.get("silent")||t.get("silent")},e.type="markLine",e}(X);var Lt=Pt;var Nt=n(447),zt=["x","y","radius","angle","single"],Vt=["cartesian2d","polar","singleAxis"];function Rt(t){return t+"Axis"}function Et(t,e){var n,o=Object(m.g)(),r=[],l=Object(m.g)();t.eachComponent({mainType:"dataZoom",query:e},(function(t){l.get(t.uid)||d(t)}));do{n=!1,t.eachComponent("dataZoom",c)}while(n);function c(t){!l.get(t.uid)&&function(t){var e=!1;return t.eachTargetAxis((function(t,n){var r=o.get(t);r&&r[n]&&(e=!0)})),e}(t)&&(d(t),n=!0)}function d(t){l.set(t.uid,!0),r.push(t),t.eachTargetAxis((function(t,e){(o.get(t)||o.set(t,[]))[e]=!0}))}return r}function Bt(t){var e=t.ecModel,n={infoList:[],infoMap:Object(m.g)()};return t.eachTargetAxis((function(t,o){var r=e.getComponent(Rt(t),o);if(r){var l=r.getCoordSysModel();if(l){var c=l.uid,d=n.infoMap.get(c);d||(d={model:l,axisModels:[]},n.infoList.push(d),n.infoMap.set(c,d)),d.axisModels.push(r)}}})),n}var Ht=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}(),Gt=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return Object(y.a)(e,t),e.prototype.init=function(option,t,e){var n=Wt(option);this.settledOption=n,this.mergeDefaultAndTheme(option,e),this._doInit(n)},e.prototype.mergeOption=function(t){var e=Wt(t);Object(m.H)(this.option,t,!0),Object(m.H)(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;Object(m.k)([["start","startValue"],["end","endValue"]],(function(t,o){"value"===this._rangePropMode[o]&&(e[t[0]]=n[t[0]]=null)}),this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=Object(m.g)();this._fillSpecifiedTargetAxis(e)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each((function(t){t.indexList.length&&(this._noTarget=!1)}),this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return Object(m.k)(zt,(function(n){var o=this.getReferringComponents(Rt(n),w.a);if(o.specified){e=!0;var r=new Ht;Object(m.k)(o.models,(function(t){r.add(t.componentIndex)})),t.set(n,r)}}),this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var n=this.ecModel,o=!0;if(o){var r="vertical"===e?"y":"x";l(n.findComponents({mainType:r+"Axis"}),r)}o&&l(n.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}}),"single");function l(e,n){var r=e[0];if(r){var l=new Ht;if(l.add(r.componentIndex),t.set(n,l),o=!1,"x"===n||"y"===n){var c=r.getReferringComponents("grid",w.b).models[0];c&&Object(m.k)(e,(function(t){r.componentIndex!==t.componentIndex&&c===t.getReferringComponents("grid",w.b).models[0]&&l.add(t.componentIndex)}))}}}o&&Object(m.k)(zt,(function(e){if(o){var r=n.findComponents({mainType:Rt(e),filter:function(t){return"category"===t.get("type",!0)}});if(r[0]){var l=new Ht;l.add(r[0].componentIndex),t.set(e,l),o=!1}}}),this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis((function(e){!t&&(t=e)}),this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,n=this.get("rangeMode");Object(m.k)([["start","startValue"],["end","endValue"]],(function(o,r){var l=null!=t[o[0]],c=null!=t[o[1]];l&&!c?e[r]="percent":!l&&c?e[r]="value":n?e[r]=n[r]:l&&(e[r]="percent")}))},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis((function(e,n){null==t&&(t=this.ecModel.getComponent(Rt(e),n))}),this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each((function(n,o){Object(m.k)(n.indexList,(function(n){t.call(e,o,n)}))}))},e.prototype.getAxisProxy=function(t,e){var n=this.getAxisModel(t,e);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[e])return this.ecModel.getComponent(Rt(t),e)},e.prototype.setRawRange=function(t){var e=this.option,n=this.settledOption;Object(m.k)([["start","startValue"],["end","endValue"]],(function(o){null==t[o[0]]&&null==t[o[1]]||(e[o[0]]=n[o[0]]=t[o[0]],e[o[1]]=n[o[1]]=t[o[1]])}),this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var option=this.option;Object(m.k)(["start","startValue","end","endValue"],(function(e){option[e]=t[e]}))},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var o=n[i],r=this._targetAxisInfoMap.get(o),l=0;l<r.indexList.length;l++){var c=this.getAxisProxy(o,r.indexList[l]);if(c.hostedBy(this))return c;e||(e=c)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={zlevel:0,z:4,filterMode:"filter",start:0,end:100},e}(S.a);function Wt(option){var t={};return Object(m.k)(["start","end","startValue","endValue","throttle"],(function(e){option.hasOwnProperty(e)&&(t[e]=option[e])})),t}var Ft=Gt,component=n(347),Ut=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.type="dataZoom.inside",e.defaultOption=Object(component.d)(Ft.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(Ft),Yt=Ut,Xt=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.prototype.render=function(t,e,n,o){this.dataZoomModel=t,this.ecModel=e,this.api=n},e.type="dataZoom",e}(W.a),Zt=Xt,$t=n(342),Kt=n(395),Jt=n(356),qt=Object(w.n)();function Qt(t,e,n){qt(t).coordSysRecordMap.each((function(t){var o=t.dataZoomInfoMap.get(e.uid);o&&(o.getRange=n)}))}function te(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function ee(t,e){t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function ie(t,e,n,o){return t.coordinateSystem.containPoint([n,o])}function ne(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,(function(t,e){var n=qt(e),o=n.coordSysRecordMap||(n.coordSysRecordMap=Object(m.g)());o.each((function(t){t.dataZoomInfoMap=null})),t.eachComponent({mainType:"dataZoom",subType:"inside"},(function(t){var n=Bt(t);Object(m.k)(n.infoList,(function(n){var r=n.model.uid,l=o.get(r)||o.set(r,function(t,e){var n={model:e,containsPoint:Object(m.i)(ie,e),dispatchAction:Object(m.i)(ee,t),dataZoomInfoMap:null,controller:null},o=n.controller=new Kt.a(t.getZr());return Object(m.k)(["pan","zoom","scrollMove"],(function(t){o.on(t,(function(e){var o=[];n.dataZoomInfoMap.each((function(r){if(e.isAvailableBehavior(r.model.option)){var l=(r.getRange||{})[t],c=l&&l(r.dzReferCoordSysInfo,n.model.mainType,n.controller,e);!r.model.get("disabled",!0)&&c&&o.push({dataZoomId:r.model.id,start:c[0],end:c[1]})}})),o.length&&n.dispatchAction(o)}))})),n}(e,n.model));(l.dataZoomInfoMap||(l.dataZoomInfoMap=Object(m.g)())).set(t.uid,{dzReferCoordSysInfo:n,model:t,getRange:null})}))})),o.each((function(t){var e,n=t.controller,r=t.dataZoomInfoMap;if(r){var l=r.keys()[0];null!=l&&(e=r.get(l))}if(e){var c=function(t){var e,n="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return t.each((function(t){var l=t.model,c=!l.get("disabled",!0)&&(!l.get("zoomLock",!0)||"move");o[n+c]>o[n+e]&&(e=c),r=r&&l.get("preventDefaultMouseMove",!0)})),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}(r);n.enable(c.controlType,c.opt),n.setPointerChecker(t.containsPoint),Jt.b(t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else te(o,t)}))}))}var oe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return Object(y.a)(e,t),e.prototype.render=function(e,n,o){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),Qt(o,e,{pan:Object(m.c)(ae.pan,this),zoom:Object(m.c)(ae.zoom,this),scrollMove:Object(m.c)(ae.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){!function(t,e){for(var n=qt(t).coordSysRecordMap,o=n.keys(),i=0;i<o.length;i++){var r=o[i],l=n.get(r),c=l.dataZoomInfoMap;if(c){var d=e.uid;c.get(d)&&(c.removeKey(d),c.keys().length||te(n,l))}}}(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(Zt),ae={zoom:function(t,e,n,o){var r=this.range,l=r.slice(),c=t.axisModels[0];if(c){var d=se[e](null,[o.originX,o.originY],c,n,t),h=(d.signal>0?d.pixelStart+d.pixelLength-d.pixel:d.pixel-d.pixelStart)/d.pixelLength*(l[1]-l[0])+l[0],f=Math.max(1/o.scale,0);l[0]=(l[0]-h)*f+h,l[1]=(l[1]-h)*f+h;var m=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Object($t.a)(0,l,[0,100],0,m.minSpan,m.maxSpan),this.range=l,r[0]!==l[0]||r[1]!==l[1]?l:void 0}},pan:re((function(t,e,n,o,r,l){var c=se[o]([l.oldX,l.oldY],[l.newX,l.newY],e,r,n);return c.signal*(t[1]-t[0])*c.pixel/c.pixelLength})),scrollMove:re((function(t,e,n,o,r,l){return se[o]([0,0],[l.scrollDelta,l.scrollDelta],e,r,n).signal*(t[1]-t[0])*l.scrollDelta}))};function re(t){return function(e,n,o,r){var l=this.range,c=l.slice(),d=e.axisModels[0];if(d){var h=t(c,d,e,n,o,r);return Object($t.a)(h,c,[0,100],"all"),this.range=c,l[0]!==c[0]||l[1]!==c[1]?c:void 0}}}var se={grid:function(t,e,n,o,r){var l=n.axis,c={},rect=r.model.coordinateSystem.getRect();return t=t||[0,0],"x"===l.dim?(c.pixel=e[0]-t[0],c.pixelLength=rect.width,c.pixelStart=rect.x,c.signal=l.inverse?1:-1):(c.pixel=e[1]-t[1],c.pixelLength=rect.height,c.pixelStart=rect.y,c.signal=l.inverse?-1:1),c},polar:function(t,e,n,o,r){var l=n.axis,c={},d=r.model.coordinateSystem,h=d.getRadiusAxis().getExtent(),f=d.getAngleAxis().getExtent();return t=t?d.pointToCoord(t):[0,0],e=d.pointToCoord(e),"radiusAxis"===n.mainType?(c.pixel=e[0]-t[0],c.pixelLength=h[1]-h[0],c.pixelStart=h[0],c.signal=l.inverse?1:-1):(c.pixel=e[1]-t[1],c.pixelLength=f[1]-f[0],c.pixelStart=f[0],c.signal=l.inverse?-1:1),c},singleAxis:function(t,e,n,o,r){var l=n.axis,rect=r.model.coordinateSystem.getRect(),c={};return t=t||[0,0],"horizontal"===l.orient?(c.pixel=e[0]-t[0],c.pixelLength=rect.width,c.pixelStart=rect.x,c.signal=l.inverse?1:-1):(c.pixel=e[1]-t[1],c.pixelLength=rect.height,c.pixelStart=rect.y,c.signal=l.inverse?-1:1),c}},le=oe,ue=n(352),ce=n(387),de=m.k,he=j.c;var pe=function(){function t(t,e,n,o){this._dimName=t,this._axisIndex=e,this.ecModel=o,this._dataZoomModel=n}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries((function(e){if(function(t){var e=t.get("coordinateSystem");return Object(m.r)(Vt,e)>=0}(e)){var n=Rt(this._dimName),o=e.getReferringComponents(n,w.b).models[0];o&&this._axisIndex===o.componentIndex&&t.push(e)}}),this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return m.d(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,n=this._dataExtent,o=this.getAxisModel().axis.scale,r=this._dataZoomModel.getRangePropMode(),l=[0,100],c=[],d=[];de(["start","end"],(function(h,f){var m=t[h],v=t[h+"Value"];"percent"===r[f]?(null==m&&(m=l[f]),v=o.parse(j.j(m,l,n))):(e=!0,v=null==v?n[f]:o.parse(v),m=j.j(v,n,l)),d[f]=v,c[f]=m})),he(d),he(c);var h=this._minMaxSpan;function f(t,e,n,r,l){var c=l?"Span":"ValueSpan";Object($t.a)(0,t,n,"all",h["min"+c],h["max"+c]);for(var i=0;i<2;i++)e[i]=j.j(t[i],n,r,!0),l&&(e[i]=o.parse(e[i]))}return e?f(d,c,n,l,!1):f(c,d,l,n,!0),{valueWindow:d,percentWindow:c}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var o=[1/0,-1/0];de(n,(function(t){Object(ue.k)(o,t.getData(),e)}));var r=t.getAxisModel(),l=Object(ce.a)(r.axis.scale,r,o).calculate();return[l.min,l.max]}(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),r=t.get("filterMode"),l=this._valueWindow;"none"!==r&&de(o,(function(t){var e=t.getData(),o=e.mapDimensionsAll(n);if(o.length){if("weakFilter"===r){var c=e.getStore(),d=m.G(o,(function(t){return e.getDimensionIndex(t)}),e);e.filterSelf((function(t){for(var e,n,r,i=0;i<o.length;i++){var h=c.get(d[i],t),f=!isNaN(h),m=h<l[0],v=h>l[1];if(f&&!m&&!v)return!0;f&&(r=!0),m&&(e=!0),v&&(n=!0)}return r&&e&&n}))}else de(o,(function(n){if("empty"===r)t.setData(e=e.map(n,(function(t){return function(t){return t>=l[0]&&t<=l[1]}(t)?t:NaN})));else{var o={};o[n]=l,e.selectRange(o)}}));de(o,(function(t){e.setApproximateExtent(l,t)}))}}))}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;de(["min","max"],(function(o){var r=e.get(o+"Span"),l=e.get(o+"ValueSpan");null!=l&&(l=this.getAxisModel().axis.scale.parse(l)),null!=l?r=j.j(n[0]+l,n,[0,100],!0):null!=r&&(l=j.j(r,[0,100],n,!0)-n[0]),t[o+"Span"]=r,t[o+"ValueSpan"]=l}),this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var o=j.e(n,[0,500]);o=Math.min(o,20);var r=t.axis.scale.rawExtentInfo;0!==e[0]&&r.setDeterminedMinMax("min",+n[0].toFixed(o)),100!==e[1]&&r.setDeterminedMinMax("max",+n[1].toFixed(o)),r.freeze()}},t}(),fe={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(o,r){var l=t.getComponent(Rt(o),r);e(o,r,l,n)}))}))}e((function(t,e,n,o){n.__dzAxisProxy=null}));var n=[];e((function(e,o,r,l){r.__dzAxisProxy||(r.__dzAxisProxy=new pe(e,o,l,t),n.push(r.__dzAxisProxy))}));var o=Object(m.g)();return Object(m.k)(n,(function(t){Object(m.k)(t.getTargetSeriesModels(),(function(t){o.set(t.uid,t)}))})),o},overallReset:function(t,e){t.eachComponent("dataZoom",(function(t){t.eachTargetAxis((function(e,n){t.getAxisProxy(e,n).reset(t)})),t.eachTargetAxis((function(n,o){t.getAxisProxy(n,o).filterData(t,e)}))})),t.eachComponent("dataZoom",(function(t){var e=t.findRepresentativeAxisProxy();if(e){var n=e.getDataPercentWindow(),o=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})}}))}};var ge=!1;function me(t){ge||(ge=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,fe),function(t){t.registerAction("dataZoom",(function(t,e){var n=Et(e,t);Object(m.k)(n,(function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})}))}))}(t),t.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function ve(t){me(t),t.registerComponentModel(Yt),t.registerComponentView(le),ne(t)}var ye=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Object(component.d)(Ft.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(Ft),_e=ye,be=n(339),xe=n(554),Se=n(575),we=n(576),ke=n(386),Me=n(320),Oe=n(555),Ce=n(331),Ie=xe.a,Ae="horizontal",De="vertical",Te=["line","bar","candlestick","scatter"],je={easing:"cubicOut",duration:100,delay:0},Pe=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return Object(y.a)(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=Object(m.c)(this._onBrush,this),this._onBrushEnd=Object(m.c)(this._onBrushEnd,this)},e.prototype.render=function(e,n,o,r){if(t.prototype.render.apply(this,arguments),Jt.b(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();r&&"dataZoom"===r.type&&r.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){Jt.a(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new it.a;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,n=t.get("brushSelect")?7:0,o=this._findCoordRect(),r={width:e.getWidth(),height:e.getHeight()},l=this._orient===Ae?{right:r.width-o.x-o.width,top:r.height-30-7-n,width:o.width,height:30}:{right:7,top:o.y,width:30,height:o.height},c=Ce.d(t.option);Object(m.k)(["right","top","width","height"],(function(t){"ph"===c[t]&&(c[t]=l[t])}));var d=Ce.e(c,r);this._location={x:d.x,y:d.y},this._size=[d.width,d.height],this._orient===De&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,n=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),r=o&&o.get("inverse"),l=this._displayables.sliderGroup,c=(this._dataShadowInfo||{}).otherAxisInverse;l.attr(n!==Ae||r?n===Ae&&r?{scaleY:c?1:-1,scaleX:-1}:n!==De||r?{scaleY:c?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:c?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:c?1:-1,scaleX:1});var rect=t.getBoundingRect([l]);t.x=e.x-rect.x,t.y=e.y-rect.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.sliderGroup,o=t.get("brushSelect");n.add(new Ie({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var r=new Ie({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:Object(m.c)(this._onClickPanel,this)}),l=this.api.getZr();o?(r.on("mousedown",this._onBrushStart,this),r.cursor="crosshair",l.on("mousemove",this._onBrush),l.on("mouseup",this._onBrushEnd)):(l.off("mousemove",this._onBrush),l.off("mouseup",this._onBrushEnd)),n.add(r)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,n=t.series,data=n.getRawData(),o=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=o){var r=data.getDataExtent(o),l=.3*(r[1]-r[0]);r=[r[0]-l,r[1]+l];var c,d=[0,e[1]],h=[0,e[0]],f=[[e[0],0],[0,0]],m=[],v=h[1]/(data.count()-1),y=0,_=Math.round(data.count()/e[0]);data.each([o],(function(t,e){if(_>0&&e%_)y+=v;else{var n=null==t||isNaN(t)||""===t,o=n?0:Object(j.j)(t,r,d,!0);n&&!c&&e?(f.push([f[f.length-1][0],0]),m.push([m[m.length-1][0],0])):!n&&c&&(f.push([y,0]),m.push([y,0])),f.push([y,o]),m.push([y,o]),y+=v,c=n}}));for(var x=this.dataZoomModel,i=0;i<3;i++){var S=w(1===i);this._displayables.sliderGroup.add(S),this._displayables.dataShadowSegs.push(S)}}}function w(t){var e=x.getModel(t?"selectedDataBackground":"dataBackground"),n=new it.a,polygon=new Se.a({shape:{points:f},segmentIgnoreThreshold:1,style:e.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),polyline=new we.a({shape:{points:m},segmentIgnoreThreshold:1,style:e.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(polygon),n.add(polyline),n}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,o=this.ecModel;return t.eachTargetAxis((function(r,l){var c=t.getAxisProxy(r,l).getTargetSeriesModels();Object(m.k)(c,(function(t){if(!(n||!0!==e&&Object(m.r)(Te,t.get("type"))<0)){var c,d=o.getComponent(Rt(r),l).axis,h={x:"y",y:"x",radius:"angle",angle:"radius"}[r],f=t.coordinateSystem;null!=h&&f.getOtherAxis&&(c=f.getOtherAxis(d).inverse),h=t.getData().mapDimension(h),n={thisAxis:d,series:t,thisDim:r,otherDim:h,otherAxisInverse:c}}}),this)}),this),n}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,n=e.handles=[null,null],o=e.handleLabels=[null,null],r=this._displayables.sliderGroup,l=this._size,c=this.dataZoomModel,d=this.api,h=c.get("borderRadius")||0,f=c.get("brushSelect"),v=e.filler=new Ie({silent:f,style:{fill:c.get("fillerColor")},textConfig:{position:"inside"}});r.add(v),r.add(new Ie({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:l[0],height:l[1],r:h},style:{stroke:c.get("dataBackgroundColor")||c.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),Object(m.k)([0,1],(function(e){var l=c.get("handleIcon");!ot.d[l]&&l.indexOf("path://")<0&&l.indexOf("image://")<0&&(l="path://"+l);var path=Object(ot.a)(l,-1,0,2,2,null,!0);path.attr({cursor:Le(this._orient),draggable:!0,drift:Object(m.c)(this._onDragMove,this,e),ondragend:Object(m.c)(this._onDragEnd,this),onmouseover:Object(m.c)(this._showDataInfo,this,!0),onmouseout:Object(m.c)(this._showDataInfo,this,!1),z2:5});var d=path.getBoundingRect(),h=c.get("handleSize");this._handleHeight=Object(j.n)(h,this._size[1]),this._handleWidth=d.width/d.height*this._handleHeight,path.setStyle(c.getModel("handleStyle").getItemStyle()),path.style.strokeNoScale=!0,path.rectHover=!0,path.ensureState("emphasis").style=c.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(F.n)(path);var f=c.get("handleColor");null!=f&&(path.style.fill=f),r.add(n[e]=path);var v=c.getModel("textStyle");t.add(o[e]=new ke.a({silent:!0,invisible:!0,style:Object(mt.b)(v,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:v.getTextColor(),font:v.getFont()}),z2:10}))}),this);var y=v;if(f){var _=Object(j.n)(c.get("moveHandleSize"),l[1]),x=e.moveHandle=new xe.a({style:c.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:l[1]-.5,height:_}}),S=.8*_,w=e.moveHandleIcon=Object(ot.a)(c.get("moveHandleIcon"),-S/2,-S/2,S,S,"#fff",!0);w.silent=!0,w.y=l[1]+_/2-.5,x.ensureState("emphasis").style=c.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var k=Math.min(l[1]/2,Math.max(_,10));(y=e.moveZone=new xe.a({invisible:!0,shape:{y:l[1]-k,height:_+k}})).on("mouseover",(function(){d.enterEmphasis(x)})).on("mouseout",(function(){d.leaveEmphasis(x)})),r.add(x),r.add(w),r.add(y)}y.attr({draggable:!0,cursor:Le(this._orient),drift:Object(m.c)(this._onDragMove,this,"all"),ondragstart:Object(m.c)(this._showDataInfo,this,!0),ondragend:Object(m.c)(this._onDragEnd,this),onmouseover:Object(m.c)(this._showDataInfo,this,!0),onmouseout:Object(m.c)(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[Object(j.j)(t[0],[0,100],e,!0),Object(j.j)(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var n=this.dataZoomModel,o=this._handleEnds,r=this._getViewExtent(),l=n.findRepresentativeAxisProxy().getMinMaxSpan(),c=[0,100];Object($t.a)(e,o,r,n.get("zoomLock")?"all":t,null!=l.minSpan?Object(j.j)(l.minSpan,c,r,!0):null,null!=l.maxSpan?Object(j.j)(l.maxSpan,c,r,!0):null);var d=this._range,h=this._range=Object(j.c)([Object(j.j)(o[0],r,c,!0),Object(j.j)(o[1],r,c,!0)]);return!d||d[0]!==h[0]||d[1]!==h[1]},e.prototype._updateView=function(t){var e=this._displayables,n=this._handleEnds,o=Object(j.c)(n.slice()),r=this._size;Object(m.k)([0,1],(function(t){var o=e.handles[t],l=this._handleHeight;o.attr({scaleX:l/2,scaleY:l/2,x:n[t]+(t?-1:1),y:r[1]/2-l/2})}),this),e.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:r[1]});var l={x:o[0],width:o[1]-o[0]};e.moveHandle&&(e.moveHandle.setShape(l),e.moveZone.setShape(l),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",l.x+l.width/2));for(var c=e.dataShadowSegs,d=[0,o[0],o[1],r[0]],i=0;i<c.length;i++){var h=c[i],f=h.getClipPath();f||(f=new xe.a,h.setClipPath(f)),f.setShape({x:d[i],y:0,width:d[i+1]-d[i],height:r[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,n=this._displayables,o=n.handleLabels,r=this._orient,l=["",""];if(e.get("showDetail")){var c=e.findRepresentativeAxisProxy();if(c){var d=c.getAxisModel().axis,h=this._range,f=t?c.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:c.getDataValueWindow();l=[this._formatLabel(f[0],d),this._formatLabel(f[1],d)]}}var m=Object(j.c)(this._handleEnds.slice());function v(t){var e=Me.getTransform(n.handles[t].parent,this.group),c=Me.transformDirection(0===t?"right":"left",e),d=this._handleWidth/2+5,h=Me.applyTransform([m[t]+(0===t?-d:d),this._size[1]/2],e);o[t].setStyle({x:h[0],y:h[1],verticalAlign:r===Ae?"middle":c,align:r===Ae?c:"center",text:l[t]})}v.call(this,0),v.call(this,1)},e.prototype._formatLabel=function(t,e){var n=this.dataZoomModel,o=n.get("labelFormatter"),r=n.get("labelPrecision");null!=r&&"auto"!==r||(r=e.getPixelPrecision());var l=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(r,20));return Object(m.w)(o)?o(t,l):Object(m.B)(o)?o.replace("{value}",l):l},e.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,n=e.handleLabels;n[0].attr("invisible",!t),n[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},e.prototype._onDragMove=function(t,e,n,o){this._dragging=!0,be.g(o.event);var r=this._displayables.sliderGroup.getLocalTransform(),l=Me.applyTransform([e,n],r,!0),c=this._updateInterval(t,l[0]),d=this.dataZoomModel.get("realtime");this._updateView(!d),c&&d&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var o=this._handleEnds,r=(o[0]+o[1])/2,l=this._updateInterval("all",n[0]-r);this._updateView(),l&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,n=t.offsetY;this._brushStart=new Oe.a(e,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var n=e.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),r=[0,100];this._range=Object(j.c)([Object(j.j)(n.x,o,r,!0),Object(j.j)(n.x+n.width,o,r,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(be.g(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var n=this._displayables,o=this.dataZoomModel,r=n.brushRect;r||(r=n.brushRect=new Ie({silent:!0,style:o.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(r)),r.attr("ignore",!1);var l=this._brushStart,c=this._displayables.sliderGroup,d=c.transformCoordToLocal(t,e),h=c.transformCoordToLocal(l.x,l.y),f=this._size;d[0]=Math.max(Math.min(f[0],d[0]),0),r.setShape({x:h[0],y:0,width:d[0]-h[0],height:f[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?je:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var rect,t=Bt(this.dataZoomModel).infoList;if(!rect&&t.length){var e=t[0].model.coordinateSystem;rect=e.getRect&&e.getRect()}if(!rect){var n=this.api.getWidth(),o=this.api.getHeight();rect={x:.2*n,y:.2*o,width:.6*n,height:.6*o}}return rect},e.type="dataZoom.slider",e}(Zt);function Le(t){return"vertical"===t?"ns-resize":"ew-resize"}var Ne=Pe;function ze(t){t.registerComponentModel(_e),t.registerComponentView(Ne),me(t)}var Ve=n(359);Object(r.a)([l.a,d.a,h.a,c.a,f.a,function(t){t.registerComponentModel(D),t.registerComponentView(Q),t.registerPreprocessor((function(t){v(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})}))},function(t){t.registerComponentModel(et),t.registerComponentView(Lt),t.registerPreprocessor((function(t){v(t.series,"markLine")&&(t.markLine=t.markLine||{})}))},Nt.a,function(t){Object(r.a)(ve),Object(r.a)(ze)}]);var Re={name:"HelloWorld",props:{values:{default:function(){return[[1,2,3,4]]}},index:{default:["2020-01-01","2020-02-01","2020-03-01","2020-04-01"]},benchmark:{default:null},height:{default:"300px"},valueName:{default:function(){return[""]}},benchmarkName:{default:"大盤報酬"},fill:{default:!0},secondaryBenchmark:{default:!1},visualMap:{default:null},livePerformanceUpdate:{default:null},maxSamples:{default:100},dataZoom:{default:null},colors:{default:function(){return["#37459c","#eb7e26","#14b363"]}}},components:{VChart:Ve.b},provide:Object(o.a)({},Ve.a,"light"),data:function(){var t={animation:!1,type:"value",scale:!0,axisLabel:{formatter:"{value}%",inside:!0},show:!0,minorTick:{show:!1},minorSplitLine:{show:!1},axisTick:{show:!0,inside:!0},axisLine:{show:!1},splitLine:{show:!1},position:"right"},e=t;this.secondaryBenchmark&&((e=[JSON.parse(JSON.stringify(t)),JSON.parse(JSON.stringify(t))])[0].position="right",e[0].axisLabel.formatter=null,e[0].axisLabel.inside=!0,e[1].position="left",e[1].axisLabel.inside=!0,console.log(e));return{option:{visualMap:this.visualMap,dataZoom:this.dataZoom,legend:{bottom:80,left:5,orient:"vertical",show:!this.secondaryBenchmark},grid:{left:0,right:0,top:"12px",bottom:"20px"},xAxis:{type:"time",animation:!1,name:"日期",minorTick:{show:!1},minorSplitLine:{show:!1},axisLine:{lineStyle:{color:"#aaa"}},axisLabel:{inside:!0},inverval:1},yAxis:e,series:[],backgroundColor:"transparent"}}},mounted:function(){this.init()},methods:{makeSeriesData:function(t,e,i){var n=this.fill?[{offset:0,color:this.colors[i]+"99"},{offset:1,color:this.colors[i]+"00",alpha:1}]:[],o=this.secondaryBenchmark?null:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:n,global:!1}},r=null,l=null;if(this.livePerformanceUpdate){var c=this.livePerformanceUpdate;e[0][0]>c&&(c=e[0][0]),r={data:[{coord:[c,0],symbol:"circle",symbolSize:10,itemStyle:{color:"#55bd95"},value:"Live",label:{color:"#459979",offset:[-20,0]}}]},l={symbol:"circle",symbolSize:10,itemStyle:{color:"#55bd95"},data:[[{coord:[c,0]},{coord:[e.slice(-1)[0][0],0]}]],lineStyle:{type:"solid",cap:"round",width:3}}}return{name:t,data:e,markPoint:r,markLine:l,animation:!1,zlevel:100,type:"line",smooth:!1,areaStyle:o,itemStyle:{opacity:0},lineStyle:{color:this.secondaryBenchmark?null:this.colors[i]},silent:!0}},init:function(){for(var i in this.option.series=[],this.values){var t=this.valueName[i],e=this.index,n=this.values[i],o=this.values[i][0],r=Math.max(Math.round(n.length/this.maxSamples),1),data=[];for(var l in e)(l=parseInt(l))%r!=0&&0!==l&&l!==e.length-1||(this.secondaryBenchmark?data.push([e[l],n[l]]):data.push([e[l],n[l]/o*100-100]));var c=this.makeSeriesData(t,data,i);this.option.series.push(c)}if(void 0!==this.$props.benchmark&&null!==this.$props.benchmark){var d=Math.max(Math.round(this.index.length/this.maxSamples),1),h=[];for(var f in this.index)(f=parseInt(f))%d!=0&&f!==this.index.length-1&&0!==f||h.push([this.index[f],100*(this.$props.benchmark[f]/this.$props.benchmark[0]-1)]);this.option.series.push({name:this.benchmarkName,data:h,animation:!1,smooth:!1,type:"line",itemStyle:{color:"#000",borderColor:"#000",opacity:0},lineStyle:{color:"#aaa"},yAxisIndex:this.secondaryBenchmark?1:0,silent:!0})}}},watch:{index:{immediate:!0,handler:function(t,e){this.init()}},values:{immediate:!0,handler:function(t,e){this.init()}}}},Ee=(n(406),n(40)),Be=Object(Ee.a)(Re,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"relative"}},[n("div",{staticStyle:{"z-index":"1"}},[n("v-chart",{staticClass:"chart",staticStyle:{"z-index":"0"},style:"height:"+t.height,attrs:{option:t.option,autoresize:""}})],1)])}),[],!1,null,"6aef51a0",null);e.default=Be.exports},412:function(t,e,n){"use strict";n.d(e,"a",(function(){return pt}));var o=n(402),r=n(340),l=n(319),c=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(l.a)(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(n(334).a),d=c,h=n(318),f=n(324),m=n(337),v=n(339),y=n(403),_=n(327);function x(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function S(t){if(f.a.domSupported)for(var style=document.documentElement.style,i=0,e=t.length;i<e;i++)if(t[i]in style)return t[i]}var w=S(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),k=S(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function M(t,e){if(!t)return e;e=Object(_.h)(e,!0);var n=t.indexOf(e);return(t=-1===n?e:"-"+t.slice(0,n)+"-"+e).toLowerCase()}var O=n(330),C=M(k,"transition"),I=M(w,"transform"),A="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(f.a.transform3dSupported?"will-change:transform;":"");function D(t,e,n){var o=t.toFixed(0)+"px",r=e.toFixed(0)+"px";if(!f.a.transformSupported)return n?"top:"+r+";left:"+o+";":[["top",r],["left",o]];var l=f.a.transform3dSupported,c="translate"+(l?"3d":"")+"("+o+","+r+(l?",0":"")+")";return n?"top:0;left:0;"+I+":"+c+";":[["top",0],["left",0],[w,c]]}function T(t,e,n){var o=[],r=t.get("transitionDuration"),l=t.get("backgroundColor"),c=t.get("shadowBlur"),d=t.get("shadowColor"),v=t.get("shadowOffsetX"),y=t.get("shadowOffsetY"),x=t.getModel("textStyle"),S=Object(O.d)(t,"html"),w=v+"px "+y+"px "+c+"px "+d;return o.push("box-shadow:"+w),e&&r&&o.push(function(t,e){var n="cubic-bezier(0.23,1,0.32,1)",o=" "+t/2+"s "+n,r="opacity"+o+",visibility"+o;return e||(o=" "+t+"s "+n,r+=f.a.transformSupported?","+I+o:",left"+o+",top"+o),C+":"+r}(r,n)),l&&(f.a.canvasSupported?o.push("background-color:"+l):(o.push("background-color:#"+Object(m.i)(l)),o.push("filter:alpha(opacity=70)"))),Object(h.k)(["width","color","radius"],(function(e){var n="border-"+e,r=Object(_.h)(n),l=t.get(r);null!=l&&o.push(n+":"+l+("color"===e?"":"px"))})),o.push(function(t){var e=[],n=t.get("fontSize"),o=t.getTextColor();o&&e.push("color:"+o),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(3*n/2)+"px");var r=t.get("textShadowColor"),l=t.get("textShadowBlur")||0,c=t.get("textShadowOffsetX")||0,d=t.get("textShadowOffsetY")||0;return r&&l&&e.push("text-shadow:"+c+"px "+d+"px "+l+"px "+r),Object(h.k)(["decoration","align"],(function(n){var o=t.get(n);o&&e.push("text-"+n+":"+o)})),e.join(";")}(x)),null!=S&&o.push("padding:"+Object(_.g)(S).join("px ")+"px"),o.join(";")+";"}function j(t,e,n,o,r){var l=e&&e.painter;if(n){var c=l&&l.getViewportRoot();c&&Object(y.c)(t,c,document.body,o,r)}else{t[0]=o,t[1]=r;var d=l&&l.getViewportRootOffset();d&&(t[0]+=d.offsetLeft,t[1]+=d.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var P=function(){function t(t,e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,f.a.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var r=this._zr=e.getZr(),l=this._appendToBody=n&&n.appendToBody;j(this._styleCoord,r,l,e.getWidth()/2,e.getHeight()/2),l?document.body.appendChild(o):t.appendChild(o),this._container=t;var c=this;o.onmouseenter=function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0},o.onmousemove=function(t){if(t=t||window.event,!c._enterable){var e=r.handler,n=r.painter.getViewportRoot();Object(v.e)(n,t,!0),e.dispatch("mousemove",t)}},o.onmouseleave=function(){c._inContent=!1,c._enterable&&c._show&&c.hideLater(c._hideDelay)}}return t.prototype.update=function(t){var e,style,n,o=this._container,r=(style="position",(n=(e=o).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e))?style?n[style]:n:null),l=o.style;"absolute"!==l.position&&"absolute"!==r&&(l.position="relative"),t.get("alwaysShowContent")&&this._moveIfResized(),this.el.className=t.get("className")||""},t.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,style=n.style,o=this._styleCoord;n.innerHTML?style.cssText=A+T(t,!this._firstShow,this._longHide)+D(o[0],o[1],!0)+"border-color:"+Object(_.b)(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):style.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(content,t,e,n,o){var r=this.el;if(null!=content){var l="";if(Object(h.B)(o)&&"item"===e.get("trigger")&&!x(e)&&(l=function(t,e,n){if(!Object(h.B)(n)||"inside"===n)return"";var o=t.get("backgroundColor"),r=t.get("borderWidth");e=Object(_.b)(e);var l,c,d="left"===(l=n)?"right":"right"===l?"left":"top"===l?"bottom":"top",f=Math.max(1.5*Math.round(r),6),m="",v=I+":";Object(h.r)(["left","right"],d)>-1?(m+="top:50%",v+="translateY(-50%) rotate("+(c="left"===d?-225:-45)+"deg)"):(m+="left:50%",v+="translateX(-50%) rotate("+(c="top"===d?225:45)+"deg)");var y=c*Math.PI/180,x=f+r,S=x*Math.abs(Math.cos(y))+x*Math.abs(Math.sin(y)),w=e+" solid "+r+"px;";return'<div style="'+["position:absolute;width:"+f+"px;height:"+f+"px;",(m+=";"+d+":-"+Math.round(100*((S-Math.SQRT2*r)/2+Math.SQRT2*r-(S-x)/2))/100+"px")+";"+v+";","border-bottom:"+w,"border-right:"+w,"background-color:"+o+";"].join("")+'"></div>'}(e,n,o)),Object(h.B)(content))r.innerHTML=content+l;else if(content){r.innerHTML="",Object(h.t)(content)||(content=[content]);for(var i=0;i<content.length;i++)Object(h.v)(content[i])&&content[i].parentNode!==r&&r.appendChild(content[i]);if(l&&r.childNodes.length){var c=document.createElement("div");c.innerHTML=l,r.appendChild(c)}}}else r.innerHTML=""},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},t.prototype.moveTo=function(t,e){var n=this._styleCoord;if(j(n,this._zr,this._appendToBody,t,e),null!=n[0]&&null!=n[1]){var o=this.el.style,r=D(n[0],n[1]);Object(h.k)(r,(function(t){o[t[0]]=t[1]}))}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){var t=this,style=this.el.style;style.visibility="hidden",style.opacity="0",f.a.transform3dSupported&&(style.willChange=""),this._show=!1,this._longHideTimeout=setTimeout((function(){return t._longHide=!0}),500)},t.prototype.hideLater=function(time){!this._show||this._inContent&&this._enterable||(time?(this._hideDelay=time,this._show=!1,this._hideTimeout=setTimeout(Object(h.c)(this.hide,this),time)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},t}(),L=n(386),N=n(350);function z(t){return Math.max(0,t)}function V(style){var t=z(style.shadowBlur||0),e=z(style.shadowOffsetX||0),n=z(style.shadowOffsetY||0);return{left:z(t-e),right:z(t+e),top:z(t-n),bottom:z(t+n)}}function R(t,e,n,o){t[0]=n,t[1]=o,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var E=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),R(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){t.get("alwaysShowContent")&&this._moveIfResized()},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(content,t,e,n,o){h.A(content)&&Object(N.c)(""),this.el&&this._zr.remove(this.el);var r=e.getModel("textStyle");this.el=new L.a({style:{rich:t.richTextStyles,text:content,lineHeight:22,backgroundColor:e.get("backgroundColor"),borderRadius:e.get("borderRadius"),borderWidth:1,borderColor:n,shadowColor:e.get("shadowColor"),shadowBlur:e.get("shadowBlur"),shadowOffsetX:e.get("shadowOffsetX"),shadowOffsetY:e.get("shadowOffsetY"),textShadowColor:r.get("textShadowColor"),textShadowBlur:r.get("textShadowBlur")||0,textShadowOffsetX:r.get("textShadowOffsetX")||0,textShadowOffsetY:r.get("textShadowOffsetY")||0,fill:e.get(["textStyle","color"]),padding:Object(O.d)(e,"richText"),verticalAlign:"top",align:"left"},z:e.get("z")}),this._zr.add(this.el);var l=this;this.el.on("mouseover",(function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0})),this.el.on("mouseout",(function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1}))},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),n=V(t.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},t.prototype.moveTo=function(t,e){var n=this.el;if(n){var o=this._styleCoord;R(o,this._zr,t,e),t=o[0],e=o[1];var style=n.style,r=z(style.borderWidth||0),l=V(style);n.x=t+r+l.left,n.y=e+r+l.top,n.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(time){!this._show||this._inContent&&this._enterable||(time?(this._hideDelay=time,this._show=!1,this._hideTimeout=setTimeout(h.c(this.hide,this),time)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}(),B=n(322),H=n(554),G=n(400),W=n(331),F=n(355),U=n(399),Y=n(352),X=n(398),Z=n(321),$=n(335),K=n(390),J=n(329),Q=n(376),tt=n(397),et=n(356),it=h.c,nt=h.k,ot=B.n,at=new H.a({shape:{x:-1,y:-1,width:2,height:2}}),st=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(l.a)(e,t),e.prototype.init=function(t,e){if(!f.a.node){var n=t.getComponent("tooltip"),o=n.get("renderMode");this._renderMode=Object(Z.i)(o),this._tooltipContent="richText"===this._renderMode?new E(e):new P(e.getDom(),e,{appendToBody:n.get("appendToBody",!0)})}},e.prototype.render=function(t,e,n){if(!f.a.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._alwaysShowContent=t.get("alwaysShowContent");var o=this._tooltipContent;o.update(t),o.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._updatePosition="html"===this._renderMode?Object(et.c)(it(this._doUpdatePosition,this),50):this._doUpdatePosition}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");U.a("itemTooltip",this._api,it((function(e,n,o){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(n,o):"leave"===e&&this._hide(o))}),this))},e.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!n.isDisposed()&&o.manuallyShowTip(t,e,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})}))}},e.prototype.manuallyShowTip=function(t,e,n,o){if(o.from!==this.uid&&!f.a.node){var r=ut(o,n);this._ticket="";var l=o.dataByCoordSys,c=function(t,e,n){var o=Object(Z.r)(t).queryOptionMap,r=o.keys()[0];if(!r||"series"===r)return;var l,c=Object(Z.t)(e,r,o.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(!c)return;if(n.getViewOfComponentModel(c).group.traverse((function(e){var n=Object(J.a)(e).tooltipConfig;if(n&&n.name===t.name)return l=e,!0})),l)return{componentMainType:r,componentIndex:c.componentIndex,el:l}}(o,e,n);if(c){var rect=c.el.getBoundingRect().clone();rect.applyTransform(c.el.transform),this._tryShow({offsetX:rect.x+rect.width/2,offsetY:rect.y+rect.height/2,target:c.el,position:o.position,positionDefault:"bottom"},r)}else if(o.tooltip&&null!=o.x&&null!=o.y){var d=at;d.x=o.x,d.y=o.y,d.update(),Object(J.a)(d).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:d},r)}else if(l)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:l,tooltipOption:o.tooltipOption},r);else if(null!=o.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,o))return;var h=Object(G.a)(o,e),m=h.point[0],v=h.point[1];null!=m&&null!=v&&this._tryShow({offsetX:m,offsetY:v,target:h.el,position:o.position,positionDefault:"bottom"},r)}else null!=o.x&&null!=o.y&&(n.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:n.getZr().findHover(o.x,o.y).target},r))}},e.prototype.manuallyHideTip=function(t,e,n,o){var r=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(ut(o,n))},e.prototype._manuallyAxisShowTip=function(t,e,n,o){var r=o.seriesIndex,l=o.dataIndex,c=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=l&&null!=c){var d=e.getSeriesByIndex(r);if(d)if("axis"===lt([d.getData().getItemModel(l),d,(d.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:l,position:o.position}),!0}},e.prototype._tryShow=function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(n){var r,l;this._lastDataByCoordSys=null,Object(tt.a)(n,(function(t){return null!=Object(J.a)(t).dataIndex?(r=t,!0):null!=Object(J.a)(t).tooltipConfig?(l=t,!0):void 0}),!0),r?this._showSeriesItemTooltip(t,r,e):l?this._showComponentItemTooltip(t,l,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},e.prototype._showOrMove=function(t,e){var n=t.get("showDelay");e=h.c(e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},e.prototype._showAxisTooltip=function(t,e){var n=this._ecModel,o=this._tooltipModel,r=[e.offsetX,e.offsetY],l=lt([e.tooltipOption],o),c=this._renderMode,d=[],f=Object(O.c)("section",{blocks:[],noHeader:!0}),m=[],v=new O.a;nt(t,(function(t){nt(t.dataByAxis,(function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),o=t.value;if(e&&null!=o){var r=X.d(o,e.axis,n,t.seriesDataIndices,t.valueLabelOpt),l=Object(O.c)("section",{header:r,noHeader:!h.R(r),sortBlocks:!0,blocks:[]});f.blocks.push(l),h.k(t.seriesDataIndices,(function(h){var f=n.getSeriesByIndex(h.seriesIndex),y=h.dataIndexInside,x=f.getDataParams(y);if(!(x.dataIndex<0)){x.axisDim=t.axisDim,x.axisIndex=t.axisIndex,x.axisType=t.axisType,x.axisId=t.axisId,x.axisValue=Y.c(e.axis,{value:o}),x.axisValueLabel=r,x.marker=v.makeTooltipMarker("item",_.b(x.color),c);var S=Object(Q.b)(f.formatTooltip(y,!0,null));S.markupFragment&&l.blocks.push(S.markupFragment),S.markupText&&m.push(S.markupText),d.push(x)}}))}}))})),f.blocks.reverse(),m.reverse();var y=e.position,x=l.get("order"),S=Object(O.b)(f,v,c,x,n.get("useUTC"),l.get("textStyle"));S&&m.unshift(S);var w="richText"===c?"\n\n":"<br/>",k=m.join(w);this._showOrMove(l,(function(){this._updateContentNotChangedOnAxis(t,d)?this._updatePosition(l,y,r[0],r[1],this._tooltipContent,d):this._showTooltipContent(l,k,d,Math.random()+"",r[0],r[1],y,null,v)}))},e.prototype._showSeriesItemTooltip=function(t,e,n){var o=this._ecModel,r=Object(J.a)(e),l=r.seriesIndex,c=o.getSeriesByIndex(l),d=r.dataModel||c,h=r.dataIndex,f=r.dataType,data=d.getData(f),m=this._renderMode,v=t.positionDefault,y=lt([data.getItemModel(h),d,c&&(c.coordinateSystem||{}).model],this._tooltipModel,v?{position:v}:null),x=y.get("trigger");if(null==x||"item"===x){var S=d.getDataParams(h,f),w=new O.a;S.marker=w.makeTooltipMarker("item",_.b(S.color),m);var k=Object(Q.b)(d.formatTooltip(h,!1,f)),M=y.get("order"),C=k.markupFragment?Object(O.b)(k.markupFragment,w,m,M,o.get("useUTC"),y.get("textStyle")):k.markupText,I="item_"+d.name+"_"+h;this._showOrMove(y,(function(){this._showTooltipContent(y,C,S,I,t.offsetX,t.offsetY,t.position,t.target,w)})),n({type:"showTip",dataIndexInside:h,dataIndex:data.getRawIndex(h),seriesIndex:l,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,e,n){var o=Object(J.a)(e),r=o.tooltipConfig.option||{};if(h.B(r)){r={content:r,formatter:r}}var l=[r],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&l.push(c),l.push({formatter:r.content});var d=t.positionDefault,f=lt(l,this._tooltipModel,d?{position:d}:null),m=f.get("content"),v=Math.random()+"",y=new O.a;this._showOrMove(f,(function(){var n=h.d(f.get("formatterParams")||{});this._showTooltipContent(f,m,n,v,t.offsetX,t.offsetY,t.position,e,y)})),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,e,n,o,r,l,c,d,f){if(this._ticket="",t.get("showContent")&&t.get("show")){var m=this._tooltipContent,v=t.get("formatter");c=c||t.get("position");var html=e,y=this._getNearestPoint([r,l],n,t.get("trigger"),t.get("borderColor")).color;if(v)if(h.B(v)){var x=t.ecModel.get("useUTC"),S=h.t(n)?n[0]:n;html=v,S&&S.axisType&&S.axisType.indexOf("time")>=0&&(html=Object(K.h)(S.axisValue,html,x)),html=_.d(html,n,!0)}else if(h.w(v)){var w=it((function(e,html){e===this._ticket&&(m.setContent(html,f,t,y,c),this._updatePosition(t,c,r,l,m,n,d))}),this);this._ticket=o,html=v(n,o,w)}else html=v;m.setContent(html,f,t,y,c),m.show(t,y),this._updatePosition(t,c,r,l,m,n,d)}},e.prototype._getNearestPoint=function(t,e,n,o){return"axis"===n||h.t(e)?{color:o||("html"===this._renderMode?"#fff":"none")}:h.t(e)?void 0:{color:o||e.color||e.borderColor}},e.prototype._doUpdatePosition=function(t,e,n,o,content,r,l){var c=this._api.getWidth(),d=this._api.getHeight();e=e||t.get("position");var f=content.getSize(),m=t.get("align"),v=t.get("verticalAlign"),rect=l&&l.getBoundingRect().clone();if(l&&rect.applyTransform(l.transform),h.w(e)&&(e=e([n,o],r,content.el,rect,{viewSize:[c,d],contentSize:f.slice()})),h.t(e))n=ot(e[0],c),o=ot(e[1],d);else if(h.A(e)){var y=e;y.width=f[0],y.height=f[1];var _=W.e(y,{width:c,height:d});n=_.x,o=_.y,m=null,v=null}else if(h.B(e)&&l){var S=function(t,rect,e,n){var o=e[0],r=e[1],l=Math.ceil(Math.SQRT2*n)+8,c=0,d=0,h=rect.width,f=rect.height;switch(t){case"inside":c=rect.x+h/2-o/2,d=rect.y+f/2-r/2;break;case"top":c=rect.x+h/2-o/2,d=rect.y-r-l;break;case"bottom":c=rect.x+h/2-o/2,d=rect.y+f+l;break;case"left":c=rect.x-o-l,d=rect.y+f/2-r/2;break;case"right":c=rect.x+h+l,d=rect.y+f/2-r/2}return[c,d]}(e,rect,f,t.get("borderWidth"));n=S[0],o=S[1]}else{S=function(t,e,content,n,o,r,l){var c=content.getSize(),d=c[0],h=c[1];null!=r&&(t+d+r+2>n?t-=d+r:t+=r);null!=l&&(e+h+l>o?e-=h+l:e+=l);return[t,e]}(n,o,content,c,d,m?null:20,v?null:20);n=S[0],o=S[1]}if(m&&(n-=ct(m)?f[0]/2:"right"===m?f[0]:0),v&&(o-=ct(v)?f[1]/2:"bottom"===v?f[1]:0),x(t)){S=function(t,e,content,n,o){var r=content.getSize(),l=r[0],c=r[1];return t=Math.min(t+l,n)-l,e=Math.min(e+c,o)-c,t=Math.max(t,0),e=Math.max(e,0),[t,e]}(n,o,content,c,d);n=S[0],o=S[1]}content.moveTo(n,o)},e.prototype._updateContentNotChangedOnAxis=function(t,e){var n=this._lastDataByCoordSys,o=this._cbParamsList,r=!!n&&n.length===t.length;return r&&nt(n,(function(n,l){var c=n.dataByAxis||[],d=(t[l]||{}).dataByAxis||[];(r=r&&c.length===d.length)&&nt(c,(function(t,n){var l=d[n]||{},c=t.seriesDataIndices||[],f=l.seriesDataIndices||[];(r=r&&t.value===l.value&&t.axisType===l.axisType&&t.axisId===l.axisId&&c.length===f.length)&&nt(c,(function(t,e){var n=f[e];r=r&&t.seriesIndex===n.seriesIndex&&t.dataIndex===n.dataIndex})),o&&h.k(t.seriesDataIndices,(function(t){var n=t.seriesIndex,l=e[n],c=o[n];l&&c&&c.data!==l.data&&(r=!1)}))}))})),this._lastDataByCoordSys=t,this._cbParamsList=e,!!r},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,e){f.a.node||(this._tooltipContent.dispose(),U.b("itemTooltip",e))},e.type="tooltip",e}($.a);function lt(t,e,n){var o,r=e.ecModel;n?(o=new F.a(n,r,r),o=new F.a(e.option,o,r)):o=e;for(var i=t.length-1;i>=0;i--){var l=t[i];l&&(l instanceof F.a&&(l=l.get("tooltip",!0)),h.B(l)&&(l={formatter:l}),l&&(o=new F.a(l,o,r)))}return o}function ut(t,e){return t.dispatchAction||h.c(e.dispatchAction,e)}function ct(t){return"center"===t||"middle"===t}var ht=st;function pt(t){Object(r.a)(o.a),t.registerComponentModel(d),t.registerComponentView(ht),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},(function(){})),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},(function(){}))}},414:function(t,e,n){"use strict";n(385)},415:function(t,e,n){"use strict";n.r(e);var o=n(25),r=(n(18),n(28),n(340)),l=n(560),c=n(448),d=n(412),h=n(870),f=n(868),m=n(359);Object(r.a)([l.a,d.a,h.a,c.a,f.a]);var v={name:"Maxdrawdown",props:{values:{default:[1,2,3,4]},benchmark:{default:[1,2,3,4]},index:{default:["2020-01-01","2020-02-01","2020-03-01","2020-04-01"]}},components:{VChart:m.b},provide:Object(o.a)({},m.a,"light"),data:function(){return{option:{legend:{bottom:50,left:-5,orient:"vertical"},tooltip:{trigger:"axis",position:function(t){return[t[0]-100,t[1]-100]},axisPointer:{type:"line",snap:!0,axis:"x"},formatter:function(t){for(var e,n=t[0].value[0]+"<br/>",i=0,o=t.length;i<o;i++)e=Math.round(100*t[i].value[1])/100+"%",n+=t[i].marker+t[i].seriesName+"："+e+"<br/>";return n}},grid:{left:0,right:0,top:"12px",bottom:"10px"},xAxis:{type:"time",name:"日期",minorTick:{show:!1},minorSplitLine:{show:!1},axisLabel:{inside:!0},inverval:1},yAxis:{type:"value",name:"下跌幅度",axisLabel:{formatter:"{value}%",inside:!0,position:"right"},show:!0,minorTick:{show:!1},minorSplitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},lineStyle:{width:0},position:"right"},series:[{name:"策略",data:[],type:"line",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(232, 56, 115, 0)"},{offset:1,color:"rgba(232, 56, 115, 1)",alpha:1}],global:!1}},itemStyle:{color:"rgba(232, 56, 115, 0.5)",borderColor:"rgba(232, 56, 115, 0.5)",opacity:0},lineStyle:{color:"rgba(232, 56, 115, 0.5)"}},{name:"大盤",data:[],type:"line",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(209, 204, 204, 0)"},{offset:1,color:"#aaa",alpha:1}],global:!1}},itemStyle:{color:"#aaa",borderColor:"#aaa",opacity:0},lineStyle:{color:"#aaa"}}],backgroundColor:"transparent"}}},mounted:function(){this.option.series[0].data=this.calDD(this.values),this.option.series[1].data=this.calDD(this.benchmark)},methods:{calDD:function(t){var e=[],n=0;for(var i in t)n=Math.max(t[i],n),e.push(t[i]/n);var o=this.index,r=[];for(var l in o)r.push([o[l],100*e[l]-100]);return r}}},y=(n(442),n(40)),component=Object(y.a)(v,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-chart",{staticClass:"chart",staticStyle:{"z-index":"0"},attrs:{option:t.option,autoresize:""}})}),[],!1,null,"bb9fd992",null);e.default=component.exports},416:function(t,e,n){"use strict";n.r(e);n(18),n(66);var o={props:{vip:{default:!1}},data:function(){return{fakeData:[["1258 其祥-KY",-.24226804123711343,.1,"2021-01-01"],["1336 台翰",-.015452538631346768,.1,"2021-01-01"],["1413 宏洲",-.08035714285714313,.1,"2021-01-01"],["1528 恩德",-.08727858293075608,.1,"2021-01-01"],["8916 光隆",.10973451327433681,.1,"2021-01-01"],["9962 有益",.00964630225080354,.1,"2021-01-01"]]}},methods:{stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()}}},r=(n(414),n(40)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"uk-inline uk-width-1-1",staticStyle:{"overflow-x":"hidden"}},[n("table",{staticClass:"uk-table uk-table-divider uk-width-1-1",staticStyle:{"white-space":"nowrap"}},[t._m(0),t._v(" "),n("tbody",t._l(t.fakeData,(function(e){return n("tr",{key:e[0]},[n("td",{staticClass:"uk-text-primary"},[t._v(t._s(e[0]))]),t._v(" "),n("td",{style:"color:"+t.stockReturnColor(e[1])},[t._v("\n            "+t._s(Math.round(100*t.sign(e[1]))/100)+"%\n          ")]),t._v(" "),n("td",{style:"color:"+t.stockReturnColor(e[2])},[t._v("\n            "+t._s(100*e[2])+" %\n          ")]),t._v(" "),n("td",{staticClass:"uk-text-right"},[t._v(t._s(e[3]))])])})),0)]),t._v(" "),n("div",{staticClass:"blur uk-position-cover uk-overlay uk-overlay-default uk-flex uk-flex-center uk-flex-middle"},[n("nuxt-link",{attrs:{to:"/pricing"}},[t.vip?n("div",{staticClass:"uk-text-center vip uk-text-primary",attrs:{"uk-scrollspy":"cls: uk-animation-kenburns; repeat: true"}},[n("span",{attrs:{"uk-icon":"icon: lock; ratio: 3.5"}}),t._v(" "),n("h2",{staticClass:"uk-text-primary"},[t._v("FinLab VIP")]),t._v(" "),n("p",[t._v("\n            學程式、練投資一切搞定\n          ")])]):t._e()]),t._v(" "),t.vip?t._e():n("a",{attrs:{"uk-toggle":"target: #login-ui"}},[t._m(1)])],1)])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("名稱")]),t._v(" "),n("th",[t._v("漲跌")]),t._v(" "),n("th",[t._v("權重")]),t._v(" "),n("th",{staticClass:"uk-text-right"},[t._v("清單新增")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"uk-text-center vip uk-text-primary",attrs:{"uk-scrollspy":"cls: uk-animation-kenburns; repeat: true"}},[n("span",{attrs:{"uk-icon":"icon: lock; ratio: 3.5"}}),t._v(" "),n("h2",{staticClass:"uk-text-primary"},[t._v("FinLab")]),t._v(" "),n("p",[t._v("\n            登入查看符合條件的清單\n          ")])])}],!1,null,"96fe9148",null);e.default=component.exports},423:function(t,e,n){},424:function(t,e,n){},425:function(t,e,n){"use strict";n.r(e);var o=n(22),r=n(8),l=(n(38),n(44),n(117),n(18),n(28),n(66),n(58),n(158),n(60),n(333),n(67),n(93),n(323)),c=n(19),d=n(94),h=n.n(d),f=Object(l.c)({components:{},props:{uid:{default:null,type:String},strategy_id:{default:null,type:String},position_id:{default:null,type:String},positionPredefined:{default:null,type:Object}},data:function(){var t=this;return window.goto=function(link){t.$router.push(link)},{showInfo:!1,position:null,mounted:!1,tableMode:"present",displayTableMode:["當前統計","近期更動清單"],sortTableCol:"股票",sortAscending:!0,table:[],weights:{},userCap:20,colabLink:null,buildingColab:!1,next_trading_date:null,update_date:null,last_updated:null,trade_at:null,stop_loss:-1/0,take_profit:1/0,displayStockId:"",failed:!1,freq:"1d"}},mounted:function(){this.init(),this.mounted=!0},methods:{openStockPanel:function(s){this.displayStockId=s.split(" ")[0],window.scrollTo(document.getElementById("stock-id-".concat(s)).top)},showStock:function(s){this.displayStockId=s,h.a.modal("#modal-stock").show()},setSortColumn:function(col){this.sortTableCol===col?this.sortAscending=!this.sortAscending:this.sortAscending=!1,this.sortTableCol=col},init:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,l,table,p,d,h,f,m,v,y,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.strategy_id&&t.position_id||t.positionPredefined){e.next=2;break}return e.abrupt("return");case 2:if(n=null,!t.positionPredefined){e.next=7;break}n=t.positionPredefined,e.next=20;break;case 7:return e.prev=7,e.next=10,c.c.collection("users").doc(t.uid).collection("strategies").doc(t.strategy_id).collection("positions").doc(t.position_id).get();case 10:r=e.sent,n=r.data(),console.log(n),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(7),console.log("PositionPanel: cannot read position "+e.t0),t.failed=!0,e.abrupt("return");case 20:l=n,t.next_trading_date=l.next_trading_date,t.update_date=l.update_date,t.trade_at=l.trade_at,t.last_updated=l.last_updated.toDate(),t.position=l,table=[],t.weights={},e.t1=regeneratorRuntime.keys(l);case 29:if((e.t2=e.t1()).done){e.next=53;break}if(p=e.t2.value,d=l[p],"object"===Object(o.a)(d)){e.next=35;break}return"freq"==p?t.freq=d:"stop_loss"===p?t.stop_loss=d:"take_profit"===p&&(t.take_profit=d),e.abrupt("continue",29);case 35:if("NaT"===d.exit_date&&(d.exit_date=""),d.exit_date&&(d.status="exit"),"weight"in d||"return"in d){e.next=39;break}return e.abrupt("continue",29);case 39:h={close:"收盤",open:"開盤","open|close":"盤中"},f=t.trade_at in h?h[self.trade_at]:self.trade_at,m={hold:"持有",exit:"移除",enter:"新增",sl:"".concat(f,"停損"),tp:"".concat(f,"停利"),sl_:"已停損",tp_:"已停利","買進":"新增","賣出":"移除","停損停利":d.return>0?"".concat(f,"停利"):"".concat(f,"停損")},v=d.status in m?m[d.status]:d.status,y=0,"next_weight"in d&&(y=d.next_weight),"string"==typeof d.exit_date&-1!=d.exit_date.indexOf("T")&&(d.exit_date=d.exit_date.split("T")[0]),"string"==typeof d.entry_date&-1!=d.entry_date.indexOf("T")&&(d.entry_date=d.entry_date.split("T")[0]),_={stock:p,action:v,profit:Math.round(1e3*d.return)/10,weight:Math.round(1e3*d.weight)/10,nextWeight:Math.round(1e3*y)/10,entry_sig_date:d.entry_date,exit_sig_date:d.exit_date,entry_price:d.entry_price},table.push(_),"買進"==d.status||"entry"==d.status?t.update_date=d.entry_date:"賣出"!=d.status&&"exit"!=d.status||(t.update_date=d.exit_date),"weight"in d&&(t.weights[p]=d.weight),e.next=29;break;case 53:t.table=table;case 54:case"end":return e.stop()}}),e,null,[[7,15]])})))()},stockStatusColor:function(t){var output={"新增":"gray","持有":"lightgray","移除":"gray","停損停利":"#252786"};return t in output?output[t]:"gray"},stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()},formatDate:function(t){if(null===t)return"";var e=new Date,n=t.toLocaleString("en-us").replace(/(\d+)\/(\d+)\/(\d+)/,"$3-$1-$2").replace(/(\d+):(\d+):(\d+)/,"$1:$2").split(", ");return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?n[1]:n[0]},generate_colab_script:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in t.buildingColab=!0,n="",t.weights)r=o.match(/\d+/)[0],n+='  "'.concat(r,'" : ').concat(t.weights[o],",\n");return l=["!pip install finlab -q","from finlab.online.order_executor import OrderExecutor\n\noe = OrderExecutor.from_weights({\n\n".concat(n,"\n}, ").concat(1e4*t.userCap,")"),"# 查看欲執行的委託單：\noe._calculate_new_orders()","# 市價下單（所有委託單）\noe.create_orders()","# 更新委託單價格到市價（所有未成交委託單）\noe.create_orders()","# 刪單（所有委託單）\noe.cancel_orders()"],c=null,e.prev=5,d={sid:t.$props.strategy_id,uid:t.$props.uid,code:JSON.stringify(l)},e.next=9,t.$axios.post("https://asia-northeast1-fdata-299302.cloudfunctions.net/generate_colab_strategy",d);case 9:c=e.sent,e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(5),alert("upload colab fail: "+e.t0.data+" "+e.t0),console.log(e.t0),e.abrupt("return");case 17:t.colabLink=c.data;case 18:case"end":return e.stop()}}),e,null,[[5,12]])})))()}},computed:{filteredCols:function(){return this.$store.state.user&&this.$route.query.uid===this.$store.state.user.uid?"present"===this.tableMode?["名稱","漲跌","權重","進場價格","清單新增"]:["名稱","新增移除","漲跌","權重更新","清單新增","清單移除"]:"present"===this.tableMode?["名稱","漲跌","權重","清單新增"]:["名稱","新增移除","漲跌","權重更新","清單新增","清單移除"]},realNextTradingDate:function(){if(0===this.table.length)return"";var t="1977-01-01";for(var e in this.table){var n=Object.assign({},this.table[e]);n.entry_sig_date>t&&(t=n.entry_sig_date),n.exit_sig_date>t&&(t=n.exit_sig_date)}return t},rows:function(){var t=this;if(0===this.table.length)return[];var e=[];for(var n in this.table)if("present"!==this.tableMode||0!=this.table[n].weight){var o=Object.assign({},this.table[n]);e.push(o)}return e.sort((function(a,b){var e={"名稱":"stock","漲跌":"profit","新增移除":"action","權重":"weight","權重更新":"nextWeight","進場價格":"entry_price","清單新增":"entry_sig_date","清單移除":"exit_sig_date"}[t.sortTableCol];return a[e]<b[e]^t.sortAscending?1:-1})),e},unrealizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,o=this.table[e].profit*(n/100);isNaN(o)||(t+=o,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},realizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,o=this.table[e].profit*(n/100);isNaN(o)||"移除"!==this.table[e].action||(t+=o,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},hasPermission:function(){var t=this.$store.state.strategy.info.public_position,e=null!==this.$store.state.user;return this.userPermission>=t||e&&this.$store.state.user.uid===this.$props.uid},userPermission:function(){return""===this.$store.state.role?0:"free"===this.$store.state.role?1:this.$store.state.role.includes("vip")?2:void 0}},watch:{userPermission:function(){this.init()}}}),m=(n(443),n(40)),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"padding-bottom":"24px"}},[null===t.$store.state.user?n("div",[n("FakePosition",{attrs:{vip:!1}})],1):t._e(),t._v(" "),null!==t.$store.state.user?n("div",[n("div",{staticClass:"uk-width-1-1"},[n("ul",{staticClass:"uk-flex uk-subnav uk-subnav-divider",attrs:{"uk-margin":""}},[n("li",{class:{"uk-active":"present"===t.tableMode}},[n("a",{on:{click:function(e){t.tableMode="present"}}},[n("div",[t._v("\n              "+t._s(t.displayTableMode[0])+" "),n("br"),t._v(" "),n("span",{staticClass:"uk-text-lead uk-text-bold",style:{color:t.stockReturnColor(t.unrealizedReturn)}},[t._v("\n                "+t._s(t.sign(t.unrealizedReturn))+" %\n              ")])])])]),t._v(" "),n("li",{class:{"uk-active":"future"===t.tableMode}},[n("a",{on:{click:function(e){t.tableMode="future"}}},[n("div",[t._v("\n              "+t._s(t.displayTableMode[1])+" "),n("br"),t._v(" "),n("span",{staticClass:"uk-text-lead uk-text-bold",staticStyle:{color:"#777"}},[t._v(t._s(t.realNextTradingDate))])])])])]),t._v(" "),"future"==t.tableMode?n("div",{staticClass:"uk-text-small uk-card uk-padding-small uk-margin-large-top uk-margin-large-bottom shadow"},[n("p",[t._v("此策略的模擬交易的細節")]),t._v(" "),n("ul",{staticClass:"uk-list"},[n("li",[t._v("於 "+t._s("1d"===t.freq?t.next_trading_date.split("T")[0]:t.next_trading_date)+" 之後的下個交易日\n            接近\n            "+t._s("close"===t.trade_at?"收盤":"開盤")+" 時調整部位\n          ")]),t._v(" "),t.stop_loss!=-1/0||t.take_profit!=1/0?n("li",[t._v("\n\n            "+t._s(t.stop_loss!=-1/0?"停損為"+100*t.stop_loss+"%，":"")+"\n            "+t._s(t.take_profit!=1/0?"停利為"+100*t.take_profit+"%，":"")+"\n            每日盤後檢查，如觸發則於下個交易日的\n            "+t._s("close"===t.trade_at?"收盤":"開盤")+"\n            出場\n          ")]):t._e()])]):t._e(),t._v(" "),t.mounted?n("div",{staticClass:"uk-overflow-auto"},[0!==t.rows.length?n("table",{staticClass:"uk-table uk-table-divider",staticStyle:{"white-space":"nowrap"}},[n("thead",[n("tr",{staticClass:"uk-text-right"},t._l(t.filteredCols,(function(e,o){return n("th",{key:"table-col-"+e,staticStyle:{"padding-left":"0"},style:0===o?"text-align:left!important":"text-align:right!important",on:{click:function(n){return t.setSortColumn(e)}}},[t._v("\n                "+t._s(e)+"\n                "),t.sortTableCol===e?n("span",[t._v(t._s(t.sortAscending?"▲":"▼"))]):t._e()])})),0)]),t._v(" "),n("tbody",{staticClass:"uk-text-right"},t._l(t.rows,(function(e){return n("tr",{key:"table-row-"+e.stock},[t.filteredCols.includes("名稱")?n("td",{staticClass:"uk-text-left",staticStyle:{"padding-left":"0"}},[n("div",{staticClass:"uk-text-primary",staticStyle:{cursor:"pointer"},attrs:{id:"stock-id-"+e.stock},on:{click:function(n){return t.openStockPanel(e.stock)}}},[t._v("\n                  "+t._s(e.stock)+"\n                  "),"持有"!==e.action&&"移除"!==e.action&&"新增"!==e.action?n("span",{staticClass:"round-border uk-background-primary",staticStyle:{"font-size":"0.9rem",color:"white",padding:"0 10px"}},[t._v(t._s(e.action))]):t._e()])]):t._e(),t._v(" "),t.filteredCols.includes("新增移除")?n("td",{style:"color:"+t.stockStatusColor(e.action)},[t._v("\n                "+t._s(e.action)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("漲跌")?n("td",{style:"color:"+t.stockReturnColor(e.profit)},[t._v("\n                "+t._s(t.sign(e.profit))+"%\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("權重")?n("td",{style:"color:"+t.stockReturnColor(e.weight)},[t._v("\n                "+t._s(e.weight)+" %\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("權重更新")?n("td",{style:"color:"+t.stockReturnColor(e.nextWeight)},[t._v("\n                "+t._s(e.nextWeight)+" %\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("進場價格")?n("td",[t._v("\n                "+t._s(e.entry_price)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("清單新增")?n("td",[t._v("\n                "+t._s(e.entry_sig_date)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("清單移除")?n("td",[t._v("\n                "+t._s(e.exit_sig_date)+"\n              ")]):t._e()])})),0)]):n("div",[t.failed?n("FakePosition",{attrs:{vip:!0}}):n("span",[t._v("目前策略無持股喔！")])],1)]):t._e(),t._v(" "),n("div",{staticClass:"uk-margin-large-top uk-margin-large-bottom"},[n("p",[t._v("\n          不知道怎麼使用？"),n("br"),t._v("趕快來看\n          "),n("nuxt-link",{attrs:{to:"/course?cid=LqYTLW3KkXRSPnci47xe"}},[n("span",{staticStyle:{"text-decoration":"underline"}},[t._v("平台速成教學")])]),t._v("\n          ！\n        ")],1)])])]):t._e(),t._v(" "),t.displayStockId?n("div",{staticClass:"stock-panel shadow"},[n("a",{staticClass:"uk-icon-button shadow",staticStyle:{border:"1px solid #ccc",top:"3px",right:"6px",position:"absolute","z-index":"100"},attrs:{"uk-icon":"close"},on:{click:function(e){t.displayStockId=""}}}),t._v(" "),n("div",{staticStyle:{height:"100%"}},[n("StockPanel",{attrs:{stock_id:t.displayStockId,displaySearchBar:!1}})],1)]):t._e()])}),[],!1,null,"11d24b48",null);e.default=component.exports;installComponents(component,{FakePosition:n(416).default,StockPanel:n(394).default})},442:function(t,e,n){"use strict";n(407)},443:function(t,e,n){"use strict";n(408)},445:function(t,e,n){"use strict";n.r(e);n(60),n(333),n(46);var o=n(323),r=n(415),l=Object(o.c)({components:{Maxdrawdown:r.default},props:{returns:{default:function(){return{value:[],time:[]}}},benchmark:[],drawdown_details:{default:function(){return{}}},dailyMean:{default:0},max_drawdown:{default:0}},data:function(){return{investCapital:20,investPercentage:80}},methods:{drawdownColor:function(t){var e=255-Math.min(255,t/10),n=Math.min(255,e-5);return"background: rgba(".concat(e,", ").concat(n,", 255, 0.5)")}},computed:{sortedDrawdownDetail:function(){var t=this;return Object.keys(this.drawdown_details).sort().reduce((function(e,n){return e[n]=t.drawdown_details[n],e}),{})},simulated_maxdrawdown:function(){var t=parseInt(this.investPercentage)*parseInt(this.investCapital)*this.max_drawdown;return Math.round(t/10)/10},simulated_stock_investment:function(){return Math.round(parseInt(this.investCapital)*parseInt(this.investPercentage)/10)/10},simulated_annual_return:function(){return Math.round(parseInt(this.investPercentage)*parseInt(this.investCapital)*this.dailyMean/10)/10}}}),c=(n(459),n(40)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"uk-margin-large-top uk-text-primary"},[t._v("下跌幅度")]),t._v(" "),n("Maxdrawdown",{attrs:{values:t.returns.value,benchmark:t.benchmark,index:t.returns.time}}),t._v(" "),n("h5",{staticClass:"uk-margin-large-top uk-text-primary"},[t._v("歷史最大下跌風險")]),t._v(" "),n("table",{staticClass:"uk-table uk-table-small uk-table-divider"},[t._m(0),t._v(" "),n("tbody",t._l(t.sortedDrawdownDetail,(function(e,o){return n("tr",{key:o,style:t.drawdownColor(e.Length)},[n("td",[t._v(t._s(o))]),t._v(" "),n("td",[t._v(t._s(Math.round(1e3*e.drawdown)/10)+"%")]),t._v(" "),n("td",[t._v(t._s(e.Length)+" 天")])])})),0)])],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("起始時間")]),t._v(" "),n("th",[t._v("虧損程度")]),t._v(" "),n("th",[t._v("時間長度")])])])}],!1,null,"3cd09cae",null);e.default=component.exports;installComponents(component,{Maxdrawdown:n(415).default})},447:function(t,e,n){"use strict";n.d(e,"a",(function(){return Tt}));var o=n(340),r=n(319),l=n(318),c=n(324),d={get:function(t,e,n){var o=l.d((h[t]||{})[e]);return n&&l.t(o)?o[o.length-1]:o}},h={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},f=d,m=n(332),v=n(351),y=l.k;function _(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function x(option,t,e){var n={};return y(t,(function(t){var o,r=n[t]=((o=function(){}).prototype.__hidden=o.prototype,new o);y(option[t],(function(n,o){if(m.a.isValidType(o)){var c={type:o,visual:n};e&&e(c,t),r[o]=new m.a(c),"opacity"===o&&((c=l.d(c)).type="colorAlpha",r.__hidden.__alphaForOpacity=new m.a(c))}}))})),n}var S=n(321),w=n(322),k=n(334),M=m.a.mapVisual,O=m.a.eachVisual,C=l.t,I=l.k,A=w.c,D=w.j,T=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return Object(r.a)(e,t),e.prototype.init=function(option,t,e){this.mergeDefaultAndTheme(option,e)},e.prototype.optionUpdated=function(t,e){var n=this.option;c.a.canvasSupported||(n.realtime=!1),!e&&function(t,e,n){var o;l.k(n,(function(t){e.hasOwnProperty(t)&&_(e[t])&&(o=!0)})),o&&l.k(n,(function(n){e.hasOwnProperty(n)&&_(e[n])?t[n]=l.d(e[n]):delete t[n]}))}(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var e=this.stateList;t=l.c(t,this),this.controllerVisuals=x(this.option.controller,e,t),this.targetVisuals=x(this.option.target,e,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries((function(t,n){e.push(n)})):e=S.p(t),e},e.prototype.eachTargetSeries=function(t,e){l.k(this.getTargetSeriesIndices(),(function(n){var o=this.ecModel.getSeriesByIndex(n);o&&t.call(e,o)}),this)},e.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries((function(n){n===t&&(e=!0)})),e},e.prototype.formatValueText=function(t,e,n){var o,option=this.option,r=option.precision,c=this.dataBound,d=option.formatter;n=n||["<",">"],l.t(t)&&(t=t.slice(),o=!0);var h=e?t:o?[f(t[0]),f(t[1])]:f(t);return l.B(d)?d.replace("{value}",o?h[0]:h).replace("{value2}",o?h[1]:h):l.w(d)?o?d(t[0],t[1]):d(t):o?t[0]===c[0]?n[0]+" "+h[1]:t[1]===c[1]?n[1]+" "+h[0]:h[0]+" - "+h[1]:h;function f(t){return t===c[0]?"min":t===c[1]?"max":(+t).toFixed(Math.min(r,20))}},e.prototype.resetExtent=function(){var t=this.option,e=A([t.min,t.max]);this._dataExtent=e},e.prototype.getDataDimensionIndex=function(data){var t=this.option.dimension;if(null!=t)return data.getDimensionIndex(t);for(var e=data.dimensions,i=e.length-1;i>=0;i--){var n=e[i],o=data.getDimensionInfo(n);if(!o.isCalculationCoord)return o.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,base={inRange:e.inRange,outOfRange:e.outOfRange},n=e.target||(e.target={}),o=e.controller||(e.controller={});l.H(n,base),l.H(o,base);var r=this.isCategory();function c(base){C(e.color)&&!base.inRange&&(base.inRange={color:e.color.slice().reverse()}),base.inRange=base.inRange||{color:t.get("gradientColor")}}c.call(this,n),c.call(this,o),function(base,t,e){var n=base[t],o=base[e];n&&!o&&(o=base[e]={},I(n,(function(t,e){if(m.a.isValidType(e)){var n=f.get(e,"inactive",r);null!=n&&(o[e]=n,"color"!==e||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}})))}.call(this,n,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,o=this.get("inactiveColor"),c=this.getItemSymbol()||"roundRect";I(this.stateList,(function(d){var h=this.itemSize,f=t[d];f||(f=t[d]={color:r?o:[o]}),null==f.symbol&&(f.symbol=e&&l.d(e)||(r?c:[c])),null==f.symbolSize&&(f.symbolSize=n&&l.d(n)||(r?h[0]:[h[0],h[0]])),f.symbol=M(f.symbol,(function(symbol){return"none"===symbol?c:symbol}));var m=f.symbolSize;if(null!=m){var v=-1/0;O(m,(function(t){t>v&&(v=t)})),f.symbolSize=M(m,(function(t){return D(t,[0,v],[0,h[0]],!0)}))}}),this)}.call(this,o)},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(k.a),j=T,component=n(347),P=[20,140],L=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()})),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=P[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=P[1])},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):l.t(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),l.k(this.stateList,(function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)}),this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=w.c((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries((function(n){var o=[],data=n.getData();data.each(this.getDataDimensionIndex(data),(function(e,n){t[0]<=e&&e<=t[1]&&o.push(n)}),this),e.push({seriesId:n.id,dataIndex:o})}),this),e},e.prototype.getVisualMeta=function(t){var e=N(this,"outOfRange",this.getExtent()),n=N(this,"inRange",this.option.range.slice()),o=[];function r(e,n){o.push({value:e,color:t(e,n)})}for(var l=0,c=0,d=n.length,h=e.length;c<h&&(!n.length||e[c]<=n[0]);c++)e[c]<n[l]&&r(e[c],"outOfRange");for(var f=1;l<d;l++,f=0)f&&o.length&&r(n[l],"outOfRange"),r(n[l],"inRange");for(f=1;c<h;c++)(!n.length||n[n.length-1]<e[c])&&(f&&(o.length&&r(o[o.length-1].value,"outOfRange"),f=0),r(e[c],"outOfRange"));var m=o.length;return{stops:o,outerColors:[m?o[0].color:"transparent",m?o[m-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Object(component.d)(j.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(j);function N(t,e,n){if(n[0]===n[1])return n.slice();for(var o=(n[1]-n[0])/200,r=n[0],l=[],i=0;i<=200&&r<n[1];i++)l.push(r),r+=o;return l.push(n[1]),l}var z=L,V=n(419),R=n(339),E=n(554),B=n(327),H=n(331),G=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return Object(r.a)(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,n,o){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,e,n,o):this.group.removeAll()},e.prototype.renderBackground=function(t){var e=this.visualMapModel,n=B.g(e.get("padding")||0),rect=t.getBoundingRect();t.add(new E.a({z2:-1,silent:!0,shape:{x:rect.x-n[3],y:rect.y-n[0],width:rect.width+n[3]+n[1],height:rect.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,n){var o=(n=n||{}).forceState,r=this.visualMapModel,c={};if("color"===e){var d=r.get("contentColor");c.color=d}function h(t){return c[t]}function f(t,e){c[t]=e}var v=r.controllerVisuals[o||r.getValueState(t)],y=m.a.prepareVisualTypes(v);return l.k(y,(function(o){var r=v[o];n.convertOpacityToAlpha&&"opacity"===o&&(o="colorAlpha",r=v.__alphaForOpacity),m.a.dependsOn(o,e)&&r&&r.applyVisual(t,h,f)})),c[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,n=this.api;H.g(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,e,n,o){},e.type="visualMap",e}(n(335).a),W=G,F=n(386),U=n(477),Y=n(320),X=n(575),Z=n(342),$=[["left","right","width"],["top","bottom","height"]];function K(t,e,n){var o=t.option,r=o.align;if(null!=r&&"auto"!==r)return r;for(var l={width:e.getWidth(),height:e.getHeight()},c="horizontal"===o.orient?1:0,d=$[c],h=[0,null,10],f={},i=0;i<3;i++)f[$[1-c][i]]=h[i],f[d[i]]=2===i?n[0]:o[d[i]];var m=[["x","width",3],["y","height",0]][c],rect=Object(H.e)(f,l,o.padding);return d[(rect.margin[m[2]]||0)+rect[m[0]]+.5*rect[m[1]]<.5*l[m[1]]?0:1]}function J(t,e){return l.k(t||[],(function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")})),t}var Q=n(380),tt=n(325),symbol=n(328),et=n(336),it=n(329),nt=w.j,ot=l.k,at=Math.min,st=Math.max,lt=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return Object(r.a)(e,t),e.prototype.doRender=function(t,e,n,o){this._api=n,o&&"selectDataRange"===o.type&&o.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,n){if(e){var text=e[1-n];text=null!=text?text+"":"";var o=this.visualMapModel,r=o.get("textGap"),l=o.itemSize,c=this._shapes.mainGroup,d=this._applyTransform([l[0]/2,0===n?-r:l[1]+r],c),h=this._applyTransform(0===n?"bottom":"top",c),f=this._orient,m=this.visualMapModel.textStyleModel;this.group.add(new F.a({style:{x:d[0],y:d[1],verticalAlign:"horizontal"===f?"middle":h,align:"horizontal"===f?h:"center",text:text,font:m.getFont(),fill:m.getTextColor()}}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,n=this._shapes,o=e.itemSize,r=this._orient,c=this._useHandle,d=K(e,this.api,o),h=n.mainGroup=this._createBarGroup(d),f=new U.a;h.add(f),f.add(n.outOfRange=ut()),f.add(n.inRange=ut(null,c?ht(this._orient):null,l.c(this._dragHandle,this,"all",!1),l.c(this._dragHandle,this,"all",!0))),f.setClipPath(new E.a({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var m=e.textStyleModel.getTextRect("国"),v=st(m.width,m.height);c&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(e,h,0,o,v,r),this._createHandle(e,h,1,o,v,r)),this._createIndicator(e,h,o,v,r),t.add(h)},e.prototype._createHandle=function(t,e,n,o,r,c){var d=l.c(this._dragHandle,this,n,!1),h=l.c(this._dragHandle,this,n,!0),f=Object(Q.h)(t.get("handleSize"),o[0]),m=Object(symbol.a)(t.get("handleIcon"),-f/2,-f/2,f,f,null,!0),cursor=ht(this._orient);m.attr({cursor:cursor,draggable:!0,drift:d,ondragend:h,onmousemove:function(t){R.g(t.event)}}),m.x=o[0]/2,m.useStyle(t.getModel("handleStyle").getItemStyle()),m.setStyle({strokeNoScale:!0,strokeFirst:!0}),m.style.lineWidth*=2,m.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(tt.E)(m,!0),e.add(m);var v=this.visualMapModel.textStyleModel,y=new F.a({cursor:cursor,draggable:!0,drift:d,onmousemove:function(t){R.g(t.event)},ondragend:h,style:{x:0,y:0,text:"",font:v.getFont(),fill:v.getTextColor()}});y.ensureState("blur").style={opacity:.1},y.stateTransition={duration:200},this.group.add(y);var _=[f,0],x=this._shapes;x.handleThumbs[n]=m,x.handleLabelPoints[n]=_,x.handleLabels[n]=y},e.prototype._createIndicator=function(t,e,n,o,r){var c=Object(Q.h)(t.get("indicatorSize"),n[0]),d=Object(symbol.a)(t.get("indicatorIcon"),-c/2,-c/2,c,c,null,!0);d.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var h=t.getModel("indicatorStyle").getItemStyle();if(d instanceof et.a){var f=d.style;d.useStyle(l.m({image:f.image,x:f.x,y:f.y,width:f.width,height:f.height},h))}else d.useStyle(h);e.add(d);var m=this.visualMapModel.textStyleModel,v=new F.a({silent:!0,invisible:!0,style:{x:0,y:0,text:"",font:m.getFont(),fill:m.getTextColor()}});this.group.add(v);var y=[("horizontal"===r?o/2:6)+n[0]/2,0],_=this._shapes;_.indicator=d,_.indicatorLabel=v,_.indicatorLabelPoint=y,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,n,o){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([n,o],this._shapes.mainGroup,!0);this._updateInterval(t,r[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():ct(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),o=[0,t.itemSize[1]];this._handleEnds=[nt(e[0],n,o,!0),nt(e[1],n,o,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var n=this.visualMapModel,o=this._handleEnds,r=[0,n.itemSize[1]];Object(Z.a)(e,o,r,t,0);var l=n.getExtent();this._dataInterval=[nt(o[0],r,l,!0),nt(o[1],r,l,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,n=e.getExtent(),o=this._shapes,r=[0,e.itemSize[1]],l=t?r:this._handleEnds,c=this._createBarVisual(this._dataInterval,n,l,"inRange"),d=this._createBarVisual(n,n,r,"outOfRange");o.inRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),o.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(l,c)},e.prototype._createBarVisual=function(t,e,n,o){var r={forceState:o,convertOpacityToAlpha:!0},l=this._makeColorGradient(t,r),c=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],d=this._createBarPoints(n,c);return{barColor:new V.a(0,0,0,1,l),barPoints:d,handlesColor:[l[0].color,l[l.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var n=[],o=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var i=1;i<100;i++){var r=t[0]+o*i;if(r>t[1])break;n.push({color:this.getControllerVisual(r,"color",e),offset:i/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},e.prototype._createBarPoints=function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new U.a("horizontal"!==e||n?"horizontal"===e&&n?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||n?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var n=this._shapes,o=this.visualMapModel,r=n.handleThumbs,l=n.handleLabels,c=o.itemSize,d=o.getExtent();ot([0,1],(function(h){var f=r[h];f.setStyle("fill",e.handlesColor[h]),f.y=t[h];var m=nt(t[h],[0,c[1]],d,!0),v=this.getControllerVisual(m,"symbolSize");f.scaleX=f.scaleY=v/c[0],f.x=c[0]-v/2;var y=Y.applyTransform(n.handleLabelPoints[h],Y.getTransform(f,this.group));l[h].setStyle({x:y[0],y:y[1],text:o.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})}),this)}},e.prototype._showIndicator=function(t,e,n,o){var r=this.visualMapModel,l=r.getExtent(),c=r.itemSize,d=[0,c[1]],h=this._shapes,f=h.indicator;if(f){f.attr("invisible",!1);var m=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),v=this.getControllerVisual(t,"symbolSize"),y=nt(t,l,d,!0),_=c[0]-v/2,x={x:f.x,y:f.y};f.y=y,f.x=_;var S=Y.applyTransform(h.indicatorLabelPoint,Y.getTransform(f,this.group)),w=h.indicatorLabel;w.attr("invisible",!1);var k=this._applyTransform("left",h.mainGroup),M="horizontal"===this._orient;w.setStyle({text:(n||"")+r.formatValueText(e),verticalAlign:M?k:"middle",align:M?"center":k});var O={x:_,y:y,style:{fill:m}},C={style:{x:S[0],y:S[1]}};if(r.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var I={duration:100,easing:"cubicInOut",additive:!0};f.x=x.x,f.y=x.y,f.animateTo(O,I),w.animateTo(C,I)}else f.attr(O),w.attr(C);this._firstShowIndicator=!1;var A=this._shapes.handleLabels;if(A)for(var i=0;i<A.length;i++)this._api.enterBlur(A[i])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",(function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,o=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);o[1]=at(st(0,o[1]),n[1]),t._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=n[0])}})).on("mouseout",(function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()}))},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var n=this.visualMapModel,o=n.itemSize;if(n.option.hoverLink){var r=[0,o[1]],l=n.getExtent();t=at(st(r[0],t),r[1]);var c=function(t,e,n){var o=6,r=t.get("hoverLinkDataSize");r&&(o=nt(r,e,n,!0)/2);return o}(n,l,r),d=[t-c,t+c],h=nt(t,r,l,!0),f=[nt(d[0],r,l,!0),nt(d[1],r,l,!0)];d[0]<r[0]&&(f[0]=-1/0),d[1]>r[1]&&(f[1]=1/0),e&&(f[0]===-1/0?this._showIndicator(h,f[1],"< ",c):f[1]===1/0?this._showIndicator(h,f[0],"> ",c):this._showIndicator(h,h,"≈ ",c));var m=this._hoverLinkDataIndices,v=[];(e||ct(n))&&(v=this._hoverLinkDataIndices=n.findTargetDataIndices(f));var y=S.d(m,v);this._dispatchHighDown("downplay",J(y[0],n)),this._dispatchHighDown("highlight",J(y[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=Object(it.a)(e).dataIndex){var o=Object(it.a)(e),r=this.ecModel.getSeriesByIndex(o.seriesIndex);if(n.isTargetSeries(r)){var data=r.getData(o.dataType),l=data.getStore().get(n.getDataDimensionIndex(data),o.dataIndex);isNaN(l)||this._showIndicator(l,l)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var i=0;i<e.length;i++)this._api.leaveBlur(e[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",J(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,element,e,n){var o=Y.getTransform(element,n?null:this.group);return l.t(t)?Y.applyTransform(t,o,e):Y.transformDirection(t,o,e)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(W);function ut(t,cursor,e,n){return new X.a({shape:{points:t},draggable:!!e,cursor:cursor,drift:e,onmousemove:function(t){R.g(t.event)},ondragend:n})}function ct(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function ht(t){return"vertical"===t?"ns-resize":"ew-resize"}var pt=lt,ft={type:"selectDataRange",event:"dataRangeSelected",update:"update"},gt=function(t,e){e.eachComponent({mainType:"visualMap",query:t},(function(e){e.setSelected(t.selected)}))},mt=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",(function(e){var o,r,c,d,h,f=t.pipelineContext;!e.isTargetSeries(t)||f&&f.large||n.push((o=e.stateList,r=e.targetVisuals,c=l.c(e.getValueState,e),d=e.getDataDimensionIndex(t.getData()),h={},l.k(o,(function(t){var e=m.a.prepareVisualTypes(r[t]);h[t]=e})),{progress:function(t,data){var e,n;function o(t){return Object(v.a)(data,n,t)}function l(t,e){Object(v.c)(data,n,t,e)}null!=d&&(e=data.getDimensionIndex(d));for(var f=data.getStore();null!=(n=t.next());){var m=data.getRawDataItem(n);if(!m||!1!==m.visualMap)for(var y=null!=d?f.get(e,n):n,_=c(y),x=r[_],S=h[_],i=0,w=S.length;i<w;i++){var k=S[i];x[k]&&x[k].applyVisual(y,o,l)}}}}))})),n}},{createOnAllSeries:!0,reset:function(t,e){var data=t.getData(),n=[];e.eachComponent("visualMap",(function(e){if(e.isTargetSeries(t)){var o=e.getVisualMeta(l.c(vt,null,t,e))||{stops:[],outerColors:[]},r=e.getDataDimensionIndex(data);r>=0&&(o.dimension=r,n.push(o))}})),t.getData().setVisual("visualMeta",n)}}];function vt(t,e,n,o){for(var r=e.targetVisuals[o],l=m.a.prepareVisualTypes(r),c={color:Object(v.b)(t.getData(),"color")},i=0,d=l.length;i<d;i++){var h=l[i],f=r["opacity"===h?"__alphaForOpacity":h];f&&f.applyVisual(n,y,_)}return c.color;function y(t){return c[t]}function _(t,e){c[t]=e}}var yt=l.k;function _t(option){var t=option&&option.visualMap;l.t(t)||(t=t?[t]:[]),yt(t,(function(t){if(t){bt(t,"splitList")&&!bt(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&l.t(e)&&yt(e,(function(t){l.A(t)&&(bt(t,"start")&&!bt(t,"min")&&(t.min=t.start),bt(t,"end")&&!bt(t,"max")&&(t.max=t.end))}))}}))}function bt(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var xt=!1;function St(t){xt||(xt=!0,t.registerSubTypeDefaulter("visualMap",(function(option){return option.categories||(option.pieces?option.pieces.length>0:option.splitNumber>0)&&!option.calculable?"piecewise":"continuous"})),t.registerAction(ft,gt),Object(l.k)(mt,(function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)})),t.registerPreprocessor(_t))}function wt(t){t.registerComponentModel(z),t.registerComponentView(pt),St(t)}var kt=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return Object(r.a)(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],Mt[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var r=this.option.categories;this.resetVisual((function(t,e){"categories"===o?(t.mappingMethod="category",t.categories=l.d(r)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=l.G(this._pieceList,(function(t){return t=l.d(t),"inRange"!==e&&(t.visual=null),t})))}))},e.prototype.completeVisualOption=function(){var option=this.option,e={},n=m.a.listVisualTypes(),o=this.isCategory();function r(t,e,n){return t&&t[e]&&t[e].hasOwnProperty(n)}l.k(option.pieces,(function(t){l.k(n,(function(n){t.hasOwnProperty(n)&&(e[n]=1)}))})),l.k(e,(function(t,e){var n=!1;l.k(this.stateList,(function(t){n=n||r(option,t,e)||r(option.target,t,e)}),this),!n&&l.k(this.stateList,(function(t){(option[t]||(option[t]={}))[e]=f.get(e,"inRange"===t?"active":"inactive",o)}))}),this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var n=this.option,o=this._pieceList,r=(e?n:t).selected||{};if(n.selected=r,l.k(o,(function(t,e){var n=this.getSelectedMapKey(t);r.hasOwnProperty(n)||(r[n]=!0)}),this),"single"===n.selectedMode){var c=!1;l.k(o,(function(t,e){var n=this.getSelectedMapKey(t);r[n]&&(c?r[n]=!1:c=!0)}),this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var option=this.option;return option.pieces&&option.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=l.d(t)},e.prototype.getValueState=function(t){var e=m.a.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],n=this._pieceList;return this.eachTargetSeries((function(o){var r=[],data=o.getData();data.each(this.getDataDimensionIndex(data),(function(e,o){m.a.findPieceIndex(e,n)===t&&r.push(o)}),this),e.push({seriesId:o.id,dataIndex:r})}),this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],n=["",""],o=this,r=this._pieceList.slice();if(r.length){var c=r[0].interval[0];c!==-1/0&&r.unshift({interval:[-1/0,c]}),(c=r[r.length-1].interval[1])!==1/0&&r.push({interval:[c,1/0]})}else r.push({interval:[-1/0,1/0]});var d=-1/0;return l.k(r,(function(t){var e=t.interval;e&&(e[0]>d&&h([d,e[0]],"outOfRange"),h(e.slice()),d=e[1])}),this),{stops:e,outerColors:n}}function h(r,l){var c=o.getRepresentValue({interval:r});l||(l=o.getValueState(c));var d=t(c,l);r[0]===-1/0?n[0]=d:r[1]===1/0?n[1]=d:e.push({value:r[0],color:d},{value:r[1],color:d})}},e.type="visualMap.piecewise",e.defaultOption=Object(component.d)(j.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(j),Mt={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),o=this.getExtent(),r=e.splitNumber;r=Math.max(parseInt(r,10),1),e.splitNumber=r;for(var c=(o[1]-o[0])/r;+c.toFixed(n)!==c&&n<5;)n++;e.precision=n,c=+c.toFixed(n),e.minOpen&&t.push({interval:[-1/0,o[0]],close:[0,0]});for(var d=0,h=o[0];d<r;h+=c,d++){var f=d===r-1?o[1]:h+c;t.push({interval:[h,f],close:[1,1]})}e.maxOpen&&t.push({interval:[o[1],1/0],close:[0,0]}),Object(w.p)(t),l.k(t,(function(t,e){t.index=e,t.text=this.formatValueText(t.interval)}),this)},categories:function(t){var e=this.option;l.k(e.categories,(function(e){t.push({text:this.formatValueText(e,!0),value:e})}),this),Ot(e,t)},pieces:function(t){var e=this.option;l.k(e.pieces,(function(e,n){l.A(e)||(e={value:e});var o={text:"",index:n};if(null!=e.label&&(o.text=e.label),e.hasOwnProperty("value")){var r=o.value=e.value;o.interval=[r,r],o.close=[1,1]}else{for(var c=o.interval=[],d=o.close=[0,0],h=[1,0,1],f=[-1/0,1/0],v=[],y=0;y<2;y++){for(var _=[["gte","gt","min"],["lte","lt","max"]][y],i=0;i<3&&null==c[y];i++)c[y]=e[_[i]],d[y]=h[i],v[y]=2===i;null==c[y]&&(c[y]=f[y])}v[0]&&c[1]===1/0&&(d[0]=0),v[1]&&c[0]===-1/0&&(d[1]=0),c[0]===c[1]&&d[0]&&d[1]&&(o.value=c[0])}o.visual=m.a.retrieveVisuals(e),t.push(o)}),this),Ot(e,t),Object(w.p)(t),l.k(t,(function(t){var e=t.close,n=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)}),this)}};function Ot(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var Ct=kt,It=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),o=e.textStyleModel,r=o.getFont(),c=o.getTextColor(),d=this._getItemAlign(),h=e.itemSize,f=this._getViewData(),m=f.endsText,v=l.M(e.get("showLabel",!0),!m);m&&this._renderEndsText(t,m[0],h,v,d),l.k(f.viewPieceList,(function(o){var f=o.piece,m=new U.a;m.onclick=l.c(this._onItemClick,this,f),this._enableHoverLink(m,o.indexInModelPieceList);var y=e.getRepresentValue(f);if(this._createItemSymbol(m,y,[0,0,h[0],h[1]]),v){var _=this.visualMapModel.getValueState(y);m.add(new F.a({style:{x:"right"===d?-n:h[0]+n,y:h[1]/2,text:f.text,verticalAlign:"middle",align:d,font:r,fill:c,opacity:"outOfRange"===_?.5:1}}))}t.add(m)}),this),m&&this._renderEndsText(t,m[1],h,v,d),H.a(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var n=this;t.on("mouseover",(function(){return o("highlight")})).on("mouseout",(function(){return o("downplay")}));var o=function(t){var o=n.visualMapModel;o.option.hoverLink&&n.api.dispatchAction({type:t,batch:J(o.findTargetDataIndices(e),o)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return K(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},e.prototype._renderEndsText=function(t,text,e,n,o){if(text){var r=new U.a,l=this.visualMapModel.textStyleModel;r.add(new F.a({style:{x:n?"right"===o?e[0]:0:e[0]/2,y:e[1]/2,verticalAlign:"middle",align:n?o:"center",text:text,font:l.getFont(),fill:l.getTextColor()}})),t.add(r)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=l.G(t.getPieceList(),(function(t,e){return{piece:t,indexInModelPieceList:e}})),n=t.get("text"),o=t.get("orient"),r=t.get("inverse");return("horizontal"===o?r:!r)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},e.prototype._createItemSymbol=function(t,e,n){t.add(Object(symbol.a)(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},e.prototype._onItemClick=function(t){var e=this.visualMapModel,option=e.option,n=l.d(option.selected),o=e.getSelectedMapKey(t);"single"===option.selectedMode?(n[o]=!0,l.k(n,(function(t,e){n[e]=e===o}))):n[o]=!n[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:n})},e.type="visualMap.piecewise",e}(W),At=It;function Dt(t){t.registerComponentModel(Ct),t.registerComponentView(At),St(t)}function Tt(t){Object(o.a)(wt),Object(o.a)(Dt)}},448:function(t,e,n){"use strict";n.d(e,"a",(function(){return yt}));var o=n(319),r=n(378),l=n(370),c=n(328),d=n(477),h=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(o.a)(e,t),e.prototype.getInitialData=function(option){return Object(r.a)(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new d.a,line=Object(c.a)("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(line),line.setStyle(t.lineStyle);var n=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),r="none"===n?"circle":n,l=.8*t.itemHeight,symbol=Object(c.a)(r,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);e.add(symbol),symbol.setStyle(t.itemStyle);var h="inherit"===t.iconRotate?o:t.iconRotate||0;return symbol.rotation=h*Math.PI/180,symbol.setOrigin([t.itemWidth/2,t.itemHeight/2]),r.indexOf("empty")>-1&&(symbol.style.stroke=symbol.style.fill,symbol.style.fill="#fff",symbol.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={zlevel:0,z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0,lineStyle:{width:"bolder"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"}},e}(l.a),f=h,m=n(318),v=n(371),y=n(363),_=n(338);function x(t,data,e){var n=t.getBaseAxis(),o=t.getOtherAxis(n),r=function(t,e){var n=0,o=t.scale.getExtent();"start"===e?n=o[0]:"end"===e?n=o[1]:o[0]>0?n=o[0]:o[1]<0&&(n=o[1]);return n}(o,e),l=n.dim,c=o.dim,d=data.mapDimension(c),h=data.mapDimension(l),f="x"===c||"radius"===c?1:0,v=Object(m.G)(t.dimensions,(function(t){return data.mapDimension(t)})),y=!1,x=data.getCalculationInfo("stackResultDimension");return Object(_.c)(data,v[0])&&(y=!0,v[0]=x),Object(_.c)(data,v[1])&&(y=!0,v[1]=x),{dataDimsForPoint:v,valueStart:r,valueAxisDim:c,baseAxisDim:l,stacked:!!y,valueDim:d,baseDim:h,baseDataOffset:f,stackedOverDimension:data.getCalculationInfo("stackedOverDimension")}}function S(t,e,data,n){var o=NaN;t.stacked&&(o=data.get(data.getCalculationInfo("stackedOverDimension"),n)),isNaN(o)&&(o=t.valueStart);var r=t.baseDataOffset,l=[];return l[r]=data.get(t.baseDim,n),l[1-r]=o,e.dataToPoint(l)}var w="undefined"!=typeof Float32Array,k=w?Float32Array:Array;function M(t){return Object(m.t)(t)?w?new Float32Array(t):t:new k(t)}var O=n(419),C=n(375),I=n(386),A=n(321),D=n(354),T=n(404),j=n(405),P=Math.min,L=Math.max;function N(t,e){return isNaN(t)||isNaN(e)}function z(t,e,n,o,r,l,c,d,h){for(var f,m,v,y,_,x,S=n,w=0;w<o;w++){var k=e[2*S],M=e[2*S+1];if(S>=r||S<0)break;if(N(k,M)){if(h){S+=l;continue}break}if(S===n)t[l>0?"moveTo":"lineTo"](k,M),v=k,y=M;else{var O=k-f,C=M-m;if(O*O+C*C<.5){S+=l;continue}if(c>0){var I=S+l,A=e[2*I],D=e[2*I+1],T=w+1;if(h)for(;N(A,D)&&T<o;)T++,A=e[2*(I+=l)],D=e[2*I+1];var j=.5,z=0,V=0,R=void 0,E=void 0;if(T>=o||N(A,D))_=k,x=M;else{z=A-f,V=D-m;var B=k-f,H=A-k,G=M-m,W=D-M,F=void 0,U=void 0;"x"===d?(F=Math.abs(B),U=Math.abs(H),_=k-F*c,x=M,R=k+F*c,E=M):"y"===d?(F=Math.abs(G),U=Math.abs(W),_=k,x=M-F*c,R=k,E=M+F*c):(F=Math.sqrt(B*B+G*G),_=k-z*c*(1-(j=(U=Math.sqrt(H*H+W*W))/(U+F))),x=M-V*c*(1-j),E=M+V*c*j,R=P(R=k+z*c*j,L(A,k)),E=P(E,L(D,M)),R=L(R,P(A,k)),x=M-(V=(E=L(E,P(D,M)))-M)*F/U,_=P(_=k-(z=R-k)*F/U,L(f,k)),x=P(x,L(m,M)),R=k+(z=k-(_=L(_,P(f,k))))*U/F,E=M+(V=M-(x=L(x,P(m,M))))*U/F)}t.bezierCurveTo(v,y,_,x,k,M),v=R,y=E}else t.lineTo(k,M)}f=k,m=M,S+=l}return w}var V=function(){this.smooth=0,this.smoothConstraint=!0},R=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polyline",n}return Object(o.a)(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new V},e.prototype.buildPath=function(t,e){var n=e.points,i=0,o=n.length/2;if(e.connectNulls){for(;o>0&&N(n[2*o-2],n[2*o-1]);o--);for(;i<o&&N(n[2*i],n[2*i+1]);i++);}for(;i<o;)i+=z(t,n,i,o,o,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,o,data=this.path.data,r=T.a.CMD,l="x"===e,c=[],i=0;i<data.length;){var d=void 0,h=void 0,f=void 0,m=void 0,v=void 0,y=void 0,_=void 0;switch(data[i++]){case r.M:n=data[i++],o=data[i++];break;case r.L:if(d=data[i++],h=data[i++],(_=l?(t-n)/(d-n):(t-o)/(h-o))<=1&&_>=0){var x=l?(h-o)*_+o:(d-n)*_+n;return l?[t,x]:[x,t]}n=d,o=h;break;case r.C:d=data[i++],h=data[i++],f=data[i++],m=data[i++],v=data[i++],y=data[i++];var S=l?Object(j.f)(n,d,f,v,t,c):Object(j.f)(o,h,m,y,t,c);if(S>0)for(var w=0;w<S;w++){var k=c[w];if(k<=1&&k>=0){x=l?Object(j.a)(o,h,m,y,k):Object(j.a)(n,d,f,v,k);return l?[t,x]:[x,t]}}n=v,o=y}}},e}(D.b),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.a)(e,t),e}(V),B=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polygon",n}return Object(o.a)(e,t),e.prototype.getDefaultShape=function(){return new E},e.prototype.buildPath=function(t,e){var n=e.points,o=e.stackedOnPoints,i=0,r=n.length/2,l=e.smoothMonotone;if(e.connectNulls){for(;r>0&&N(n[2*r-2],n[2*r-1]);r--);for(;i<r&&N(n[2*i],n[2*i+1]);i++);}for(;i<r;){var c=z(t,n,i,r,r,1,e.smooth,l,e.connectNulls);z(t,o,i+c-1,c,r,-1,e.stackedOnSmooth,l,e.connectNulls),i+=c+1,t.closePath()}},e}(D.b),H=n(369),G=n(554),W=n(728),F=n(322);function U(t,e,n,o,r){var rect=t.getArea(),l=rect.x,c=rect.y,d=rect.width,h=rect.height,f=n.get(["lineStyle","width"])||2;l-=f/2,c-=f/2,d+=f,h+=f,l=Math.floor(l),d=Math.round(d);var m=new G.a({shape:{x:l,y:c,width:d,height:h}});if(e){var v=t.getBaseAxis(),y=v.isHorizontal(),_=v.inverse;y?(_&&(m.shape.x+=d),m.shape.width=0):(_||(m.shape.y+=h),m.shape.height=0);var x="function"==typeof r?function(t){r(t,m)}:null;C.a(m,{shape:{width:d,height:h,x:l,y:c}},n,null,o,x)}return m}function Y(t,e,n){var o=t.getArea(),r=Object(F.r)(o.r0,1),l=Object(F.r)(o.r,1),c=new W.a({shape:{cx:Object(F.r)(t.cx,1),cy:Object(F.r)(t.cy,1),r0:r,r:l,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});e&&("angle"===t.getBaseAxis().dim?c.shape.endAngle=o.startAngle:c.shape.r=r,C.a(c,{shape:{endAngle:o.endAngle,r:l}},n));return c}var X=n(357),Z=n(325),$=n(326),K=n(364),J=n(329),Q=n(327),tt=n(337);function et(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return;return!0}}function it(t){for(var e=1/0,n=1/0,o=-1/0,r=-1/0,i=0;i<t.length;){var l=t[i++],c=t[i++];isNaN(l)||(e=Math.min(l,e),o=Math.max(l,o)),isNaN(c)||(n=Math.min(c,n),r=Math.max(c,r))}return[[e,n],[o,r]]}function nt(t,e){var n=it(t),o=n[0],r=n[1],l=it(e),c=l[0],d=l[1];return Math.max(Math.abs(o[0]-c[0]),Math.abs(o[1]-c[1]),Math.abs(r[0]-d[0]),Math.abs(r[1]-d[1]))}function ot(t){return"number"==typeof t?t:t?.5:0}function at(t,e,n){for(var o=e.getBaseAxis(),r="x"===o.dim||"radius"===o.dim?0:1,l=[],i=0,c=[],d=[],h=[];i<t.length-2;i+=2)switch(h[0]=t[i+2],h[1]=t[i+3],d[0]=t[i],d[1]=t[i+1],l.push(d[0],d[1]),n){case"end":c[r]=h[r],c[1-r]=d[1-r],l.push(c[0],c[1]);break;case"middle":var f=(d[r]+h[r])/2,m=[];c[r]=m[r]=f,c[1-r]=d[1-r],m[1-r]=h[1-r],l.push(c[0],c[1]),l.push(m[0],m[1]);break;default:c[r]=d[r],c[1-r]=h[1-r],l.push(c[0],c[1])}return l.push(t[i++],t[i++]),l}function st(data,t,e){var n=data.getVisual("visualMeta");if(n&&n.length&&data.count()&&"cartesian2d"===t.type){for(var o,r,i=n.length-1;i>=0;i--){var l=data.getDimensionInfo(n[i].dimension);if("x"===(o=l&&l.coordDim)||"y"===o){r=n[i];break}}if(r){var c=t.getAxis(o),d=m.G(r.stops,(function(t){return{coord:c.toGlobalCoord(c.dataToCoord(t.value)),color:t.color}})),h=d.length,f=r.outerColors.slice();h&&d[0].coord>d[h-1].coord&&(d.reverse(),f.reverse());var v=function(t,e){var n,o,r=[],l=t.length;function c(t,e,n){var o=t.coord,p=(n-o)/(e.coord-o);return{coord:n,color:Object(tt.b)(p,[t.color,e.color])}}for(var i=0;i<l;i++){var d=t[i],h=d.coord;if(h<0)n=d;else{if(h>e){o&&r.push(c(o,d,e));break}n&&(r.push(c(n,d,0)),n=null),r.push(d),o=d}}return r}(d,"x"===o?e.getWidth():e.getHeight()),y=v.length;if(!y&&h)return d[0].coord<0?f[1]?f[1]:d[h-1].color:f[0]?f[0]:d[0].color;var _=v[0].coord-0,x=v[y-1].coord+0,S=x-_;if(S<.001)return"transparent";m.k(v,(function(t){t.offset=(t.coord-_)/S})),v.push({offset:y?v[y-1].offset:.5,color:f[1]||"transparent"}),v.unshift({offset:y?v[0].offset:.5,color:f[0]||"transparent"});var w=new O.a(0,0,0,0,v,!0);return w[o]=_,w[o+"2"]=x,w}}}function lt(t,data,e){var n=t.get("showAllSymbol"),o="auto"===n;if(!n||o){var r=e.getAxesByScale("ordinal")[0];if(r&&(!o||!function(t,data){var e=t.getExtent(),n=Math.abs(e[1]-e[0])/t.scale.count();isNaN(n)&&(n=0);for(var o=data.count(),r=Math.max(1,Math.round(o/5)),l=0;l<o;l+=r)if(1.5*y.a.getSymbolSize(data,l)[t.isHorizontal()?1:0]>n)return!1;return!0}(r,data))){var l=data.mapDimension(r.dim),c={};return m.k(r.getViewLabels(),(function(t){var e=r.scale.getRawOrdinalNumber(t.tickValue);c[e]=1})),function(t){return!c.hasOwnProperty(data.get(l,t))}}}}function ut(t,e){return[t[2*e],t[2*e+1]]}function ct(t){if(t.get(["endLabel","show"]))return!0;for(var i=0;i<Z.g.length;i++)if(t.get([Z.g[i],"endLabel","show"]))return!0;return!1}function ht(t,e,n,o){if(Object(X.a)(e,"cartesian2d")){var r=o.getModel("endLabel"),l=r.get("valueAnimation"),c=o.getData(),d={lastFrameIndex:0},h=ct(o)?function(n,o){t._endLabelOnDuring(n,o,c,d,l,r,e)}:null,f=e.getBaseAxis().isHorizontal(),m=U(e,n,o,(function(){var e=t._endLabel;e&&n&&null!=d.originalX&&e.attr({x:d.originalX,y:d.originalY})}),h);if(!o.get("clip",!0)){var v=m.shape,y=Math.max(v.width,v.height);f?(v.y-=y,v.height+=2*y):(v.x-=y,v.width+=2*y)}return h&&h(1,m),m}return Y(e,n,o)}var pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.a)(e,t),e.prototype.init=function(){var t=new d.a,e=new v.a;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},e.prototype.render=function(t,e,n){var o=this,r=t.coordinateSystem,l=this.group,data=t.getData(),c=t.getModel("lineStyle"),d=t.getModel("areaStyle"),h=data.getLayout("points")||[],f="polar"===r.type,v=this._coordSys,y=this._symbolDraw,polyline=this._polyline,polygon=this._polygon,_=this._lineGroup,w=t.get("animation"),k=!d.isEmpty(),O=d.get("origin"),I=x(r,data,O),A=k&&function(t,data,e){if(!e.valueDim)return[];for(var n=data.count(),o=M(2*n),r=0;r<n;r++){var l=S(e,t,data,r);o[2*r]=l[0],o[2*r+1]=l[1]}return o}(r,data,I),D=t.get("showSymbol"),T=D&&!f&&lt(t,data,r),j=this._data;j&&j.eachItemGraphicEl((function(t,e){t.__temp&&(l.remove(t),j.setItemGraphicEl(e,null))})),D||y.remove(),l.add(_);var P,L=!f&&t.get("step");r&&r.getArea&&t.get("clip",!0)&&(null!=(P=r.getArea()).width?(P.x-=.1,P.y-=.1,P.width+=.2,P.height+=.2):P.r0&&(P.r0-=.5,P.r+=.5)),this._clipShapeForSymbol=P;var N=st(data,r,n)||data.getVisual("style")[data.getVisual("drawType")];if(polyline&&v.type===r.type&&L===this._step){k&&!polygon?polygon=this._newPolygon(h,A):polygon&&!k&&(_.remove(polygon),polygon=this._polygon=null),f||this._initOrUpdateEndLabel(t,r,Object(Q.b)(N));var z=_.getClipPath();if(z){var V=ht(this,r,!1,t);C.a(z,{shape:V.shape},t)}else _.setClipPath(ht(this,r,!0,t));D&&y.updateData(data,{isIgnore:T,clipShape:P,disableAnimation:!0,getSymbolPoint:function(t){return[h[2*t],h[2*t+1]]}}),et(this._stackedOnPoints,A)&&et(this._points,h)||(w?this._doUpdateAnimation(data,A,r,n,L,O):(L&&(h=at(h,r,L),A&&(A=at(A,r,L))),polyline.setShape({points:h}),polygon&&polygon.setShape({points:h,stackedOnPoints:A})))}else D&&y.updateData(data,{isIgnore:T,clipShape:P,disableAnimation:!0,getSymbolPoint:function(t){return[h[2*t],h[2*t+1]]}}),w&&this._initSymbolLabelAnimation(data,r,P),L&&(h=at(h,r,L),A&&(A=at(A,r,L))),polyline=this._newPolyline(h),k&&(polygon=this._newPolygon(h,A)),f||this._initOrUpdateEndLabel(t,r,Object(Q.b)(N)),_.setClipPath(ht(this,r,!0,t));var R=t.get(["emphasis","focus"]),E=t.get(["emphasis","blurScope"]);(polyline.useStyle(m.j(c.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"})),Object(Z.H)(polyline,t,"lineStyle"),polyline.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"]))&&(polyline.getState("emphasis").style.lineWidth=+polyline.style.lineWidth+1);Object(J.a)(polyline).seriesIndex=t.seriesIndex,Object(Z.n)(polyline,R,E);var B=ot(t.get("smooth")),H=t.get("smoothMonotone"),G=t.get("connectNulls");if(polyline.setShape({smooth:B,smoothMonotone:H,connectNulls:G}),polygon){var W=data.getCalculationInfo("stackedOnSeries"),F=0;polygon.useStyle(m.j(d.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel",decal:data.getVisual("style").decal})),W&&(F=ot(W.get("smooth"))),polygon.setShape({smooth:B,stackedOnSmooth:F,smoothMonotone:H,connectNulls:G}),Object(Z.H)(polygon,t,"areaStyle"),Object(J.a)(polygon).seriesIndex=t.seriesIndex,Object(Z.n)(polygon,R,E)}var U=function(t){o._changePolyState(t)};data.eachItemGraphicEl((function(t){t&&(t.onHoverStateChange=U)})),this._polyline.onHoverStateChange=U,this._data=data,this._coordSys=r,this._stackedOnPoints=A,this._points=h,this._step=L,this._valueOrigin=O},e.prototype.dispose=function(){},e.prototype.highlight=function(t,e,n,o){var data=t.getData(),r=A.s(data,o);if(this._changePolyState("emphasis"),!(r instanceof Array)&&null!=r&&r>=0){var l=data.getLayout("points"),symbol=data.getItemGraphicEl(r);if(!symbol){var c=l[2*r],d=l[2*r+1];if(isNaN(c)||isNaN(d))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,d))return;var h=t.get("zlevel"),f=t.get("z");(symbol=new y.a(data,r)).x=c,symbol.y=d,symbol.setZ(h,f);var m=symbol.getSymbolPath().getTextContent();m&&(m.zlevel=h,m.z=f,m.z2=this._polyline.z2+1),symbol.__temp=!0,data.setItemGraphicEl(r,symbol),symbol.stopSymbolAnimation(!0),this.group.add(symbol)}symbol.highlight()}else H.a.prototype.highlight.call(this,t,e,n,o)},e.prototype.downplay=function(t,e,n,o){var data=t.getData(),r=A.s(data,o);if(this._changePolyState("normal"),null!=r&&r>=0){var symbol=data.getItemGraphicEl(r);symbol&&(symbol.__temp?(data.setItemGraphicEl(r,null),this.group.remove(symbol)):symbol.downplay())}else H.a.prototype.downplay.call(this,t,e,n,o)},e.prototype._changePolyState=function(t){var polygon=this._polygon;Object(Z.G)(this._polyline,t),polygon&&Object(Z.G)(polygon,t)},e.prototype._newPolyline=function(t){var polyline=this._polyline;return polyline&&this._lineGroup.remove(polyline),polyline=new R({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(polyline),this._polyline=polyline,polyline},e.prototype._newPolygon=function(t,e){var polygon=this._polygon;return polygon&&this._lineGroup.remove(polygon),polygon=new B({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(polygon),this._polygon=polygon,polygon},e.prototype._initSymbolLabelAnimation=function(data,t,e){var n,o,r=t.getBaseAxis(),l=r.inverse;"cartesian2d"===t.type?(n=r.isHorizontal(),o=!1):"polar"===t.type&&(n="angle"===r.dim,o=!0);var c=data.hostModel,d=c.get("animationDuration");"function"==typeof d&&(d=d(null));var h=c.get("animationDelay")||0,f="function"==typeof h?h(null):h;data.eachItemGraphicEl((function(symbol,r){var c=symbol;if(c){var m=[symbol.x,symbol.y],v=void 0,y=void 0,_=void 0;if(e)if(o){var x=e,S=t.pointToCoord(m);n?(v=x.startAngle,y=x.endAngle,_=-S[1]/180*Math.PI):(v=x.r0,y=x.r,_=S[0])}else{var w=e;n?(v=w.x,y=w.x+w.width,_=symbol.x):(v=w.y+w.height,y=w.y,_=symbol.y)}var k=y===v?0:(_-v)/(y-v);l&&(k=1-k);var M="function"==typeof h?h(r):d*k+f,O=c.getSymbolPath(),text=O.getTextContent();c.attr({scaleX:0,scaleY:0}),c.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:M}),text&&text.animateFrom({style:{opacity:0}},{duration:300,delay:M}),O.disableLabelAnimation=!0}}))},e.prototype._initOrUpdateEndLabel=function(t,e,n){var o=t.getModel("endLabel");if(ct(t)){var r=t.getData(),polyline=this._polyline,l=this._endLabel;l||((l=this._endLabel=new I.a({z2:200})).ignoreClip=!0,polyline.setTextContent(this._endLabel),polyline.disableLabelAnimation=!0);var c=function(t){for(var e,n,o=t.length/2;o>0&&(e=t[2*o-2],n=t[2*o-1],isNaN(e)||isNaN(n));o--);return o-1}(r.getLayout("points"));c>=0&&(Object($.f)(polyline,Object($.d)(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:c,defaultText:function(t,e,n){return null!=n?Object(K.a)(r,n):Object(K.b)(r,t)},enableTextSetter:!0},function(t,e){var n=e.getBaseAxis(),o=n.isHorizontal(),r=n.inverse,l=o?r?"right":"left":"center",c=o?"middle":r?"top":"bottom";return{normal:{align:t.get("align")||l,verticalAlign:t.get("verticalAlign")||c}}}(o,e)),polyline.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,data,n,o,r,l){var c=this._endLabel,polyline=this._polyline;if(c){t<1&&null==n.originalX&&(n.originalX=c.x,n.originalY=c.y);var d=data.getLayout("points"),h=data.hostModel,f=h.get("connectNulls"),m=r.get("precision"),v=r.get("distance")||0,y=l.getBaseAxis(),_=y.isHorizontal(),x=y.inverse,S=e.shape,w=x?_?S.x:S.y+S.height:_?S.x+S.width:S.y,k=(_?v:0)*(x?-1:1),M=(_?0:-v)*(x?-1:1),O=_?"x":"y",C=function(t,e,n){for(var a,b,o=t.length/2,r="x"===n?0:1,l=0,c=-1,i=0;i<o;i++)if(b=t[2*i+r],!isNaN(b)&&!isNaN(t[2*i+1-r]))if(0!==i){if(a<=e&&b>=e||a>=e&&b<=e){c=i;break}l=i,a=b}else a=b;return{range:[l,c],t:(e-a)/(b-a)}}(d,w,O),I=C.range,D=I[1]-I[0],T=void 0;if(D>=1){if(D>1&&!f){var j=ut(d,I[0]);c.attr({x:j[0]+k,y:j[1]+M}),o&&(T=h.getRawValue(I[0]))}else{(j=polyline.getPointOn(w,O))&&c.attr({x:j[0]+k,y:j[1]+M});var P=h.getRawValue(I[0]),L=h.getRawValue(I[1]);o&&(T=A.j(data,m,P,L,C.t))}n.lastFrameIndex=I[0]}else{var N=1===t||n.lastFrameIndex>0?I[0]:0;j=ut(d,N);o&&(T=h.getRawValue(N)),c.attr({x:j[0]+k,y:j[1]+M})}o&&Object($.e)(c).setLabelText(T)}},e.prototype._doUpdateAnimation=function(data,t,e,n,o,r){var polyline=this._polyline,polygon=this._polygon,l=data.hostModel,c=function(t,e,n,o,r,l,c,d){for(var h=function(t,e){var n=[];return e.diff(t).add((function(t){n.push({cmd:"+",idx:t})})).update((function(t,e){n.push({cmd:"=",idx:e,idx1:t})})).remove((function(t){n.push({cmd:"-",idx:t})})).execute(),n}(t,e),f=[],m=[],v=[],y=[],_=[],w=[],k=[],O=x(r,e,c),C=t.getLayout("points")||[],I=e.getLayout("points")||[],i=0;i<h.length;i++){var A=h[i],D=!0,T=void 0,j=void 0;switch(A.cmd){case"=":T=2*A.idx,j=2*A.idx1;var P=C[T],L=C[T+1],N=I[j],z=I[j+1];(isNaN(P)||isNaN(L))&&(P=N,L=z),f.push(P,L),m.push(N,z),v.push(n[T],n[T+1]),y.push(o[j],o[j+1]),k.push(e.getRawIndex(A.idx1));break;case"+":var V=A.idx,R=O.dataDimsForPoint,E=r.dataToPoint([e.get(R[0],V),e.get(R[1],V)]);j=2*V,f.push(E[0],E[1]),m.push(I[j],I[j+1]);var B=S(O,r,e,V);v.push(B[0],B[1]),y.push(o[j],o[j+1]),k.push(e.getRawIndex(V));break;case"-":D=!1}D&&(_.push(A),w.push(w.length))}w.sort((function(a,b){return k[a]-k[b]}));var H=f.length,G=M(H),W=M(H),F=M(H),U=M(H),Y=[];for(i=0;i<w.length;i++){var X=w[i],Z=2*i,$=2*X;G[Z]=f[$],G[Z+1]=f[$+1],W[Z]=m[$],W[Z+1]=m[$+1],F[Z]=v[$],F[Z+1]=v[$+1],U[Z]=y[$],U[Z+1]=y[$+1],Y[i]=_[X]}return{current:G,next:W,stackedOnCurrent:F,stackedOnNext:U,status:Y}}(this._data,data,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),d=c.current,h=c.stackedOnCurrent,f=c.next,m=c.stackedOnNext;if(o&&(d=at(c.current,e,o),h=at(c.stackedOnCurrent,e,o),f=at(c.next,e,o),m=at(c.stackedOnNext,e,o)),nt(d,f)>3e3||polygon&&nt(h,m)>3e3)return polyline.stopAnimation(),polyline.setShape({points:f}),void(polygon&&(polygon.stopAnimation(),polygon.setShape({points:f,stackedOnPoints:m})));polyline.shape.__points=c.current,polyline.shape.points=d;var v={shape:{points:f}};c.current!==d&&(v.shape.__points=c.next),polyline.stopAnimation(),C.f(polyline,v,l),polygon&&(polygon.setShape({points:d,stackedOnPoints:h}),polygon.stopAnimation(),C.f(polygon,{shape:{stackedOnPoints:m}},l),polyline.shape.points!==polygon.shape.points&&(polygon.shape.points=polyline.shape.points));for(var y=[],_=c.status,i=0;i<_.length;i++){if("="===_[i].cmd){var w=data.getItemGraphicEl(_[i].idx1);w&&y.push({el:w,ptIdx:i})}}polyline.animators&&polyline.animators.length&&polyline.animators[0].during((function(){polygon&&polygon.dirtyShape();for(var t=polyline.shape.__points,i=0;i<y.length;i++){var e=y[i].el,n=2*y[i].ptIdx;e.x=t[n],e.y=t[n+1],e.markRedraw()}}))},e.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(t,o){t.__temp&&(e.remove(t),n.setItemGraphicEl(o,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(H.a),ft=pt,gt=n(427);var mt={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]||0;return e},max:function(t){for(var e=-1/0,i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,i=0;i<t.length;i++)t[i]<e&&(e=t[i]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},vt=function(t){return Math.round(t.length/2)};function yt(t){var e;t.registerChartView(ft),t.registerSeriesModel(f),t.registerLayout((e=!0,{seriesType:"line",plan:Object(gt.a)(),reset:function(t){var data=t.getData(),n=t.coordinateSystem,o=t.pipelineContext,r=e||o.large;if(n){var l=Object(m.G)(n.dimensions,(function(t){return data.mapDimension(t)})).slice(0,2),c=l.length,d=data.getCalculationInfo("stackResultDimension");Object(_.c)(data,l[0])&&(l[0]=d),Object(_.c)(data,l[1])&&(l[1]=d);var h=data.getStore(),f=data.getDimensionIndex(l[0]),v=data.getDimensionIndex(l[1]);return c&&{progress:function(t,data){for(var e=t.end-t.start,o=r&&M(e*c),l=[],d=[],i=t.start,m=0;i<t.end;i++){var y=void 0;if(1===c){var _=h.get(f,i);y=n.dataToPoint(_,null,d)}else l[0]=h.get(f,i),l[1]=h.get(v,i),y=n.dataToPoint(l,null,d);r?(o[m++]=y[0],o[m++]=y[1]):data.setItemLayout(i,y.slice())}r&&data.setLayout("points",o)}}}}})),t.registerVisual({seriesType:"line",reset:function(t){var data=t.getData(),e=t.getModel("lineStyle").getLineStyle();e&&!e.stroke&&(e.stroke=data.getVisual("style").fill),data.setVisual("legendLineStyle",e)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(t){return{seriesType:t,reset:function(t,e,n){var data=t.getData(),o=t.get("sampling"),r=t.coordinateSystem,l=data.count();if(l>10&&"cartesian2d"===r.type&&o){var c=r.getBaseAxis(),d=r.getOtherAxis(c),h=c.getExtent(),f=n.getDevicePixelRatio(),m=Math.abs(h[1]-h[0])*(f||1),v=Math.round(l/m);if(v>1){"lttb"===o&&t.setData(data.lttbDownSample(data.mapDimension(d.dim),1/v));var y=void 0;"string"==typeof o?y=mt[o]:"function"==typeof o&&(y=o),y&&t.setData(data.downSample(data.mapDimension(d.dim),1/v,y,vt))}}}}}("line"))}},458:function(t,e,n){"use strict";n(423)},459:function(t,e,n){"use strict";n(424)},472:function(t,e,n){},474:function(t,e,n){"use strict";n.r(e);var o=n(25),r=(n(18),n(28),n(340)),l=n(562),c=n(319),d=n(554),h=n(336),f=n(325),m=n(318),v=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var canvas=m.f();this.canvas=canvas}return t.prototype.update=function(data,t,e,n,o,r){var l=this._getBrush(),c=this._getGradient(o,"inRange"),d=this._getGradient(o,"outOfRange"),h=this.pointSize+this.blurSize,canvas=this.canvas,f=canvas.getContext("2d"),m=data.length;canvas.width=t,canvas.height=e;for(var i=0;i<m;++i){var p=data[i],v=p[0],y=p[1],_=n(p[2]);f.globalAlpha=_,f.drawImage(l,v-h,y-h)}if(!canvas.width||!canvas.height)return canvas;for(var x=f.getImageData(0,0,canvas.width,canvas.height),S=x.data,w=0,k=S.length,M=this.minOpacity,O=this.maxOpacity-M;w<k;){_=S[w+3]/256;var C=4*Math.floor(255*_);if(_>0){var I=r(_)?c:d;_>0&&(_=_*O+M),S[w++]=I[C],S[w++]=I[C+1],S[w++]=I[C+2],S[w++]=I[C+3]*_*256}else w+=4}return f.putImageData(x,0,0),canvas},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=m.f()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var o=t.getContext("2d");return o.clearRect(0,0,n,n),o.shadowOffsetX=n,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-e,e,this.pointSize,0,2*Math.PI,!0),o.closePath(),o.fill(),t},t.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,o=n[e]||(n[e]=new Uint8ClampedArray(1024)),r=[0,0,0,0],l=0,i=0;i<256;i++)t[e](i/255,!0,r),o[l++]=r[0],o[l++]=r[1],o[l++]=r[2],o[l++]=r[3];return o},t}(),y=n(369),_=n(357),x=n(326);function S(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var w=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(c.a)(e,t),e.prototype.render=function(t,e,n){var o;e.eachComponent("visualMap",(function(e){e.eachTargetSeries((function(n){n===t&&(o=e)}))})),this.group.removeAll(),this._incrementalDisplayable=null;var r=t.coordinateSystem;"cartesian2d"===r.type||"calendar"===r.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):S(r)&&this._renderOnGeo(r,t,o,n)},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,e,n,o){var r=e.coordinateSystem;r&&(S(r)?this.render(e,n,o):this._renderOnCartesianAndCalendar(e,o,t.start,t.end,!0))},e.prototype._renderOnCartesianAndCalendar=function(t,e,n,o,r){var l,c,h,m,v=t.coordinateSystem;if(Object(_.a)(v,"cartesian2d")){var y=v.getAxis("x"),S=v.getAxis("y");0,l=y.getBandWidth(),c=S.getBandWidth(),h=y.scale.getExtent(),m=S.scale.getExtent()}for(var w=this.group,data=t.getData(),k=t.getModel(["emphasis","itemStyle"]).getItemStyle(),M=t.getModel(["blur","itemStyle"]).getItemStyle(),O=t.getModel(["select","itemStyle"]).getItemStyle(),C=Object(x.d)(t),I=t.get(["emphasis","focus"]),A=t.get(["emphasis","blurScope"]),D=Object(_.a)(v,"cartesian2d")?[data.mapDimension("x"),data.mapDimension("y"),data.mapDimension("value")]:[data.mapDimension("time"),data.mapDimension("value")],T=n;T<o;T++){var rect=void 0,style=data.getItemVisual(T,"style");if(Object(_.a)(v,"cartesian2d")){var j=data.get(D[0],T),P=data.get(D[1],T);if(isNaN(data.get(D[2],T))||j<h[0]||j>h[1]||P<m[0]||P>m[1])continue;var L=v.dataToPoint([j,P]);rect=new d.a({shape:{x:Math.floor(Math.round(L[0])-l/2),y:Math.floor(Math.round(L[1])-c/2),width:Math.ceil(l),height:Math.ceil(c)},style:style})}else{if(isNaN(data.get(D[1],T)))continue;rect=new d.a({z2:1,shape:v.dataToRect([data.get(D[0],T)]).contentShape,style:style})}var N=data.getItemModel(T);if(data.hasItemOption){var z=N.getModel("emphasis");k=z.getModel("itemStyle").getItemStyle(),M=N.getModel(["blur","itemStyle"]).getItemStyle(),O=N.getModel(["select","itemStyle"]).getItemStyle(),I=z.get("focus"),A=z.get("blurScope"),C=Object(x.d)(N)}var V=t.getRawValue(T),R="-";V&&null!=V[2]&&(R=V[2]+""),Object(x.f)(rect,C,{labelFetcher:t,labelDataIndex:T,defaultOpacity:style.opacity,defaultText:R}),rect.ensureState("emphasis").style=k,rect.ensureState("blur").style=M,rect.ensureState("select").style=O,Object(f.n)(rect,I,A),rect.incremental=r,r&&(rect.states.emphasis.hoverLayer=!0),w.add(rect),data.setItemGraphicEl(T,rect)}},e.prototype._renderOnGeo=function(t,e,n,o){var r=n.targetVisuals.inRange,l=n.targetVisuals.outOfRange,data=e.getData(),c=this._hmLayer||this._hmLayer||new v;c.blurSize=e.get("blurSize"),c.pointSize=e.get("pointSize"),c.minOpacity=e.get("minOpacity"),c.maxOpacity=e.get("maxOpacity");var rect=t.getViewRect().clone(),d=t.getRoamTransform();rect.applyTransform(d);var f=Math.max(rect.x,0),y=Math.max(rect.y,0),_=Math.min(rect.width+rect.x,o.getWidth()),x=Math.min(rect.height+rect.y,o.getHeight()),S=_-f,w=x-y,k=[data.mapDimension("lng"),data.mapDimension("lat"),data.mapDimension("value")],M=data.mapArray(k,(function(e,n,o){var r=t.dataToPoint([e,n]);return r[0]-=f,r[1]-=y,r.push(o),r})),O=n.getExtent(),C="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(O,n.option.range):function(t,e,n){var o=t[1]-t[0],r=(e=m.G(e,(function(e){return{interval:[(e.interval[0]-t[0])/o,(e.interval[1]-t[0])/o]}}))).length,l=0;return function(t){var i;for(i=l;i<r;i++)if((o=e[i].interval)[0]<=t&&t<=o[1]){l=i;break}if(i===r)for(i=l-1;i>=0;i--){var o;if((o=e[i].interval)[0]<=t&&t<=o[1]){l=i;break}}return i>=0&&i<r&&n[i]}}(O,n.getPieceList(),n.option.selected);c.update(M,S,w,r.color.getNormalizer(),{inRange:r.color.getColorMapper(),outOfRange:l.color.getColorMapper()},C);var img=new h.a({style:{width:S,height:w,x:f,y:y,image:c.canvas},silent:!0});this.group.add(img)},e.type="heatmap",e}(y.a),k=w,M=n(370),O=n(378),C=n(396),I=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(c.a)(e,t),e.prototype.getInitialData=function(option,t){return Object(O.a)(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=C.a.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(M.a),A=I;var D=n(870),T=n(868),j=n(447),P=n(359);Object(r.a)([l.a,D.a,T.a,j.a,function(t){t.registerChartView(k),t.registerSeriesModel(A)}]);var L={name:"HelloWorld",props:{values:{2010:{JAN:1,FEB:2,MAR:3},2011:{JAN:1,FEB:2,MAR:3}},stats:{}},components:{VChart:P.b},provide:Object(o.a)({},P.a,"light"),data:function(){return{option:{backgroundColor:"transparent",tooltip:{position:"top"},grid:{top:"12px",bottom:"48px",right:"0",left:"36px"},xAxis:{type:"category",data:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],splitArea:{show:!0}},yAxis:{type:"category",data:[],splitArea:{show:!0}},visualMap:{min:0,max:100,calculable:!0,orient:"horizontal",right:"0",top:"0",formatter:function(t){return t+"%"},inRange:{color:["#9a91ff","white","#ff85b6"]},show:!1},series:[{name:"報酬率",type:"heatmap",data:[],label:{show:!0,formatter:function(t){return"".concat(t.value[2],"%")}},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},optionYearly:null,years:0}},mounted:function(){this.init()},methods:{init:function(){this.optionYearly=JSON.parse(JSON.stringify(this.option)),this.optionYearly.grid.left="0";var t=this.values,e=[],n=[],o=0;for(var r in t)for(var l in o+=1,t[r])"YTD"!==l&&0!==t[r][l]&&(e.push([l,r,t[r][l]]),n.push(100*t[r][l]));this.years=o;var c={},d=[],i=0;for(var h in t)c[h]=o-1-i,d.unshift(h),i+=1;var f={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};for(var m in e){var v=e[m][0],y=e[m][1];e[m]=[f[v],c[y],Math.round(1e3*e[m][2])/10]}this.option.series[0].data=e,this.option.yAxis.data=d;var _=Math.max.apply(Math,n),x=Math.max.apply(Math,n),S=Math.round(10*Math.max(Math.abs(_),Math.abs(x)))/10;this.option.visualMap.min=-S,this.option.visualMap.max=S;var w={},k=[];for(var M in i=0,t)w[M]=i,k.push(M),i+=1;var O=[],C=[];for(var I in t){var A=1;for(var D in t[I])"YTD"!==D&&(A*=1+t[I][D]);A-=1,O.push([w[I],0,Math.round(100*A)]),C.push(A)}this.optionYearly.series[0].data=O,this.optionYearly.xAxis.data=k,this.optionYearly.series[0].label.formatter=function(t){return"".concat(t.value[2],"%")},this.optionYearly.yAxis.data=["報酬"],_=100*Math.max.apply(Math,C),x=100*Math.min.apply(Math,C),S=Math.round(Math.max(Math.abs(_),Math.max(x))),this.optionYearly.visualMap.min=-S,this.optionYearly.visualMap.max=S}},watch:{values:function(){this.init()}}},N=(n(458),n(40)),component=Object(N.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"uk-text-primary uk-margin-large-top"},[t._v("年報酬")]),t._v(" "),n("v-chart",{staticClass:"chartYearly",attrs:{option:t.optionYearly,autoresize:""}}),t._v(" "),n("h5",{staticClass:"uk-text-primary uk-margin-large-top"},[t._v("月報酬")]),t._v(" "),n("div",{staticClass:"uk-overflow-auto",staticStyle:{width:"100%"}},[n("div",{staticStyle:{"min-width":"420px"}},[n("v-chart",{staticClass:"chart",style:{height:30*t.years+150+"px"},attrs:{option:t.option,autoresize:""}})],1)])],1)}),[],!1,null,"04b16d7f",null);e.default=component.exports},515:function(t,e,n){"use strict";n.r(e);n(44),n(117),n(60),n(18),n(66),n(67),n(93);var o=n(411),r=n(474),l=n(445),c=n(425),d={name:"strategy",components:{cumulativeReturnChart:o.default,monthlyReturnChart:r.default,RiskPanel:l.default,PositionPanel:c.default},props:{strategy:{default:null},position:{default:null},uid:{default:""},sid:{default:""},viewmode:{default:!0},isUploading:{default:!1}},watchQuery:["uid","sid"],data:function(){return{showCode:!1,displayStats:{"stats.daily_mean":{name:"年化報酬",percentage:!0,description:"每年報酬率幾何平均數 <br /> 建議大於 18%"},"stats.daily_sharpe":{name:"年化夏普",percentage:!1,description:"報酬率 / 風險之比率 <br /> 建議大於 1.2"},"stats.max_drawdown":{name:"最大下跌",percentage:!0,description:"歷史上的最大虧損程度 <br /> 建議小於 20%"},"trade_indices.win_ratio":{name:"勝率",percentage:!0,description:"每一筆股票獲利的機率 <br /> 建議大於 55%"}},panel:"報酬分析"}},methods:{getStrategyContent:function(t){return"trade_indices.win_ratio"!==t?t.split(".").reduce((function(a,t){return a&&t in a?a[t]:null}),this.strategy):t.split(".").reduce((function(a,t){return a&&t in a?a[t]:null}),this.strategy)||this.strategy.stats.win_ratio},switchTab:function(p){var t=this.permission(p);t[1]?this.panel=p:alert("不能查看".concat(p,"：").concat(t[0],"。"))},format_float:function(t){return Math.round(10*t)/10},addSign:function(t){return t>0?"+"+t.toString():t.toString()},addSignColor:function(t){return 0===t?"color:gray":t>0?"color:rgb(255, 82, 121)":"color:#18b89b"},permission:function(t){var e=null;if("選股清單"===t)e=this.strategy.public_position;else{if("程式碼"!==t)return["",!0];e=this.strategy.public_code}var n=null!==this.$store.state.user,o=this.$store.state.role.includes("vip"),r=n&&this.$store.state.user.uid===this.$props.uid;return 0===e?["(free)",!0]:1===e?["(需登入)",n]:2===e?["(vip)",n&&o]:["(未公開)",r]}},computed:{panels:function(){return this.viewmode,["報酬分析","風險分析","選股清單"]}}},h=(n(550),n(40)),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.strategy?n("div",[t.$store.state.strategy&&!0===t.$store.state.strategy.isUploading?n("div",{staticClass:"loading"},[n("div",{staticStyle:{position:"relative",top:"30px",left:"calc(50% - 75px)"},attrs:{"uk-spinner":"ratio: 3"}})]):n("div",[n("div",{staticStyle:{"z-index":"2",position:"relative"}},[n("div",{staticClass:"uk-flex uk-flex-left uk-grid-small uk-width-4-5 uk-margin-large-top"},t._l(t.displayStats,(function(e,o){return n("div",{key:o,staticClass:"uk-width",staticStyle:{"max-width":"160px","white-space":"nowrap"}},[t.getStrategyContent(o)?n("div",{staticClass:"uk-text-light uk-text-small",staticStyle:{"border-left":"1px solid #eee","padding-left":"10px"},attrs:{"uk-tooltip":e.description}},[t._v("\n            "+t._s(e.name)),n("br"),t._v(t._s(o.split(".").slice(-1)[0].replace("_"," "))),n("br"),t._v(" "),n("span",{staticClass:"uk-text-lead",style:e.percentage?t.addSignColor(t.getStrategyContent(o)):"color:gray"},[t._v(t._s(e.percentage?t.addSign(t.format_float(100*t.getStrategyContent(o))):t.format_float(t.getStrategyContent(o))))]),t._v("\n            "+t._s(e.percentage?"%":"")+"\n          ")]):t._e()])})),0),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticStyle:{"z-index":"1","margin-top":"-200px",overflow:"hidden"}},[n("cumulativeReturnChart",{attrs:{values:[t.strategy.returns.value],index:t.strategy.returns.time,benchmark:t.strategy.benchmark,benchmarkName:""}})],1),t._v(" "),n("div",{staticStyle:{height:"24px"}}),t._v(" "),n("div",[n("ul",{staticClass:"uk-padding-remove-bottom",attrs:{"uk-tab":""}},t._l(t.panels,(function(p){return n("li",{key:p,class:{"uk-active":t.panel===p,"uk-disabled":!t.permission(p)[1]},on:{click:function(e){return t.switchTab(p)}}},[n("a",{attrs:{href:"#"}},[n("div",[t._v("\n              "+t._s(p)+"\n            ")])])])})),0),t._v(" "),n("div",{staticClass:"uk-margin-large-top uk-margin-large-right",staticStyle:{"max-width":"960px"}},["風險分析"===t.panel?n("div",[this.strategy?n("RiskPanel",{attrs:{returns:t.strategy.returns,drawdown_details:t.strategy.drawdown_details,benchmark:t.strategy.benchmark,dailyMean:t.strategy.stats.daily_mean,max_drawdown:t.strategy.stats.max_drawdown}}):t._e()],1):t._e(),t._v(" "),"選股清單"===t.panel?n("div",[this.strategy?n("PositionPanel",{attrs:{uid:this.uid,strategy_id:this.sid,position_id:this.strategy.position_id,positionPredefined:this.position}}):t._e()],1):t._e(),t._v(" "),"報酬分析"===t.panel?n("div",[n("monthlyReturnChart",{attrs:{values:t.strategy.return_table,stats:t.strategy.stats}})],1):t._e()])])])]):t._e()}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"60px"}},[n("span",{staticClass:"uk-text-small uk-text-primary"},[t._v("－ 策略")]),n("br"),t._v(" "),n("span",{staticClass:"uk-text-small uk-text-light"},[t._v("－ 大盤")])])}],!1,null,"53f3f8e0",null);e.default=component.exports;installComponents(component,{RiskPanel:n(445).default,PositionPanel:n(425).default})},550:function(t,e,n){"use strict";n(472)},560:function(t,e,n){"use strict";n.d(e,"a",(function(){return ft}));var o=n(337);function r(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function l(t){var e;if(t&&"transparent"!==t){if("string"==typeof t&&t.indexOf("rgba")>-1){var n=Object(o.g)(t);n&&(t="rgb("+n[0]+","+n[1]+","+n[2]+")",e=n[3])}}else t="none";return{color:t,opacity:null==e?1:e}}var c=n(318),d=n(354),h=n(336),f=n(426);function m(t,e,n,o,r){for(var l=e.length,c=n.length,d=t.newPos,h=d-o,f=0;d+1<l&&h+1<c&&r(e[d+1],n[h+1]);)d++,h++,f++;return f&&t.components.push({count:f,added:!1,removed:!1,indices:[]}),t.newPos=d,h}function v(t,e,n){var o=t[t.length-1];o&&o.added===e&&o.removed===n?t[t.length-1]={count:o.count+1,added:e,removed:n,indices:[]}:t.push({count:1,added:e,removed:n,indices:[]})}function y(t){for(var e=0,n=t.length,o=0,r=0;e<n;e++){var component=t[e];if(component.removed){for(i=r;i<r+component.count;i++)component.indices.push(i);r+=component.count}else{for(var l=[],i=o;i<o+component.count;i++)l.push(i);component.indices=l,o+=component.count,component.added||(r+=component.count)}}return t}function _(t,e,n){return function(t,e,n){n||(n=function(a,b){return a===b}),t=t.slice();var o=(e=e.slice()).length,r=t.length,l=1,c=o+r,d=[{newPos:-1,components:[]}],h=m(d[0],e,t,0,n);if(d[0].newPos+1>=o&&h+1>=r){for(var f=[],i=0;i<e.length;i++)f.push(i);return[{indices:f,count:e.length,added:!1,removed:!1}]}function _(){for(var c=-1*l;c<=l;c+=2){var h,f=d[c-1],_=d[c+1],x=(_?_.newPos:0)-c;f&&(d[c-1]=void 0);var S=f&&f.newPos+1<o,w=_&&0<=x&&x<r;if(S||w){if(!S||w&&f.newPos<_.newPos?v((h={newPos:(path=_).newPos,components:path.components.slice(0)}).components,!1,!0):((h=f).newPos++,v(h.components,!0,!1)),x=m(h,e,t,c,n),h.newPos+1>=o&&x+1>=r)return y(h.components);d[c]=h}else d[c]=void 0}var path;l++}for(;l<=c;){var x=_();if(x)return x}}(t,e,n)}var x=n(341),S=n(380),w=n(508),k="none",M=Math.round,O=Math.sin,C=Math.cos,I=Math.PI,A=2*Math.PI,D=180/I,T=1e-4;function j(t){return M(1e3*t)/1e3}function P(t){return M(1e4*t)/1e4}function L(t){return t<T&&t>-1e-4}function N(t,e){e&&z(t,"transform","matrix("+j(e[0])+","+j(e[1])+","+j(e[2])+","+j(e[3])+","+P(e[4])+","+P(e[5])+")")}function z(t,e,n){(!n||"linear"!==n.type&&"radial"!==n.type)&&t.setAttribute(e,n)}function V(t,style,e){var n=null==style.opacity?1:style.opacity;if(e instanceof h.a)z(t,"opacity",n+"");else{if(function(style){var t=style.fill;return null!=t&&t!==k}(style)){var o=l(style.fill);z(t,"fill",o.color),z(t,"fill-opacity",(null!=style.fillOpacity?style.fillOpacity*o.opacity*n:o.opacity*n)+"")}else z(t,"fill",k);if(function(style){var t=style.stroke;return null!=t&&t!==k}(style)){var r=l(style.stroke);z(t,"stroke",r.color);var d=style.lineWidth,f=style.strokeNoScale?e.getLineScale():1;z(t,"stroke-width",(f?d/f:0)+""),z(t,"paint-order",style.strokeFirst?"stroke":"fill"),z(t,"stroke-opacity",(null!=style.strokeOpacity?style.strokeOpacity*r.opacity*n:r.opacity*n)+"");var m=style.lineDash&&d>0&&Object(w.a)(style.lineDash,d);if(m){var v=style.lineDashOffset;f&&1!==f&&(m=Object(c.G)(m,(function(t){return t/f})),v&&(v=M(v/=f))),z(t,"stroke-dasharray",m.join(",")),z(t,"stroke-dashoffset",(v||0)+"")}else z(t,"stroke-dasharray",k);style.lineCap&&z(t,"stroke-linecap",style.lineCap),style.lineJoin&&z(t,"stroke-linejoin",style.lineJoin),style.miterLimit&&z(t,"stroke-miterlimit",style.miterLimit+"")}else z(t,"stroke",k)}}var R=function(){function t(){}return t.prototype.reset=function(){this._d=[],this._str=""},t.prototype.moveTo=function(t,e){this._add("M",t,e)},t.prototype.lineTo=function(t,e){this._add("L",t,e)},t.prototype.bezierCurveTo=function(t,e,n,o,r,l){this._add("C",t,e,n,o,r,l)},t.prototype.quadraticCurveTo=function(t,e,n,o){this._add("Q",t,e,n,o)},t.prototype.arc=function(t,e,n,o,r,l){this.ellipse(t,e,n,n,0,o,r,l)},t.prototype.ellipse=function(t,e,n,o,r,l,c,d){var h=0===this._d.length,f=c-l,m=!d,v=Math.abs(f),y=L(v-A)||(m?f>=A:-f>=A),_=f>0?f%A:f%A+A,x=!1;x=!!y||!L(v)&&_>=I==!!m;var S=P(t+n*C(l)),w=P(e+o*O(l));y&&(f=m?A-1e-4:1e-4-A,x=!0,h&&this._d.push("M",S,w));var k=P(t+n*C(l+f)),T=P(e+o*O(l+f));if(isNaN(S)||isNaN(w)||isNaN(n)||isNaN(o)||isNaN(r)||isNaN(D)||isNaN(k)||isNaN(T))return"";this._d.push("A",P(n),P(o),M(r*D),+x,+m,k,T)},t.prototype.rect=function(t,e,n,o){this._add("M",t,e),this._add("L",t+n,e),this._add("L",t+n,e+o),this._add("L",t,e+o),this._add("L",t,e),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(t,a,b,e,n,o,r,g,l){this._d.push(t);for(var i=1;i<arguments.length;i++){var c=arguments[i];if(isNaN(c))return void(this._invalid=!0);this._d.push(P(c))}},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(" "),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),E={brush:function(t){var style=t.style,e=t.__svgEl;e||(e=r("path"),t.__svgEl=e),t.path||t.createPathProxy();var path=t.path;t.shapeChanged()&&(path.beginPath(),t.buildPath(path,t.shape),t.pathUpdated());var n=path.getVersion(),o=t,l=o.__svgPathBuilder;(o.__svgPathVersion!==n||!l||t.style.strokePercent<1)&&(l||(l=o.__svgPathBuilder=new R),l.reset(),path.rebuildPath(l,t.style.strokePercent),l.generateStr(),o.__svgPathVersion=n),z(e,"d",l.getStr()),V(e,style,t),N(e,t.transform)}},B={brush:function(t){var style=t.style,image=style.image;if(image instanceof HTMLImageElement?image=image.src:image instanceof HTMLCanvasElement&&(image=image.toDataURL()),image){var e=style.x||0,n=style.y||0,o=style.width,l=style.height,c=t.__svgEl;c||(c=r("image"),t.__svgEl=c),image!==t.__imageSrc&&(!function(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}(c,"href",image),t.__imageSrc=image),z(c,"width",o+""),z(c,"height",l+""),z(c,"x",e+""),z(c,"y",n+""),V(c,style,t),N(c,t.transform)}}},H={left:"start",right:"end",center:"middle",middle:"middle"};var G={brush:function(t){var style=t.style,text=style.text;if(null!=text&&(text+=""),text&&!isNaN(style.x)&&!isNaN(style.y)){var e=t.__svgEl;e||(function(t,e,n){t.setAttributeNS("http://www.w3.org/XML/1998/namespace",e,n)}(e=r("text"),"xml:space","preserve"),t.__svgEl=e);var n=style.font||S.a;e.style.font=n,e.textContent=text,V(e,style,t),N(e,t.transform);var o=style.x||0,l=function(t,e,n){return"top"===n?t+=e/2:"bottom"===n&&(t-=e/2),t}(style.y||0,Object(S.f)(n),style.textBaseline),c=H[style.textAlign]||style.textAlign;z(e,"dominant-baseline","central"),z(e,"text-anchor",c),z(e,"x",o+""),z(e,"y",l+"")}}},W=function(){function t(t,e,n,o,l){this.nextId=0,this._domName="_dom",this.createElement=r,this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=o,l&&(this._domName=l)}return t.prototype.getDefs=function(t){var e=this._svgRoot,defs=this._svgRoot.getElementsByTagName("defs");if(0===defs.length){if(t){var n=e.insertBefore(this.createElement("defs"),e.firstChild);return n.contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var i=e.length-1;i>=0;--i)if(e[i]===t)return!0;return!1}),n}return null}return defs[0]},t.prototype.doUpdate=function(t,e){if(t){var defs=this.getDefs(!1);if(t[this._domName]&&defs.contains(t[this._domName]))"function"==typeof e&&e(t);else{var n=this.add(t);n&&(t[this._domName]=n)}}},t.prototype.add=function(t){return null},t.prototype.addDom=function(t){var defs=this.getDefs(!0);t.parentNode!==defs&&defs.appendChild(t)},t.prototype.removeDom=function(t){var defs=this.getDefs(!1);defs&&t[this._domName]&&(defs.removeChild(t[this._domName]),t[this._domName]=null)},t.prototype.getDoms=function(){var defs=this.getDefs(!1);if(!defs)return[];var t=[];return c.k(this._tagNames,(function(e){for(var n=defs.getElementsByTagName(e),i=0;i<n.length;i++)t.push(n[i])})),t},t.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;c.k(t,(function(t){t[e._markLabel]="0"}))},t.prototype.markDomUsed=function(t){t&&(t[this._markLabel]="1")},t.prototype.markDomUnused=function(t){t&&(t[this._markLabel]="0")},t.prototype.isDomUnused=function(t){return t&&"1"!==t[this._markLabel]},t.prototype.removeUnused=function(){var t=this,defs=this.getDefs(!1);if(defs){var e=this.getDoms();c.k(e,(function(e){t.isDomUnused(e)&&defs.removeChild(e)}))}},t.prototype.getSvgProxy=function(t){return t instanceof d.b?E:t instanceof h.a?B:t instanceof f.a?G:E},t.prototype.getSvgElement=function(t){return t.__svgEl},t}();function F(t){return"linear"===t.type}function U(t){return"radial"===t.type}function Y(t){return t&&("linear"===t.type||"radial"===t.type)}var X=function(t){function e(e,n){return t.call(this,e,n,["linearGradient","radialGradient"],"__gradient_in_use__")||this}return Object(x.a)(e,t),e.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;c.k(["fill","stroke"],(function(o){var r=e.style[o];if(Y(r)){var l=r,defs=n.getDefs(!0),c=void 0;l.__dom?(c=l.__dom,defs.contains(l.__dom)||n.addDom(c)):c=n.add(l),n.markUsed(e);var d=c.getAttribute("id");t.setAttribute(o,"url(#"+d+")")}}))}},e.prototype.add=function(t){var e;if(F(t))e=this.createElement("linearGradient");else{if(!U(t))return c.F("Illegal gradient type."),null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},e.prototype.update=function(t){if(Y(t)){var e=this;this.doUpdate(t,(function(){var n=t.__dom;if(n){var o=n.tagName,r=t.type;"linear"===r&&"linearGradient"===o||"radial"===r&&"radialGradient"===o?e.updateDom(t,t.__dom):(e.removeDom(t),e.add(t))}}))}},e.prototype.updateDom=function(t,e){if(F(t))e.setAttribute("x1",t.x+""),e.setAttribute("y1",t.y+""),e.setAttribute("x2",t.x2+""),e.setAttribute("y2",t.y2+"");else{if(!U(t))return void c.F("Illegal gradient type.");e.setAttribute("cx",t.x+""),e.setAttribute("cy",t.y+""),e.setAttribute("r",t.r+"")}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,i=0,r=n.length;i<r;++i){var l=this.createElement("stop");l.setAttribute("offset",100*n[i].offset+"%");var d=n[i].color;if(d.indexOf("rgba")>-1){var h=o.g(d)[3],f=o.i(d);l.setAttribute("stop-color","#"+f),l.setAttribute("stop-opacity",h+"")}else l.setAttribute("stop-color",n[i].color);e.appendChild(l)}t.__dom=e},e.prototype.markUsed=function(e){if(e.style){var n=e.style.fill;n&&n.__dom&&t.prototype.markDomUsed.call(this,n.__dom),(n=e.style.stroke)&&n.__dom&&t.prototype.markDomUsed.call(this,n.__dom)}},e}(W),Z=n(479);function $(t){return t&&(!!t.image||!!t.svgElement)}var K=new(n(507).a),J=function(t){function e(e,n){return t.call(this,e,n,["pattern"],"__pattern_in_use__")||this}return Object(x.a)(e,t),e.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;c.k(["fill","stroke"],(function(o){var pattern=e.style[o];if($(pattern)){var defs=n.getDefs(!0),r=K.get(pattern);r?defs.contains(r)||n.addDom(r):r=n.add(pattern),n.markUsed(e);var l=r.getAttribute("id");t.setAttribute(o,"url(#"+l+")")}}))}},e.prototype.add=function(pattern){if($(pattern)){var t=this.createElement("pattern");return pattern.id=null==pattern.id?this.nextId++:pattern.id,t.setAttribute("id","zr"+this._zrId+"-pattern-"+pattern.id),t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("patternUnits","userSpaceOnUse"),this.updateDom(pattern,t),this.addDom(t),t}},e.prototype.update=function(pattern){if($(pattern)){var t=this;this.doUpdate(pattern,(function(){var e=K.get(pattern);t.updateDom(pattern,e)}))}},e.prototype.updateDom=function(pattern,t){var e=pattern.svgElement;if(e instanceof SVGElement)e.parentNode!==t&&(t.innerHTML="",t.appendChild(e),t.setAttribute("width",pattern.svgWidth+""),t.setAttribute("height",pattern.svgHeight+""));else{var img=void 0,n=t.getElementsByTagName("image");if(n.length){if(!pattern.image)return void t.removeChild(n[0]);img=n[0]}else pattern.image&&(img=this.createElement("image"));if(img){var o=void 0,r=pattern.image;if("string"==typeof r?o=r:r instanceof HTMLImageElement?o=r.src:r instanceof HTMLCanvasElement&&(o=r.toDataURL()),o){img.setAttribute("href",o),img.setAttribute("x","0"),img.setAttribute("y","0");var l=Object(Z.a)(o,img,{dirty:function(){}},(function(img){t.setAttribute("width",img.width+""),t.setAttribute("height",img.height+"")}));l&&l.width&&l.height&&(t.setAttribute("width",l.width+""),t.setAttribute("height",l.height+"")),t.appendChild(img)}}}var c="translate("+(pattern.x||0)+", "+(pattern.y||0)+") rotate("+(pattern.rotation||0)/Math.PI*180+") scale("+(pattern.scaleX||1)+", "+(pattern.scaleY||1)+")";t.setAttribute("patternTransform",c),K.set(pattern,t)},e.prototype.markUsed=function(e){e.style&&($(e.style.fill)&&t.prototype.markDomUsed.call(this,K.get(e.style.fill)),$(e.style.stroke)&&t.prototype.markDomUsed.call(this,K.get(e.style.stroke)))},e}(W),Q=n(439);function tt(t){var e=t.__clipPaths;return e&&e.length>0}var et=function(t){function e(e,n){var o=t.call(this,e,n,"clipPath","__clippath_in_use__")||this;return o._refGroups={},o._keyDuplicateCount={},o}return Object(x.a)(e,t),e.prototype.markAllUnused=function(){t.prototype.markAllUnused.call(this);var e=this._refGroups;for(var n in e)e.hasOwnProperty(n)&&this.markDomUnused(e[n]);this._keyDuplicateCount={}},e.prototype._getClipPathGroup=function(t,e){if(tt(t)){var n=t.__clipPaths,o=this._keyDuplicateCount,r=function(t){var e=[];if(t)for(var i=0;i<t.length;i++){var n=t[i];e.push(n.id)}return e.join(",")}(n);return Object(Q.b)(n,e&&e.__clipPaths)&&(o[r]=o[r]||0,o[r]&&(r+="-"+o[r]),o[r]++),this._refGroups[r]||(this._refGroups[r]=this.createElement("g"))}},e.prototype.update=function(t,e){var n=this._getClipPathGroup(t,e);return n&&(this.markDomUsed(n),this.updateDom(n,t.__clipPaths)),n},e.prototype.updateDom=function(t,e){if(e&&e.length>0){var defs=this.getDefs(!0),n=e[0],o=void 0,r=void 0;n._dom?(r=n._dom.getAttribute("id"),o=n._dom,defs.contains(o)||defs.appendChild(o)):(r="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(o=this.createElement("clipPath")).setAttribute("id",r),defs.appendChild(o),n._dom=o),this.getSvgProxy(n).brush(n);var l=this.getSvgElement(n);o.innerHTML="",o.appendChild(l),t.setAttribute("clip-path","url(#"+r+")"),e.length>1&&this.updateDom(o,e.slice(1))}else t&&t.setAttribute("clip-path","none")},e.prototype.markUsed=function(e){var n=this;e.__clipPaths&&c.k(e.__clipPaths,(function(e){e._dom&&t.prototype.markDomUsed.call(n,e._dom)}))},e.prototype.removeUnused=function(){t.prototype.removeUnused.call(this);var e={},n=this._refGroups;for(var o in n)if(n.hasOwnProperty(o)){var r=n[o];this.isDomUnused(r)?r.parentNode&&r.parentNode.removeChild(r):e[o]=r}this._refGroups=e},e}(W),it=function(t){function e(e,n){var o=t.call(this,e,n,["filter"],"__filter_in_use__","_shadowDom")||this;return o._shadowDomMap={},o._shadowDomPool=[],o}return Object(x.a)(e,t),e.prototype._getFromPool=function(){var t=this._shadowDomPool.pop();if(!t){(t=this.createElement("filter")).setAttribute("id","zr"+this._zrId+"-shadow-"+this.nextId++);var e=this.createElement("feDropShadow");t.appendChild(e),this.addDom(t)}return t},e.prototype.update=function(t,e){if(function(style){return style&&(style.shadowBlur||style.shadowOffsetX||style.shadowOffsetY)}(e.style)){var n=function(t){var style=t.style,e=t.getGlobalScale();return[style.shadowColor,(style.shadowBlur||0).toFixed(2),(style.shadowOffsetX||0).toFixed(2),(style.shadowOffsetY||0).toFixed(2),e[0],e[1]].join(",")}(e),o=e._shadowDom=this._shadowDomMap[n];o||(o=this._getFromPool(),this._shadowDomMap[n]=o),this.updateDom(t,e,o)}else this.remove(t,e)},e.prototype.remove=function(t,e){null!=e._shadowDom&&(e._shadowDom=null,t.removeAttribute("filter"))},e.prototype.updateDom=function(t,e,n){var o=n.children[0],style=e.style,r=e.getGlobalScale(),c=r[0],d=r[1];if(c&&d){var h=style.shadowOffsetX||0,f=style.shadowOffsetY||0,m=style.shadowBlur,v=l(style.shadowColor);o.setAttribute("dx",h/c+""),o.setAttribute("dy",f/d+""),o.setAttribute("flood-color",v.color),o.setAttribute("flood-opacity",v.opacity+"");var y=m/2/c+" "+m/2/d;o.setAttribute("stdDeviation",y),n.setAttribute("x","-100%"),n.setAttribute("y","-100%"),n.setAttribute("width","300%"),n.setAttribute("height","300%"),e._shadowDom=n;var _=n.getAttribute("id");t.setAttribute("filter","url(#"+_+")")}},e.prototype.removeUnused=function(){if(this.getDefs(!1)){var t=this._shadowDomPool,e=this._shadowDomMap;for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);this._shadowDomMap={}}},e}(W);function nt(t){return parseInt(t,10)}function ot(t){return t instanceof d.b?E:t instanceof h.a?B:t instanceof f.a?G:E}function at(t,e){return e&&t&&e.parentNode!==t}function st(t,e,n){if(at(t,e)&&n){var o=n.nextSibling;o?t.insertBefore(e,o):t.appendChild(e)}}function lt(t,e){if(at(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function ut(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function ct(t){return t.__svgEl}function ht(t){return function(){c.F('In SVG mode painter not support method "'+t+'"')}}var pt=function(){function t(t,e,n,o){this.type="svg",this.refreshHover=ht("refreshHover"),this.pathToImage=ht("pathToImage"),this.configLayer=ht("configLayer"),this.root=t,this.storage=e,this._opts=n=c.m({},n||{});var l=r("svg");l.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),l.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("version","1.1"),l.setAttribute("baseProfile","full"),l.style.cssText="user-select:none;position:absolute;left:0;top:0;";var d=r("g");l.appendChild(d);var h=r("g");l.appendChild(h),this._gradientManager=new X(o,h),this._patternManager=new J(o,h),this._clipPathManager=new et(o,h),this._shadowManager=new it(o,h);var f=document.createElement("div");f.style.cssText="overflow:hidden;position:relative",this._svgDom=l,this._svgRoot=h,this._backgroundRoot=d,this._viewport=f,t.appendChild(f),f.appendChild(l),this.resize(n.width,n.height),this._visibleList=[]}return t.prototype.getType=function(){return"svg"},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.getSvgRoot=function(){return this._svgRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},t.prototype.setBackgroundColor=function(t){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var e=r("rect");e.setAttribute("width",this.getWidth()),e.setAttribute("height",this.getHeight()),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("id",0);var n=l(t),o=n.color,c=n.opacity;e.setAttribute("fill",o),e.setAttribute("fill-opacity",c),this._backgroundRoot.appendChild(e),this._backgroundNode=e},t.prototype.createSVGElement=function(t){return r(t)},t.prototype.paintOne=function(t){var e=ot(t);return e&&e.brush(t),ct(t)},t.prototype._paintList=function(t){var e=this._gradientManager,n=this._patternManager,o=this._clipPathManager,r=this._shadowManager;e.markAllUnused(),n.markAllUnused(),o.markAllUnused(),r.markAllUnused();for(var l=this._svgRoot,c=this._visibleList,d=t.length,h=[],i=0;i<d;i++){var f=ot(C=t[i]),m=ct(C);C.invisible||(!C.__dirty&&m||(f&&f.brush(C),(m=ct(C))&&C.style&&(e.update(C.style.fill),e.update(C.style.stroke),n.update(C.style.fill),n.update(C.style.stroke),r.update(m,C)),C.__dirty=0),m&&h.push(C))}var v,y,x,S,w,k=_(c,h);for(i=0;i<k.length;i++){if((O=k[i]).removed)for(var M=0;M<O.count;M++){m=ct(C=c[O.indices[M]]);tt(C)?(x=m)&&x.parentNode&&x.parentNode.removeChild(x):ut(l,m)}}for(i=0;i<k.length;i++){var O;if(!(O=k[i]).removed)for(M=0;M<O.count;M++){var C=h[O.indices[M]],I=o.update(C,S);I!==w&&(v=y,I&&(v?st(l,I,v):lt(l,I),y=I,v=null),w=I);m=ct(C);v?st(w||l,m,v):lt(w||l,m),v=m||v,w||(y=v),e.markUsed(C),e.addWithoutUpdate(m,C),n.markUsed(C),n.addWithoutUpdate(m,C),o.markUsed(C),S=C}}e.removeUnused(),n.removeUnused(),o.removeUnused(),r.removeUnused(),this._visibleList=h},t.prototype.resize=function(t,e){var n=this._viewport;n.style.display="none";var o=this._opts;if(null!=t&&(o.width=t),null!=e&&(o.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var r=n.style;r.width=t+"px",r.height=e+"px";var l=this._svgDom;l.setAttribute("width",t+""),l.setAttribute("height",e+"")}this._backgroundNode&&(this._backgroundNode.setAttribute("width",t),this._backgroundNode.setAttribute("height",e))},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype._getSize=function(t){var e=this._opts,n=["width","height"][t],o=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],l=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var c=this.root,d=document.defaultView.getComputedStyle(c);return(c[o]||nt(d[n])||nt(c.style[n]))-(nt(d[r])||0)-(nt(d[l])||0)|0},t.prototype.dispose=function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},t.prototype.clear=function(){var t=this._viewport;t&&t.parentNode&&t.parentNode.removeChild(t)},t.prototype.toDataURL=function(){this.refresh();var t=this._svgDom,e=t.outerHTML||(t.parentNode&&t.parentNode).innerHTML;return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(e.replace(/></g,">\n\r<"))},t}();function ft(t){t.registerPainter("svg",pt)}}}]);