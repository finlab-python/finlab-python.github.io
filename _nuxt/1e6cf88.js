(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{373:function(e,t,r){"use strict";r.r(t);r(231),r(47),r(67),r(157),r(60),r(68),r(377),r(117);var o={name:"TVChartContainer",props:{symbol:{default:"stock",type:String},price:{default:function(){},type:Object},indicators:{default:function(){},type:Object},interval:{default:"D",type:String},containerId:{default:"tv_chart_container",type:String},datafeedUrl:{default:"https://demo_feed.tradingview.com",type:String},libraryPath:{default:"/charting_library/",type:String},chartsStorageUrl:{default:"https://saveload.tradingview.com",type:String},chartsStorageApiVersion:{default:"1.1",type:String},clientId:{default:"tradingview.com",type:String},userId:{default:"public_user_id",type:String},fullscreen:{default:!1,type:Boolean},autosize:{default:!0,type:Boolean},studiesOverrides:{type:Object,default:function(){return{}}}},data:function(){return{isReady:!1,predictionOption:"未來20天"}},watch:{price:function(){null!==this.tvWidget&&this.isReady&&this.tvWidget.setSymbol(this.$props.symbol,"1D")},indicators:function(){console.log("change indicator"),this.isReady&&this.initStudies()}},tvWidget:null,mounted:function(){this.deleteTvWidget(),this.createTvWidget(),this.predictionOption=localStorage.getItem("predictionOption"),null===this.predictionOption&&(this.predictionOption="未來10天")},destroyed:function(){this.deleteTvWidget()},methods:{initStudies:function(){null!==this.tvWidget&&(console.log("----aaa----"),console.log(this.predictionOption),this.tvWidget.activeChart().removeAllStudies(),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[5]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[20]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[60]),this.tvWidget.activeChart().createStudy("Volume"))},deleteTvWidget:function(){this.tvWidget&&(this.tvWidget.remove(),this.tvWidget=null,this.isReady=!1)},createTvWidget:function(){var e,t=this,r=this.createDatafeed(),o={symbol:this.symbol,datafeed:r,interval:this.interval,container:this.containerId,library_path:this.libraryPath,locale:(e=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search),(null===e?null:decodeURIComponent(e[1].replace(/\+/g," ")))||"zh_TW"),disabled_features:["header_widget","header_widget_dom_node","compare_symbol","display_market_status","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","timeframes_toolbar","use_localstorage_for_settings","volume_force_overlay","header_saveload","go_to_date","edit_buttons_in_legend","symbol_search_hot_key","border_around_the_chart","control_bar","context_menus","show_chart_property_page","countdown","study_market_minimized","main_series_scale_menu","display_market_status","remove_library_container_border","chart_property_page_style","property_pages","chart_property_page_scales","chart_property_page_background","source_selection_markers"],detail:!0,enabled_features:["hide_left_toolbar_by_default"],charts_storage_url:this.chartsStorageUrl,charts_storage_api_version:this.chartsStorageApiVersion,client_id:this.clientId,user_id:this.userId,fullscreen:this.fullscreen,autosize:!0,studies_overrides:this.studiesOverrides,debug:!1},n=this.$TVChart.Widget;this.isReady=!1;var c=new n(o);this.tvWidget=c,c.onChartReady((function(){c.activeChart().dataReady((function(){t.initStudies(),t.isReady=!0;var iframe=document.getElementsByTagName("iframe")[0],e=document.getElementsByClassName("TVChartContainer")[0];iframe.style.height=e.offsetHeight+"px"}))}))},createDatafeed:function(){var e=this,t=this;return{onReady:function(e){var t={supported_resolutions:["1D","1W","1M"],exchanges:[{value:"TPEX",name:"TPEX",desc:"TPEX"}],symbols_types:[{name:"stock",value:"stock"}]};console.log("[onReady]: Method call"),setTimeout((function(){return e(t)}))},searchSymbols:function(e,t,r,o){console.log("[searchSymbol]: Method call",symbolName)},resolveSymbol:function(t,r,o){var n=t===e.$props.symbol?t:t+"-"+e.$props.symbol,c={ticker:n,name:n,description:n,type:"TYPE",session:"0900-1330",timezone:"Asia/Taipei",exchange:"TWII",minmov:.01,pricescale:.01,has_intraday:!1,has_weekly_and_monthly:!1,supported_resolutions:["1D","1W","1M"]};setTimeout((function(){return r(c)}),0),console.log("[resolveSymbol]: Method call",t)},getBars:function(r,o,n,c,l){if(r.ticker==e.$props.symbol){var p=[];for(var i in t.$props.price.close){var d=t.$props.price.date[i].seconds;if("number"==typeof t.$props.price.date[i]){var h=t.$props.price.date[i];d=Number(h/1e6)/1e3}if(!(d<n.from||d>=n.to)){var _={open:t.$props.price.open[i],close:t.$props.price.close[i],high:t.$props.price.high[i],low:t.$props.price.low[i],volume:t.$props.price.volume[i],time:1e3*d};isNaN(_.open)||p.push(_)}}console.log(p),c(p,{noData:0===p.length})}else{var f=e.$props.indicators[r.ticker.split("-")[0]],v=e.$props.indicators.date,y=[];for(var m in f){var S=v[m].seconds;if(!(S<n.from||S>=n.to)){var I={open:f[m],close:f[m],high:f[m],low:f[m],time:1e3*S};isNaN(I.open)||y.push(I)}}c(y,{noData:0===y.length})}},subscribeBars:function(e,t,r,o,n){console.log("[subscribeBars]: Method call with subscribeUID:",o)},unsubscribeBars:function(e){console.log("[unsubscribeBars]: Method call with subscriberUID:",e)}}}}},n=r(41),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"TVChartContainer",staticStyle:{height:"100%"},attrs:{id:e.containerId}})}),[],!1,null,null,null);t.default=component.exports},377:function(e,t,r){"use strict";var o=r(24),n=r(12),c=r(119),l=r(33),d=r(26),h=r(228),_=r(122),f=r(230),v=r(11),y=r(95).f,m=r(57).f,S=r(32).f,I=r(378),w=r(229).trim,N="Number",T=n.Number,W=T.prototype,C=function(e){var t=f(e,"number");return"bigint"==typeof t?t:E(t)},E=function(e){var t,r,o,n,c,l,d,code,h=f(e,"number");if(_(h))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof h&&h.length>2)if(43===(t=(h=w(h)).charCodeAt(0))||45===t){if(88===(r=h.charCodeAt(2))||120===r)return NaN}else if(48===t){switch(h.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+h}for(l=(c=h.slice(2)).length,d=0;d<l;d++)if((code=c.charCodeAt(d))<48||code>n)return NaN;return parseInt(c,o)}return+h};if(c(N,!T(" 0o1")||!T("0b1")||T("+0x1"))){for(var k,A=function(e){var t=arguments.length<1?0:T(C(e)),r=this;return r instanceof A&&v((function(){I(r)}))?h(Object(t),r,A):t},$=o?y(T):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),O=0;$.length>O;O++)d(T,k=$[O])&&!d(A,k)&&S(A,k,m(T,k));A.prototype=W,W.constructor=A,l(n,N,A)}},378:function(e,t){var r=1..valueOf;e.exports=function(e){return r.call(e)}}}]);