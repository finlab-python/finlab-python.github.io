(window.webpackJsonp=window.webpackJsonp||[]).push([[48,38],{429:function(t,e,n){"use strict";var r=n(4),o=n(8),l=n(55),c=n(50),h=n(76),d=n(274),m=n(24),f=n(9),v=n(275),y=n(191),S=n(434),x=n(435),_=n(121),O=n(436),I=[],k=o(I.sort),A=o(I.push),w=f(function(){I.sort(void 0)}),D=f(function(){I.sort(null)}),C=y("sort"),M=!f(function(){if(_)return _<70;if(!(S&&S>3)){if(x)return!0;if(O)return O<603;var code,t,e,n,r="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(n=0;n<47;n++)I.push({k:t+n,v:e})}for(I.sort(function(a,b){return b.v-a.v}),n=0;n<I.length;n++)t=I[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}});r({target:"Array",proto:!0,forced:w||!D||!C||!M},{sort:function(t){void 0!==t&&l(t);var e=c(this);if(M)return void 0===t?k(e):k(e,t);var n,r,o=[],f=h(e);for(r=0;r<f;r++)r in e&&A(o,e[r]);for(v(o,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:m(e)>m(n)?1:-1}}(t)),n=h(o),r=0;r<n;)e[r]=o[r++];for(;r<f;)d(e,r++);return e}})},434:function(t,e,n){"use strict";var r=n(85).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},435:function(t,e,n){"use strict";var r=n(85);t.exports=/MSIE|Trident/.test(r)},436:function(t,e,n){"use strict";var r=n(85).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},443:function(t,e,n){"use strict";var r=n(4),o=n(461),l=n(149);r({target:"Array",proto:!0},{fill:o}),l("fill")},451:function(t,e,n){"use strict";var r=n(424),o=n(431),l=n(457),c=n(573),h=n(432),d=n(430),m=n(452),f=n(423),v=n(428),y=n(438),S=function(t){function e(data,e,n,r){var o=t.call(this)||this;return o.updateData(data,e,n,r),o}return Object(r.a)(e,t),e.prototype._createSymbol=function(t,data,e,n,r){this.removeAll();var l=Object(o.a)(t,-1,-1,2,2,null,r);l.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),l.drift=x,this._symbolType=t,this.add(l)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Object(d.r)(this.childAt(0))},e.prototype.downplay=function(){Object(d.C)(this.childAt(0))},e.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},e.prototype.setDraggable=function(t,e){var n=this.childAt(0);n.draggable=t,n.cursor=!e&&t?"move":n.cursor},e.prototype.updateData=function(data,t,n,r){this.silent=!1;var o=data.getItemVisual(t,"symbol")||"circle",c=data.hostModel,h=e.getSymbolSize(data,t),d=o!==this._symbolType,m=r&&r.disableAnimation;if(d){var f=data.getItemVisual(t,"symbolKeepAspect");this._createSymbol(o,data,t,h,f)}else{(y=this.childAt(0)).silent=!1;var v={scaleX:h[0]/2,scaleY:h[1]/2};m?y.attr(v):l.g(y,v,c,t),Object(l.f)(y)}if(this._updateCommon(data,t,h,n,r),d){var y=this.childAt(0);if(!m){v={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:y.style.opacity}};y.scaleX=y.scaleY=0,y.style.opacity=0,l.b(y,v,c,t)}}m&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(data,t,e,n,r){var l,c,h,S,x,_,O,I,k,A=this.childAt(0),w=data.hostModel;if(n&&(l=n.emphasisItemStyle,c=n.blurItemStyle,h=n.selectItemStyle,S=n.focus,x=n.blurScope,O=n.labelStatesModels,I=n.hoverScale,k=n.cursorStyle,_=n.emphasisDisabled),!n||data.hasItemOption){var D=n&&n.itemModel?n.itemModel:data.getItemModel(t),C=D.getModel("emphasis");l=C.getModel("itemStyle").getItemStyle(),h=D.getModel(["select","itemStyle"]).getItemStyle(),c=D.getModel(["blur","itemStyle"]).getItemStyle(),S=C.get("focus"),x=C.get("blurScope"),_=C.get("disabled"),O=Object(v.d)(D),I=C.getShallow("scale"),k=D.getShallow("cursor")}var M=data.getItemVisual(t,"symbolRotate");A.attr("rotation",(M||0)*Math.PI/180||0);var j=Object(o.b)(data.getItemVisual(t,"symbolOffset"),e);j&&(A.x=j[0],A.y=j[1]),k&&A.attr("cursor",k);var N=data.getItemVisual(t,"style"),P=N.fill;if(A instanceof y.a){var L=A.style;A.useStyle(Object(f.m)({image:L.image,x:L.x,y:L.y,width:L.width,height:L.height},N))}else A.__isEmptyBrush?A.useStyle(Object(f.m)({},N)):A.useStyle(N),A.style.decal=null,A.setColor(P,r&&r.symbolInnerColor),A.style.strokeNoScale=!0;var z=data.getItemVisual(t,"liftZ"),T=this._z2;null!=z?null==T&&(this._z2=A.z2,A.z2+=z):null!=T&&(A.z2=T,this._z2=null);var E=r&&r.useNameLabel;Object(v.f)(A,O,{labelFetcher:w,labelDataIndex:t,defaultText:function(t){return E?data.getName(t):Object(m.b)(data,t)},inheritColor:P,defaultOpacity:N.opacity}),this._sizeX=e[0]/2,this._sizeY=e[1]/2;var R=A.ensureState("emphasis");R.style=l,A.ensureState("select").style=h,A.ensureState("blur").style=c;var G=null==I||!0===I?Math.max(1.1,3/this._sizeY):isFinite(I)&&I>0?+I:1;R.scaleX=this._sizeX*G,R.scaleY=this._sizeY*G,this.setSymbolScale(1),Object(d.J)(this,S,x,_)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e,n){var r=this.childAt(0),o=Object(h.a)(this).dataIndex,c=n&&n.animation;if(this.silent=r.silent=!0,n&&n.fadeLabel){var d=r.getTextContent();d&&l.d(d,{style:{opacity:0}},e,{dataIndex:o,removeOpt:c,cb:function(){r.removeTextContent()}})}else r.removeTextContent();l.d(r,{style:{opacity:0},scaleX:0,scaleY:0},e,{dataIndex:o,cb:t,removeOpt:c})},e.getSymbolSize=function(data,t){return Object(o.c)(data.getItemVisual(t,"symbolSize"))},e}(c.a);function x(t,e){this.parent.drift(t,e)}e.a=S},452:function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return c});var r=n(510),o=n(423);function l(data,t){var e=data.mapDimensionsAll("defaultedLabel"),n=e.length;if(1===n){var o=Object(r.e)(data,t,e[0]);return null!=o?o+"":null}if(n){for(var l=[],i=0;i<e.length;i++)l.push(Object(r.e)(data,t,e[i]));return l.join(" ")}}function c(data,t){var e=data.mapDimensionsAll("defaultedLabel");if(!Object(o.t)(t))return t+"";for(var n=[],i=0;i<e.length;i++){var r=data.getDimensionIndex(e[i]);r>=0&&n.push(t[r])}return n.join(" ")}},461:function(t,e,n){"use strict";var r=n(50),o=n(123),l=n(76);t.exports=function(t){for(var e=r(this),n=l(e),c=arguments.length,h=o(c>1?arguments[1]:void 0,n),d=c>2?arguments[2]:void 0,m=void 0===d?n:o(d,n);m>h;)e[h++]=t;return e}},467:function(t,e,n){"use strict";function r(t,e){return t.type===e}n.d(e,"a",function(){return r})},472:function(t,e,n){"use strict";var r=n(423),o=n(468),l=n(478),c=n(529),h=n(426),d=n(501),m=function(t){this.coordSysDims=[],this.axisMap=Object(r.f)(),this.categoryAxisMap=Object(r.f)(),this.coordSysName=t};var f={cartesian2d:function(t,e,n,r){var o=t.getReferringComponents("xAxis",h.b).models[0],l=t.getReferringComponents("yAxis",h.b).models[0];e.coordSysDims=["x","y"],n.set("x",o),n.set("y",l),v(o)&&(r.set("x",o),e.firstCategoryDimIndex=0),v(l)&&(r.set("y",l),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,r){var o=t.getReferringComponents("singleAxis",h.b).models[0];e.coordSysDims=["single"],n.set("single",o),v(o)&&(r.set("single",o),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var o=t.getReferringComponents("polar",h.b).models[0],l=o.findAxisModel("radiusAxis"),c=o.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",l),n.set("angle",c),v(l)&&(r.set("radius",l),e.firstCategoryDimIndex=0),v(c)&&(r.set("angle",c),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,o){var l=t.ecModel,c=l.getComponent("parallel",t.get("parallelIndex")),h=e.coordSysDims=c.dimensions.slice();Object(r.k)(c.parallelAxisIndex,function(t,r){var c=l.getComponent("parallelAxis",t),d=h[r];n.set(d,c),v(c)&&(o.set(d,c),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=r))})}};function v(t){return"category"===t.get("type")}var y=n(495),S=n(441),x=n(509),_=n(484);e.a=function(t,e,n){n=n||{};var source,v=e.getSourceManager(),O=!1;t?(O=!0,source=Object(y.c)(t)):O=(source=v.getSource()).sourceFormat===_.f;var I=function(t){var e=t.get("coordinateSystem"),n=new m(e),r=f[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}(e),k=function(t,e){var n,o=t.get("coordinateSystem"),l=d.a.get(o);return e&&e.coordSysDims&&(n=r.H(e.coordSysDims,function(t){var n={name:t},r=e.axisMap.get(t);if(r){var o=r.get("type");n.type=Object(c.a)(o)}return n})),n||(n=l&&(l.getDimensionsInfo?l.getDimensionsInfo():l.dimensions.slice())||["x","y"]),n}(e,I),A=n.useEncodeDefaulter,w=r.w(A)?A:A?r.h(x.c,k,e):null,D={coordDimensions:k,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:w,canOmitUnusedDimensions:!O},C=Object(l.a)(source,D),M=function(t,e,n){var o,l;return n&&r.k(t,function(t,r){var c=t.coordDim,h=n.categoryAxisMap.get(c);h&&(null==o&&(o=r),t.ordinalMeta=h.getOrdinalMeta(),e&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(l=!0)}),l||null==o||(t[o].otherDims.itemName=0),o}(C.dimensions,n.createInvertedIndices,I),j=O?null:v.getSharedDataStore(C),N=Object(S.a)(e,{schema:C,store:j}),data=new o.a(C,e);data.setCalculationInfo(N);var P=null!=M&&function(source){if(source.sourceFormat===_.f){var t=function(t){var i=0;for(;i<t.length&&null==t[i];)i++;return t[i]}(source.data||[]);return!r.t(Object(h.h)(t))}}(source)?function(t,e,n,r){return r===M?n:this.defaultDimValueGetter(t,e,n,r)}:null;return data.hasItemOption=!1,data.initData(O?source:j,null,P),data}},474:function(t,e,n){t.exports={}},485:function(t,e,n){"use strict";var r=n(573),o=n(457),l=n(425),c=n(451),h=n(423),d=n(428);function m(data,t,e,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(e))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&"none"!==data.getItemVisual(e,"symbol")}function f(t){return null==t||Object(h.A)(t)||(t={isIgnore:t}),t||{}}function v(data){var t=data.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:Object(d.d)(t),cursorStyle:t.get("cursor")}}var y=function(){function t(t){this.group=new r.a,this._SymbolCtor=t||c.a}return t.prototype.updateData=function(data,t){this._progressiveEls=null,t=f(t);var e=this.group,n=data.hostModel,r=this._data,l=this._SymbolCtor,c=t.disableAnimation,h=v(data),d={disableAnimation:c},y=t.getSymbolPoint||function(t){return data.getItemLayout(t)};r||e.removeAll(),data.diff(r).add(function(n){var r=y(n);if(m(data,r,n,t)){var o=new l(data,n,h,d);o.setPosition(r),data.setItemGraphicEl(n,o),e.add(o)}}).update(function(f,v){var S=r.getItemGraphicEl(v),x=y(f);if(m(data,x,f,t)){var _=data.getItemVisual(f,"symbol")||"circle",O=S&&S.getSymbolType&&S.getSymbolType();if(!S||O&&O!==_)e.remove(S),(S=new l(data,f,h,d)).setPosition(x);else{S.updateData(data,f,h,d);var I={x:x[0],y:x[1]};c?S.attr(I):o.g(S,I,n)}e.add(S),data.setItemGraphicEl(f,S)}else e.remove(S)}).remove(function(t){var o=r.getItemGraphicEl(t);o&&o.fadeOut(function(){e.remove(o)},n)}).execute(),this._getSymbolPoint=y,this._data=data},t.prototype.updateLayout=function(){var t=this,data=this._data;data&&data.eachItemGraphicEl(function(e,n){var r=t._getSymbolPoint(n);e.setPosition(r),e.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(data){this._seriesScope=v(data),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,data,e){function n(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],e=f(e);for(var r=t.start;r<t.end;r++){var o=data.getItemLayout(r);if(m(data,o,r,e)){var l=new this._SymbolCtor(data,r,this._seriesScope);l.traverse(n),l.setPosition(o),this.group.add(l),data.setItemGraphicEl(r,l),this._progressiveEls.push(l)}}},t.prototype.eachRendered=function(t){l.traverseElements(this._progressiveEls||this.group,t)},t.prototype.remove=function(t){var e=this.group,data=this._data;data&&t?data.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)},data.hostModel)}):e.removeAll()},t}();e.a=y},505:function(t,e,n){"use strict";n(474)},512:function(t,e,n){"use strict";n.r(e);var r=n(12),o=(n(43),n(443),n(60),n(276),n(53),n(23),n(40),n(38),n(6)),l=n(462),c=n(595),h=n(1043),d=n(545),m=n(827),f=n(656),v=n(658);Object(l.a)([h.a,m.a,f.a,d.a,v.a]);var y=!1;function S(){return x.apply(this,arguments)}function x(){return(x=Object(r.a)(regeneratorRuntime.mark(function t(){var e,r,o,c,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!y){t.next=1;break}return t.abrupt("return");case 1:return t.next=2,Promise.all([n.e(16),n.e(113)]).then(n.bind(null,446));case 2:e=t.sent,r=e.MarkPointComponent,o=e.MarkLineComponent,c=e.VisualMapComponent,h=e.DataZoomComponent,Object(l.a)([r,o,c,h]),y=!0;case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}var _=Object(o.b)({name:"CumulativeReturnChart",props:{values:{type:Array,default:function(){return[[1,2,3,4]]}},index:{type:Array,default:function(){return["2020-01-01","2020-02-01","2020-03-01","2020-04-01"]}},benchmark:{type:Array,default:function(){return null}},height:{type:String,default:"300px"},valueName:{type:Array,default:function(){return[""]}},benchmarkName:{type:String,default:"大盤報酬"},fill:{type:Boolean,default:!0},secondaryBenchmark:{type:Boolean,default:!1},visualMap:{type:Object,default:function(){return null}},livePerformanceUpdate:{default:function(){return null}},maxSamples:{type:Number,default:100},dataZoom:{type:Object,default:function(){return null}},colors:{type:Array,default:function(){return["#37459c","#eb7e26","#14b363"]}}},data:function(){var t={animation:!1,type:"value",scale:!0,axisLabel:{formatter:"{value}%",inside:!0},show:!0,minorTick:{show:!1},minorSplitLine:{show:!1},axisTick:{show:!0,inside:!0},axisLine:{show:!1},splitLine:{show:!1},position:"right"},e=t;return this.secondaryBenchmark&&((e=[JSON.parse(JSON.stringify(t)),JSON.parse(JSON.stringify(t))])[0].position="right",e[0].axisLabel.formatter=null,e[0].axisLabel.inside=!0,e[1].position="left",e[1].axisLabel.inside=!0),{chartInstance:null,resizeObserver:null,chartOption:{visualMap:this.visualMap,dataZoom:this.dataZoom,legend:{bottom:80,left:5,orient:"vertical",show:!this.secondaryBenchmark},grid:{left:0,right:0,top:"12px",bottom:"20px"},xAxis:{type:"time",animation:!1,name:"日期",minorTick:{show:!1},minorSplitLine:{show:!1},axisLine:{lineStyle:{color:"#aaa"}},axisLabel:{inside:!0},inverval:1},yAxis:e,series:[],backgroundColor:"transparent"}}},watch:{index:{handler:"updateChart",deep:!0},values:{handler:"updateChart",deep:!0},benchmark:{handler:"updateChart",deep:!0}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.visualMap||t.dataZoom||t.livePerformanceUpdate)){e.next=1;break}return e.next=1,S();case 1:t.initChart(),t.updateChart(),window.addEventListener("resize",t.resizeChart),"undefined"!=typeof ResizeObserver&&(t.resizeObserver=new ResizeObserver(function(){t.resizeChart()}),t.resizeObserver.observe(t.$refs.chart));case 2:case"end":return e.stop()}},e)}))()},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChart),this.resizeObserver&&this.resizeObserver.disconnect(),this.chartInstance&&this.chartInstance.dispose()},methods:{initChart:function(){this.chartInstance=Object(c.b)(this.$refs.chart,"light")},resizeChart:function(){this.chartInstance&&this.chartInstance.resize()},makeSeriesData:function(t,e,i){var n=this.fill?[{offset:0,color:this.colors[i]+"99"},{offset:1,color:this.colors[i]+"00",alpha:1}]:[],r=this.secondaryBenchmark?null:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:n,global:!1}},o=null,l=null;if(this.livePerformanceUpdate){var c=this.livePerformanceUpdate;e[0][0]>c&&(c=e[0][0]),o={data:[{coord:[c,0],symbol:"circle",symbolSize:10,itemStyle:{color:"#55bd95"},value:"Live",label:{color:"#459979",offset:[-20,0]}}]},l={symbol:"circle",symbolSize:10,itemStyle:{color:"#55bd95"},data:[[{coord:[c,0]},{coord:[e.slice(-1)[0][0],0]}]],lineStyle:{type:"solid",cap:"round",width:3}}}return{name:t,data:e,markPoint:o,markLine:l,animation:!1,zlevel:100,type:"line",smooth:!1,areaStyle:r,itemStyle:{opacity:0},lineStyle:{color:this.secondaryBenchmark?null:this.colors[i]},silent:!0}},updateChart:function(){if(this.chartOption.series=[],this.values&&this.index&&Array.isArray(this.values)&&Array.isArray(this.index)){for(var i in this.values){var t=this.valueName[i],e=this.index,n=this.values[i];if(n&&Array.isArray(n)&&0!==n.length){var r=this.values[i][0],o=Math.max(Math.round(n.length/this.maxSamples),1),data=[];for(var l in e)(l=parseInt(l))%o!==0&&0!==l&&l!==e.length-1||(this.secondaryBenchmark?data.push([e[l],n[l]]):data.push([e[l],n[l]/r*100-100]));var c=this.makeSeriesData(t,data,i);this.chartOption.series.push(c)}}if(void 0!==this.benchmark&&null!==this.benchmark&&Array.isArray(this.benchmark)&&0!==this.benchmark.length){var h=Math.max(Math.round(this.index.length/this.maxSamples),1),d=[];for(var m in this.index)(m=parseInt(m))%h!==0&&m!==this.index.length-1&&0!==m||d.push([this.index[m],100*(this.benchmark[m]/this.benchmark[0]-1)]);this.chartOption.series.push({name:this.benchmarkName,data:d,animation:!1,smooth:!1,type:"line",itemStyle:{color:"#000",borderColor:"#000",opacity:0},lineStyle:{color:"#aaa"},yAxisIndex:this.secondaryBenchmark?1:0,silent:!0}),this.chartInstance&&this.chartInstance.setOption(this.chartOption,!0)}else this.chartInstance&&this.chartInstance.setOption(this.chartOption,!0)}}}}),O=(n(505),n(52)),component=Object(O.a)(_,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticStyle:{position:"relative"}},[e("div",{staticStyle:{"z-index":"1"}},[e("div",{ref:"chart",staticClass:"chart",style:{height:t.height,width:"100%",zIndex:0}})])])},[],!1,null,"710eede2",null);e.default=component.exports},545:function(t,e,n){"use strict";n.d(e,"a",function(){return vt});var r=n(424),o=n(472),l=n(460),c=n(431),h=n(573),d=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(r.a)(e,t),e.prototype.getInitialData=function(option){return Object(o.a)(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new h.a,line=Object(c.a)("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(line),line.setStyle(t.lineStyle);var n=this.getData().getVisual("symbol"),r=this.getData().getVisual("symbolRotate"),o="none"===n?"circle":n,l=.8*t.itemHeight,symbol=Object(c.a)(o,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);e.add(symbol),symbol.setStyle(t.itemStyle);var d="inherit"===t.iconRotate?r:t.iconRotate||0;return symbol.rotation=d*Math.PI/180,symbol.setOrigin([t.itemWidth/2,t.itemHeight/2]),o.indexOf("empty")>-1&&(symbol.style.stroke=symbol.style.fill,symbol.style.fill="#fff",symbol.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(l.a),m=d,f=n(423),v=n(485),y=n(451),S=n(441);function x(t,data,e){var n=t.getBaseAxis(),r=t.getOtherAxis(n),o=function(t,e){var n=0,r=t.scale.getExtent();"start"===e?n=r[0]:"end"===e?n=r[1]:Object(f.z)(e)&&!isNaN(e)?n=e:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]);return n}(r,e),l=n.dim,c=r.dim,h=data.mapDimension(c),d=data.mapDimension(l),m="x"===c||"radius"===c?1:0,v=Object(f.H)(t.dimensions,function(t){return data.mapDimension(t)}),y=!1,x=data.getCalculationInfo("stackResultDimension");return Object(S.c)(data,v[0])&&(y=!0,v[0]=x),Object(S.c)(data,v[1])&&(y=!0,v[1]=x),{dataDimsForPoint:v,valueStart:o,valueAxisDim:c,baseAxisDim:l,stacked:!!y,valueDim:h,baseDim:d,baseDataOffset:m,stackedOverDimension:data.getCalculationInfo("stackedOverDimension")}}function _(t,e,data,n){var r=NaN;t.stacked&&(r=data.get(data.getCalculationInfo("stackedOverDimension"),n)),isNaN(r)&&(r=t.valueStart);var o=t.baseDataOffset,l=[];return l[o]=data.get(t.baseDim,n),l[1-o]=r,e.dataToPoint(l)}var O=n(445);var I=n(560),k=n(457),A=n(535),w=n(426),D=n(442),C=n(487),M=n(500),j=Math.min,N=Math.max;function P(t,e){return isNaN(t)||isNaN(e)}function L(t,e,n,r,o,l,c,h,d){for(var m,f,v,y,S,x,_=n,O=0;O<r;O++){var I=e[2*_],k=e[2*_+1];if(_>=o||_<0)break;if(P(I,k)){if(d){_+=l;continue}break}if(_===n)t[l>0?"moveTo":"lineTo"](I,k),v=I,y=k;else{var A=I-m,w=k-f;if(A*A+w*w<.5){_+=l;continue}if(c>0){for(var D=_+l,C=e[2*D],M=e[2*D+1];C===I&&M===k&&O<r;)O++,_+=l,C=e[2*(D+=l)],M=e[2*D+1],A=(I=e[2*_])-m,w=(k=e[2*_+1])-f;var L=O+1;if(d)for(;P(C,M)&&L<r;)L++,C=e[2*(D+=l)],M=e[2*D+1];var z=.5,T=0,E=0,R=void 0,G=void 0;if(L>=r||P(C,M))S=I,x=k;else{T=C-m,E=M-f;var V=I-m,F=C-I,B=k-f,H=M-k,Y=void 0,X=void 0;if("x"===h){var J=T>0?1:-1;S=I-J*(Y=Math.abs(V))*c,x=k,R=I+J*(X=Math.abs(F))*c,G=k}else if("y"===h){var U=E>0?1:-1;S=I,x=k-U*(Y=Math.abs(B))*c,R=I,G=k+U*(X=Math.abs(H))*c}else Y=Math.sqrt(V*V+B*B),S=I-T*c*(1-(z=(X=Math.sqrt(F*F+H*H))/(X+Y))),x=k-E*c*(1-z),G=k+E*c*z,R=j(R=I+T*c*z,N(C,I)),G=j(G,N(M,k)),R=N(R,j(C,I)),x=k-(E=(G=N(G,j(M,k)))-k)*Y/X,S=j(S=I-(T=R-I)*Y/X,N(m,I)),x=j(x,N(f,k)),R=I+(T=I-(S=N(S,j(m,I))))*X/Y,G=k+(E=k-(x=N(x,j(f,k))))*X/Y}t.bezierCurveTo(v,y,S,x,I,k),v=R,y=G}else t.lineTo(I,k)}m=I,f=k,_+=l}return O}var z=function(){this.smooth=0,this.smoothConstraint=!0},T=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polyline",n}return Object(r.a)(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new z},e.prototype.buildPath=function(t,e){var n=e.points,i=0,r=n.length/2;if(e.connectNulls){for(;r>0&&P(n[2*r-2],n[2*r-1]);r--);for(;i<r&&P(n[2*i],n[2*i+1]);i++);}for(;i<r;)i+=L(t,n,i,r,r,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,r,data=this.path.data,o=C.a.CMD,l="x"===e,c=[],i=0;i<data.length;){var h=void 0,d=void 0,m=void 0,f=void 0,v=void 0,y=void 0,S=void 0;switch(data[i++]){case o.M:n=data[i++],r=data[i++];break;case o.L:if(h=data[i++],d=data[i++],(S=l?(t-n)/(h-n):(t-r)/(d-r))<=1&&S>=0){var x=l?(d-r)*S+r:(h-n)*S+n;return l?[t,x]:[x,t]}n=h,r=d;break;case o.C:h=data[i++],d=data[i++],m=data[i++],f=data[i++],v=data[i++],y=data[i++];var _=l?Object(M.f)(n,h,m,v,t,c):Object(M.f)(r,d,f,y,t,c);if(_>0)for(var O=0;O<_;O++){var I=c[O];if(I<=1&&I>=0){x=l?Object(M.a)(r,d,f,y,I):Object(M.a)(n,h,m,v,I);return l?[t,x]:[x,t]}}n=v,r=y}}},e}(D.b),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.a)(e,t),e}(z),R=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polygon",n}return Object(r.a)(e,t),e.prototype.getDefaultShape=function(){return new E},e.prototype.buildPath=function(t,e){var n=e.points,r=e.stackedOnPoints,i=0,o=n.length/2,l=e.smoothMonotone;if(e.connectNulls){for(;o>0&&P(n[2*o-2],n[2*o-1]);o--);for(;i<o&&P(n[2*i],n[2*i+1]);i++);}for(;i<o;){var c=L(t,n,i,o,o,1,e.smooth,l,e.connectNulls);L(t,r,i+c-1,c,o,-1,e.stackedOnSmooth,l,e.connectNulls),i+=c+1,t.closePath()}},e}(D.b),G=n(458),V=n(647),F=n(843),B=n(427);function H(t,e,n,r,o){var rect=t.getArea(),l=rect.x,c=rect.y,h=rect.width,d=rect.height,m=n.get(["lineStyle","width"])||0;l-=m/2,c-=m/2,h+=m,d+=m,h=Math.ceil(h),l!==Math.floor(l)&&(l=Math.floor(l),h++);var v=new V.a({shape:{x:l,y:c,width:h,height:d}});if(e){var y=t.getBaseAxis(),S=y.isHorizontal(),x=y.inverse;S?(x&&(v.shape.x+=h),v.shape.width=0):(x||(v.shape.y+=d),v.shape.height=0);var _=Object(f.w)(o)?function(t){o(t,v)}:null;k.b(v,{shape:{width:h,height:d,x:l,y:c}},n,null,r,_)}return v}function Y(t,e,n){var r=t.getArea(),o=Object(B.s)(r.r0,1),l=Object(B.s)(r.r,1),c=new F.a({shape:{cx:Object(B.s)(t.cx,1),cy:Object(B.s)(t.cy,1),r0:o,r:l,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});e&&("angle"===t.getBaseAxis().dim?c.shape.endAngle=r.startAngle:c.shape.r=o,k.b(c,{shape:{endAngle:r.endAngle,r:l}},n));return c}var X=n(467),J=n(430),U=n(428),W=n(452),Z=n(432),K=n(463),$=n(450);function Q(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return;return!0}}function tt(t){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,i=0;i<t.length;){var l=t[i++],c=t[i++];isNaN(l)||(e=Math.min(l,e),r=Math.max(l,r)),isNaN(c)||(n=Math.min(c,n),o=Math.max(c,o))}return[[e,n],[r,o]]}function et(t,e){var n=tt(t),r=n[0],o=n[1],l=tt(e),c=l[0],h=l[1];return Math.max(Math.abs(r[0]-c[0]),Math.abs(r[1]-c[1]),Math.abs(o[0]-h[0]),Math.abs(o[1]-h[1]))}function nt(t){return f.z(t)?t:t?.5:0}function at(t,e,n,r,o){var l=n.getBaseAxis(),c="x"===l.dim||"radius"===l.dim?0:1,h=[],i=0,d=[],m=[],f=[],v=[];if(o){for(i=0;i<t.length;i+=2){var y=e||t;isNaN(y[i])||isNaN(y[i+1])||v.push(t[i],t[i+1])}t=v}for(i=0;i<t.length-2;i+=2)switch(f[0]=t[i+2],f[1]=t[i+3],m[0]=t[i],m[1]=t[i+1],h.push(m[0],m[1]),r){case"end":d[c]=f[c],d[1-c]=m[1-c],h.push(d[0],d[1]);break;case"middle":var S=(m[c]+f[c])/2,x=[];d[c]=x[c]=S,d[1-c]=m[1-c],x[1-c]=f[1-c],h.push(d[0],d[1]),h.push(x[0],x[1]);break;default:d[c]=m[c],d[1-c]=f[1-c],h.push(d[0],d[1])}return h.push(t[i++],t[i++]),h}function it(data,t,e){var n=data.getVisual("visualMeta");if(n&&n.length&&data.count()&&"cartesian2d"===t.type){for(var r,o,i=n.length-1;i>=0;i--){var l=data.getDimensionInfo(n[i].dimension);if("x"===(r=l&&l.coordDim)||"y"===r){o=n[i];break}}if(o){var c=t.getAxis(r),h=f.H(o.stops,function(t){return{coord:c.toGlobalCoord(c.dataToCoord(t.value)),color:t.color}}),d=h.length,m=o.outerColors.slice();d&&h[0].coord>h[d-1].coord&&(h.reverse(),m.reverse());var v=function(t,e){var n,r,o=[],l=t.length;function c(t,e,n){var r=t.coord,p=(n-r)/(e.coord-r);return{coord:n,color:Object($.b)(p,[t.color,e.color])}}for(var i=0;i<l;i++){var h=t[i],d=h.coord;if(d<0)n=h;else{if(d>e){r?o.push(c(r,h,e)):n&&o.push(c(n,h,0),c(n,h,e));break}n&&(o.push(c(n,h,0)),n=null),o.push(h),r=h}}return o}(h,"x"===r?e.getWidth():e.getHeight()),y=v.length;if(!y&&d)return h[0].coord<0?m[1]?m[1]:h[d-1].color:m[0]?m[0]:h[0].color;var S=v[0].coord-10,x=v[y-1].coord+10,_=x-S;if(_<.001)return"transparent";f.k(v,function(t){t.offset=(t.coord-S)/_}),v.push({offset:y?v[y-1].offset:.5,color:m[1]||"transparent"}),v.unshift({offset:y?v[0].offset:.5,color:m[0]||"transparent"});var O=new I.a(0,0,0,0,v,!0);return O[r]=S,O[r+"2"]=x,O}}}function ot(t,data,e){var n=t.get("showAllSymbol"),r="auto"===n;if(!n||r){var o=e.getAxesByScale("ordinal")[0];if(o&&(!r||!function(t,data){var e=t.getExtent(),n=Math.abs(e[1]-e[0])/t.scale.count();isNaN(n)&&(n=0);for(var r=data.count(),o=Math.max(1,Math.round(r/5)),l=0;l<r;l+=o)if(1.5*y.a.getSymbolSize(data,l)[t.isHorizontal()?1:0]>n)return!1;return!0}(o,data))){var l=data.mapDimension(o.dim),c={};return f.k(o.getViewLabels(),function(t){var e=o.scale.getRawOrdinalNumber(t.tickValue);c[e]=1}),function(t){return!c.hasOwnProperty(data.get(l,t))}}}}function st(t,e){return isNaN(t)||isNaN(e)}function lt(t,e){return[t[2*e],t[2*e+1]]}function ct(t){if(t.get(["endLabel","show"]))return!0;for(var i=0;i<J.g.length;i++)if(t.get([J.g[i],"endLabel","show"]))return!0;return!1}function ut(t,e,n,r){if(Object(X.a)(e,"cartesian2d")){var o=r.getModel("endLabel"),l=o.get("valueAnimation"),c=r.getData(),h={lastFrameIndex:0},d=ct(r)?function(n,r){t._endLabelOnDuring(n,r,c,h,l,o,e)}:null,m=e.getBaseAxis().isHorizontal(),f=H(e,n,r,function(){var e=t._endLabel;e&&n&&null!=h.originalX&&e.attr({x:h.originalX,y:h.originalY})},d);if(!r.get("clip",!0)){var v=f.shape,y=Math.max(v.width,v.height);m?(v.y-=y,v.height+=2*y):(v.x-=y,v.width+=2*y)}return d&&d(1,f),f}return Y(e,n,r)}var ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.a)(e,t),e.prototype.init=function(){var t=new h.a,e=new v.a;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t,this._changePolyState=f.c(this._changePolyState,this)},e.prototype.render=function(t,e,n){var r=t.coordinateSystem,o=this.group,data=t.getData(),l=t.getModel("lineStyle"),c=t.getModel("areaStyle"),h=data.getLayout("points")||[],d="polar"===r.type,m=this._coordSys,v=this._symbolDraw,polyline=this._polyline,polygon=this._polygon,y=this._lineGroup,S=!e.ssr&&t.get("animation"),I=!c.isEmpty(),A=c.get("origin"),w=x(r,data,A),D=I&&function(t,data,e){if(!e.valueDim)return[];for(var n=data.count(),r=Object(O.a)(2*n),o=0;o<n;o++){var l=_(e,t,data,o);r[2*o]=l[0],r[2*o+1]=l[1]}return r}(r,data,w),C=t.get("showSymbol"),M=t.get("connectNulls"),j=C&&!d&&ot(t,data,r),N=this._data;N&&N.eachItemGraphicEl(function(t,e){t.__temp&&(o.remove(t),N.setItemGraphicEl(e,null))}),C||v.remove(),o.add(y);var P,L=!d&&t.get("step");r&&r.getArea&&t.get("clip",!0)&&(null!=(P=r.getArea()).width?(P.x-=.1,P.y-=.1,P.width+=.2,P.height+=.2):P.r0&&(P.r0-=.5,P.r+=.5)),this._clipShapeForSymbol=P;var z=it(data,r,n)||data.getVisual("style")[data.getVisual("drawType")];if(polyline&&m.type===r.type&&L===this._step){I&&!polygon?polygon=this._newPolygon(h,D):polygon&&!I&&(y.remove(polygon),polygon=this._polygon=null),d||this._initOrUpdateEndLabel(t,r,Object(K.b)(z));var T=y.getClipPath();if(T){var E=ut(this,r,!1,t);k.b(T,{shape:E.shape},t)}else y.setClipPath(ut(this,r,!0,t));C&&v.updateData(data,{isIgnore:j,clipShape:P,disableAnimation:!0,getSymbolPoint:function(t){return[h[2*t],h[2*t+1]]}}),Q(this._stackedOnPoints,D)&&Q(this._points,h)||(S?this._doUpdateAnimation(data,D,r,n,L,A,M):(L&&(D&&(D=at(D,h,r,L,M)),h=at(h,null,r,L,M)),polyline.setShape({points:h}),polygon&&polygon.setShape({points:h,stackedOnPoints:D})))}else C&&v.updateData(data,{isIgnore:j,clipShape:P,disableAnimation:!0,getSymbolPoint:function(t){return[h[2*t],h[2*t+1]]}}),S&&this._initSymbolLabelAnimation(data,r,P),L&&(D&&(D=at(D,h,r,L,M)),h=at(h,null,r,L,M)),polyline=this._newPolyline(h),I?polygon=this._newPolygon(h,D):polygon&&(y.remove(polygon),polygon=this._polygon=null),d||this._initOrUpdateEndLabel(t,r,Object(K.b)(z)),y.setClipPath(ut(this,r,!0,t));var R=t.getModel("emphasis"),G=R.get("focus"),V=R.get("blurScope"),F=R.get("disabled");(polyline.useStyle(f.i(l.getLineStyle(),{fill:"none",stroke:z,lineJoin:"bevel"})),Object(J.I)(polyline,t,"lineStyle"),polyline.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"]))&&(polyline.getState("emphasis").style.lineWidth=+polyline.style.lineWidth+1);Object(Z.a)(polyline).seriesIndex=t.seriesIndex,Object(J.J)(polyline,G,V,F);var B=nt(t.get("smooth")),H=t.get("smoothMonotone");if(polyline.setShape({smooth:B,smoothMonotone:H,connectNulls:M}),polygon){var Y=data.getCalculationInfo("stackedOnSeries"),X=0;polygon.useStyle(f.i(c.getAreaStyle(),{fill:z,opacity:.7,lineJoin:"bevel",decal:data.getVisual("style").decal})),Y&&(X=nt(Y.get("smooth"))),polygon.setShape({smooth:B,stackedOnSmooth:X,smoothMonotone:H,connectNulls:M}),Object(J.I)(polygon,t,"areaStyle"),Object(Z.a)(polygon).seriesIndex=t.seriesIndex,Object(J.J)(polygon,G,V,F)}var U=this._changePolyState;data.eachItemGraphicEl(function(t){t&&(t.onHoverStateChange=U)}),this._polyline.onHoverStateChange=U,this._data=data,this._coordSys=r,this._stackedOnPoints=D,this._points=h,this._step=L,this._valueOrigin=A,t.get("triggerLineEvent")&&(this.packEventData(t,polyline),polygon&&this.packEventData(t,polygon))},e.prototype.packEventData=function(t,e){Object(Z.a)(e).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,e,n,r){var data=t.getData(),o=w.t(data,r);if(this._changePolyState("emphasis"),!(o instanceof Array)&&null!=o&&o>=0){var l=data.getLayout("points"),symbol=data.getItemGraphicEl(o);if(!symbol){var c=l[2*o],h=l[2*o+1];if(isNaN(c)||isNaN(h))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,h))return;var d=t.get("zlevel")||0,m=t.get("z")||0;(symbol=new y.a(data,o)).x=c,symbol.y=h,symbol.setZ(d,m);var f=symbol.getSymbolPath().getTextContent();f&&(f.zlevel=d,f.z=m,f.z2=this._polyline.z2+1),symbol.__temp=!0,data.setItemGraphicEl(o,symbol),symbol.stopSymbolAnimation(!0),this.group.add(symbol)}symbol.highlight()}else G.a.prototype.highlight.call(this,t,e,n,r)},e.prototype.downplay=function(t,e,n,r){var data=t.getData(),o=w.t(data,r);if(this._changePolyState("normal"),null!=o&&o>=0){var symbol=data.getItemGraphicEl(o);symbol&&(symbol.__temp?(data.setItemGraphicEl(o,null),this.group.remove(symbol)):symbol.downplay())}else G.a.prototype.downplay.call(this,t,e,n,r)},e.prototype._changePolyState=function(t){var polygon=this._polygon;Object(J.H)(this._polyline,t),polygon&&Object(J.H)(polygon,t)},e.prototype._newPolyline=function(t){var polyline=this._polyline;return polyline&&this._lineGroup.remove(polyline),polyline=new T({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(polyline),this._polyline=polyline,polyline},e.prototype._newPolygon=function(t,e){var polygon=this._polygon;return polygon&&this._lineGroup.remove(polygon),polygon=new R({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(polygon),this._polygon=polygon,polygon},e.prototype._initSymbolLabelAnimation=function(data,t,e){var n,r,o=t.getBaseAxis(),l=o.inverse;"cartesian2d"===t.type?(n=o.isHorizontal(),r=!1):"polar"===t.type&&(n="angle"===o.dim,r=!0);var c=data.hostModel,h=c.get("animationDuration");f.w(h)&&(h=h(null));var d=c.get("animationDelay")||0,m=f.w(d)?d(null):d;data.eachItemGraphicEl(function(symbol,o){var c=symbol;if(c){var v=[symbol.x,symbol.y],y=void 0,S=void 0,x=void 0;if(e)if(r){var _=e,O=t.pointToCoord(v);n?(y=_.startAngle,S=_.endAngle,x=-O[1]/180*Math.PI):(y=_.r0,S=_.r,x=O[0])}else{var I=e;n?(y=I.x,S=I.x+I.width,x=symbol.x):(y=I.y+I.height,S=I.y,x=symbol.y)}var k=S===y?0:(x-y)/(S-y);l&&(k=1-k);var A=f.w(d)?d(o):h*k+m,w=c.getSymbolPath(),text=w.getTextContent();c.attr({scaleX:0,scaleY:0}),c.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:A}),text&&text.animateFrom({style:{opacity:0}},{duration:300,delay:A}),w.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,e,n){var r=t.getModel("endLabel");if(ct(t)){var o=t.getData(),polyline=this._polyline,l=o.getLayout("points");if(!l)return polyline.removeTextContent(),void(this._endLabel=null);var c=this._endLabel;c||((c=this._endLabel=new A.a({z2:200})).ignoreClip=!0,polyline.setTextContent(this._endLabel),polyline.disableLabelAnimation=!0);var h=function(t){for(var e=t.length/2;e>0&&st(t[2*e-2],t[2*e-1]);e--);return e-1}(l);h>=0&&(Object(U.f)(polyline,Object(U.d)(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:h,defaultText:function(t,e,n){return null!=n?Object(W.a)(o,n):Object(W.b)(o,t)},enableTextSetter:!0},function(t,e){var n=e.getBaseAxis(),r=n.isHorizontal(),o=n.inverse,l=r?o?"right":"left":"center",c=r?"middle":o?"top":"bottom";return{normal:{align:t.get("align")||l,verticalAlign:t.get("verticalAlign")||c}}}(r,e)),polyline.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,data,n,r,o,l){var c=this._endLabel,polyline=this._polyline;if(c){t<1&&null==n.originalX&&(n.originalX=c.x,n.originalY=c.y);var h=data.getLayout("points"),d=data.hostModel,m=d.get("connectNulls"),f=o.get("precision"),v=o.get("distance")||0,y=l.getBaseAxis(),S=y.isHorizontal(),x=y.inverse,_=e.shape,O=x?S?_.x:_.y+_.height:S?_.x+_.width:_.y,I=(S?v:0)*(x?-1:1),k=(S?0:-v)*(x?-1:1),A=S?"x":"y",D=function(t,e,n){for(var a,b,r=t.length/2,o="x"===n?0:1,l=0,c=-1,i=0;i<r;i++)if(b=t[2*i+o],!isNaN(b)&&!isNaN(t[2*i+1-o]))if(0!==i){if(a<=e&&b>=e||a>=e&&b<=e){c=i;break}l=i,a=b}else a=b;return{range:[l,c],t:(e-a)/(b-a)}}(h,O,A),C=D.range,M=C[1]-C[0],j=void 0;if(M>=1){if(M>1&&!m){var N=lt(h,C[0]);c.attr({x:N[0]+I,y:N[1]+k}),r&&(j=d.getRawValue(C[0]))}else{(N=polyline.getPointOn(O,A))&&c.attr({x:N[0]+I,y:N[1]+k});var P=d.getRawValue(C[0]),L=d.getRawValue(C[1]);r&&(j=w.j(data,f,P,L,D.t))}n.lastFrameIndex=C[0]}else{var z=1===t||n.lastFrameIndex>0?C[0]:0;N=lt(h,z);r&&(j=d.getRawValue(z)),c.attr({x:N[0]+I,y:N[1]+k})}if(r){var T=Object(U.e)(c);"function"==typeof T.setLabelText&&T.setLabelText(j)}}},e.prototype._doUpdateAnimation=function(data,t,e,n,r,o,l){var polyline=this._polyline,polygon=this._polygon,c=data.hostModel,h=function(t,e,n,r,o,l,c){for(var h=function(t,e){var n=[];return e.diff(t).add(function(t){n.push({cmd:"+",idx:t})}).update(function(t,e){n.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){n.push({cmd:"-",idx:t})}).execute(),n}(t,e),d=[],m=[],f=[],v=[],y=[],S=[],I=[],k=x(o,e,c),A=t.getLayout("points")||[],w=e.getLayout("points")||[],i=0;i<h.length;i++){var D=h[i],C=!0,M=void 0,j=void 0;switch(D.cmd){case"=":M=2*D.idx,j=2*D.idx1;var N=A[M],P=A[M+1],L=w[j],z=w[j+1];(isNaN(N)||isNaN(P))&&(N=L,P=z),d.push(N,P),m.push(L,z),f.push(n[M],n[M+1]),v.push(r[j],r[j+1]),I.push(e.getRawIndex(D.idx1));break;case"+":var T=D.idx,E=k.dataDimsForPoint,R=o.dataToPoint([e.get(E[0],T),e.get(E[1],T)]);j=2*T,d.push(R[0],R[1]),m.push(w[j],w[j+1]);var G=_(k,o,e,T);f.push(G[0],G[1]),v.push(r[j],r[j+1]),I.push(e.getRawIndex(T));break;case"-":C=!1}C&&(y.push(D),S.push(S.length))}S.sort(function(a,b){return I[a]-I[b]});var V=d.length,F=Object(O.a)(V),B=Object(O.a)(V),H=Object(O.a)(V),Y=Object(O.a)(V),X=[];for(i=0;i<S.length;i++){var J=S[i],U=2*i,W=2*J;F[U]=d[W],F[U+1]=d[W+1],B[U]=m[W],B[U+1]=m[W+1],H[U]=f[W],H[U+1]=f[W+1],Y[U]=v[W],Y[U+1]=v[W+1],X[i]=y[J]}return{current:F,next:B,stackedOnCurrent:H,stackedOnNext:Y,status:X}}(this._data,data,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),d=h.current,m=h.stackedOnCurrent,f=h.next,v=h.stackedOnNext;if(r&&(m=at(h.stackedOnCurrent,h.current,e,r,l),d=at(h.current,null,e,r,l),v=at(h.stackedOnNext,h.next,e,r,l),f=at(h.next,null,e,r,l)),et(d,f)>3e3||polygon&&et(m,v)>3e3)return polyline.stopAnimation(),polyline.setShape({points:f}),void(polygon&&(polygon.stopAnimation(),polygon.setShape({points:f,stackedOnPoints:v})));polyline.shape.__points=h.current,polyline.shape.points=d;var y={shape:{points:f}};h.current!==d&&(y.shape.__points=h.next),polyline.stopAnimation(),k.g(polyline,y,c),polygon&&(polygon.setShape({points:d,stackedOnPoints:m}),polygon.stopAnimation(),k.g(polygon,{shape:{stackedOnPoints:v}},c),polyline.shape.points!==polygon.shape.points&&(polygon.shape.points=polyline.shape.points));for(var S=[],I=h.status,i=0;i<I.length;i++){if("="===I[i].cmd){var A=data.getItemGraphicEl(I[i].idx1);A&&S.push({el:A,ptIdx:i})}}polyline.animators&&polyline.animators.length&&polyline.animators[0].during(function(){polygon&&polygon.dirtyShape();for(var t=polyline.shape.__points,i=0;i<S.length;i++){var e=S[i].el,n=2*S[i].ptIdx;e.x=t[n],e.y=t[n+1],e.markRedraw()}})},e.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(t,r){t.__temp&&(e.remove(t),n.setItemGraphicEl(r,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(G.a),pt=ht,mt=n(527);var ft={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]||0;return e},max:function(t){for(var e=-1/0,i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,i=0;i<t.length;i++)t[i]<e&&(e=t[i]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},gt=function(t){return Math.round(t.length/2)};function vt(t){var e;t.registerChartView(pt),t.registerSeriesModel(m),t.registerLayout((e=!0,{seriesType:"line",plan:Object(mt.a)(),reset:function(t){var data=t.getData(),n=t.coordinateSystem,r=t.pipelineContext,o=e||r.large;if(n){var l=Object(f.H)(n.dimensions,function(t){return data.mapDimension(t)}).slice(0,2),c=l.length,h=data.getCalculationInfo("stackResultDimension");Object(S.c)(data,l[0])&&(l[0]=h),Object(S.c)(data,l[1])&&(l[1]=h);var d=data.getStore(),m=data.getDimensionIndex(l[0]),v=data.getDimensionIndex(l[1]);return c&&{progress:function(t,data){for(var e=t.end-t.start,r=o&&Object(O.a)(e*c),l=[],h=[],i=t.start,f=0;i<t.end;i++){var y=void 0;if(1===c){var S=d.get(m,i);y=n.dataToPoint(S,null,h)}else l[0]=d.get(m,i),l[1]=d.get(v,i),y=n.dataToPoint(l,null,h);o?(r[f++]=y[0],r[f++]=y[1]):data.setItemLayout(i,y.slice())}o&&data.setLayout("points",r)}}}}})),t.registerVisual({seriesType:"line",reset:function(t){var data=t.getData(),e=t.getModel("lineStyle").getLineStyle();e&&!e.stroke&&(e.stroke=data.getVisual("style").fill),data.setVisual("legendLineStyle",e)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(t){return{seriesType:t,reset:function(t,e,n){var data=t.getData(),r=t.get("sampling"),o=t.coordinateSystem,l=data.count();if(l>10&&"cartesian2d"===o.type&&r){var c=o.getBaseAxis(),h=o.getOtherAxis(c),d=c.getExtent(),m=n.getDevicePixelRatio(),v=Math.abs(d[1]-d[0])*(m||1),y=Math.round(l/v);if(isFinite(y)&&y>1){"lttb"===r?t.setData(data.lttbDownSample(data.mapDimension(h.dim),1/y)):"minmax"===r&&t.setData(data.minmaxDownSample(data.mapDimension(h.dim),1/y));var S=void 0;Object(f.C)(r)?S=ft[r]:Object(f.w)(r)&&(S=r),S&&t.setData(data.downSample(data.mapDimension(h.dim),1/y,S,gt))}}}}}("line"))}},741:function(t,e,n){"use strict";n.r(e);n(443),n(75),n(429),n(192),n(53),n(23);var r=n(6),o=n(512),l=n(26),c=Object(r.b)({components:{cumulativeReturnChart:o.default},mounted:function(){var t=l.c.collection("twStock").doc("global"),e=this;t.get().then(function(t){if(t.exists){var data=t.data();for(var n in data)data[n]=JSON.parse(data[n]);console.log(data),e.ml=data}else console.log("cannot find")})},data:function(){return{ml:null}},methods:{rebase:function(t){var e=t[0];return t.map(function(t){return t/e*100})},calculatePerformance:function(){return[this.rebase(this.ml.fundamentalMLPerformance.best_group),this.rebase(this.ml.fundamentalMLPerformance.worse_group)]},calculateName:function(){return["最佳 10% 股票","最差 10% 股票"]},calculateYOR:function(){if(!this.ml)return 0;var t=this.rebase(this.ml.fundamentalMLPerformance.best_group),e=this.rebase(this.ml.fundamentalMLPerformance.worse_group);return t=t[t.length-1],e=e[e.length-1],Math.round(1e4*(Math.pow(t/e,52/this.ml.fundamentalMLPerformance.best_group.length)-1))/100},percentFormat:function(t){var e=Math.round(100*t)/100+"％";return t>0?"+"+e:e},percentageColor:function(t){return t>0?"rgba(255, 133, 182, ".concat(1,")"):"rgba(154, 145, 255, ".concat(1,")")}},computed:{top100Ids:function(){if(!this.ml)return[];var t=this.ml.fundamentalSummary.綜合評分.length,e=this.ml.fundamentalSummary.綜合評分;return Array(t).fill().map(function(element,t){return t}).sort(function(t,n){return e[t]-e[n]}).splice(-100).reverse()}}}),h=n(52),component=Object(h.a)(c,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"uk-background-muted"},[t.ml?e("div",{staticClass:"uk-section dark-muted"},[e("div",{staticClass:"uk-container uk-container-xsmall"},[e("h1",{staticClass:"uk-text-primary",staticStyle:{"font-size":"2rem"}},[t._v("\n        基本面 AI 財報診斷\n      ")]),t._v(" "),e("div",{staticClass:"uk-margin-large-top uk-card uk-card-default uk-card-body round-border"},[t._m(0),t._v(" "),e("p",[t._v("\n          將所有上市櫃股票進行排名， 以下是排名前 10% 與後 10%\n          的股票群，在每一季截止後持有，所獲得的報酬率。 累計年化報酬，差距為\n          "+t._s(t.calculateYOR())+" %\n        ")])])])]):t._e(),t._v(" "),t.ml?e("div",{staticClass:"dark-muted"},[e("cumulativeReturnChart",{attrs:{index:t.ml.fundamentalMLPerformance.date,values:t.calculatePerformance(),valueName:t.calculateName(),fill:!1}})],1):t._e(),t._v(" "),t.ml?e("div",{staticClass:"uk-section"},[e("div",{staticClass:"uk-container uk-container-xsmall"},[e("div",{staticClass:"uk-card uk-card-default uk-card-body round-border"},[e("h3",{staticClass:"uk-card-title"},[t._v("AI 判讀前 100 名財報")]),t._v(" "),e("table",{staticClass:"uk-table"},[t._m(1),t._v(" "),e("tbody",t._l(t.top100Ids,function(i){return e("tr",{key:"table-".concat(i)},[e("td",[e("nuxt-link",{attrs:{to:"/stock/?stock_id=".concat(t.ml.fundamentalSummary.stock_id[i])}},[t._v(t._s(t.ml.fundamentalSummary.stock_id[i]))])],1),t._v(" "),e("td",{style:"color:"+t.percentageColor(t.ml.fundamentalSummary.綜合評分[i])},[t._v("\n                "+t._s(t.percentFormat(t.ml.fundamentalSummary.綜合評分[i]))+"\n              ")]),t._v(" "),e("td",{style:"color:"+t.percentageColor(t.ml.fundamentalSummary.獲利能力[i])},[t._v("\n                "+t._s(t.percentFormat(t.ml.fundamentalSummary.獲利能力[i]))+"\n              ")]),t._v(" "),e("td",{style:"color:"+t.percentageColor(t.ml.fundamentalSummary.成長率[i])},[t._v("\n                "+t._s(t.percentFormat(t.ml.fundamentalSummary.成長率[i]))+"\n              ")]),t._v(" "),e("td",{style:"color:"+t.percentageColor(t.ml.fundamentalSummary.單位基本面[i])},[t._v("\n                "+t._s(t.percentFormat(t.ml.fundamentalSummary.單位基本面[i]))+"\n              ")]),t._v(" "),e("td",{style:"color:"+t.percentageColor(t.ml.fundamentalSummary.安全性[i])},[t._v("\n                "+t._s(t.percentFormat(t.ml.fundamentalSummary.安全性[i]))+"\n              ")])])}),0)])])])]):t._e()])},[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("p",[e("b",[t._v("財報股價影響力")]),t._v("，是利用機器學習 xgboost\n          訓練財報模型，預測該財報對於股價的年化影響程度，因為每一季財報揭露時間間隔不固定，\n          所以在此使用「年化」影響，也就是「一年交易日數量/(下季 -\n          當季財報日期)」，另外要注意的是，此報酬率並非真正的年化報酬，\n          而是相對於大盤的報酬率。\n        ")])},function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("th",[t._v("股票代號")]),t._v(" "),e("th",[t._v("財報股價影響力(年)")]),t._v(" "),e("th",[t._v("獲利能力")]),t._v(" "),e("th",[t._v("成長率")]),t._v(" "),e("th",[t._v("單位基本面")]),t._v(" "),e("th",[t._v("安全性")])])}],!1,null,null,null);e.default=component.exports}}]);