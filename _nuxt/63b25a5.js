(window.webpackJsonp=window.webpackJsonp||[]).push([[63,15,17,59,62,68],{429:function(t,e,n){"use strict";var r=n(4),o=n(8),c=n(55),l=n(50),d=n(76),h=n(274),f=n(24),m=n(9),v=n(275),y=n(191),_=n(434),k=n(435),x=n(121),S=n(436),C=[],w=o(C.sort),I=o(C.push),O=m(function(){C.sort(void 0)}),A=m(function(){C.sort(null)}),T=y("sort"),M=!m(function(){if(x)return x<70;if(!(_&&_>3)){if(k)return!0;if(S)return S<603;var code,t,e,n,r="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(n=0;n<47;n++)C.push({k:t+n,v:e})}for(C.sort(function(a,b){return b.v-a.v}),n=0;n<C.length;n++)t=C[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}});r({target:"Array",proto:!0,forced:O||!A||!T||!M},{sort:function(t){void 0!==t&&c(t);var e=l(this);if(M)return void 0===t?w(e):w(e,t);var n,r,o=[],m=d(e);for(r=0;r<m;r++)r in e&&I(o,e[r]);for(v(o,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:f(e)>f(n)?1:-1}}(t)),n=d(o),r=0;r<n;)e[r]=o[r++];for(;r<m;)h(e,r++);return e}})},434:function(t,e,n){"use strict";var r=n(85).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},435:function(t,e,n){"use strict";var r=n(85);t.exports=/MSIE|Trident/.test(r)},436:function(t,e,n){"use strict";var r=n(85).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},453:function(t,e,n){t.exports={}},454:function(t,e,n){t.exports={}},456:function(t,e,n){"use strict";n.r(e);n(75),n(23),n(38);var r=n(6),o=n(462),c=n(595),l=n(1040),d=n(546),h=n(827),f=n(656),m=n(658);Object(o.a)([l.a,h.a,f.a,d.a,m.a]);var v=Object(r.b)({name:"RadarChart",props:{height:{type:String,default:"300px"},names:{default:function(){return null}},indicators:{default:function(){return["a","b","c"]}},values:{default:function(){return{values:{a:.5,b:.8,c:.3}}}}},data:function(){return{chartInstance:null,resizeObserver:null}},mounted:function(){var t=this;this.initChart(),this.updateChart(),window.addEventListener("resize",this.resizeChart),"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(function(){t.resizeChart()}),this.$refs.chart&&this.resizeObserver.observe(this.$refs.chart))},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChart),this.resizeObserver&&this.resizeObserver.disconnect(),this.chartInstance&&this.chartInstance.dispose()},watch:{values:{handler:"updateChart",deep:!0},indicators:{handler:"updateChart",deep:!0},names:{handler:"updateChart",deep:!0}},computed:{option:function(){return{scale:{pointLabels:{fontSize:20}},color:["rgba(255, 133, 182, 0.5)","#FFE43488","#56A3F188","#FF917C88"],legend:{data:this.seriesNames,bottom:0,right:0,textStyle:{fontSize:18}},radar:{indicator:this.indicators_,shape:"circle",startAngle:135,axisName:{fontSize:18}},series:[{type:"radar",data:this.valueData}]}},indicators_:function(){return this.indicators.map(function(t){return{name:t,max:1}})},seriesNames:function(){if(this.names)return this.names;var t=[];for(var e in this.values)t.push(e);return t},valueData:function(){var label={show:1==this.seriesNames.length,formatter:function(t){return Math.round(1e3*t.value)/10+"%"}},t={},e=[];for(var n in this.values){var r=this.values[n],o=[];for(var i in this.indicators)o.push(r[this.indicators[i]]);e.push({value:o,name:this.seriesNames[n],label:label,areaStyle:t,textStyle:{color:"black",fontSize:20}})}return e}},methods:{initChart:function(){this.$refs.chart&&(this.chartInstance=Object(c.b)(this.$refs.chart,"light"))},resizeChart:function(){this.chartInstance&&this.chartInstance.resize()},updateChart:function(){this.chartInstance&&this.chartInstance.setOption(this.option,!0)}}}),y=(n(488),n(52)),component=Object(y.a)(v,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{ref:"chart",staticClass:"chart",style:{height:t.height,zIndex:0}})},[],!1,null,"38f8178d",null);e.default=component.exports},464:function(t,e,n){"use strict";n.r(e);n(54),n(23),n(30),n(64);var r=n(26),o={props:{value:{type:String},autocomplete:{type:String,default:"true"}},data:function(){return{sid:[],sdict:{},candidates:[],currentStock:"",text:"",target:0,composing:!1,history:[]}},created:function(){this.text=this.value;var t=this;r.c.collection("twStock").doc("searchTree").get().then(function(e){if(e.exists){var data=e.data();t.sdict=data.searchTree.sdict,t.slist=data.searchTree.slist}else console.log("cannot find strategy menu")})},methods:{moveCursor:function(t){0!=this.candidates.length?this.target+=t:this.target=-1},selectStock:function(t){t.preventDefault(),-1!=this.target&&this.chooseStock(this.candidates[this.target])},chooseStock:function(s){if(!this.composing){var t=this;console.log("emit",s),this.$emit("input",s),this.history.unshift(s),this.history=this.history.filter(function(e,n){return t.history.indexOf(e)==n}),this.history.length>3&&(this.history=[this.history[0],this.history[1],this.history[2]]),this.currentStock=s,this.candidates=[],this.text=s,this.target=-1,document.getElementById("search-box").blur()}},clearStock:function(t){this.text="",this.candidates=[],this.target=-1,this.$emit("update","")},digitupdate:function(t){var s,e=t.target.value;this.$emit("update",e),(s=e).replace(/[^\x00-\xff]/g,"rr").length==s.length&&this.update(t)},update:function(t){var e=event.target.value;if(this.text=e,""!=e){var n=this.sdict;for(var i in e){var r=e[i];if(!(r in n))return void(this.candidates=["找不到此股票代號"]);n=n[r]}for(var o=[],c=[n];c&&0!=c.length&&!((n=c.pop())===parseInt(n,10)&&(o.push(this.slist[n]),o.length>20));)for(var l in n)c.unshift(n[l]);this.candidates=o,1==this.candidates.length&&this.chooseStock(this.candidates[0])}else this.candidates=[]}}},c=(n(489),n(52)),component=Object(c.a)(o,function(){var t=this,e=t._self._c;return e("div",[e("form",{staticClass:"uk-search uk-search-navbar uk-card uk-flex",staticStyle:{width:"100%",border:"1px solid #ddd",background:"rgba(255, 255, 255, 0.2)"}},[e("span",{staticStyle:{"padding-left":"10px"},attrs:{"uk-search-icon":""}}),t._v(" "),e("input",{staticClass:"uk-search-input uk-text-primary uk-text-light",staticStyle:{"padding-left":"60px"},attrs:{id:"search-box",name:"Search",type:"search",placeholder:"股票代號",autocomplete:"off"},domProps:{value:t.text},on:{change:t.digitupdate,input:t.digitupdate,compositionstart:function(e){t.composing=!0},compositionend:function(e){t.composing=!1,t.update()},focus:t.clearStock,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.moveCursor(1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.moveCursor(-1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.selectStock.apply(null,arguments))}]}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.candidates.length>0&&"true"==t.autocomplete,expression:"candidates.length > 0 && autocomplete == 'true'"}],staticClass:"uk-flex uk-flex-wrap uk-flex-wrap-around"},t._l(t.candidates,function(n,i){return e("div",{key:n,staticClass:"uk-card uk-card-default uk-card-body uk-padding-small uk-card-hover",staticStyle:{cursor:"pointer","border-radius":"10px",margin:"20px 20px 0 0"},on:{click:function(e){return t.chooseStock(n)}}},[t._v("\n        "+t._s(i==t.target?n+" * ":n)+"\n      ")])}),0)])},[],!1,null,"3c0325ef",null);e.default=component.exports},465:function(t,e,n){"use strict";n.r(e);var r=n(479);n(276),n(277),n(30),n(44),n(64),n(193),n(87);var o={name:"TVChartContainer",props:{symbol:{default:"stock",type:String},price:{default:function(){},type:Object},indicators:{default:function(){},type:Object},interval:{default:"D",type:String},containerId:{default:"tv_chart_container",type:String},datafeedUrl:{default:"https://demo_feed.tradingview.com",type:String},libraryPath:{default:"/charting_library/",type:String},chartsStorageUrl:{default:"https://saveload.tradingview.com",type:String},chartsStorageApiVersion:{default:"1.1",type:String},clientId:{default:"tradingview.com",type:String},userId:{default:"public_user_id",type:String},fullscreen:{default:!1,type:Boolean},autosize:{default:!0,type:Boolean},studiesOverrides:{type:Object,default:function(){return{}}}},data:function(){return{isReady:!1,predictionOption:"未來20天"}},watch:{price:function(){null!==this.tvWidget&&this.isReady&&this.tvWidget.setSymbol(this.$props.symbol,"1D")},indicators:function(){console.log("change indicator"),this.isReady&&this.initStudies()}},tvWidget:null,mounted:function(){this.deleteTvWidget(),this.createTvWidget(),this.predictionOption=localStorage.getItem("predictionOption"),null===this.predictionOption&&(this.predictionOption="未來10天")},destroyed:function(){this.deleteTvWidget()},methods:{initStudies:function(){null!==this.tvWidget&&(console.log("----aaa----"),console.log(this.predictionOption),this.tvWidget.activeChart().removeAllStudies(),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[5]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[20]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[60]),this.tvWidget.activeChart().createStudy("Volume"))},deleteTvWidget:function(){this.tvWidget&&(this.tvWidget.remove(),this.tvWidget=null,this.isReady=!1)},createTvWidget:function(){var t,e=this,n=this.createDatafeed(),r={symbol:this.symbol,datafeed:n,interval:this.interval,container:this.containerId,library_path:this.libraryPath,locale:(t=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search),(null===t?null:decodeURIComponent(t[1].replace(/\+/g," ")))||"zh_TW"),disabled_features:["header_widget","header_widget_dom_node","compare_symbol","display_market_status","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","timeframes_toolbar","use_localstorage_for_settings","volume_force_overlay","header_saveload","go_to_date","edit_buttons_in_legend","symbol_search_hot_key","border_around_the_chart","control_bar","context_menus","show_chart_property_page","countdown","study_market_minimized","main_series_scale_menu","display_market_status","remove_library_container_border","chart_property_page_style","property_pages","chart_property_page_scales","chart_property_page_background","source_selection_markers"],detail:!0,enabled_features:["hide_left_toolbar_by_default"],charts_storage_url:this.chartsStorageUrl,charts_storage_api_version:this.chartsStorageApiVersion,client_id:this.clientId,user_id:this.userId,fullscreen:this.fullscreen,autosize:!0,studies_overrides:this.studiesOverrides,debug:!1},o=this.$TVChart.Widget;this.isReady=!1;var c=new o(r);this.tvWidget=c,c.onChartReady(function(){c.activeChart().dataReady(function(){e.initStudies(),e.isReady=!0;var iframe=document.getElementsByTagName("iframe")[0],t=document.getElementsByClassName("TVChartContainer")[0];iframe.style.height=t.offsetHeight+"px"})})},createDatafeed:function(){var t=this,e=this;return{onReady:function(t){var e={supported_resolutions:["1D","1W","1M"],exchanges:[{value:"TPEX",name:"TPEX",desc:"TPEX"}],symbols_types:[{name:"stock",value:"stock"}]};console.log("[onReady]: Method call"),setTimeout(function(){return t(e)})},searchSymbols:function(t,e,n,r){console.log("[searchSymbol]: Method call",symbolName)},resolveSymbol:function(e,n,r){var o=e===t.$props.symbol?e:e+"-"+t.$props.symbol,c={ticker:o,name:o,description:o,type:"TYPE",session:"0900-1330",timezone:"Asia/Taipei",exchange:"TWII",minmov:.01,pricescale:.01,has_intraday:!1,has_weekly_and_monthly:!1,supported_resolutions:["1D","1W","1M"]};setTimeout(function(){return n(c)},0),console.log("[resolveSymbol]: Method call",e)},getBars:function(n,o,c,l,d){if(n.ticker==t.$props.symbol){var p=[];for(var i in e.$props.price.close){var h=e.$props.price.date[i].seconds;if("number"==typeof e.$props.price.date[i]){var f=e.$props.price.date[i];Number(f/1e6);Object(r.a)("t")}if(!(h<c.from||h>=c.to)){var m={open:e.$props.price.open[i],close:e.$props.price.close[i],high:e.$props.price.high[i],low:e.$props.price.low[i],volume:e.$props.price.volume[i],time:1e3*h};isNaN(m.open)||p.push(m)}}console.log(p),l(p,{noData:0===p.length})}else{var v=t.$props.indicators[n.ticker.split("-")[0]],y=t.$props.indicators.date,_=[];for(var k in v){var x=y[k].seconds;if(!(x<c.from||x>=c.to)){var S={open:v[k],close:v[k],high:v[k],low:v[k],time:1e3*x};isNaN(S.open)||_.push(S)}}l(_,{noData:0===_.length})}},subscribeBars:function(t,e,n,r,o){console.log("[subscribeBars]: Method call with subscribeUID:",r)},unsubscribeBars:function(t){console.log("[unsubscribeBars]: Method call with subscriberUID:",t)}}}}},c=n(52),component=Object(c.a)(o,function(){return(0,this._self._c)("div",{staticClass:"TVChartContainer",staticStyle:{height:"100%"},attrs:{id:this.containerId}})},[],!1,null,null,null);e.default=component.exports},469:function(t,e,n){t.exports={}},479:function(t,e,n){"use strict";function r(t){throw new TypeError('"'+t+'" is read-only')}n.d(e,"a",function(){return r})},480:function(t,e,n){"use strict";n.d(e,"a",function(){return E});var r=n(424),o=n(423),c=n(504),l=n(470),d=n(492),h=n(437),f=c.a.value;function m(t,e){return o.i({show:e},t)}var v=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),r=this.get("axisLine"),c=this.get("axisTick"),h=this.get("axisLabel"),f=this.get("axisName"),m=this.get(["axisName","show"]),v=this.get(["axisName","formatter"]),y=this.get("axisNameGap"),_=this.get("triggerEvent"),k=o.H(this.get("indicator")||[],function(k){null!=k.max&&k.max>0&&!k.min?k.min=0:null!=k.min&&k.min<0&&!k.max&&(k.max=0);var x=f;null!=k.color&&(x=o.i({color:k.color},f));var S=o.I(o.d(k),{boundaryGap:t,splitNumber:e,scale:n,axisLine:r,axisTick:c,axisLabel:h,name:k.text,showName:m,nameLocation:"end",nameGap:y,nameTextStyle:x,triggerEvent:_},!1);if(o.C(v)){var C=S.name;S.name=v.replace("{value}",null!=C?C:"")}else o.w(v)&&(S.name=v(S.name,S));var w=new l.a(S,null,this.ecModel);return o.K(w,d.a.prototype),w.mainType="radar",w.componentIndex=this.componentIndex,w},this);this._indicatorModels=k},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:o.I({lineStyle:{color:"#bbb"}},f.axisLine),axisLabel:m(f.axisLabel,!1),axisTick:m(f.axisTick,!1),splitLine:m(f.splitLine,!0),splitArea:m(f.splitArea,!0),indicator:[]},e}(h.a),y=v,_=n(491),k=n(678),x=n(761),S=n(681),C=n(680),w=n(425),I=n(439),O=["axisLine","axisTickLabel","axisName"],A=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.render=function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),r=o.H(n,function(t){var n=t.model.get("showName")?t.name:"";return new _.a(t.model,{axisName:n,position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});o.k(r,function(t){o.k(O,t.add,t),this.group.add(t.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var r=t.get("shape"),c=t.getModel("splitLine"),l=t.getModel("splitArea"),d=c.getModel("lineStyle"),h=l.getModel("areaStyle"),f=c.get("show"),m=l.get("show"),v=d.get("color"),y=h.get("color"),_=o.t(v)?v:[v],I=o.t(y)?y:[y],O=[],A=[];if("circle"===r)for(var T=n[0].getTicksCoords(),M=e.cx,D=e.cy,i=0;i<T.length;i++){if(f)O[H(O,_,i)].push(new k.a({shape:{cx:M,cy:D,r:T[i].coord}}));if(m&&i<T.length-1)A[H(A,I,i)].push(new x.a({shape:{cx:M,cy:D,r0:T[i].coord,r:T[i+1].coord}}))}else{var N,j=o.H(n,function(t,n){var r=t.getTicksCoords();return N=null==N?r.length-1:Math.min(r.length-1,N),o.H(r,function(t){return e.coordToPoint(t.coord,n)})}),z=[];for(i=0;i<=N;i++){for(var E=[],P=0;P<n.length;P++)E.push(j[P][i]);if(E[0]&&E.push(E[0].slice()),f)O[H(O,_,i)].push(new S.a({shape:{points:E}}));if(m&&z)A[H(A,I,i-1)].push(new C.a({shape:{points:E.concat(z)}}));z=E.slice().reverse()}}var V=d.getLineStyle(),W=h.getAreaStyle();o.k(A,function(t,e){this.group.add(w.mergePath(t,{style:o.i({stroke:"none",fill:I[e%I.length]},W),silent:!0}))},this),o.k(O,function(t,e){this.group.add(w.mergePath(t,{style:o.i({fill:"none",stroke:_[e%_.length]},V),silent:!0}))},this)}function H(t,e,n){var r=n%e.length;return t[r]=t[r]||[],r}},e.type="radar",e}(I.a),T=A,M=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.type="value",o.angle=0,o.name="",o}return Object(r.a)(e,t),e}(n(486).a),D=n(496),N=n(427),j=n(503),z=function(){function t(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=Object(o.H)(t.getIndicatorModels(),function(t,e){var n="indicator_"+e,r=new M(n,new D.a);return r.name=t.get("name"),r.model=t,t.axis=r,this.dimensions.push(n),r},this),this.resize(t,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,r=Math.sqrt(e*e+n*n);e/=r,n/=r;for(var o,c=Math.atan2(-n,e),l=1/0,d=-1,i=0;i<this._indicatorAxes.length;i++){var h=this._indicatorAxes[i],f=Math.abs(c-h.angle);f<l&&(o=h,d=i,l=f)}return[d,+(o&&o.coordToData(r))]},t.prototype.resize=function(t,e){var n=t.get("center"),r=e.getWidth(),c=e.getHeight(),l=Math.min(r,c)/2;this.cx=N.n(n[0],r),this.cy=N.n(n[1],c),this.startAngle=t.get("startAngle")*Math.PI/180;var d=t.get("radius");(Object(o.C)(d)||Object(o.z)(d))&&(d=[0,d]),this.r0=N.n(d[0],l),this.r=N.n(d[1],l),Object(o.k)(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n},this)},t.prototype.update=function(t,e){var n=this._indicatorAxes,r=this._model;Object(o.k)(n,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(e,c){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===r){var data=e.getData();Object(o.k)(n,function(t){t.scale.unionExtentFromData(data,data.mapDimension(t.dim))})}},this);var c=r.get("splitNumber"),l=new D.a;l.setExtent(0,c),l.setInterval(1),Object(o.k)(n,function(t,e){Object(j.a)(t.scale,t.model,l)})},t.prototype.convertToPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.create=function(e,n){var r=[];return e.eachComponent("radar",function(o){var c=new t(o,e,n);r.push(c),o.coordinateSystem=c}),e.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=r[t.get("radarIndex")||0])}),r},t.dimensions=[],t}();function E(t){t.registerCoordinateSystem("radar",z),t.registerComponentModel(y),t.registerComponentView(T),t.registerVisual({seriesType:"radar",reset:function(t){var data=t.getData();data.each(function(t){data.setItemVisual(t,"legendIcon","roundRect")}),data.setVisual("legendIcon","roundRect")}})}},482:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(478),o=n(468),c=n(423);function l(t,e,n){e=Object(c.t)(e)&&{coordDimensions:e}||Object(c.m)({encodeDefine:t.getEncode()},e);var source=t.getSource(),l=Object(r.a)(source,e).dimensions,d=new o.a(l,t);return d.initData(source,n),d}},488:function(t,e,n){"use strict";n(453)},489:function(t,e,n){"use strict";n(454)},497:function(t,e,n){"use strict";n(469)},498:function(t,e,n){"use strict";n.r(e);n(39),n(429),n(192),n(53);var r=n(6),o=n(26),c=n(456),l=n(464),d=n(465),h=Object(r.b)({name:"line-chart",components:{RadarChart:c.default,SearchBar:l.default,TVChartContainer:d.default},props:{stock_id:{default:"1101"},displaySearchBar:{default:!0}},data:function(){return{stock:null,tab:"AI技術指標",currentCategory:null,indicators:["成長率","獲利能力","單位基本面","安全性"],headerHeight:64,orgHeadHeight:64}},mounted:function(){this.headMaxHeight=this.orgHeadHeight,this.getStock(this.stock_id)},computed:{stockEvaluation:function(){if(null===this.stock)return null},categories:function(){var t=this;return this.stock&&this.stock.fundamentalSummaryIndustry?Object.keys(this.stock.fundamentalSummaryIndustry).sort(function(a,b){return-t.stock.fundamentalSummaryIndustry[a]["檔數"]+t.stock.fundamentalSummaryIndustry[b]["檔數"]}).splice(0,3):[]},radarValues:function(){var t={};return t[this.stock_id]=this.stock.fundamentalSummaryIndustry[this.currentCategory],t},importance:function(){if(!this.stock)return[];var t=[];for(var e in this.stock.fundamentalContribution)t.push({name:e,value:this.stock.fundamentalContribution[e]});return t.sort(function(a,b){return Math.abs(b.value)-Math.abs(a.value)})}},watch:{categories:function(){this.categories&&this.stock&&(this.currentCategory=this.categories[0])},stock_id:{handler:function(t){console.log("stock panel id change!",t),this.getStock(t)},deep:!0}},methods:{getStock:function(t){if(""!==t){var e=o.c.collection("twStock").doc(t),n=this;e.get().then(function(t){t.exists&&(n.stock=t.data(),console.log(n.stock))}).catch(function(e){console.log("Error getting document:",e),console.log(t)})}},percentage:function(t){return t>0?"+"+Math.round(10*t)/10+"%":Math.round(10*t)/10+"%"},percentageColor:function(t){var th=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this.stock.fundamentalContribution[this.importance[0].name],n=Math.abs(t)/Math.abs(e)*th;return t>0?"rgba(255, 133, 182, ".concat(n,")"):"rgba(154, 145, 255, ".concat(n,")")},percentageColor2:function(t){return t>0?"rgba(255, 133, 182)":"rgba(154, 145, 255)"},changeStock:function(t){console.log("get change stock",t),this.headerHeight=this.orgHeadHeight;var e=t.split(" ")[0];this.stock_id=e,window.history.pushState({},null,window.location.href.split("?")[0]+"?stock_id="+e),this.getStock(e)},fitHeaderSize:function(text){0!==text.length?this.headerHeight=400:this.headerHeight=this.orgHeadHeight}}}),f=h,m=(n(497),n(52)),component=Object(m.a)(f,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticStyle:{height:"100%"}},[e("div",{staticClass:"dark-muted stock-head"},[t.stock&&t.displaySearchBar?e("div",[e("SearchBar",{ref:"searchBar",attrs:{value:t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id},on:{input:t.changeStock,update:t.fitHeaderSize}})],1):t._e(),t._v(" "),e("ul",{staticClass:"uk-flex-left",staticStyle:{"margin-top":"12px","margin-bottom":"0"},attrs:{"uk-tab":""}},[t.displaySearchBar?t._e():e("li",{staticClass:"uk-disabled"},[e("a",[t._v(t._s(t.stock&&t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id))])]),t._v(" "),e("li",{class:{"uk-active":"AI技術指標"==t.tab},on:{click:function(e){t.tab="AI技術指標"}}},[e("a",[t._v("技術指標")])]),t._v(" "),e("li",{class:{"uk-active":"AI財報分析"==t.tab},on:{click:function(e){t.tab="AI財報分析"}}},[e("a",[t._v("財報分析")])])])]),t._v(" "),e("div",{staticClass:"light-muted",staticStyle:{height:"calc(100% - 32px)"}},[t.stock&&t.stock.price?e("div",{style:{height:"AI技術指標"===t.tab?"100%":"0px"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"AI技術指標"===t.tab,expression:"tab === 'AI技術指標'"}],staticStyle:{height:"100%"}},[e("TVChartContainer",{attrs:{symbol:t.stock_id,price:t.stock.price,indicators:t.stock.indicatorPrediction}})],1)]):t._e(),t._v(" "),t.stock&&"AI財報分析"===t.tab?e("div",{staticClass:"uk-padding-small"},[t.stock.fundamentalValue?e("div",{staticClass:"uk-grid uk-grid-small",attrs:{"uk-height-match":"target: > div > .uk-card","uk-grid":""}},[e("div",{staticClass:"uk-width-1-2@m"},[t.stock?e("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[e("nuxt-link",{attrs:{to:"/ml_fundamental"}},[e("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),e("h3",{staticClass:"uk-card-title"},[t._v("\n              財報排名 "+t._s(t.stock.fundamentalValue.季別)+"\n            ")]),t._v(" "),e("p",{attrs:{"uk-margin":""}},t._l(t.categories,function(n){return e("button",{key:"category_"+n,staticClass:"uk-button uk-button-small",class:n===t.currentCategory?"uk-button-primary":"uk-button-default",on:{click:function(e){t.currentCategory=n}}},[t._v("\n                "+t._s(n)+"\n              ")])}),0),t._v(" "),e("p",[t._v("\n              "+t._s(t.currentCategory)+"排名：\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"]-Math.round(t.stock.fundamentalSummaryIndustry[t.currentCategory]["綜合評分"]*t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+1)+"\n              /\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+"\n              名\n            ")]),t._v(" "),e("RadarChart",{attrs:{names:[t.stock_id],indicators:t.indicators,values:t.radarValues}})],1):t._e()]),t._v(" "),e("div",{staticClass:"uk-width-1-2@m"},[e("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[e("nuxt-link",{attrs:{to:"/ml_fundamental"}},[e("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),e("h3",{staticClass:"uk-card-title"},[t._v("財報股價影響力")]),t._v(" "),e("div",{staticClass:"uk-grid-collapse",attrs:{"uk-grid":""}},[e("div",{staticStyle:{width:"150px"}},[e("div",{staticStyle:{height:"85px","padding-bottom":"70px"},style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution.綜合評分,1)},[e("span",{staticStyle:{"font-size":"2.2em"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution.綜合評分)))]),e("span",[t._v("/年")]),t._v(" "),e("br"),t._v(" "),e("span",{staticStyle:{"font-size":"1em"}},[t._v("股價總影響力")])]),t._v(" "),t._l(t.indicators,function(i){return e("div",{key:"score"+i,staticClass:"fundamental-tab uk-text-center",style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution[i],1)},[e("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution[i],100))+" ")]),e("br"),t._v(" "),e("span",[t._v(t._s(i))]),t._v(" "),e("div",{staticClass:"line"})])})],2),t._v(" "),e("div",{staticClass:"uk-width-expand"},[e("div",{staticClass:"table-value uk-overflow-auto",staticStyle:{"max-height":"400px"}},[e("table",{staticClass:"uk-table uk-table-small top-container",staticStyle:{width:"400px","font-size":"0.8rem"}},[t._m(0),t._v(" "),e("tbody",t._l(t.importance,function(n){return e("tr",{key:n.name+"fd",style:"background:"+t.percentageColor(n.value,.7)},[e("td",[t._v(t._s(n.name))]),t._v(" "),e("td",[t._v("\n                          "+t._s(t.percentage(n.value))+"\n                        ")]),t._v(" "),e("td",[t._v("\n                          "+t._s(Math.round(100*t.stock.fundamentalValue[n.name])/100)+"\n                        ")])])}),0)])])])])],1)])]):e("div",[t._v("\n        並無財報數據喔！\n      ")])]):t._e()])])},[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("th",[t._v("名稱")]),t._v(" "),e("th",[t._v("影響力（大⇀小）")]),t._v(" "),e("th",[t._v("數值")])])}],!1,null,"e5dbce3a",null);e.default=component.exports;installComponents(component,{SearchBar:n(464).default,TVChartContainer:n(465).default,RadarChart:n(456).default})},546:function(t,e,n){"use strict";n.d(e,"a",function(){return E});var r=n(462),o=n(423);function c(t){t.eachSeriesByType("radar",function(t){var data=t.getData(),e=[],n=t.coordinateSystem;if(n){var r=n.getIndicatorAxes();o.k(r,function(t,o){data.each(data.mapDimension(r[o].dim),function(t,r){e[r]=e[r]||[];var c=n.dataToPoint(t,o);e[r][o]=l(c)?c:d(n)})}),data.each(function(t){var r=o.o(e[t],function(t){return l(t)})||d(n);e[t].push(r.slice()),data.setItemLayout(t,e[t])})}})}function l(t){return!isNaN(t[0])&&!isNaN(t[1])}function d(t){return[t.cx,t.cy]}function h(option){var t=option.polar;if(t){o.t(t)||(t=[t]);var e=[];o.k(t,function(t,n){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),option.radar=option.radar||[],o.t(option.radar)||(option.radar=[option.radar]),option.radar.push(t)):e.push(t)}),option.polar=e}o.k(option.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})}var f=n(424),m=n(425),v=n(680),y=n(681),_=n(457),k=n(573),x=n(430),symbol=n(431),S=n(458),C=n(428),w=n(438),I=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(f.a)(e,t),e.prototype.render=function(t,e,n){var r=t.coordinateSystem,c=this.group,data=t.getData(),l=this._data;function d(data,t){var e=data.getItemVisual(t,"symbol")||"circle";if("none"!==e){var n=symbol.c(data.getItemVisual(t,"symbolSize")),r=symbol.a(e,-1,-1,2,2),o=data.getItemVisual(t,"symbolRotate")||0;return r.attr({style:{strokeNoScale:!0},z2:100,scaleX:n[0]/2,scaleY:n[1]/2,rotation:o*Math.PI/180||0}),r}}function h(e,n,r,data,o,c){r.removeAll();for(var i=0;i<n.length-1;i++){var l=d(data,o);l&&(l.__dimIdx=i,e[i]?(l.setPosition(e[i]),m[c?"initProps":"updateProps"](l,{x:n[i][0],y:n[i][1]},t,o)):l.setPosition(n[i]),r.add(l))}}function f(t){return o.H(t,function(t){return[r.cx,r.cy]})}data.diff(l).add(function(e){var n=data.getItemLayout(e);if(n){var polygon=new v.a,polyline=new y.a,r={shape:{points:n}};polygon.shape.points=f(n),polyline.shape.points=f(n),_.b(polygon,r,t,e),_.b(polyline,r,t,e);var o=new k.a,c=new k.a;o.add(polyline),o.add(polygon),o.add(c),h(polyline.shape.points,n,c,data,e,!0),data.setItemGraphicEl(e,o)}}).update(function(e,n){var r=l.getItemGraphicEl(n),polyline=r.childAt(0),polygon=r.childAt(1),o=r.childAt(2),c={shape:{points:data.getItemLayout(e)}};c.shape.points&&(h(polyline.shape.points,c.shape.points,o,data,e,!1),Object(_.f)(polygon),Object(_.f)(polyline),_.g(polyline,c,t),_.g(polygon,c,t),data.setItemGraphicEl(e,r))}).remove(function(t){c.remove(l.getItemGraphicEl(t))}).execute(),data.eachItemGraphicEl(function(t,e){var n=data.getItemModel(e),polyline=t.childAt(0),polygon=t.childAt(1),r=t.childAt(2),l=data.getItemVisual(e,"style"),d=l.fill;c.add(t),polyline.useStyle(o.i(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:d})),Object(x.I)(polyline,n,"lineStyle"),Object(x.I)(polygon,n,"areaStyle");var h=n.getModel("areaStyle"),f=h.isEmpty()&&h.parentModel.isEmpty();polygon.ignore=f,o.k(["emphasis","select","blur"],function(t){var e=n.getModel([t,"areaStyle"]),r=e.isEmpty()&&e.parentModel.isEmpty();polygon.ensureState(t).ignore=r&&f}),polygon.useStyle(o.i(h.getAreaStyle(),{fill:d,opacity:.7,decal:l.decal}));var m=n.getModel("emphasis"),v=m.getModel("itemStyle").getItemStyle();r.eachChild(function(t){if(t instanceof w.a){var r=t.style;t.useStyle(o.m({image:r.image,x:r.x,y:r.y,width:r.width,height:r.height},l))}else t.useStyle(l),t.setColor(d),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=o.d(v);var c=data.getStore().get(data.getDimensionIndex(t.__dimIdx),e);(null==c||isNaN(c))&&(c=""),Object(C.f)(t,Object(C.d)(n),{labelFetcher:data.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:c,inheritColor:d,defaultOpacity:l.opacity})}),Object(x.J)(t,m.get("focus"),m.get("blurScope"),m.get("disabled"))}),this._data=data},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(S.a),O=I,A=n(460),T=n(482),M=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),D=n(502),N=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(f.a)(e,t),e.prototype.init=function(option){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new M(o.c(this.getData,this),o.c(this.getRawData,this))},e.prototype.getInitialData=function(option,t){return Object(T.a)(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,n){var data=this.getData(),r=this.coordinateSystem.getIndicatorAxes(),c=this.getData().getName(t),l=""===c?this.name:c,d=Object(D.e)(this,t);return Object(D.c)("section",{header:l,sortBlocks:!0,blocks:o.H(r,function(e){var n=data.get(data.mapDimension(e.dim),t);return Object(D.c)("nameValue",{markerType:"subItem",markerColor:d,name:e.name,value:n,sortParam:n})})})},e.prototype.getTooltipPosition=function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,r=e.getValues(o.H(n.dimensions,function(t){return e.mapDimension(t)}),t),i=0,c=r.length;i<c;i++)if(!isNaN(r[i])){var l=n.getIndicatorAxes();return n.coordToPoint(l[i].dataToCoord(r[i]),i)}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(A.a),j=N,z=n(480);function E(t){Object(r.a)(z.a),t.registerChartView(O),t.registerSeriesModel(j),t.registerLayout(c),t.registerProcessor({seriesType:"radar",reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var data=t.getData();data.filterSelf(function(t){for(var e=data.getName(t),i=0;i<n.length;i++)if(!n[i].isSelected(e))return!1;return!0})}}}),t.registerPreprocessor(h)}}}]);