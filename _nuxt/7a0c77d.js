(window.webpackJsonp=window.webpackJsonp||[]).push([[51,40,55,58,59,64],{431:function(t,e,n){"use strict";var r=n(5),o=n(8),c=n(55),l=n(50),d=n(76),h=n(274),f=n(24),v=n(9),_=n(275),m=n(190),y=n(440),k=n(441),x=n(120),S=n(442),C=[],w=o(C.sort),I=o(C.push),O=v(function(){C.sort(void 0)}),M=v(function(){C.sort(null)}),T=m("sort"),A=!v(function(){if(x)return x<70;if(!(y&&y>3)){if(k)return!0;if(S)return S<603;var code,t,e,n,r="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(n=0;n<47;n++)C.push({k:t+n,v:e})}for(C.sort(function(a,b){return b.v-a.v}),n=0;n<C.length;n++)t=C[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}});r({target:"Array",proto:!0,forced:O||!M||!T||!A},{sort:function(t){void 0!==t&&c(t);var e=l(this);if(A)return void 0===t?w(e):w(e,t);var n,r,o=[],v=d(e);for(r=0;r<v;r++)r in e&&I(o,e[r]);for(_(o,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:f(e)>f(n)?1:-1}}(t)),n=d(o),r=0;r<n;)e[r]=o[r++];for(;r<v;)h(e,r++);return e}})},440:function(t,e,n){"use strict";var r=n(85).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},441:function(t,e,n){"use strict";var r=n(85);t.exports=/MSIE|Trident/.test(r)},442:function(t,e,n){"use strict";var r=n(85).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},461:function(t,e,n){t.exports={}},462:function(t,e,n){t.exports={}},464:function(t,e,n){"use strict";n.r(e);n(75),n(23),n(38);var r=n(6),o=n(451),c=n(532),l=n(713),d=n(422);function h(t){t.eachSeriesByType("radar",function(t){var data=t.getData(),e=[],n=t.coordinateSystem;if(n){var r=n.getIndicatorAxes();d.k(r,function(t,o){data.each(data.mapDimension(r[o].dim),function(t,r){e[r]=e[r]||[];var c=n.dataToPoint(t,o);e[r][o]=f(c)?c:v(n)})}),data.each(function(t){var r=d.o(e[t],function(t){return f(t)})||v(n);e[t].push(r.slice()),data.setItemLayout(t,e[t])})}})}function f(t){return!isNaN(t[0])&&!isNaN(t[1])}function v(t){return[t.cx,t.cy]}function _(option){var t=option.polar;if(t){d.t(t)||(t=[t]);var e=[];d.k(t,function(t,n){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),option.radar=option.radar||[],d.t(option.radar)||(option.radar=[option.radar]),option.radar.push(t)):e.push(t)}),option.polar=e}d.k(option.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})}var m=n(423),y=n(424),k=n(727),x=n(728),S=n(476),C=n(584),w=n(428),symbol=n(429),I=n(466),O=n(427),M=n(438),T=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(m.a)(e,t),e.prototype.render=function(t,e,n){var r=t.coordinateSystem,o=this.group,data=t.getData(),c=this._data;function l(data,t){var e=data.getItemVisual(t,"symbol")||"circle";if("none"!==e){var n=symbol.c(data.getItemVisual(t,"symbolSize")),r=symbol.a(e,-1,-1,2,2),o=data.getItemVisual(t,"symbolRotate")||0;return r.attr({style:{strokeNoScale:!0},z2:100,scaleX:n[0]/2,scaleY:n[1]/2,rotation:o*Math.PI/180||0}),r}}function h(e,n,r,data,o,c){r.removeAll();for(var i=0;i<n.length-1;i++){var d=l(data,o);d&&(d.__dimIdx=i,e[i]?(d.setPosition(e[i]),y[c?"initProps":"updateProps"](d,{x:n[i][0],y:n[i][1]},t,o)):d.setPosition(n[i]),r.add(d))}}function f(t){return d.G(t,function(t){return[r.cx,r.cy]})}data.diff(c).add(function(e){var n=data.getItemLayout(e);if(n){var polygon=new k.a,polyline=new x.a,r={shape:{points:n}};polygon.shape.points=f(n),polyline.shape.points=f(n),S.a(polygon,r,t,e),S.a(polyline,r,t,e);var o=new C.a,c=new C.a;o.add(polyline),o.add(polygon),o.add(c),h(polyline.shape.points,n,c,data,e,!0),data.setItemGraphicEl(e,o)}}).update(function(e,n){var r=c.getItemGraphicEl(n),polyline=r.childAt(0),polygon=r.childAt(1),o=r.childAt(2),l={shape:{points:data.getItemLayout(e)}};l.shape.points&&(h(polyline.shape.points,l.shape.points,o,data,e,!1),Object(S.e)(polygon),Object(S.e)(polyline),S.f(polyline,l,t),S.f(polygon,l,t),data.setItemGraphicEl(e,r))}).remove(function(t){o.remove(c.getItemGraphicEl(t))}).execute(),data.eachItemGraphicEl(function(t,e){var n=data.getItemModel(e),polyline=t.childAt(0),polygon=t.childAt(1),r=t.childAt(2),c=data.getItemVisual(e,"style"),l=c.fill;o.add(t),polyline.useStyle(d.i(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:l})),Object(w.H)(polyline,n,"lineStyle"),Object(w.H)(polygon,n,"areaStyle");var h=n.getModel("areaStyle"),f=h.isEmpty()&&h.parentModel.isEmpty();polygon.ignore=f,d.k(["emphasis","select","blur"],function(t){var e=n.getModel([t,"areaStyle"]),r=e.isEmpty()&&e.parentModel.isEmpty();polygon.ensureState(t).ignore=r&&f}),polygon.useStyle(d.i(h.getAreaStyle(),{fill:l,opacity:.7,decal:c.decal}));var v=n.getModel("emphasis"),_=v.getModel("itemStyle").getItemStyle();r.eachChild(function(t){if(t instanceof M.a){var r=t.style;t.useStyle(d.m({image:r.image,x:r.x,y:r.y,width:r.width,height:r.height},c))}else t.useStyle(c),t.setColor(l),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=d.d(_);var o=data.getStore().get(data.getDimensionIndex(t.__dimIdx),e);(null==o||isNaN(o))&&(o=""),Object(O.f)(t,Object(O.d)(n),{labelFetcher:data.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:o,inheritColor:l,defaultOpacity:c.opacity})}),Object(w.I)(t,v.get("focus"),v.get("blurScope"),v.get("disabled"))}),this._data=data},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(I.a),A=T,N=n(468),D=n(486),P=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),j=n(480),z=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(m.a)(e,t),e.prototype.init=function(option){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new P(d.c(this.getData,this),d.c(this.getRawData,this))},e.prototype.getInitialData=function(option,t){return Object(D.a)(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,n){var data=this.getData(),r=this.coordinateSystem.getIndicatorAxes(),o=this.getData().getName(t),c=""===o?this.name:o,l=Object(j.e)(this,t);return Object(j.c)("section",{header:c,sortBlocks:!0,blocks:d.G(r,function(e){var n=data.get(data.mapDimension(e.dim),t);return Object(j.c)("nameValue",{markerType:"subItem",markerColor:l,name:e.name,value:n,sortParam:n})})})},e.prototype.getTooltipPosition=function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,r=e.getValues(d.G(n.dimensions,function(t){return e.mapDimension(t)}),t),i=0,o=r.length;i<o;i++)if(!isNaN(r[i])){var c=n.getIndicatorAxes();return n.coordToPoint(c[i].dataToCoord(r[i]),i)}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(N.a),$=z,R=n(529),E=n(490),V=n(530),L=n(436),W=R.a.value;function B(t,e){return d.i({show:e},t)}var H=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(m.a)(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),r=this.get("axisLine"),o=this.get("axisTick"),c=this.get("axisLabel"),l=this.get("axisName"),h=this.get(["axisName","show"]),f=this.get(["axisName","formatter"]),v=this.get("axisNameGap"),_=this.get("triggerEvent"),m=d.G(this.get("indicator")||[],function(m){null!=m.max&&m.max>0&&!m.min?m.min=0:null!=m.min&&m.min<0&&!m.max&&(m.max=0);var y=l;null!=m.color&&(y=d.i({color:m.color},l));var k=d.H(d.d(m),{boundaryGap:t,splitNumber:e,scale:n,axisLine:r,axisTick:o,axisLabel:c,name:m.text,showName:h,nameLocation:"end",nameGap:v,nameTextStyle:y,triggerEvent:_},!1);if(d.B(f)){var x=k.name;k.name=f.replace("{value}",null!=x?x:"")}else d.w(f)&&(k.name=f(k.name,k));var S=new E.a(k,null,this.ecModel);return d.I(S,V.a.prototype),S.mainType="radar",S.componentIndex=this.componentIndex,S},this);this._indicatorModels=m},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:d.H({lineStyle:{color:"#bbb"}},W.axisLine),axisLabel:B(W.axisLabel,!1),axisTick:B(W.axisTick,!1),splitLine:B(W.splitLine,!0),splitArea:B(W.splitArea,!0),indicator:[]},e}(L.a),G=H,F=n(525),U=n(725),Y=n(726),X=n(437),J=["axisLine","axisTickLabel","axisName"],K=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(m.a)(e,t),e.prototype.render=function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),r=d.G(n,function(t){var n=t.model.get("showName")?t.name:"";return new F.a(t.model,{axisName:n,position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});d.k(r,function(t){d.k(J,t.add,t),this.group.add(t.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var r=t.get("shape"),o=t.getModel("splitLine"),c=t.getModel("splitArea"),l=o.getModel("lineStyle"),h=c.getModel("areaStyle"),f=o.get("show"),v=c.get("show"),_=l.get("color"),m=h.get("color"),S=d.t(_)?_:[_],C=d.t(m)?m:[m],w=[],I=[];if("circle"===r)for(var O=n[0].getTicksCoords(),M=e.cx,T=e.cy,i=0;i<O.length;i++){if(f)w[R(w,S,i)].push(new U.a({shape:{cx:M,cy:T,r:O[i].coord}}));if(v&&i<O.length-1)I[R(I,C,i)].push(new Y.a({shape:{cx:M,cy:T,r0:O[i].coord,r:O[i+1].coord}}))}else{var A,N=d.G(n,function(t,n){var r=t.getTicksCoords();return A=null==A?r.length-1:Math.min(r.length-1,A),d.G(r,function(t){return e.coordToPoint(t.coord,n)})}),D=[];for(i=0;i<=A;i++){for(var P=[],j=0;j<n.length;j++)P.push(N[j][i]);if(P[0]&&P.push(P[0].slice()),f)w[R(w,S,i)].push(new x.a({shape:{points:P}}));if(v&&D)I[R(I,C,i-1)].push(new k.a({shape:{points:P.concat(D)}}));D=P.slice().reverse()}}var z=l.getLineStyle(),$=h.getAreaStyle();d.k(I,function(t,e){this.group.add(y.mergePath(t,{style:d.i({stroke:"none",fill:C[e%C.length]},$),silent:!0}))},this),d.k(w,function(t,e){this.group.add(y.mergePath(t,{style:d.i({fill:"none",stroke:S[e%S.length]},z),silent:!0}))},this)}function R(t,e,n){var r=n%e.length;return t[r]=t[r]||[],r}},e.type="radar",e}(X.a),Q=K,Z=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.type="value",o.angle=0,o.name="",o}return Object(m.a)(e,t),e}(n(535).a),tt=n(510),et=n(426),at=n(528),it=function(){function t(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=Object(d.G)(t.getIndicatorModels(),function(t,e){var n="indicator_"+e,r=new Z(n,new tt.a);return r.name=t.get("name"),r.model=t,t.axis=r,this.dimensions.push(n),r},this),this.resize(t,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,r=Math.sqrt(e*e+n*n);e/=r,n/=r;for(var o,c=Math.atan2(-n,e),l=1/0,d=-1,i=0;i<this._indicatorAxes.length;i++){var h=this._indicatorAxes[i],f=Math.abs(c-h.angle);f<l&&(o=h,d=i,l=f)}return[d,+(o&&o.coordToData(r))]},t.prototype.resize=function(t,e){var n=t.get("center"),r=e.getWidth(),o=e.getHeight(),c=Math.min(r,o)/2;this.cx=et.n(n[0],r),this.cy=et.n(n[1],o),this.startAngle=t.get("startAngle")*Math.PI/180;var l=t.get("radius");(Object(d.B)(l)||Object(d.z)(l))&&(l=[0,l]),this.r0=et.n(l[0],c),this.r=et.n(l[1],c),Object(d.k)(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n},this)},t.prototype.update=function(t,e){var n=this._indicatorAxes,r=this._model;Object(d.k)(n,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(e,o){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===r){var data=e.getData();Object(d.k)(n,function(t){t.scale.unionExtentFromData(data,data.mapDimension(t.dim))})}},this);var o=r.get("splitNumber"),c=new tt.a;c.setExtent(0,o),c.setInterval(1),Object(d.k)(n,function(t,e){Object(at.a)(t.scale,t.model,c)})},t.prototype.convertToPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.create=function(e,n){var r=[];return e.eachComponent("radar",function(o){var c=new t(o,e,n);r.push(c),o.coordinateSystem=c}),e.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=r[t.get("radarIndex")||0])}),r},t.dimensions=[],t}();function nt(t){t.registerCoordinateSystem("radar",it),t.registerComponentModel(G),t.registerComponentView(Q),t.registerVisual({seriesType:"radar",reset:function(t){var data=t.getData();data.each(function(t){data.setItemVisual(t,"legendIcon","roundRect")}),data.setVisual("legendIcon","roundRect")}})}var st=n(967),ot=n(965),ct=n(963);Object(o.a)([l.a,st.a,ot.a,function(t){Object(o.a)(nt),t.registerChartView(A),t.registerSeriesModel($),t.registerLayout(h),t.registerProcessor({seriesType:"radar",reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var data=t.getData();data.filterSelf(function(t){for(var e=data.getName(t),i=0;i<n.length;i++)if(!n[i].isSelected(e))return!1;return!0})}}}),t.registerPreprocessor(_)},ct.a]);var lt=Object(r.b)({name:"RadarChart",props:{height:{type:String,default:"300px"},names:{default:function(){return null}},indicators:{default:function(){return["a","b","c"]}},values:{default:function(){return{values:{a:.5,b:.8,c:.3}}}}},data:function(){return{chartInstance:null,resizeObserver:null}},mounted:function(){var t=this;this.initChart(),this.updateChart(),window.addEventListener("resize",this.resizeChart),"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(function(){t.resizeChart()}),this.$refs.chart&&this.resizeObserver.observe(this.$refs.chart))},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChart),this.resizeObserver&&this.resizeObserver.disconnect(),this.chartInstance&&this.chartInstance.dispose()},watch:{values:{handler:"updateChart",deep:!0},indicators:{handler:"updateChart",deep:!0},names:{handler:"updateChart",deep:!0}},computed:{option:function(){return{scale:{pointLabels:{fontSize:20}},color:["rgba(255, 133, 182, 0.5)","#FFE43488","#56A3F188","#FF917C88"],legend:{data:this.seriesNames,bottom:0,right:0,textStyle:{fontSize:18}},radar:{indicator:this.indicators_,shape:"circle",startAngle:135,axisName:{fontSize:18}},series:[{type:"radar",data:this.valueData}]}},indicators_:function(){return this.indicators.map(function(t){return{name:t,max:1}})},seriesNames:function(){if(this.names)return this.names;var t=[];for(var e in this.values)t.push(e);return t},valueData:function(){var label={show:1==this.seriesNames.length,formatter:function(t){return Math.round(1e3*t.value)/10+"%"}},t={},e=[];for(var n in this.values){var r=this.values[n],o=[];for(var i in this.indicators)o.push(r[this.indicators[i]]);e.push({value:o,name:this.seriesNames[n],label:label,areaStyle:t,textStyle:{color:"black",fontSize:20}})}return e}},methods:{initChart:function(){this.$refs.chart&&(this.chartInstance=Object(c.b)(this.$refs.chart,"light"))},resizeChart:function(){this.chartInstance&&this.chartInstance.resize()},updateChart:function(){this.chartInstance&&this.chartInstance.setOption(this.option,!0)}}}),ut=(n(493),n(52)),component=Object(ut.a)(lt,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{ref:"chart",staticClass:"chart",style:{height:t.height,zIndex:0}})},[],!1,null,"38f8178d",null);e.default=component.exports},470:function(t,e,n){"use strict";n.r(e);n(54),n(23),n(30),n(64);var r=n(26),o={props:{value:{type:String},autocomplete:{type:String,default:"true"}},data:function(){return{sid:[],sdict:{},candidates:[],currentStock:"",text:"",target:0,composing:!1,history:[]}},created:function(){this.text=this.value;var t=this;r.c.collection("twStock").doc("searchTree").get().then(function(e){if(e.exists){var data=e.data();t.sdict=data.searchTree.sdict,t.slist=data.searchTree.slist}else console.log("cannot find strategy menu")})},methods:{moveCursor:function(t){0!=this.candidates.length?this.target+=t:this.target=-1},selectStock:function(t){t.preventDefault(),-1!=this.target&&this.chooseStock(this.candidates[this.target])},chooseStock:function(s){if(!this.composing){var t=this;console.log("emit",s),this.$emit("input",s),this.history.unshift(s),this.history=this.history.filter(function(e,n){return t.history.indexOf(e)==n}),this.history.length>3&&(this.history=[this.history[0],this.history[1],this.history[2]]),this.currentStock=s,this.candidates=[],this.text=s,this.target=-1,document.getElementById("search-box").blur()}},clearStock:function(t){this.text="",this.candidates=[],this.target=-1,this.$emit("update","")},digitupdate:function(t){var s,e=t.target.value;this.$emit("update",e),(s=e).replace(/[^\x00-\xff]/g,"rr").length==s.length&&this.update(t)},update:function(t){var e=event.target.value;if(this.text=e,""!=e){var n=this.sdict;for(var i in e){var r=e[i];if(!(r in n))return void(this.candidates=["找不到此股票代號"]);n=n[r]}for(var o=[],c=[n];c&&0!=c.length&&!((n=c.pop())===parseInt(n,10)&&(o.push(this.slist[n]),o.length>20));)for(var l in n)c.unshift(n[l]);this.candidates=o,1==this.candidates.length&&this.chooseStock(this.candidates[0])}else this.candidates=[]}}},c=(n(494),n(52)),component=Object(c.a)(o,function(){var t=this,e=t._self._c;return e("div",[e("form",{staticClass:"uk-search uk-search-navbar uk-card uk-flex",staticStyle:{width:"100%",border:"1px solid #ddd",background:"rgba(255, 255, 255, 0.2)"}},[e("span",{staticStyle:{"padding-left":"10px"},attrs:{"uk-search-icon":""}}),t._v(" "),e("input",{staticClass:"uk-search-input uk-text-primary uk-text-light",staticStyle:{"padding-left":"60px"},attrs:{id:"search-box",name:"Search",type:"search",placeholder:"股票代號",autocomplete:"off"},domProps:{value:t.text},on:{change:t.digitupdate,input:t.digitupdate,compositionstart:function(e){t.composing=!0},compositionend:function(e){t.composing=!1,t.update()},focus:t.clearStock,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.moveCursor(1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.moveCursor(-1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.selectStock.apply(null,arguments))}]}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.candidates.length>0&&"true"==t.autocomplete,expression:"candidates.length > 0 && autocomplete == 'true'"}],staticClass:"uk-flex uk-flex-wrap uk-flex-wrap-around"},t._l(t.candidates,function(n,i){return e("div",{key:n,staticClass:"uk-card uk-card-default uk-card-body uk-padding-small uk-card-hover",staticStyle:{cursor:"pointer","border-radius":"10px",margin:"20px 20px 0 0"},on:{click:function(e){return t.chooseStock(n)}}},[t._v("\n        "+t._s(i==t.target?n+" * ":n)+"\n      ")])}),0)])},[],!1,null,"3c0325ef",null);e.default=component.exports},471:function(t,e,n){"use strict";n.r(e);var r=n(489);n(276),n(277),n(30),n(44),n(64),n(192),n(87);var o={name:"TVChartContainer",props:{symbol:{default:"stock",type:String},price:{default:function(){},type:Object},indicators:{default:function(){},type:Object},interval:{default:"D",type:String},containerId:{default:"tv_chart_container",type:String},datafeedUrl:{default:"https://demo_feed.tradingview.com",type:String},libraryPath:{default:"/charting_library/",type:String},chartsStorageUrl:{default:"https://saveload.tradingview.com",type:String},chartsStorageApiVersion:{default:"1.1",type:String},clientId:{default:"tradingview.com",type:String},userId:{default:"public_user_id",type:String},fullscreen:{default:!1,type:Boolean},autosize:{default:!0,type:Boolean},studiesOverrides:{type:Object,default:function(){return{}}}},data:function(){return{isReady:!1,predictionOption:"未來20天"}},watch:{price:function(){null!==this.tvWidget&&this.isReady&&this.tvWidget.setSymbol(this.$props.symbol,"1D")},indicators:function(){console.log("change indicator"),this.isReady&&this.initStudies()}},tvWidget:null,mounted:function(){this.deleteTvWidget(),this.createTvWidget(),this.predictionOption=localStorage.getItem("predictionOption"),null===this.predictionOption&&(this.predictionOption="未來10天")},destroyed:function(){this.deleteTvWidget()},methods:{initStudies:function(){null!==this.tvWidget&&(console.log("----aaa----"),console.log(this.predictionOption),this.tvWidget.activeChart().removeAllStudies(),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[5]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[20]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[60]),this.tvWidget.activeChart().createStudy("Volume"))},deleteTvWidget:function(){this.tvWidget&&(this.tvWidget.remove(),this.tvWidget=null,this.isReady=!1)},createTvWidget:function(){var t,e=this,n=this.createDatafeed(),r={symbol:this.symbol,datafeed:n,interval:this.interval,container:this.containerId,library_path:this.libraryPath,locale:(t=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search),(null===t?null:decodeURIComponent(t[1].replace(/\+/g," ")))||"zh_TW"),disabled_features:["header_widget","header_widget_dom_node","compare_symbol","display_market_status","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","timeframes_toolbar","use_localstorage_for_settings","volume_force_overlay","header_saveload","go_to_date","edit_buttons_in_legend","symbol_search_hot_key","border_around_the_chart","control_bar","context_menus","show_chart_property_page","countdown","study_market_minimized","main_series_scale_menu","display_market_status","remove_library_container_border","chart_property_page_style","property_pages","chart_property_page_scales","chart_property_page_background","source_selection_markers"],detail:!0,enabled_features:["hide_left_toolbar_by_default"],charts_storage_url:this.chartsStorageUrl,charts_storage_api_version:this.chartsStorageApiVersion,client_id:this.clientId,user_id:this.userId,fullscreen:this.fullscreen,autosize:!0,studies_overrides:this.studiesOverrides,debug:!1},o=this.$TVChart.Widget;this.isReady=!1;var c=new o(r);this.tvWidget=c,c.onChartReady(function(){c.activeChart().dataReady(function(){e.initStudies(),e.isReady=!0;var iframe=document.getElementsByTagName("iframe")[0],t=document.getElementsByClassName("TVChartContainer")[0];iframe.style.height=t.offsetHeight+"px"})})},createDatafeed:function(){var t=this,e=this;return{onReady:function(t){var e={supported_resolutions:["1D","1W","1M"],exchanges:[{value:"TPEX",name:"TPEX",desc:"TPEX"}],symbols_types:[{name:"stock",value:"stock"}]};console.log("[onReady]: Method call"),setTimeout(function(){return t(e)})},searchSymbols:function(t,e,n,r){console.log("[searchSymbol]: Method call",symbolName)},resolveSymbol:function(e,n,r){var o=e===t.$props.symbol?e:e+"-"+t.$props.symbol,c={ticker:o,name:o,description:o,type:"TYPE",session:"0900-1330",timezone:"Asia/Taipei",exchange:"TWII",minmov:.01,pricescale:.01,has_intraday:!1,has_weekly_and_monthly:!1,supported_resolutions:["1D","1W","1M"]};setTimeout(function(){return n(c)},0),console.log("[resolveSymbol]: Method call",e)},getBars:function(n,o,c,l,d){if(n.ticker==t.$props.symbol){var p=[];for(var i in e.$props.price.close){var h=e.$props.price.date[i].seconds;if("number"==typeof e.$props.price.date[i]){var f=e.$props.price.date[i];Number(f/1e6);Object(r.a)("t")}if(!(h<c.from||h>=c.to)){var v={open:e.$props.price.open[i],close:e.$props.price.close[i],high:e.$props.price.high[i],low:e.$props.price.low[i],volume:e.$props.price.volume[i],time:1e3*h};isNaN(v.open)||p.push(v)}}console.log(p),l(p,{noData:0===p.length})}else{var _=t.$props.indicators[n.ticker.split("-")[0]],m=t.$props.indicators.date,y=[];for(var k in _){var x=m[k].seconds;if(!(x<c.from||x>=c.to)){var S={open:_[k],close:_[k],high:_[k],low:_[k],time:1e3*x};isNaN(S.open)||y.push(S)}}l(y,{noData:0===y.length})}},subscribeBars:function(t,e,n,r,o){console.log("[subscribeBars]: Method call with subscribeUID:",r)},unsubscribeBars:function(t){console.log("[unsubscribeBars]: Method call with subscriberUID:",t)}}}}},c=n(52),component=Object(c.a)(o,function(){return(0,this._self._c)("div",{staticClass:"TVChartContainer",staticStyle:{height:"100%"},attrs:{id:this.containerId}})},[],!1,null,null,null);e.default=component.exports},473:function(t,e,n){t.exports={}},486:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(482),o=n(443),c=n(422);function l(t,e,n){e=Object(c.t)(e)&&{coordDimensions:e}||Object(c.m)({encodeDefine:t.getEncode()},e);var source=t.getSource(),l=Object(r.a)(source,e).dimensions,d=new o.a(l,t);return d.initData(source,n),d}},487:function(t,e,n){t.exports={}},489:function(t,e,n){"use strict";function r(t){throw new TypeError('"'+t+'" is read-only')}n.d(e,"a",function(){return r})},493:function(t,e,n){"use strict";n(461)},494:function(t,e,n){"use strict";n(462)},500:function(t,e,n){"use strict";n(473)},502:function(t,e,n){"use strict";n.r(e);n(39),n(431),n(191),n(53);var r=n(6),o=n(26),c=n(464),l=n(470),d=n(471),h=Object(r.b)({name:"line-chart",components:{RadarChart:c.default,SearchBar:l.default,TVChartContainer:d.default},props:{stock_id:{default:"1101"},displaySearchBar:{default:!0}},data:function(){return{stock:null,tab:"AI技術指標",currentCategory:null,indicators:["成長率","獲利能力","單位基本面","安全性"],headerHeight:64,orgHeadHeight:64}},mounted:function(){this.headMaxHeight=this.orgHeadHeight,this.getStock(this.stock_id)},computed:{stockEvaluation:function(){if(null===this.stock)return null},categories:function(){var t=this;return this.stock&&this.stock.fundamentalSummaryIndustry?Object.keys(this.stock.fundamentalSummaryIndustry).sort(function(a,b){return-t.stock.fundamentalSummaryIndustry[a]["檔數"]+t.stock.fundamentalSummaryIndustry[b]["檔數"]}).splice(0,3):[]},radarValues:function(){var t={};return t[this.stock_id]=this.stock.fundamentalSummaryIndustry[this.currentCategory],t},importance:function(){if(!this.stock)return[];var t=[];for(var e in this.stock.fundamentalContribution)t.push({name:e,value:this.stock.fundamentalContribution[e]});return t.sort(function(a,b){return Math.abs(b.value)-Math.abs(a.value)})}},watch:{categories:function(){this.categories&&this.stock&&(this.currentCategory=this.categories[0])},stock_id:{handler:function(t){console.log("stock panel id change!",t),this.getStock(t)},deep:!0}},methods:{getStock:function(t){if(""!==t){var e=o.c.collection("twStock").doc(t),n=this;e.get().then(function(t){t.exists&&(n.stock=t.data(),console.log(n.stock))}).catch(function(e){console.log("Error getting document:",e),console.log(t)})}},percentage:function(t){return t>0?"+"+Math.round(10*t)/10+"%":Math.round(10*t)/10+"%"},percentageColor:function(t){var th=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this.stock.fundamentalContribution[this.importance[0].name],n=Math.abs(t)/Math.abs(e)*th;return t>0?"rgba(255, 133, 182, ".concat(n,")"):"rgba(154, 145, 255, ".concat(n,")")},percentageColor2:function(t){return t>0?"rgba(255, 133, 182)":"rgba(154, 145, 255)"},changeStock:function(t){console.log("get change stock",t),this.headerHeight=this.orgHeadHeight;var e=t.split(" ")[0];this.stock_id=e,window.history.pushState({},null,window.location.href.split("?")[0]+"?stock_id="+e),this.getStock(e)},fitHeaderSize:function(text){0!==text.length?this.headerHeight=400:this.headerHeight=this.orgHeadHeight}}}),f=h,v=(n(500),n(52)),component=Object(v.a)(f,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticStyle:{height:"100%"}},[e("div",{staticClass:"dark-muted stock-head"},[t.stock&&t.displaySearchBar?e("div",[e("SearchBar",{ref:"searchBar",attrs:{value:t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id},on:{input:t.changeStock,update:t.fitHeaderSize}})],1):t._e(),t._v(" "),e("ul",{staticClass:"uk-flex-left",staticStyle:{"margin-top":"12px","margin-bottom":"0"},attrs:{"uk-tab":""}},[t.displaySearchBar?t._e():e("li",{staticClass:"uk-disabled"},[e("a",[t._v(t._s(t.stock&&t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id))])]),t._v(" "),e("li",{class:{"uk-active":"AI技術指標"==t.tab},on:{click:function(e){t.tab="AI技術指標"}}},[e("a",[t._v("技術指標")])]),t._v(" "),e("li",{class:{"uk-active":"AI財報分析"==t.tab},on:{click:function(e){t.tab="AI財報分析"}}},[e("a",[t._v("財報分析")])])])]),t._v(" "),e("div",{staticClass:"light-muted",staticStyle:{height:"calc(100% - 32px)"}},[t.stock&&t.stock.price?e("div",{style:{height:"AI技術指標"===t.tab?"100%":"0px"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"AI技術指標"===t.tab,expression:"tab === 'AI技術指標'"}],staticStyle:{height:"100%"}},[e("TVChartContainer",{attrs:{symbol:t.stock_id,price:t.stock.price,indicators:t.stock.indicatorPrediction}})],1)]):t._e(),t._v(" "),t.stock&&"AI財報分析"===t.tab?e("div",{staticClass:"uk-padding-small"},[t.stock.fundamentalValue?e("div",{staticClass:"uk-grid uk-grid-small",attrs:{"uk-height-match":"target: > div > .uk-card","uk-grid":""}},[e("div",{staticClass:"uk-width-1-2@m"},[t.stock?e("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[e("nuxt-link",{attrs:{to:"/ml_fundamental"}},[e("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),e("h3",{staticClass:"uk-card-title"},[t._v("\n              財報排名 "+t._s(t.stock.fundamentalValue.季別)+"\n            ")]),t._v(" "),e("p",{attrs:{"uk-margin":""}},t._l(t.categories,function(n){return e("button",{key:"category_"+n,staticClass:"uk-button uk-button-small",class:n===t.currentCategory?"uk-button-primary":"uk-button-default",on:{click:function(e){t.currentCategory=n}}},[t._v("\n                "+t._s(n)+"\n              ")])}),0),t._v(" "),e("p",[t._v("\n              "+t._s(t.currentCategory)+"排名：\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"]-Math.round(t.stock.fundamentalSummaryIndustry[t.currentCategory]["綜合評分"]*t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+1)+"\n              /\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+"\n              名\n            ")]),t._v(" "),e("RadarChart",{attrs:{names:[t.stock_id],indicators:t.indicators,values:t.radarValues}})],1):t._e()]),t._v(" "),e("div",{staticClass:"uk-width-1-2@m"},[e("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[e("nuxt-link",{attrs:{to:"/ml_fundamental"}},[e("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),e("h3",{staticClass:"uk-card-title"},[t._v("財報股價影響力")]),t._v(" "),e("div",{staticClass:"uk-grid-collapse",attrs:{"uk-grid":""}},[e("div",{staticStyle:{width:"150px"}},[e("div",{staticStyle:{height:"85px","padding-bottom":"70px"},style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution.綜合評分,1)},[e("span",{staticStyle:{"font-size":"2.2em"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution.綜合評分)))]),e("span",[t._v("/年")]),t._v(" "),e("br"),t._v(" "),e("span",{staticStyle:{"font-size":"1em"}},[t._v("股價總影響力")])]),t._v(" "),t._l(t.indicators,function(i){return e("div",{key:"score"+i,staticClass:"fundamental-tab uk-text-center",style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution[i],1)},[e("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution[i],100))+" ")]),e("br"),t._v(" "),e("span",[t._v(t._s(i))]),t._v(" "),e("div",{staticClass:"line"})])})],2),t._v(" "),e("div",{staticClass:"uk-width-expand"},[e("div",{staticClass:"table-value uk-overflow-auto",staticStyle:{"max-height":"400px"}},[e("table",{staticClass:"uk-table uk-table-small top-container",staticStyle:{width:"400px","font-size":"0.8rem"}},[t._m(0),t._v(" "),e("tbody",t._l(t.importance,function(n){return e("tr",{key:n.name+"fd",style:"background:"+t.percentageColor(n.value,.7)},[e("td",[t._v(t._s(n.name))]),t._v(" "),e("td",[t._v("\n                          "+t._s(t.percentage(n.value))+"\n                        ")]),t._v(" "),e("td",[t._v("\n                          "+t._s(Math.round(100*t.stock.fundamentalValue[n.name])/100)+"\n                        ")])])}),0)])])])])],1)])]):e("div",[t._v("\n        並無財報數據喔！\n      ")])]):t._e()])])},[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("th",[t._v("名稱")]),t._v(" "),e("th",[t._v("影響力（大⇀小）")]),t._v(" "),e("th",[t._v("數值")])])}],!1,null,"e5dbce3a",null);e.default=component.exports;installComponents(component,{SearchBar:n(470).default,TVChartContainer:n(471).default,RadarChart:n(464).default})},506:function(t,e,n){t.exports={}},511:function(t,e,n){"use strict";n(487)},513:function(t,e,n){"use strict";n.r(e);n(23),n(44);var r={props:{vip:{default:!1}},data:function(){return{fakeData:[["1258 其祥-KY",-.24226804123711343,.1,"2021-01-01"],["1336 台翰",-.015452538631346768,.1,"2021-01-01"],["1413 宏洲",-.08035714285714313,.1,"2021-01-01"],["1528 恩德",-.08727858293075608,.1,"2021-01-01"],["8916 光隆",.10973451327433681,.1,"2021-01-01"],["9962 有益",.00964630225080354,.1,"2021-01-01"]]}},methods:{stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()}}},o=(n(511),n(52)),component=Object(o.a)(r,function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"uk-inline uk-width-1-1",staticStyle:{"overflow-x":"hidden"}},[e("table",{staticClass:"uk-table uk-table-divider uk-width-1-1",staticStyle:{"white-space":"nowrap"}},[t._m(0),t._v(" "),e("tbody",t._l(t.fakeData,function(n){return e("tr",{key:n[0]},[e("td",{staticClass:"uk-text-primary"},[t._v(t._s(n[0]))]),t._v(" "),e("td",{style:"color:".concat(t.stockReturnColor(n[1]))},[t._v("\n            "+t._s(Math.round(100*t.sign(n[1]))/100)+"%\n          ")]),t._v(" "),e("td",{style:"color:".concat(t.stockReturnColor(n[2]))},[t._v("\n            "+t._s(100*n[2])+" %\n          ")]),t._v(" "),e("td",{staticClass:"uk-text-right"},[t._v(t._s(n[3]))])])}),0)]),t._v(" "),e("div",{staticClass:"blur uk-position-cover uk-overlay uk-overlay-default uk-flex uk-flex-center uk-flex-middle"},[e("nuxt-link",{attrs:{to:"/pricing"}},[t.vip?e("div",{staticClass:"uk-text-center vip uk-text-primary",attrs:{"uk-scrollspy":"cls: uk-animation-kenburns; repeat: true"}},[e("span",{attrs:{"uk-icon":"icon: lock; ratio: 3.5"}}),t._v(" "),e("h2",{staticClass:"uk-text-primary"},[t._v("FinLab VIP")]),t._v(" "),e("p",[t._v("\n            學程式、練投資一切搞定\n          ")])]):t._e()]),t._v(" "),t.vip?t._e():e("a",{attrs:{"uk-toggle":"target: #login-ui"}},[t._m(1)])],1)])])},[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("名稱")]),t._v(" "),e("th",[t._v("漲跌")]),t._v(" "),e("th",[t._v("權重")]),t._v(" "),e("th",{staticClass:"uk-text-right"},[t._v("清單新增")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"uk-text-center vip uk-text-primary",attrs:{"uk-scrollspy":"cls: uk-animation-kenburns; repeat: true"}},[e("span",{attrs:{"uk-icon":"icon: lock; ratio: 3.5"}}),t._v(" "),e("h2",{staticClass:"uk-text-primary"},[t._v("FinLab")]),t._v(" "),e("p",[t._v("\n            登入查看符合條件的清單\n          ")])])}],!1,null,"96fe9148",null);e.default=component.exports},517:function(t,e,n){"use strict";n.r(e);n(65),n(86);var r=n(21),o=n(12),c=(n(74),n(431),n(23),n(30),n(44),n(193),n(64),n(38),n(43),n(6)),l=n(26),d=n(121),h=n.n(d),f=Object(c.b)({components:{},props:{uid:{default:null,type:String},strategy_id:{default:null,type:String},position_id:{default:null,type:String},positionPredefined:{default:null,type:Object}},data:function(){var t=this;return window.goto=function(link){t.$router.push(link)},{showInfo:!1,position:null,mounted:!1,tableMode:"present",displayTableMode:["當前統計","近期更動清單"],sortTableCol:"股票",sortAscending:!0,table:[],weights:{},userCap:20,colabLink:null,buildingColab:!1,next_trading_date:null,update_date:null,last_updated:null,trade_at:null,stop_loss:-1/0,take_profit:1/0,displayStockId:"",failed:!1,freq:"1d"}},mounted:function(){this.init(),this.mounted=!0},methods:{openStockPanel:function(s){this.displayStockId=s.split(" ")[0],window.scrollTo(document.getElementById("stock-id-".concat(s)).top)},showStock:function(s){this.displayStockId=s,h.a.modal("#modal-stock").show()},setSortColumn:function(col){this.sortTableCol===col?this.sortAscending=!this.sortAscending:this.sortAscending=!1,this.sortTableCol=col},init:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,o,c,d,table,p,h,f,v,_,m,y,k,x,S,C;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.strategy_id&&t.position_id||t.positionPredefined){e.next=1;break}return e.abrupt("return");case 1:if(n=null,!t.positionPredefined){e.next=2;break}n=t.positionPredefined,e.next=5;break;case 2:return e.prev=2,e.next=3,l.c.collection("users").doc(t.uid).collection("strategies").doc(t.strategy_id).collection("positions").doc(t.position_id).get();case 3:o=e.sent,c=o.data(),n="position"in c?c.position:c,console.log(n),e.next=5;break;case 4:return e.prev=4,x=e.catch(2),console.log("PositionPanel: cannot read position "+x),t.failed=!0,e.abrupt("return");case 5:d=n,t.next_trading_date=d.next_trading_date,t.update_date=d.update_date,t.trade_at=d.trade_at,t.last_updated=d.last_updated.toDate(),t.position=d,table=[],t.weights={},S=regeneratorRuntime.keys(d);case 6:if((C=S()).done){e.next=9;break}if(p=C.value,h=d[p],"object"===Object(r.a)(h)){e.next=7;break}return"freq"==p?t.freq=h:"stop_loss"===p?t.stop_loss=h:"take_profit"===p&&(t.take_profit=h),e.abrupt("continue",6);case 7:if("NaT"===h.exit_date&&(h.exit_date=""),h.exit_date,"weight"in h||"return"in h){e.next=8;break}return e.abrupt("continue",6);case 8:f={close:"收盤",open:"開盤","open|close":"盤中"},v=t.trade_at in f?f[t.trade_at]:t.trade_at,console.log(v,t.trade_at),_={hold:"持有",exit:"移除",enter:"新增",sl:"".concat(v,"停損"),tp:"".concat(v,"停利"),sl_:"已停損",tp_:"已停利","買進":"新增","賣出":"移除","停損停利":h.return>0?"".concat(v,"停利"):"".concat(v,"停損")},m=h.status in _?_[h.status]:h.status,y=0,"next_weight"in h&&(y=h.next_weight),"string"==typeof h.exit_date&-1!=h.exit_date.indexOf("T")&&(h.exit_date=h.exit_date.split("T")[0]),"string"==typeof h.entry_date&-1!=h.entry_date.indexOf("T")&&(h.entry_date=h.entry_date.split("T")[0]),k={stock:p,action:m,profit:Math.round(1e3*h.return)/10,weight:Math.round(1e3*h.weight)/10,nextWeight:Math.round(1e3*y)/10,entry_sig_date:h.entry_date,exit_sig_date:h.exit_date,entry_price:h.entry_price},table.push(k),"買進"==h.status||"entry"==h.status?t.update_date=h.entry_date:"賣出"!=h.status&&"exit"!=h.status||(t.update_date=h.exit_date),"weight"in h&&(t.weights[p]=h.weight),e.next=6;break;case 9:t.table=table;case 10:case"end":return e.stop()}},e,null,[[2,4]])}))()},stockStatusColor:function(t){var output={"新增":"gray","持有":"lightgray","移除":"gray","停損停利":"#252786"};return t in output?output[t]:"gray"},stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()},formatDate:function(t){if(null===t)return"";var e=new Date,n=t.toLocaleString("en-us").replace(/(\d+)\/(\d+)\/(\d+)/,"$3-$1-$2").replace(/(\d+):(\d+):(\d+)/,"$1:$2").split(", ");return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?n[1]:n[0]},generate_colab_script:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,r,o,c,l,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t.buildingColab=!0,n="",t.weights)o=r.match(/\d+/)[0],n+='  "'.concat(o,'" : ').concat(t.weights[r],",\n");return c=["!pip install finlab -q","from finlab.online.order_executor import OrderExecutor\n\noe = OrderExecutor.from_weights({\n\n".concat(n,"\n}, ").concat(1e4*t.userCap,")"),"# 查看欲執行的委託單：\noe._calculate_new_orders()","# 市價下單（所有委託單）\noe.create_orders()","# 更新委託單價格到市價（所有未成交委託單）\noe.create_orders()","# 刪單（所有委託單）\noe.cancel_orders()"],l=null,e.prev=1,d={sid:t.$props.strategy_id,uid:t.$props.uid,code:JSON.stringify(c)},e.next=2,t.$axios.post("https://asia-northeast1-fdata-299302.cloudfunctions.net/generate_colab_strategy",d);case 2:l=e.sent,e.next=4;break;case 3:return e.prev=3,h=e.catch(1),alert("upload colab fail: "+h.data+" "+h),console.log(h),e.abrupt("return");case 4:t.colabLink=l.data;case 5:case"end":return e.stop()}},e,null,[[1,3]])}))()}},computed:{filteredCols:function(){return this.$store.state.user&&this.$route.query.uid===this.$store.state.user.uid?"present"===this.tableMode?["名稱","漲跌","權重","進場價格","清單新增"]:["名稱","新增移除","漲跌","權重更新","清單新增","清單移除"]:"present"===this.tableMode?["名稱","漲跌","權重","清單新增"]:["名稱","新增移除","漲跌","權重更新","清單新增","清單移除"]},realNextTradingDate:function(){if(0===this.table.length)return"";var t="1977-01-01";for(var e in this.table){var n=Object.assign({},this.table[e]);n.entry_sig_date>t&&(t=n.entry_sig_date),n.exit_sig_date>t&&(t=n.exit_sig_date)}return t},rows:function(){var t=this;if(0===this.table.length)return[];var e=[];for(var n in this.table)if("present"!==this.tableMode||0!=this.table[n].weight){var r=Object.assign({},this.table[n]);e.push(r)}return e.sort(function(a,b){var e={"名稱":"stock","漲跌":"profit","新增移除":"action","權重":"weight","權重更新":"nextWeight","進場價格":"entry_price","清單新增":"entry_sig_date","清單移除":"exit_sig_date"}[t.sortTableCol];return a[e]<b[e]^t.sortAscending?1:-1}),e},unrealizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,r=this.table[e].profit*(n/100);isNaN(r)||(t+=r,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},realizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,r=this.table[e].profit*(n/100);isNaN(r)||"移除"!==this.table[e].action||(t+=r,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},hasPermission:function(){var t=this.$store.state.strategy.info.public_position,e=null!==this.$store.state.user;return this.userPermission>=t||e&&this.$store.state.user.uid===this.$props.uid},userPermission:function(){return""===this.$store.state.role?0:"free"===this.$store.state.role?1:this.$store.state.role.includes("vip")?2:void 0}},watch:{userPermission:function(){this.init()}}}),v=(n(539),n(52)),component=Object(v.a)(f,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticStyle:{"padding-bottom":"24px"}},[null===t.$store.state.user?e("div",[e("FakePosition",{attrs:{vip:!1}})],1):t._e(),t._v(" "),null!==t.$store.state.user?e("div",[e("div",{staticClass:"uk-width-1-1"},[e("ul",{staticClass:"uk-flex uk-subnav uk-subnav-divider",attrs:{"uk-margin":""}},[e("li",{staticClass:"{ 'uk-active': tableMode === 'present' }"},[e("a",{on:{click:function(e){t.tableMode="present"}}},[e("div",{staticClass:"uk-text-primary uk-padding-small",staticStyle:{border:"1px solid","border-radius":"12px"},style:{background:"present"===t.tableMode?"#f0f0fa":"white","border-color":"present"===t.tableMode?"blue":"#aaa"}},[t._v("\n              "+t._s(t.displayTableMode[0])+" "),e("br"),t._v(" "),e("span",{staticClass:"uk-text-lead uk-text-bold",style:{color:t.stockReturnColor(t.unrealizedReturn)}},[t._v("\n                "+t._s(t.sign(t.unrealizedReturn))+" %\n              ")])])])]),t._v(" "),e("li",{class:{"uk-active":"future"===t.tableMode}},[e("a",{on:{click:function(e){t.tableMode="future"}}},[e("div",{staticClass:"uk-text-primary uk-padding-small",staticStyle:{border:"1px solid","border-radius":"12px"},style:{background:"future"===t.tableMode?"#f0f0fa":"white","border-color":"future"===t.tableMode?"blue":"#aaa"}},[t._v("\n              "+t._s(t.displayTableMode[1])+" "),e("br"),t._v(" "),e("span",{staticClass:"uk-text-lead uk-text-bold",staticStyle:{color:"#777"}},[t._v(t._s(t.realNextTradingDate))])])])])]),t._v(" "),"future"==t.tableMode?e("div",{staticClass:"uk-text-small uk-card uk-padding-small uk-margin-large-top uk-margin-large-bottom shadow"},[e("p",[t._v("此策略的模擬交易的細節")]),t._v(" "),e("ul",{staticClass:"uk-list"},[e("li",[t._v("於 "+t._s("1d"===t.freq?t.next_trading_date.split("T")[0]:t.next_trading_date)+" 之後的下個交易日\n            接近\n            "+t._s("close"===t.trade_at?"收盤":"開盤")+" 時調整部位\n          ")]),t._v(" "),t.stop_loss!=-1/0||t.take_profit!=1/0?e("li",[t._v("\n\n            "+t._s(t.stop_loss!=-1/0?"停損為".concat(100*t.stop_loss,"%，"):"")+"\n            "+t._s(t.take_profit!=1/0?"停利為".concat(100*t.take_profit,"%，"):"")+"\n            每日盤後檢查，如觸發則於下個交易日的\n            "+t._s("close"===t.trade_at?"收盤":"開盤")+"\n            出場\n          ")]):t._e()])]):t._e(),t._v(" "),t.mounted?e("div",{staticClass:"uk-overflow-auto"},[0!==t.rows.length?e("table",{staticClass:"uk-table uk-table-divider",staticStyle:{"white-space":"nowrap"}},[e("thead",[e("tr",{staticClass:"uk-text-right"},t._l(t.filteredCols,function(n,r){return e("th",{key:"table-col-".concat(n),staticStyle:{"padding-left":"0"},style:0===r?"text-align:left!important":"text-align:right!important",on:{click:function(e){return t.setSortColumn(n)}}},[t._v("\n                "+t._s(n)+"\n                "),t.sortTableCol===n?e("span",[t._v(t._s(t.sortAscending?"▲":"▼"))]):t._e()])}),0)]),t._v(" "),e("tbody",{staticClass:"uk-text-right"},t._l(t.rows,function(n){return e("tr",{key:"table-row-".concat(n.stock)},[t.filteredCols.includes("名稱")?e("td",{staticClass:"uk-text-left",staticStyle:{"padding-left":"0"}},[e("div",{staticClass:"uk-text-primary",staticStyle:{cursor:"pointer"},attrs:{id:"stock-id-".concat(n.stock)},on:{click:function(e){return t.openStockPanel(n.stock)}}},[t._v("\n                  "+t._s(n.stock)+"\n                  "),"持有"!==n.action&&"移除"!==n.action&&"新增"!==n.action?e("span",{staticClass:"round-border uk-background-primary",staticStyle:{"font-size":"0.9rem",color:"white",padding:"0 10px"}},[t._v(t._s(n.action))]):t._e()])]):t._e(),t._v(" "),t.filteredCols.includes("新增移除")?e("td",{style:"color:".concat(t.stockStatusColor(n.action))},[t._v("\n                "+t._s(n.action)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("漲跌")?e("td",{style:"color:".concat(t.stockReturnColor(n.profit))},[t._v("\n                "+t._s(t.sign(n.profit))+"%\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("權重")?e("td",{style:"color:".concat(t.stockReturnColor(n.weight))},[t._v("\n                "+t._s(n.weight)+" %\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("權重更新")?e("td",{style:"color:".concat(t.stockReturnColor(n.nextWeight))},[t._v("\n                "+t._s(n.nextWeight)+" %\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("進場價格")?e("td",[t._v("\n                "+t._s(n.entry_price)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("清單新增")?e("td",[t._v("\n                "+t._s(n.entry_sig_date)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("清單移除")?e("td",[t._v("\n                "+t._s(n.exit_sig_date)+"\n              ")]):t._e()])}),0)]):e("div",[t.failed?e("FakePosition",{attrs:{vip:!0}}):e("span",[t._v("目前策略無持股喔！")])],1)]):t._e(),t._v(" "),e("div",{staticClass:"uk-margin-large-top uk-margin-large-bottom"},[e("p",[t._v("\n          不知道怎麼使用？"),e("br"),t._v("趕快來看\n          "),e("nuxt-link",{attrs:{to:"/course?cid=LqYTLW3KkXRSPnci47xe"}},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v("平台速成教學")])]),t._v("\n          ！\n        ")],1)])])]):t._e(),t._v(" "),t.displayStockId?e("div",{staticClass:"stock-panel shadow"},[e("a",{staticClass:"uk-icon-button shadow",staticStyle:{border:"1px solid #ccc",top:"3px",right:"6px",position:"absolute","z-index":"100"},attrs:{"uk-icon":"close"},on:{click:function(e){t.displayStockId=""}}}),t._v(" "),e("div",{staticStyle:{height:"100%"}},[e("StockPanel",{attrs:{stock_id:t.displayStockId,displaySearchBar:!1}})],1)]):t._e()])},[],!1,null,"2fdfffc8",null);e.default=component.exports;installComponents(component,{FakePosition:n(513).default,StockPanel:n(502).default})},539:function(t,e,n){"use strict";n(506)}}]);