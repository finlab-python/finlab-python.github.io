(window.webpackJsonp=window.webpackJsonp||[]).push([[97,3,12,42,47,49,57,60,66],{332:function(t,e,n){"use strict";var o=n(318),r=n(337),l=n(322),c=o.k,d=o.A,h=-1,f=function(){function t(option){var e=option.mappingMethod,n=option.type,r=this.option=o.d(option);this.type=n,this.mappingMethod=e,this._normalizeData=M[e];var l=t.visualHandlers[n];this.applyVisual=l.applyVisual,this.getColorMapper=l.getColorMapper,this._normalizedToVisual=l._normalizedToVisual[e],"piecewise"===e?(v(r),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,o.k(e,(function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)}))}(r)):"category"===e?r.categories?function(t){var e=t.categories,n=t.categoryMap={},r=t.visual;if(c(e,(function(t,e){n[t]=e})),!o.t(r)){var l=[];o.A(r)?c(r,(function(t,e){var o=n[e];l[null!=o?o:h]=t})):l[-1]=r,r=C(t,l)}for(var i=e.length-1;i>=0;i--)null==r[i]&&(delete n[e[i]],e.pop())}(r):v(r,!0):(o.b("linear"!==e||r.dataExtent),v(r))}return t.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},t.prototype.getNormalizer=function(){return o.c(this._normalizeData,this)},t.listVisualTypes=function(){return o.E(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(t,e,n){o.A(t)?o.k(t,e,n):e.call(n,t)},t.mapVisual=function(e,n,r){var l,c=o.t(e)?[]:o.A(e)?{}:(l=!0,null);return t.eachVisual(e,(function(t,e){var o=n.call(r,t,e);l?c=o:c[e]=o})),c},t.retrieveVisuals=function(e){var n,o={};return e&&c(t.visualHandlers,(function(t,r){e.hasOwnProperty(r)&&(o[r]=e[r],n=!0)})),n?o:null},t.prepareVisualTypes=function(t){if(o.t(t))t=t.slice();else{if(!d(t))return[];var e=[];c(t,(function(t,n){e.push(n)})),t=e}return t.sort((function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1})),t},t.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},t.findPieceIndex=function(t,e,n){for(var o,r=1/0,i=0,l=e.length;i<l;i++){var c=e[i].value;if(null!=c){if(c===t||"string"==typeof c&&c===t+"")return i;n&&v(c,i)}}for(i=0,l=e.length;i<l;i++){var d=e[i],h=d.interval,f=d.close;if(h){if(h[0]===-1/0){if(O(f[1],t,h[1]))return i}else if(h[1]===1/0){if(O(f[0],h[0],t))return i}else if(O(f[0],h[0],t)&&O(f[1],t,h[1]))return i;n&&v(h[0],i),n&&v(h[1],i)}}if(n)return t===1/0?e.length-1:t===-1/0?0:o;function v(e,n){var l=Math.abs(e-t);l<r&&(r=l,o=n)}},t.visualHandlers={color:{applyVisual:_("color"),getColorMapper:function(){var t=this.option;return o.c("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),x.call(this,t)}:function(e,n,o){var l=!!o;return!n&&(e=this._normalizeData(e)),o=r.a(e,t.parsedVisual,o),l?o:r.h(o,"rgba")},this)},_normalizedToVisual:{linear:function(t){return r.h(r.a(t,this.option.parsedVisual),"rgba")},category:x,piecewise:function(t,e){var n=S.call(this,e);return null==n&&(n=r.h(r.a(t,this.option.parsedVisual),"rgba")),n},fixed:w}},colorHue:y((function(t,e){return r.f(t,e)})),colorSaturation:y((function(t,e){return r.f(t,null,e)})),colorLightness:y((function(t,e){return r.f(t,null,null,e)})),colorAlpha:y((function(t,e){return r.e(t,e)})),decal:{applyVisual:_("decal"),_normalizedToVisual:{linear:null,category:x,piecewise:null,fixed:null}},opacity:{applyVisual:_("opacity"),_normalizedToVisual:k([0,1])},liftZ:{applyVisual:_("liftZ"),_normalizedToVisual:{linear:w,category:w,piecewise:w,fixed:w}},symbol:{applyVisual:function(t,e,n){n("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:m,category:x,piecewise:function(t,e){var n=S.call(this,e);return null==n&&(n=m.call(this,t)),n},fixed:w}},symbolSize:{applyVisual:_("symbolSize"),_normalizedToVisual:k([0,1])}},t}();function v(t,e){var n=t.visual,r=[];o.A(n)?c(n,(function(t){r.push(t)})):null!=n&&r.push(n);e||1!==r.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(r[1]=r[0]),C(t,r)}function y(t){return{applyVisual:function(e,n,o){var r=this.mapValueToVisual(e);o("color",t(n("color"),r))},_normalizedToVisual:k([0,1])}}function m(t){var e=this.option.visual;return e[Math.round(Object(l.j)(t,[0,1],[0,e.length-1],!0))]||{}}function _(t){return function(e,n,o){o(t,this.mapValueToVisual(e))}}function x(t){var e=this.option.visual;return e[this.option.loop&&t!==h?t%e.length:t]}function w(){return this.option.visual[0]}function k(t){return{linear:function(e){return Object(l.j)(e,t,this.option.visual,!0)},category:x,piecewise:function(e,n){var o=S.call(this,n);return null==o&&(o=Object(l.j)(e,t,this.option.visual,!0)),o},fixed:w}}function S(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var o=n[f.findPieceIndex(t,n)];if(o&&o.visual)return o.visual[this.type]}}function C(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=o.G(e,(function(t){return r.g(t)}))),e}var M={linear:function(t){return Object(l.j)(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=f.findPieceIndex(t,e,!0);if(null!=n)return Object(l.j)(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?h:e},fixed:o.J};function O(t,a,b){return t?a<=b:a<b}e.a=f},342:function(t,e,n){"use strict";function o(t,e,n,o,c,d){t=t||0;var h=n[1]-n[0];if(null!=c&&(c=l(c,[0,h])),null!=d&&(d=Math.max(d,null!=c?c:0)),"all"===o){var f=Math.abs(e[1]-e[0]);f=l(f,[0,h]),c=d=l(f,[c,d]),o=0}e[0]=l(e[0],n),e[1]=l(e[1],n);var v=r(e,o);e[o]+=t;var y,m=c||0,_=n.slice();return v.sign<0?_[0]+=m:_[1]-=m,e[o]=l(e[o],_),y=r(e,o),null!=c&&(y.sign!==v.sign||y.span<c)&&(e[1-o]=e[o]+v.sign*c),y=r(e,o),null!=d&&y.span>d&&(e[1-o]=e[o]+y.sign*d),e}function r(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function l(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}n.d(e,"a",(function(){return o}))},356:function(t,e,n){"use strict";function o(t,e){return t.type===e}n.d(e,"a",(function(){return o}))},362:function(t,e,n){"use strict";var o=n(319),r=n(328),l=n(375),c=n(465),d=n(329),h=n(325),f=n(363),v=n(318),y=n(326),m=n(336),_=function(t){function e(data,e,n,o){var r=t.call(this)||this;return r.updateData(data,e,n,o),r}return Object(o.a)(e,t),e.prototype._createSymbol=function(t,data,e,n,o){this.removeAll();var l=Object(r.a)(t,-1,-1,2,2,null,o);l.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),l.drift=x,this._symbolType=t,this.add(l)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Object(h.q)(this.childAt(0))},e.prototype.downplay=function(){Object(h.B)(this.childAt(0))},e.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},e.prototype.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},e.prototype.updateData=function(data,t,n,o){this.silent=!1;var r=data.getItemVisual(t,"symbol")||"circle",c=data.hostModel,d=e.getSymbolSize(data,t),h=r!==this._symbolType,f=o&&o.disableAnimation;if(h){var v=data.getItemVisual(t,"symbolKeepAspect");this._createSymbol(r,data,t,d,v)}else{(m=this.childAt(0)).silent=!1;var y={scaleX:d[0]/2,scaleY:d[1]/2};f?m.attr(y):l.f(m,y,c,t),Object(l.e)(m)}if(this._updateCommon(data,t,d,n,o),h){var m=this.childAt(0);if(!f){y={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:m.style.opacity}};m.scaleX=m.scaleY=0,m.style.opacity=0,l.a(m,y,c,t)}}f&&this.childAt(0).stopAnimation("remove"),this._seriesModel=c},e.prototype._updateCommon=function(data,t,e,n,o){var l,c,d,_,x,w,k,S,C=this.childAt(0),M=data.hostModel;if(n&&(l=n.emphasisItemStyle,c=n.blurItemStyle,d=n.selectItemStyle,_=n.focus,x=n.blurScope,w=n.labelStatesModels,k=n.hoverScale,S=n.cursorStyle),!n||data.hasItemOption){var O=n&&n.itemModel?n.itemModel:data.getItemModel(t),I=O.getModel("emphasis");l=I.getModel("itemStyle").getItemStyle(),d=O.getModel(["select","itemStyle"]).getItemStyle(),c=O.getModel(["blur","itemStyle"]).getItemStyle(),_=I.get("focus"),x=I.get("blurScope"),w=Object(y.d)(O),k=I.getShallow("scale"),S=O.getShallow("cursor")}var T=data.getItemVisual(t,"symbolRotate");C.attr("rotation",(T||0)*Math.PI/180||0);var D=Object(r.b)(data.getItemVisual(t,"symbolOffset"),e);D&&(C.x=D[0],C.y=D[1]),S&&C.attr("cursor",S);var A=data.getItemVisual(t,"style"),P=A.fill;if(C instanceof m.a){var L=C.style;C.useStyle(Object(v.m)({image:L.image,x:L.x,y:L.y,width:L.width,height:L.height},A))}else C.__isEmptyBrush?C.useStyle(Object(v.m)({},A)):C.useStyle(A),C.style.decal=null,C.setColor(P,o&&o.symbolInnerColor),C.style.strokeNoScale=!0;var j=data.getItemVisual(t,"liftZ"),R=this._z2;null!=j?null==R&&(this._z2=C.z2,C.z2+=j):null!=R&&(C.z2=R,this._z2=null);var z=o&&o.useNameLabel;Object(y.f)(C,w,{labelFetcher:M,labelDataIndex:t,defaultText:function(t){return z?data.getName(t):Object(f.b)(data,t)},inheritColor:P,defaultOpacity:A.opacity}),this._sizeX=e[0]/2,this._sizeY=e[1]/2;var N=C.ensureState("emphasis");if(N.style=l,C.ensureState("select").style=d,C.ensureState("blur").style=c,k){var V=Math.max(1.1,3/this._sizeY);N.scaleX=this._sizeX*V,N.scaleY=this._sizeY*V}this.setSymbolScale(1),Object(h.n)(this,_,x)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e){var n=this.childAt(0),o=this._seriesModel,r=Object(d.a)(this).dataIndex,c=e&&e.animation;if(this.silent=n.silent=!0,e&&e.fadeLabel){var h=n.getTextContent();h&&l.c(h,{style:{opacity:0}},o,{dataIndex:r,removeOpt:c,cb:function(){n.removeTextContent()}})}else n.removeTextContent();l.c(n,{style:{opacity:0},scaleX:0,scaleY:0},o,{dataIndex:r,cb:t,removeOpt:c})},e.getSymbolSize=function(data,t){return Object(r.c)(data.getItemVisual(t,"symbolSize"))},e}(c.a);function x(t,e){this.parent.drift(t,e)}e.a=_},363:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return c}));var o=n(409),r=n(318);function l(data,t){var e=data.mapDimensionsAll("defaultedLabel"),n=e.length;if(1===n){var r=Object(o.e)(data,t,e[0]);return null!=r?r+"":null}if(n){for(var l=[],i=0;i<e.length;i++)l.push(Object(o.e)(data,t,e[i]));return l.join(" ")}}function c(data,t){var e=data.mapDimensionsAll("defaultedLabel");if(!Object(r.t)(t))return t+"";for(var n=[],i=0;i<e.length;i++){var o=data.getDimensionIndex(e[i]);o>=0&&n.push(t[o])}return n.join(" ")}},364:function(t,e,n){},366:function(t,e,n){"use strict";n.r(e);var o=n(21),r=(n(63),n(18),n(28),n(340)),l=n(540),c=n(318);function d(t){t.eachSeriesByType("radar",(function(t){var data=t.getData(),e=[],n=t.coordinateSystem;if(n){var o=n.getIndicatorAxes();c.k(o,(function(t,r){data.each(data.mapDimension(o[r].dim),(function(t,o){e[o]=e[o]||[];var l=n.dataToPoint(t,r);e[o][r]=h(l)?l:f(n)}))})),data.each((function(t){var o=c.o(e[t],(function(t){return h(t)}))||f(n);e[t].push(o.slice()),data.setItemLayout(t,e[t])}))}}))}function h(t){return!isNaN(t[0])&&!isNaN(t[1])}function f(t){return[t.cx,t.cy]}function v(option){var t=option.polar;if(t){c.t(t)||(t=[t]);var e=[];c.k(t,(function(t,n){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),option.radar=option.radar||[],c.t(option.radar)||(option.radar=[option.radar]),option.radar.push(t)):e.push(t)})),option.polar=e}c.k(option.series,(function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)}))}var y=n(319),m=n(320),_=n(553),x=n(554),w=n(375),k=n(465),S=n(325),symbol=n(328),C=n(369),M=n(326),O=n(336),I=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.prototype.render=function(t,e,n){var o=t.coordinateSystem,r=this.group,data=t.getData(),l=this._data;function d(data,t){var e=data.getItemVisual(t,"symbol")||"circle";if("none"!==e){var n=symbol.c(data.getItemVisual(t,"symbolSize")),o=symbol.a(e,-1,-1,2,2),r=data.getItemVisual(t,"symbolRotate")||0;return o.attr({style:{strokeNoScale:!0},z2:100,scaleX:n[0]/2,scaleY:n[1]/2,rotation:r*Math.PI/180||0}),o}}function h(e,n,o,data,r,l){o.removeAll();for(var i=0;i<n.length-1;i++){var c=d(data,r);c&&(c.__dimIdx=i,e[i]?(c.setPosition(e[i]),m[l?"initProps":"updateProps"](c,{x:n[i][0],y:n[i][1]},t,r)):c.setPosition(n[i]),o.add(c))}}function f(t){return c.G(t,(function(t){return[o.cx,o.cy]}))}data.diff(l).add((function(e){var n=data.getItemLayout(e);if(n){var polygon=new _.a,polyline=new x.a,o={shape:{points:n}};polygon.shape.points=f(n),polyline.shape.points=f(n),w.a(polygon,o,t,e),w.a(polyline,o,t,e);var r=new k.a,l=new k.a;r.add(polyline),r.add(polygon),r.add(l),h(polyline.shape.points,n,l,data,e,!0),data.setItemGraphicEl(e,r)}})).update((function(e,n){var o=l.getItemGraphicEl(n),polyline=o.childAt(0),polygon=o.childAt(1),r=o.childAt(2),c={shape:{points:data.getItemLayout(e)}};c.shape.points&&(h(polyline.shape.points,c.shape.points,r,data,e,!1),Object(w.e)(polygon),Object(w.e)(polyline),w.f(polyline,c,t),w.f(polygon,c,t),data.setItemGraphicEl(e,o))})).remove((function(t){r.remove(l.getItemGraphicEl(t))})).execute(),data.eachItemGraphicEl((function(t,e){var n=data.getItemModel(e),polyline=t.childAt(0),polygon=t.childAt(1),o=t.childAt(2),l=data.getItemVisual(e,"style"),d=l.fill;r.add(t),polyline.useStyle(c.j(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:d})),Object(S.H)(polyline,n,"lineStyle"),Object(S.H)(polygon,n,"areaStyle");var h=n.getModel("areaStyle"),f=h.isEmpty()&&h.parentModel.isEmpty();polygon.ignore=f,c.k(["emphasis","select","blur"],(function(t){var e=n.getModel([t,"areaStyle"]),o=e.isEmpty()&&e.parentModel.isEmpty();polygon.ensureState(t).ignore=o&&f})),polygon.useStyle(c.j(h.getAreaStyle(),{fill:d,opacity:.7,decal:l.decal}));var v=n.getModel("emphasis"),y=v.getModel("itemStyle").getItemStyle();o.eachChild((function(t){if(t instanceof O.a){var o=t.style;t.useStyle(c.m({image:o.image,x:o.x,y:o.y,width:o.width,height:o.height},l))}else t.useStyle(l),t.setColor(d),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=c.d(y);var r=data.getStore().get(data.getDimensionIndex(t.__dimIdx),e);(null==r||isNaN(r))&&(r=""),Object(M.f)(t,Object(M.d)(n),{labelFetcher:data.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:r,inheritColor:d,defaultOpacity:l.opacity})})),Object(S.n)(t,v.get("focus"),v.get("blurScope"))})),this._data=data},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(C.a),T=I,D=n(370),A=n(384),P=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),L=n(330),j=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(y.a)(e,t),e.prototype.init=function(option){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new P(c.c(this.getData,this),c.c(this.getRawData,this))},e.prototype.getInitialData=function(option,t){return Object(A.a)(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,n){var data=this.getData(),o=this.coordinateSystem.getIndicatorAxes(),r=this.getData().getName(t),l=""===r?this.name:r,d=Object(L.e)(this,t);return Object(L.c)("section",{header:l,sortBlocks:!0,blocks:c.G(o,(function(e){var n=data.get(data.mapDimension(e.dim),t);return Object(L.c)("nameValue",{markerType:"subItem",markerColor:d,name:e.name,value:n,sortParam:n})}))})},e.prototype.getTooltipPosition=function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,o=e.getValues(c.G(n.dimensions,(function(t){return e.mapDimension(t)})),t),i=0,r=o.length;i<r;i++)if(!isNaN(o[i])){var l=n.getIndicatorAxes();return n.coordToPoint(l[i].dataToCoord(o[i]),i)}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={zlevel:0,z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(D.a),R=j,z=n(428),N=n(354),V=n(429),E=n(334),B=z.a.value;function H(t,e){return c.j({show:e},t)}var $=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),o=this.get("axisLine"),r=this.get("axisTick"),l=this.get("axisLabel"),d=this.get("axisName"),h=this.get(["axisName","show"]),f=this.get(["axisName","formatter"]),v=this.get("axisNameGap"),y=this.get("triggerEvent"),m=c.G(this.get("indicator")||[],(function(m){null!=m.max&&m.max>0&&!m.min?m.min=0:null!=m.min&&m.min<0&&!m.max&&(m.max=0);var _=d;null!=m.color&&(_=c.j({color:m.color},d));var x=c.H(c.d(m),{boundaryGap:t,splitNumber:e,scale:n,axisLine:o,axisTick:r,axisLabel:l,name:m.text,nameLocation:"end",nameGap:v,nameTextStyle:_,triggerEvent:y},!1);if(h||(x.name=""),"string"==typeof f){var w=x.name;x.name=f.replace("{value}",null!=w?w:"")}else"function"==typeof f&&(x.name=f(x.name,x));var k=new N.a(x,null,this.ecModel);return c.I(k,V.a.prototype),k.mainType="radar",k.componentIndex=this.componentIndex,k}),this);this._indicatorModels=m},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:c.H({lineStyle:{color:"#bbb"}},B.axisLine),axisLabel:H(B.axisLabel,!1),axisTick:H(B.axisTick,!1),splitLine:H(B.splitLine,!0),splitArea:H(B.splitArea,!0),indicator:[]},e}(E.a),U=$,G=n(426),F=n(550),W=n(653),Y=n(335),X=["axisLine","axisTickLabel","axisName"],J=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(y.a)(e,t),e.prototype.render=function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),o=c.G(n,(function(t){return new G.a(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}));c.k(o,(function(t){c.k(X,t.add,t),this.group.add(t.getGroup())}),this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var o=t.get("shape"),r=t.getModel("splitLine"),l=t.getModel("splitArea"),d=r.getModel("lineStyle"),h=l.getModel("areaStyle"),f=r.get("show"),v=l.get("show"),y=d.get("color"),w=h.get("color"),k=c.t(y)?y:[y],S=c.t(w)?w:[w],C=[],M=[];if("circle"===o)for(var O=n[0].getTicksCoords(),I=e.cx,T=e.cy,i=0;i<O.length;i++){if(f)C[N(C,k,i)].push(new F.a({shape:{cx:I,cy:T,r:O[i].coord}}));if(v&&i<O.length-1)M[N(M,S,i)].push(new W.a({shape:{cx:I,cy:T,r0:O[i].coord,r:O[i+1].coord}}))}else{var D,A=c.G(n,(function(t,n){var o=t.getTicksCoords();return D=null==D?o.length-1:Math.min(o.length-1,D),c.G(o,(function(t){return e.coordToPoint(t.coord,n)}))})),P=[];for(i=0;i<=D;i++){for(var L=[],j=0;j<n.length;j++)L.push(A[j][i]);if(L[0]&&L.push(L[0].slice()),f)C[N(C,k,i)].push(new x.a({shape:{points:L}}));if(v&&P)M[N(M,S,i-1)].push(new _.a({shape:{points:L.concat(P)}}));P=L.slice().reverse()}}var R=d.getLineStyle(),z=h.getAreaStyle();c.k(M,(function(t,e){this.group.add(m.mergePath(t,{style:c.j({stroke:"none",fill:S[e%S.length]},z),silent:!0}))}),this),c.k(C,(function(t,e){this.group.add(m.mergePath(t,{style:c.j({fill:"none",stroke:k[e%k.length]},R),silent:!0}))}),this)}function N(t,e,n){var o=n%e.length;return t[o]=t[o]||[],o}},e.type="radar",e}(Y.a),Z=J,K=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;return r.type="value",r.angle=0,r.name="",r}return Object(y.a)(e,t),e}(n(433).a),Q=n(418),tt=n(322),et=n(351),it=n(387),nt=function(){function t(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=Object(c.G)(t.getIndicatorModels(),(function(t,e){var n="indicator_"+e,o=new K(n,new Q.a);return o.name=t.get("name"),o.model=t,t.axis=o,this.dimensions.push(n),o}),this),this.resize(t,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,o=Math.sqrt(e*e+n*n);e/=o,n/=o;for(var r,l=Math.atan2(-n,e),c=1/0,d=-1,i=0;i<this._indicatorAxes.length;i++){var h=this._indicatorAxes[i],f=Math.abs(l-h.angle);f<c&&(r=h,d=i,c=f)}return[d,+(r&&r.coordToData(o))]},t.prototype.resize=function(t,e){var n=t.get("center"),o=e.getWidth(),r=e.getHeight(),l=Math.min(o,r)/2;this.cx=tt.n(n[0],o),this.cy=tt.n(n[1],r),this.startAngle=t.get("startAngle")*Math.PI/180;var d=t.get("radius");"string"!=typeof d&&"number"!=typeof d||(d=[0,d]),this.r0=tt.n(d[0],l),this.r=tt.n(d[1],l),Object(c.k)(this._indicatorAxes,(function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n}),this)},t.prototype.update=function(t,e){var n=this._indicatorAxes,o=this._model;Object(c.k)(n,(function(t){t.scale.setExtent(1/0,-1/0)})),t.eachSeriesByType("radar",(function(e,r){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===o){var data=e.getData();Object(c.k)(n,(function(t){t.scale.unionExtentFromData(data,data.mapDimension(t.dim))}))}}),this);var r=o.get("splitNumber");function l(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),n=t/e;return 2===n?n=5:n*=2,n*e}Object(c.k)(n,(function(t,e){var n=Object(et.f)(t.scale,t.model).extent;Object(et.i)(t.scale,t.model);var o=t.model,c=t.scale,d=Object(it.b)(c,o.get("min",!0)),h=Object(it.b)(c,o.get("max",!0)),f=c.getInterval();if(null!=d&&null!=h)c.setExtent(+d,+h),c.setInterval((h-d)/r);else if(null!=d){var v=void 0;do{v=d+f*r,c.setExtent(+d,v),c.setInterval(f),f=l(f)}while(v<n[1]&&isFinite(v)&&isFinite(n[1]))}else if(null!=h){var y=void 0;do{y=h-f*r,c.setExtent(y,+h),c.setInterval(f),f=l(f)}while(y>n[0]&&isFinite(y)&&isFinite(n[0]))}else{c.getTicks().length-1>r&&(f=l(f));v=Math.ceil(n[1]/f)*f,y=tt.r(v-f*r);c.setExtent(y,v),c.setInterval(f)}}))},t.prototype.convertToPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.create=function(e,n){var o=[];return e.eachComponent("radar",(function(r){var l=new t(r,e,n);o.push(l),r.coordinateSystem=l})),e.eachSeriesByType("radar",(function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=o[t.get("radarIndex")||0])})),o},t.dimensions=[],t}();function at(t){t.registerCoordinateSystem("radar",nt),t.registerComponentModel(U),t.registerComponentView(Z),t.registerVisual({seriesType:"radar",reset:function(t){var data=t.getData();data.each((function(t){data.setItemVisual(t,"legendIcon","roundRect")})),data.setVisual("legendIcon","roundRect")}})}var ot=n(411),st=n(870),lt=n(868),ut=n(358);Object(r.a)([l.a,ot.a,st.a,function(t){Object(r.a)(at),t.registerChartView(T),t.registerSeriesModel(R),t.registerLayout(d),t.registerProcessor({seriesType:"radar",reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var data=t.getData();data.filterSelf((function(t){for(var e=data.getName(t),i=0;i<n.length;i++)if(!n[i].isSelected(e))return!1;return!0}))}}}),t.registerPreprocessor(v)},lt.a]);var ct={name:"HelloWorld",props:{height:"300px",names:{default:function(){return null}},indicators:{default:function(){return["a","b","c"]}},values:{default:function(){return{values:{a:.5,b:.8,c:.3}}}}},components:{VChart:ut.b},provide:Object(o.a)({},ut.a,"light"),data:function(){return{}},mounted:function(){},computed:{option:function(){return{scale:{pointLabels:{fontSize:20}},color:["rgba(255, 133, 182, 0.5)","#FFE43488","#56A3F188","#FF917C88"],legend:{data:this.seriesNames,bottom:0,right:0,textStyle:{fontSize:18}},radar:{indicator:this.indicators_,shape:"circle",startAngle:135,axisName:{fontSize:18}},series:[{type:"radar",data:this.valueData}]}},indicators_:function(){return this.indicators.map((function(t){return{name:t,max:1}}))},seriesNames:function(){if(this.names)return this.names;var t=[];for(var e in this.values)t.push(e);return t},valueData:function(){var label={show:1==this.seriesNames.length,formatter:function(t){return Math.round(1e3*t.value)/10+"%"}},t={},e=[];for(var n in this.values){var o=this.values[n],r=[];for(var i in this.indicators)r.push(o[this.indicators[i]]);e.push({value:r,name:this.seriesNames[n],label:label,areaStyle:t,textStyle:{color:"black",fontSize:20}})}return e}}},ht=n(41),component=Object(ht.a)(ct,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-chart",{staticClass:"chart",staticStyle:{"z-index":"0"},style:"height:300px",attrs:{option:t.option,autoresize:""}})}),[],!1,null,"768cd074",null);e.default=component.exports},371:function(t,e,n){"use strict";var o=n(465),r=n(375),l=n(362),c=n(318),d=n(326);function h(data,t,e,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(e))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&"none"!==data.getItemVisual(e,"symbol")}function f(t){return null==t||Object(c.A)(t)||(t={isIgnore:t}),t||{}}function v(data){var t=data.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),hoverScale:e.get("scale"),labelStatesModels:Object(d.d)(t),cursorStyle:t.get("cursor")}}var y=function(){function t(t){this.group=new o.a,this._SymbolCtor=t||l.a}return t.prototype.updateData=function(data,t){t=f(t);var e=this.group,n=data.hostModel,o=this._data,l=this._SymbolCtor,c=t.disableAnimation,d=v(data),y={disableAnimation:c},m=t.getSymbolPoint||function(t){return data.getItemLayout(t)};o||e.removeAll(),data.diff(o).add((function(n){var o=m(n);if(h(data,o,n,t)){var r=new l(data,n,d,y);r.setPosition(o),data.setItemGraphicEl(n,r),e.add(r)}})).update((function(f,v){var _=o.getItemGraphicEl(v),x=m(f);if(h(data,x,f,t)){var w=data.getItemVisual(f,"symbol")||"circle",k=_&&_.getSymbolType&&_.getSymbolType();if(!_||k&&k!==w)e.remove(_),(_=new l(data,f,d,y)).setPosition(x);else{_.updateData(data,f,d,y);var S={x:x[0],y:x[1]};c?_.attr(S):r.f(_,S,n)}e.add(_),data.setItemGraphicEl(f,_)}else e.remove(_)})).remove((function(t){var n=o.getItemGraphicEl(t);n&&n.fadeOut((function(){e.remove(n)}))})).execute(),this._getSymbolPoint=m,this._data=data},t.prototype.isPersistent=function(){return!0},t.prototype.updateLayout=function(){var t=this,data=this._data;data&&data.eachItemGraphicEl((function(e,n){var o=t._getSymbolPoint(n);e.setPosition(o),e.markRedraw()}))},t.prototype.incrementalPrepareUpdate=function(data){this._seriesScope=v(data),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,data,e){function n(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}e=f(e);for(var o=t.start;o<t.end;o++){var r=data.getItemLayout(o);if(h(data,r,o,e)){var l=new this._SymbolCtor(data,o,this._seriesScope);l.traverse(n),l.setPosition(r),this.group.add(l),data.setItemGraphicEl(o,l)}}},t.prototype.remove=function(t){var e=this.group,data=this._data;data&&t?data.eachItemGraphicEl((function(t){t.fadeOut((function(){e.remove(t)}))})):e.removeAll()},t}();e.a=y},372:function(t,e,n){"use strict";n.r(e);n(44),n(47),n(60);var o=n(19),r={props:{value:{type:String},autocomplete:{type:String,default:"true"}},data:function(){return{sid:[],sdict:{},candidates:[],currentStock:"",text:"",target:0,composing:!1,history:[]}},created:function(){this.text=this.value;var t=this;o.c.collection("twStock").doc("searchTree").get().then((function(e){if(e.exists){var data=e.data();t.sdict=data.searchTree.sdict,t.slist=data.searchTree.slist}else console.log("cannot find strategy menu")}))},methods:{moveCursor:function(t){0!=this.candidates.length?this.target+=t:this.target=-1},selectStock:function(t){t.preventDefault(),-1!=this.target&&this.chooseStock(this.candidates[this.target])},chooseStock:function(s){if(!this.composing){var t=this;console.log("emit",s),this.$emit("input",s),this.history.unshift(s),this.history=this.history.filter((function(e,n){return t.history.indexOf(e)==n})),this.history.length>3&&(this.history=[this.history[0],this.history[1],this.history[2]]),this.currentStock=s,this.candidates=[],this.text=s,this.target=-1,document.getElementById("search-box").blur()}},clearStock:function(t){this.text="",this.candidates=[],this.target=-1,this.$emit("update","")},digitupdate:function(t){var s,e=t.target.value;this.$emit("update",e),(s=e).replace(/[^\x00-\xff]/g,"rr").length==s.length&&this.update(t)},update:function(t){var e=event.target.value;if(this.text=e,""!=e){var n=this.sdict;for(var i in e){var o=e[i];if(!(o in n))return void(this.candidates=["找不到此股票代號"]);n=n[o]}for(var r=[],l=[n];l&&0!=l.length&&!((n=l.pop())===parseInt(n,10)&&(r.push(this.slist[n]),r.length>20));)for(var c in n)l.unshift(n[c]);this.candidates=r,1==this.candidates.length&&this.chooseStock(this.candidates[0])}else this.candidates=[]}}},l=(n(388),n(41)),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{staticClass:"uk-search uk-search-navbar uk-card uk-flex",staticStyle:{width:"100%",border:"1px solid #ddd",background:"rgba(255, 255, 255, 0.2)"}},[n("span",{staticStyle:{"padding-left":"10px"},attrs:{"uk-search-icon":""}}),t._v(" "),n("input",{staticClass:"uk-search-input uk-text-primary uk-text-light",staticStyle:{"padding-left":"60px"},attrs:{id:"search-box",name:"Search",type:"search",placeholder:"股票代號",autocomplete:"off"},domProps:{value:t.text},on:{change:t.digitupdate,input:t.digitupdate,compositionstart:function(e){t.composing=!0},compositionend:function(e){t.composing=!1,t.update()},focus:t.clearStock,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.moveCursor(1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.moveCursor(-1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.selectStock.apply(null,arguments))}]}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.candidates.length>0&&"true"==t.autocomplete,expression:"candidates.length > 0 && autocomplete == 'true'"}],staticClass:"uk-flex uk-flex-wrap uk-flex-wrap-around"},t._l(t.candidates,(function(e,i){return n("div",{key:e,staticClass:"\n          uk-card uk-card-default uk-card-body uk-padding-small uk-card-hover\n        ",staticStyle:{cursor:"pointer","border-radius":"10px",margin:"20px 20px 0 0"},on:{click:function(n){return t.chooseStock(e)}}},[t._v("\n        "+t._s(i==t.target?e+" * ":e)+"\n      ")])})),0)])}),[],!1,null,"3c0325ef",null);e.default=component.exports},373:function(t,e,n){"use strict";n.r(e);n(228),n(47),n(67),n(157),n(60),n(18),n(68),n(117);var o={name:"TVChartContainer",props:{symbol:{default:"stock",type:String},price:{default:function(){},type:Object},indicators:{default:function(){},type:Object},interval:{default:"D",type:String},containerId:{default:"tv_chart_container",type:String},datafeedUrl:{default:"https://demo_feed.tradingview.com",type:String},libraryPath:{default:"/charting_library/",type:String},chartsStorageUrl:{default:"https://saveload.tradingview.com",type:String},chartsStorageApiVersion:{default:"1.1",type:String},clientId:{default:"tradingview.com",type:String},userId:{default:"public_user_id",type:String},fullscreen:{default:!1,type:Boolean},autosize:{default:!0,type:Boolean},studiesOverrides:{type:Object,default:function(){return{}}}},data:function(){return{isReady:!1,predictionOption:"未來20天"}},watch:{price:function(){null!==this.tvWidget&&this.isReady&&this.tvWidget.setSymbol(this.$props.symbol,"1D")},indicators:function(){console.log("change indicator"),this.isReady&&this.initStudies()}},tvWidget:null,mounted:function(){this.deleteTvWidget(),this.createTvWidget(),this.predictionOption=localStorage.getItem("predictionOption"),null===this.predictionOption&&(this.predictionOption="未來10天")},destroyed:function(){this.deleteTvWidget()},methods:{initStudies:function(){null!==this.tvWidget&&(console.log("----aaa----"),console.log(this.predictionOption),this.tvWidget.activeChart().removeAllStudies(),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[5]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[20]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[60]),this.tvWidget.activeChart().createStudy("Volume"),this.tvWidget.activeChart().createStudy("Prediction ML",!1,!1,[this.predictionOption]))},deleteTvWidget:function(){this.tvWidget&&(this.tvWidget.remove(),this.tvWidget=null,this.isReady=!1)},createTvWidget:function(){var t,e=this,n=this.createDatafeed(),o={symbol:this.symbol,datafeed:n,interval:this.interval,container:this.containerId,library_path:this.libraryPath,locale:(t=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search),(null===t?null:decodeURIComponent(t[1].replace(/\+/g," ")))||"zh_TW"),disabled_features:["header_widget","header_widget_dom_node","compare_symbol","display_market_status","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","timeframes_toolbar","use_localstorage_for_settings","volume_force_overlay","header_saveload","go_to_date","edit_buttons_in_legend","symbol_search_hot_key","border_around_the_chart","control_bar","context_menus","show_chart_property_page","countdown","study_market_minimized","main_series_scale_menu","display_market_status","remove_library_container_border","chart_property_page_style","property_pages","chart_property_page_scales","chart_property_page_background","source_selection_markers"],detail:!0,enabled_features:["hide_left_toolbar_by_default"],charts_storage_url:this.chartsStorageUrl,charts_storage_api_version:this.chartsStorageApiVersion,client_id:this.clientId,user_id:this.userId,fullscreen:this.fullscreen,autosize:!0,studies_overrides:this.studiesOverrides,debug:!1,custom_indicators_getter:function(t){return Promise.resolve([{name:"Prediction ML",metainfo:{_metainfoVersion:40,id:"Prediction ML@tv-basicstudies-1",scriptIdPart:"",name:"Prediction ML",description:"Prediction ML",shortDescription:"AI 年化影響力預測",is_hidden_study:!1,is_price_study:!1,isCustomIndicator:!0,format:{type:"percent",precision:1},plots:[{id:"EMA",type:"line"},{id:"plot_1",type:"colorer",target:"EMA",palette:"paletteId1"}],defaults:{styles:{EMA:{linestyle:0,visible:!0,linewidth:1,plottype:2,trackPrice:!1}},palettes:{paletteId1:{colors:{0:{color:"#ff267d",width:3,style:0},1:{color:"#5A4FCF",width:3,style:0},2:{color:"#6b5eff",width:3,style:0}}}},precision:4,inputs:{options:"未來5天"}},palettes:{paletteId1:{colors:{0:{name:"First color"},1:{name:"Second color"}}}},styles:{EMA:{title:"ML APR",histogramBase:0}},inputs:[{id:"options",type:"text",name:"預測",defval:e.predictionOption,options:["未來5天","未來10天","未來20天"]}]},constructor:function(){this.init=function(t,n){console.log("------test------"),localStorage.setItem("predictionOption",n(0)),e.predictionOption=n(0);var symbol={"未來5天":"rank5","未來10天":"rank10","未來20天":"rank20"}[n(0)]+"-"+e.symbol;t.new_sym(symbol,"1D","1D")},this.main=function(e,n){this._context=e,this._input=n,this._context.select_sym(1);var o=t.Std.close(this._context);return[100*o,o>0?0:2]}}}])}},r=this.$TVChart.Widget;this.isReady=!1;var l=new r(o);this.tvWidget=l,l.onChartReady((function(){l.activeChart().dataReady((function(){e.initStudies(),e.isReady=!0;var iframe=document.getElementsByTagName("iframe")[0],t=document.getElementsByClassName("TVChartContainer")[0];iframe.style.height=t.offsetHeight+"px"}))}))},createDatafeed:function(){var t=this,e=this;return{onReady:function(t){var e={supported_resolutions:["1D","1W","1M"],exchanges:[{value:"TPEX",name:"TPEX",desc:"TPEX"}],symbols_types:[{name:"stock",value:"stock"}]};console.log("[onReady]: Method call"),setTimeout((function(){return t(e)}))},searchSymbols:function(t,e,n,o){console.log("[searchSymbol]: Method call",symbolName)},resolveSymbol:function(e,n,o){var r=e===t.$props.symbol?e:e+"-"+t.$props.symbol,l={ticker:r,name:r,description:r,type:"TYPE",session:"0900-1330",timezone:"Asia/Taipei",exchange:"TWII",minmov:.01,pricescale:.01,has_intraday:!1,has_weekly_and_monthly:!1,supported_resolutions:["1D","1W","1M"]};setTimeout((function(){return n(l)}),0),console.log("[resolveSymbol]: Method call",e)},getBars:function(n,o,r,l,c){if(console.log("getBars",n),n.ticker==t.$props.symbol){var p=[];for(var i in e.$props.price.close){var d=e.$props.price.date[i].seconds;if(!(d<r.from||d>=r.to)){var h={open:e.$props.price.open[i],close:e.$props.price.close[i],high:e.$props.price.high[i],low:e.$props.price.low[i],volume:e.$props.price.volume[i],time:1e3*d};isNaN(h.open)||p.push(h)}}l(p,{noData:0===p.length})}else{var f=t.$props.indicators[n.ticker.split("-")[0]],v=t.$props.indicators.date,y=[];for(var m in f){var _=v[m].seconds;if(!(_<r.from||_>=r.to)){var x={open:f[m],close:f[m],high:f[m],low:f[m],time:1e3*_};isNaN(x.open)||y.push(x)}}l(y,{noData:0===y.length})}},subscribeBars:function(t,e,n,o,r){console.log("[subscribeBars]: Method call with subscribeUID:",o)},unsubscribeBars:function(t){console.log("[unsubscribeBars]: Method call with subscriberUID:",t)}}}}},r=n(41),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"TVChartContainer",staticStyle:{height:"100%"},attrs:{id:t.containerId}})}),[],!1,null,null,null);e.default=component.exports},374:function(t,e,n){},378:function(t,e,n){"use strict";var o=n(318),r=n(348),l=n(381),c=n(424),d=n(321),h=n(396),f=function(t){this.coordSysDims=[],this.axisMap=Object(o.g)(),this.categoryAxisMap=Object(o.g)(),this.coordSysName=t};var v={cartesian2d:function(t,e,n,o){var r=t.getReferringComponents("xAxis",d.b).models[0],l=t.getReferringComponents("yAxis",d.b).models[0];e.coordSysDims=["x","y"],n.set("x",r),n.set("y",l),y(r)&&(o.set("x",r),e.firstCategoryDimIndex=0),y(l)&&(o.set("y",l),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,o){var r=t.getReferringComponents("singleAxis",d.b).models[0];e.coordSysDims=["single"],n.set("single",r),y(r)&&(o.set("single",r),e.firstCategoryDimIndex=0)},polar:function(t,e,n,o){var r=t.getReferringComponents("polar",d.b).models[0],l=r.findAxisModel("radiusAxis"),c=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",l),n.set("angle",c),y(l)&&(o.set("radius",l),e.firstCategoryDimIndex=0),y(c)&&(o.set("angle",c),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,o){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var l=t.ecModel,c=l.getComponent("parallel",t.get("parallelIndex")),d=e.coordSysDims=c.dimensions.slice();Object(o.k)(c.parallelAxisIndex,(function(t,o){var c=l.getComponent("parallelAxis",t),h=d[o];n.set(h,c),y(c)&&(r.set(h,c),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=o))}))}};function y(t){return"category"===t.get("type")}var m=n(391),_=n(338),x=n(408),w=n(389);e.a=function(t,e,n){n=n||{};var source,y=e.getSourceManager(),k=!1;t?(k=!0,source=Object(m.c)(t)):k=(source=y.getSource()).sourceFormat===w.f;var S=function(t){var e=t.get("coordinateSystem"),n=new f(e),o=v[e];if(o)return o(t,n,n.axisMap,n.categoryAxisMap),n}(e),C=function(t,e){var n,r=t.get("coordinateSystem"),l=h.a.get(r);return e&&e.coordSysDims&&(n=o.G(e.coordSysDims,(function(t){var n={name:t},o=e.axisMap.get(t);if(o){var r=o.get("type");n.type=Object(c.a)(r)}return n}))),n||(n=l&&(l.getDimensionsInfo?l.getDimensionsInfo():l.dimensions.slice())||["x","y"]),n}(e,S),M=n.useEncodeDefaulter,O=o.w(M)?M:M?o.i(x.c,C,e):null,I={coordDimensions:C,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:O,canOmitUnusedDimensions:!k},T=Object(l.a)(source,I),D=function(t,e,n){var r,l;return n&&o.k(t,(function(t,o){var c=t.coordDim,d=n.categoryAxisMap.get(c);d&&(null==r&&(r=o),t.ordinalMeta=d.getOrdinalMeta(),e&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(l=!0)})),l||null==r||(t[r].otherDims.itemName=0),r}(T.dimensions,n.createInvertedIndices,S),A=k?null:y.getSharedDataStore(T),P=Object(_.a)(e,{schema:T,store:A}),data=new r.a(T,e);data.setCalculationInfo(P);var L=null!=D&&function(source){if(source.sourceFormat===w.f){var t=function(t){var i=0;for(;i<t.length&&null==t[i];)i++;return t[i]}(source.data||[]);return null!=t&&!o.t(Object(d.h)(t))}}(source)?function(t,e,n,o){return o===D?n:this.defaultDimValueGetter(t,e,n,o)}:null;return data.hasItemOption=!1,data.initData(k?source:A,null,L),data}},384:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n(381),r=n(348),l=n(318);function c(t,e,n){e=Object(l.t)(e)&&{coordDimensions:e}||Object(l.m)({encodeDefine:t.getEncode()},e);var source=t.getSource(),c=Object(o.a)(source,e).dimensions,d=new r.a(c,t);return d.initData(source,n),d}},385:function(t,e,n){},388:function(t,e,n){"use strict";n(364)},392:function(t,e,n){"use strict";n(374)},394:function(t,e,n){"use strict";n.r(e);n(42),n(333),n(155),n(32),n(47),n(117);var o=n(323),r=n(19),l=n(366),c=n(372),d=n(373),h=Object(o.c)({name:"line-chart",components:{RadarChart:l.default,SearchBar:c.default,TVChartContainer:d.default},props:{stock_id:{default:"1101"},displaySearchBar:{default:!0}},data:function(){return{stock:null,tab:"AI技術指標",currentCategory:null,indicators:["成長率","獲利能力","單位基本面","安全性"],headerHeight:64,orgHeadHeight:64}},mounted:function(){this.headMaxHeight=this.orgHeadHeight,this.getStock(this.stock_id)},computed:{stockEvaluation:function(){if(null===this.stock)return null},categories:function(){var t=this;return this.stock&&this.stock.fundamentalSummaryIndustry?Object.keys(this.stock.fundamentalSummaryIndustry).sort((function(a,b){return-t.stock.fundamentalSummaryIndustry[a]["檔數"]+t.stock.fundamentalSummaryIndustry[b]["檔數"]})).splice(0,3):[]},radarValues:function(){var t={};return t[this.stock_id]=this.stock.fundamentalSummaryIndustry[this.currentCategory],t},importance:function(){if(!this.stock)return[];var t=[];for(var e in this.stock.fundamentalContribution)t.push({name:e,value:this.stock.fundamentalContribution[e]});return t.sort((function(a,b){return Math.abs(b.value)-Math.abs(a.value)}))}},watch:{categories:function(){this.categories&&this.stock&&(this.currentCategory=this.categories[0])},stock_id:{handler:function(t){console.log("stock panel id change!",t),this.getStock(t)},deep:!0}},methods:{getStock:function(t){if(""!==t){var e=r.c.collection("twStock").doc(t),n=this;e.get().then((function(t){t.exists&&(n.stock=t.data(),console.log(n.stock))})).catch((function(e){console.log("Error getting document:",e),console.log(t)}))}},percentage:function(t){return t>0?"+"+Math.round(10*t)/10+"%":Math.round(10*t)/10+"%"},percentageColor:function(t){var th=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this.stock.fundamentalContribution[this.importance[0].name],n=Math.abs(t)/Math.abs(e)*th;return t>0?"rgba(255, 133, 182, ".concat(n,")"):"rgba(154, 145, 255, ".concat(n,")")},percentageColor2:function(t){return t>0?"rgba(255, 133, 182)":"rgba(154, 145, 255)"},changeStock:function(t){console.log("get change stock",t),this.headerHeight=this.orgHeadHeight;var e=t.split(" ")[0];this.stock_id=e,window.history.pushState({},null,window.location.href.split("?")[0]+"?stock_id="+e),this.getStock(e)},fitHeaderSize:function(text){0!==text.length?this.headerHeight=400:this.headerHeight=this.orgHeadHeight}}}),f=h,v=(n(392),n(41)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[n("div",{staticClass:"dark-muted stock-head"},[t.stock&&t.displaySearchBar?n("div",[n("SearchBar",{ref:"searchBar",attrs:{value:t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id},on:{input:t.changeStock,update:t.fitHeaderSize}})],1):t._e(),t._v(" "),n("ul",{staticClass:"uk-flex-left",staticStyle:{"margin-top":"12px","margin-bottom":"0"},attrs:{"uk-tab":""}},[t.displaySearchBar?t._e():n("li",{staticClass:"uk-disabled"},[n("a",[t._v(t._s(t.stock&&t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id))])]),t._v(" "),n("li",{class:{"uk-active":"AI技術指標"==t.tab},on:{click:function(e){t.tab="AI技術指標"}}},[n("a",[t._v("技術指標")])]),t._v(" "),n("li",{class:{"uk-active":"AI財報分析"==t.tab},on:{click:function(e){t.tab="AI財報分析"}}},[n("a",[t._v("財報分析")])])])]),t._v(" "),n("div",{staticClass:"light-muted",staticStyle:{height:"calc(100% - 32px)"}},[t.stock&&t.stock.price?n("div",{style:{height:"AI技術指標"===t.tab?"100%":"0px"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"AI技術指標"===t.tab,expression:"tab === 'AI技術指標'"}],staticStyle:{height:"100%"}},[n("TVChartContainer",{attrs:{symbol:t.stock_id,price:t.stock.price,indicators:t.stock.indicatorPrediction}})],1)]):t._e(),t._v(" "),t.stock&&"AI財報分析"===t.tab?n("div",{staticClass:"uk-padding-small"},[t.stock.fundamentalValue?n("div",{staticClass:"uk-grid uk-grid-small",attrs:{"uk-height-match":"target: > div > .uk-card","uk-grid":""}},[n("div",{staticClass:"uk-width-1-2@m"},[t.stock?n("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[n("nuxt-link",{attrs:{to:"/ml_fundamental"}},[n("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),n("h3",{staticClass:"uk-card-title"},[t._v("\n              財報排名 "+t._s(t.stock.fundamentalValue.季別)+"\n            ")]),t._v(" "),n("p",{attrs:{"uk-margin":""}},t._l(t.categories,(function(e){return n("button",{key:"category_"+e,staticClass:"uk-button uk-button-small",class:e===t.currentCategory?"uk-button-primary":"uk-button-default",on:{click:function(n){t.currentCategory=e}}},[t._v("\n                "+t._s(e)+"\n              ")])})),0),t._v(" "),n("p",[t._v("\n              "+t._s(t.currentCategory)+"排名：\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"]-Math.round(t.stock.fundamentalSummaryIndustry[t.currentCategory]["綜合評分"]*t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+1)+"\n              /\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+"\n              名\n            ")]),t._v(" "),n("RadarChart",{attrs:{names:[t.stock_id],indicators:t.indicators,values:t.radarValues}})],1):t._e()]),t._v(" "),n("div",{staticClass:"uk-width-1-2@m"},[n("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[n("nuxt-link",{attrs:{to:"/ml_fundamental"}},[n("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),n("h3",{staticClass:"uk-card-title"},[t._v("財報股價影響力")]),t._v(" "),n("div",{staticClass:"uk-grid-collapse",attrs:{"uk-grid":""}},[n("div",{staticStyle:{width:"150px"}},[n("div",{staticStyle:{height:"85px","padding-bottom":"70px"},style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution.綜合評分,1)},[n("span",{staticStyle:{"font-size":"2.2em"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution.綜合評分)))]),n("span",[t._v("/年")]),t._v(" "),n("br"),t._v(" "),n("span",{staticStyle:{"font-size":"1em"}},[t._v("股價總影響力")])]),t._v(" "),t._l(t.indicators,(function(i){return n("div",{key:"score"+i,staticClass:"fundamental-tab uk-text-center",style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution[i],1)},[n("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution[i],100))+" ")]),n("br"),t._v(" "),n("span",[t._v(t._s(i))]),t._v(" "),n("div",{staticClass:"line"})])}))],2),t._v(" "),n("div",{staticClass:"uk-width-expand"},[n("div",{staticClass:"table-value uk-overflow-auto",staticStyle:{"max-height":"400px"}},[n("table",{staticClass:"uk-table uk-table-small top-container",staticStyle:{width:"400px","font-size":"0.8rem"}},[t._m(0),t._v(" "),n("tbody",t._l(t.importance,(function(e){return n("tr",{key:e.name+"fd",style:"background:"+t.percentageColor(e.value,.7)},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v("\n                          "+t._s(t.percentage(e.value))+"\n                        ")]),t._v(" "),n("td",[t._v("\n                          "+t._s(Math.round(100*t.stock.fundamentalValue[e.name])/100)+"\n                        ")])])})),0)])])])])],1)])]):n("div",[t._v("\n        並無財報數據喔！\n      ")])]):t._e()])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("名稱")]),t._v(" "),n("th",[t._v("影響力（大⇀小）")]),t._v(" "),n("th",[t._v("數值")])])}],!1,null,"4f9ffd63",null);e.default=component.exports;installComponents(component,{SearchBar:n(372).default,TVChartContainer:n(373).default,RadarChart:n(366).default})},406:function(t,e,n){},407:function(t,e,n){},411:function(t,e,n){"use strict";n.d(e,"a",(function(){return pt}));var o=n(401),r=n(340),l=n(319),c=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(l.a)(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(n(334).a),d=c,h=n(318),f=n(324),v=n(337),y=n(339),m=n(402),_=n(327);function x(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function w(t){if(f.a.domSupported)for(var style=document.documentElement.style,i=0,e=t.length;i<e;i++)if(t[i]in style)return t[i]}var k=w(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),S=w(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function C(t,e){if(!t)return e;e=Object(_.h)(e,!0);var n=t.indexOf(e);return(t=-1===n?e:"-"+t.slice(0,n)+"-"+e).toLowerCase()}var M=n(330),O=C(S,"transition"),I=C(k,"transform"),T="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(f.a.transform3dSupported?"will-change:transform;":"");function D(t,e,n){var o=t.toFixed(0)+"px",r=e.toFixed(0)+"px";if(!f.a.transformSupported)return n?"top:"+r+";left:"+o+";":[["top",r],["left",o]];var l=f.a.transform3dSupported,c="translate"+(l?"3d":"")+"("+o+","+r+(l?",0":"")+")";return n?"top:0;left:0;"+I+":"+c+";":[["top",0],["left",0],[k,c]]}function A(t,e,n){var o=[],r=t.get("transitionDuration"),l=t.get("backgroundColor"),c=t.get("shadowBlur"),d=t.get("shadowColor"),y=t.get("shadowOffsetX"),m=t.get("shadowOffsetY"),x=t.getModel("textStyle"),w=Object(M.d)(t,"html"),k=y+"px "+m+"px "+c+"px "+d;return o.push("box-shadow:"+k),e&&r&&o.push(function(t,e){var n="cubic-bezier(0.23,1,0.32,1)",o=" "+t/2+"s "+n,r="opacity"+o+",visibility"+o;return e||(o=" "+t+"s "+n,r+=f.a.transformSupported?","+I+o:",left"+o+",top"+o),O+":"+r}(r,n)),l&&(f.a.canvasSupported?o.push("background-color:"+l):(o.push("background-color:#"+Object(v.i)(l)),o.push("filter:alpha(opacity=70)"))),Object(h.k)(["width","color","radius"],(function(e){var n="border-"+e,r=Object(_.h)(n),l=t.get(r);null!=l&&o.push(n+":"+l+("color"===e?"":"px"))})),o.push(function(t){var e=[],n=t.get("fontSize"),o=t.getTextColor();o&&e.push("color:"+o),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(3*n/2)+"px");var r=t.get("textShadowColor"),l=t.get("textShadowBlur")||0,c=t.get("textShadowOffsetX")||0,d=t.get("textShadowOffsetY")||0;return r&&l&&e.push("text-shadow:"+c+"px "+d+"px "+l+"px "+r),Object(h.k)(["decoration","align"],(function(n){var o=t.get(n);o&&e.push("text-"+n+":"+o)})),e.join(";")}(x)),null!=w&&o.push("padding:"+Object(_.g)(w).join("px ")+"px"),o.join(";")+";"}function P(t,e,n,o,r){var l=e&&e.painter;if(n){var c=l&&l.getViewportRoot();c&&Object(m.c)(t,c,document.body,o,r)}else{t[0]=o,t[1]=r;var d=l&&l.getViewportRootOffset();d&&(t[0]+=d.offsetLeft,t[1]+=d.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var L=function(){function t(t,e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,f.a.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var r=this._zr=e.getZr(),l=this._appendToBody=n&&n.appendToBody;P(this._styleCoord,r,l,e.getWidth()/2,e.getHeight()/2),l?document.body.appendChild(o):t.appendChild(o),this._container=t;var c=this;o.onmouseenter=function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0},o.onmousemove=function(t){if(t=t||window.event,!c._enterable){var e=r.handler,n=r.painter.getViewportRoot();Object(y.e)(n,t,!0),e.dispatch("mousemove",t)}},o.onmouseleave=function(){c._inContent=!1,c._enterable&&c._show&&c.hideLater(c._hideDelay)}}return t.prototype.update=function(t){var e,style,n,o=this._container,r=(style="position",(n=(e=o).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e))?style?n[style]:n:null),l=o.style;"absolute"!==l.position&&"absolute"!==r&&(l.position="relative"),t.get("alwaysShowContent")&&this._moveIfResized(),this.el.className=t.get("className")||""},t.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,style=n.style,o=this._styleCoord;n.innerHTML?style.cssText=T+A(t,!this._firstShow,this._longHide)+D(o[0],o[1],!0)+"border-color:"+Object(_.b)(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):style.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(content,t,e,n,o){var r=this.el;if(null!=content){var l="";if(Object(h.B)(o)&&"item"===e.get("trigger")&&!x(e)&&(l=function(t,e,n){if(!Object(h.B)(n)||"inside"===n)return"";var o=t.get("backgroundColor"),r=t.get("borderWidth");e=Object(_.b)(e);var l,c,d="left"===(l=n)?"right":"right"===l?"left":"top"===l?"bottom":"top",f=Math.max(1.5*Math.round(r),6),v="",y=I+":";Object(h.r)(["left","right"],d)>-1?(v+="top:50%",y+="translateY(-50%) rotate("+(c="left"===d?-225:-45)+"deg)"):(v+="left:50%",y+="translateX(-50%) rotate("+(c="top"===d?225:45)+"deg)");var m=c*Math.PI/180,x=f+r,w=x*Math.abs(Math.cos(m))+x*Math.abs(Math.sin(m)),k=e+" solid "+r+"px;";return'<div style="'+["position:absolute;width:"+f+"px;height:"+f+"px;",(v+=";"+d+":-"+Math.round(100*((w-Math.SQRT2*r)/2+Math.SQRT2*r-(w-x)/2))/100+"px")+";"+y+";","border-bottom:"+k,"border-right:"+k,"background-color:"+o+";"].join("")+'"></div>'}(e,n,o)),Object(h.B)(content))r.innerHTML=content+l;else if(content){r.innerHTML="",Object(h.t)(content)||(content=[content]);for(var i=0;i<content.length;i++)Object(h.v)(content[i])&&content[i].parentNode!==r&&r.appendChild(content[i]);if(l&&r.childNodes.length){var c=document.createElement("div");c.innerHTML=l,r.appendChild(c)}}}else r.innerHTML=""},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},t.prototype.moveTo=function(t,e){var n=this._styleCoord;if(P(n,this._zr,this._appendToBody,t,e),null!=n[0]&&null!=n[1]){var o=this.el.style,r=D(n[0],n[1]);Object(h.k)(r,(function(t){o[t[0]]=t[1]}))}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){var t=this,style=this.el.style;style.visibility="hidden",style.opacity="0",f.a.transform3dSupported&&(style.willChange=""),this._show=!1,this._longHideTimeout=setTimeout((function(){return t._longHide=!0}),500)},t.prototype.hideLater=function(time){!this._show||this._inContent&&this._enterable||(time?(this._hideDelay=time,this._show=!1,this._hideTimeout=setTimeout(Object(h.c)(this.hide,this),time)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},t}(),j=n(386),R=n(349);function z(t){return Math.max(0,t)}function N(style){var t=z(style.shadowBlur||0),e=z(style.shadowOffsetX||0),n=z(style.shadowOffsetY||0);return{left:z(t-e),right:z(t+e),top:z(t-n),bottom:z(t+n)}}function V(t,e,n,o){t[0]=n,t[1]=o,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var E=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),V(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){t.get("alwaysShowContent")&&this._moveIfResized()},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(content,t,e,n,o){h.A(content)&&Object(R.c)(""),this.el&&this._zr.remove(this.el);var r=e.getModel("textStyle");this.el=new j.a({style:{rich:t.richTextStyles,text:content,lineHeight:22,backgroundColor:e.get("backgroundColor"),borderRadius:e.get("borderRadius"),borderWidth:1,borderColor:n,shadowColor:e.get("shadowColor"),shadowBlur:e.get("shadowBlur"),shadowOffsetX:e.get("shadowOffsetX"),shadowOffsetY:e.get("shadowOffsetY"),textShadowColor:r.get("textShadowColor"),textShadowBlur:r.get("textShadowBlur")||0,textShadowOffsetX:r.get("textShadowOffsetX")||0,textShadowOffsetY:r.get("textShadowOffsetY")||0,fill:e.get(["textStyle","color"]),padding:Object(M.d)(e,"richText"),verticalAlign:"top",align:"left"},z:e.get("z")}),this._zr.add(this.el);var l=this;this.el.on("mouseover",(function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0})),this.el.on("mouseout",(function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1}))},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),n=N(t.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},t.prototype.moveTo=function(t,e){var n=this.el;if(n){var o=this._styleCoord;V(o,this._zr,t,e),t=o[0],e=o[1];var style=n.style,r=z(style.borderWidth||0),l=N(style);n.x=t+r+l.left,n.y=e+r+l.top,n.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(time){!this._show||this._inContent&&this._enterable||(time?(this._hideDelay=time,this._show=!1,this._hideTimeout=setTimeout(h.c(this.hide,this),time)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}(),B=n(322),H=n(528),$=n(400),U=n(331),G=n(354),F=n(399),W=n(351),Y=n(398),X=n(321),J=n(335),Z=n(390),K=n(329),Q=n(376),tt=n(397),et=n(355),it=h.c,nt=h.k,at=B.n,ot=new H.a({shape:{x:-1,y:-1,width:2,height:2}}),st=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(l.a)(e,t),e.prototype.init=function(t,e){if(!f.a.node){var n=t.getComponent("tooltip"),o=n.get("renderMode");this._renderMode=Object(X.i)(o),this._tooltipContent="richText"===this._renderMode?new E(e):new L(e.getDom(),e,{appendToBody:n.get("appendToBody",!0)})}},e.prototype.render=function(t,e,n){if(!f.a.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._alwaysShowContent=t.get("alwaysShowContent");var o=this._tooltipContent;o.update(t),o.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._updatePosition="html"===this._renderMode?Object(et.c)(it(this._doUpdatePosition,this),50):this._doUpdatePosition}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");F.a("itemTooltip",this._api,it((function(e,n,o){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(n,o):"leave"===e&&this._hide(o))}),this))},e.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!n.isDisposed()&&o.manuallyShowTip(t,e,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})}))}},e.prototype.manuallyShowTip=function(t,e,n,o){if(o.from!==this.uid&&!f.a.node){var r=ut(o,n);this._ticket="";var l=o.dataByCoordSys,c=function(t,e,n){var o=Object(X.r)(t).queryOptionMap,r=o.keys()[0];if(!r||"series"===r)return;var l,c=Object(X.t)(e,r,o.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(!c)return;if(n.getViewOfComponentModel(c).group.traverse((function(e){var n=Object(K.a)(e).tooltipConfig;if(n&&n.name===t.name)return l=e,!0})),l)return{componentMainType:r,componentIndex:c.componentIndex,el:l}}(o,e,n);if(c){var rect=c.el.getBoundingRect().clone();rect.applyTransform(c.el.transform),this._tryShow({offsetX:rect.x+rect.width/2,offsetY:rect.y+rect.height/2,target:c.el,position:o.position,positionDefault:"bottom"},r)}else if(o.tooltip&&null!=o.x&&null!=o.y){var d=ot;d.x=o.x,d.y=o.y,d.update(),Object(K.a)(d).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:d},r)}else if(l)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:l,tooltipOption:o.tooltipOption},r);else if(null!=o.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,o))return;var h=Object($.a)(o,e),v=h.point[0],y=h.point[1];null!=v&&null!=y&&this._tryShow({offsetX:v,offsetY:y,target:h.el,position:o.position,positionDefault:"bottom"},r)}else null!=o.x&&null!=o.y&&(n.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:n.getZr().findHover(o.x,o.y).target},r))}},e.prototype.manuallyHideTip=function(t,e,n,o){var r=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(ut(o,n))},e.prototype._manuallyAxisShowTip=function(t,e,n,o){var r=o.seriesIndex,l=o.dataIndex,c=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=l&&null!=c){var d=e.getSeriesByIndex(r);if(d)if("axis"===lt([d.getData().getItemModel(l),d,(d.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:l,position:o.position}),!0}},e.prototype._tryShow=function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(n){var r,l;this._lastDataByCoordSys=null,Object(tt.a)(n,(function(t){return null!=Object(K.a)(t).dataIndex?(r=t,!0):null!=Object(K.a)(t).tooltipConfig?(l=t,!0):void 0}),!0),r?this._showSeriesItemTooltip(t,r,e):l?this._showComponentItemTooltip(t,l,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},e.prototype._showOrMove=function(t,e){var n=t.get("showDelay");e=h.c(e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},e.prototype._showAxisTooltip=function(t,e){var n=this._ecModel,o=this._tooltipModel,r=[e.offsetX,e.offsetY],l=lt([e.tooltipOption],o),c=this._renderMode,d=[],f=Object(M.c)("section",{blocks:[],noHeader:!0}),v=[],y=new M.a;nt(t,(function(t){nt(t.dataByAxis,(function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),o=t.value;if(e&&null!=o){var r=Y.d(o,e.axis,n,t.seriesDataIndices,t.valueLabelOpt),l=Object(M.c)("section",{header:r,noHeader:!h.R(r),sortBlocks:!0,blocks:[]});f.blocks.push(l),h.k(t.seriesDataIndices,(function(h){var f=n.getSeriesByIndex(h.seriesIndex),m=h.dataIndexInside,x=f.getDataParams(m);if(!(x.dataIndex<0)){x.axisDim=t.axisDim,x.axisIndex=t.axisIndex,x.axisType=t.axisType,x.axisId=t.axisId,x.axisValue=W.c(e.axis,{value:o}),x.axisValueLabel=r,x.marker=y.makeTooltipMarker("item",_.b(x.color),c);var w=Object(Q.b)(f.formatTooltip(m,!0,null));w.markupFragment&&l.blocks.push(w.markupFragment),w.markupText&&v.push(w.markupText),d.push(x)}}))}}))})),f.blocks.reverse(),v.reverse();var m=e.position,x=l.get("order"),w=Object(M.b)(f,y,c,x,n.get("useUTC"),l.get("textStyle"));w&&v.unshift(w);var k="richText"===c?"\n\n":"<br/>",S=v.join(k);this._showOrMove(l,(function(){this._updateContentNotChangedOnAxis(t,d)?this._updatePosition(l,m,r[0],r[1],this._tooltipContent,d):this._showTooltipContent(l,S,d,Math.random()+"",r[0],r[1],m,null,y)}))},e.prototype._showSeriesItemTooltip=function(t,e,n){var o=this._ecModel,r=Object(K.a)(e),l=r.seriesIndex,c=o.getSeriesByIndex(l),d=r.dataModel||c,h=r.dataIndex,f=r.dataType,data=d.getData(f),v=this._renderMode,y=t.positionDefault,m=lt([data.getItemModel(h),d,c&&(c.coordinateSystem||{}).model],this._tooltipModel,y?{position:y}:null),x=m.get("trigger");if(null==x||"item"===x){var w=d.getDataParams(h,f),k=new M.a;w.marker=k.makeTooltipMarker("item",_.b(w.color),v);var S=Object(Q.b)(d.formatTooltip(h,!1,f)),C=m.get("order"),O=S.markupFragment?Object(M.b)(S.markupFragment,k,v,C,o.get("useUTC"),m.get("textStyle")):S.markupText,I="item_"+d.name+"_"+h;this._showOrMove(m,(function(){this._showTooltipContent(m,O,w,I,t.offsetX,t.offsetY,t.position,t.target,k)})),n({type:"showTip",dataIndexInside:h,dataIndex:data.getRawIndex(h),seriesIndex:l,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,e,n){var o=Object(K.a)(e),r=o.tooltipConfig.option||{};if(h.B(r)){r={content:r,formatter:r}}var l=[r],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&l.push(c),l.push({formatter:r.content});var d=t.positionDefault,f=lt(l,this._tooltipModel,d?{position:d}:null),v=f.get("content"),y=Math.random()+"",m=new M.a;this._showOrMove(f,(function(){var n=h.d(f.get("formatterParams")||{});this._showTooltipContent(f,v,n,y,t.offsetX,t.offsetY,t.position,e,m)})),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,e,n,o,r,l,c,d,f){if(this._ticket="",t.get("showContent")&&t.get("show")){var v=this._tooltipContent,y=t.get("formatter");c=c||t.get("position");var html=e,m=this._getNearestPoint([r,l],n,t.get("trigger"),t.get("borderColor")).color;if(y)if(h.B(y)){var x=t.ecModel.get("useUTC"),w=h.t(n)?n[0]:n;html=y,w&&w.axisType&&w.axisType.indexOf("time")>=0&&(html=Object(Z.h)(w.axisValue,html,x)),html=_.d(html,n,!0)}else if(h.w(y)){var k=it((function(e,html){e===this._ticket&&(v.setContent(html,f,t,m,c),this._updatePosition(t,c,r,l,v,n,d))}),this);this._ticket=o,html=y(n,o,k)}else html=y;v.setContent(html,f,t,m,c),v.show(t,m),this._updatePosition(t,c,r,l,v,n,d)}},e.prototype._getNearestPoint=function(t,e,n,o){return"axis"===n||h.t(e)?{color:o||("html"===this._renderMode?"#fff":"none")}:h.t(e)?void 0:{color:o||e.color||e.borderColor}},e.prototype._doUpdatePosition=function(t,e,n,o,content,r,l){var c=this._api.getWidth(),d=this._api.getHeight();e=e||t.get("position");var f=content.getSize(),v=t.get("align"),y=t.get("verticalAlign"),rect=l&&l.getBoundingRect().clone();if(l&&rect.applyTransform(l.transform),h.w(e)&&(e=e([n,o],r,content.el,rect,{viewSize:[c,d],contentSize:f.slice()})),h.t(e))n=at(e[0],c),o=at(e[1],d);else if(h.A(e)){var m=e;m.width=f[0],m.height=f[1];var _=U.e(m,{width:c,height:d});n=_.x,o=_.y,v=null,y=null}else if(h.B(e)&&l){var w=function(t,rect,e,n){var o=e[0],r=e[1],l=Math.ceil(Math.SQRT2*n)+8,c=0,d=0,h=rect.width,f=rect.height;switch(t){case"inside":c=rect.x+h/2-o/2,d=rect.y+f/2-r/2;break;case"top":c=rect.x+h/2-o/2,d=rect.y-r-l;break;case"bottom":c=rect.x+h/2-o/2,d=rect.y+f+l;break;case"left":c=rect.x-o-l,d=rect.y+f/2-r/2;break;case"right":c=rect.x+h+l,d=rect.y+f/2-r/2}return[c,d]}(e,rect,f,t.get("borderWidth"));n=w[0],o=w[1]}else{w=function(t,e,content,n,o,r,l){var c=content.getSize(),d=c[0],h=c[1];null!=r&&(t+d+r+2>n?t-=d+r:t+=r);null!=l&&(e+h+l>o?e-=h+l:e+=l);return[t,e]}(n,o,content,c,d,v?null:20,y?null:20);n=w[0],o=w[1]}if(v&&(n-=ct(v)?f[0]/2:"right"===v?f[0]:0),y&&(o-=ct(y)?f[1]/2:"bottom"===y?f[1]:0),x(t)){w=function(t,e,content,n,o){var r=content.getSize(),l=r[0],c=r[1];return t=Math.min(t+l,n)-l,e=Math.min(e+c,o)-c,t=Math.max(t,0),e=Math.max(e,0),[t,e]}(n,o,content,c,d);n=w[0],o=w[1]}content.moveTo(n,o)},e.prototype._updateContentNotChangedOnAxis=function(t,e){var n=this._lastDataByCoordSys,o=this._cbParamsList,r=!!n&&n.length===t.length;return r&&nt(n,(function(n,l){var c=n.dataByAxis||[],d=(t[l]||{}).dataByAxis||[];(r=r&&c.length===d.length)&&nt(c,(function(t,n){var l=d[n]||{},c=t.seriesDataIndices||[],f=l.seriesDataIndices||[];(r=r&&t.value===l.value&&t.axisType===l.axisType&&t.axisId===l.axisId&&c.length===f.length)&&nt(c,(function(t,e){var n=f[e];r=r&&t.seriesIndex===n.seriesIndex&&t.dataIndex===n.dataIndex})),o&&h.k(t.seriesDataIndices,(function(t){var n=t.seriesIndex,l=e[n],c=o[n];l&&c&&c.data!==l.data&&(r=!1)}))}))})),this._lastDataByCoordSys=t,this._cbParamsList=e,!!r},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,e){f.a.node||(this._tooltipContent.dispose(),F.b("itemTooltip",e))},e.type="tooltip",e}(J.a);function lt(t,e,n){var o,r=e.ecModel;n?(o=new G.a(n,r,r),o=new G.a(e.option,o,r)):o=e;for(var i=t.length-1;i>=0;i--){var l=t[i];l&&(l instanceof G.a&&(l=l.get("tooltip",!0)),h.B(l)&&(l={formatter:l}),l&&(o=new G.a(l,o,r)))}return o}function ut(t,e){return t.dispatchAction||h.c(e.dispatchAction,e)}function ct(t){return"center"===t||"middle"===t}var ht=st;function pt(t){Object(r.a)(o.a),t.registerComponentModel(d),t.registerComponentView(ht),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},(function(){})),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},(function(){}))}},413:function(t,e,n){"use strict";n(385)},414:function(t,e,n){"use strict";n.r(e);var o=n(21),r=(n(18),n(28),n(340)),l=n(538),c=n(443),d=n(411),h=n(870),f=n(868),v=n(358);Object(r.a)([l.a,d.a,h.a,c.a,f.a]);var y={name:"Maxdrawdown",props:{values:{default:[1,2,3,4]},benchmark:{default:[1,2,3,4]},index:{default:["2020-01-01","2020-02-01","2020-03-01","2020-04-01"]}},components:{VChart:v.b},provide:Object(o.a)({},v.a,"light"),data:function(){return{option:{legend:{bottom:50,left:-5,orient:"vertical"},tooltip:{trigger:"axis",position:function(t){return[t[0]-100,t[1]-100]},axisPointer:{type:"line",snap:!0,axis:"x"},formatter:function(t){for(var e,n=t[0].value[0]+"<br/>",i=0,o=t.length;i<o;i++)e=Math.round(100*t[i].value[1])/100+"%",n+=t[i].marker+t[i].seriesName+"："+e+"<br/>";return n}},grid:{left:0,right:0,top:"12px",bottom:"10px"},xAxis:{type:"time",name:"日期",minorTick:{show:!1},minorSplitLine:{show:!1},axisLabel:{inside:!0},inverval:1},yAxis:{type:"value",name:"下跌幅度",axisLabel:{formatter:"{value}%",inside:!0,position:"right"},show:!0,minorTick:{show:!1},minorSplitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},lineStyle:{width:0},position:"right"},series:[{name:"策略",data:[],type:"line",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(232, 56, 115, 0)"},{offset:1,color:"rgba(232, 56, 115, 1)",alpha:1}],global:!1}},itemStyle:{color:"rgba(232, 56, 115, 0.5)",borderColor:"rgba(232, 56, 115, 0.5)",opacity:0},lineStyle:{color:"rgba(232, 56, 115, 0.5)"}},{name:"大盤",data:[],type:"line",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(209, 204, 204, 0)"},{offset:1,color:"#aaa",alpha:1}],global:!1}},itemStyle:{color:"#aaa",borderColor:"#aaa",opacity:0},lineStyle:{color:"#aaa"}}],backgroundColor:"transparent"}}},mounted:function(){this.option.series[0].data=this.calDD(this.values),this.option.series[1].data=this.calDD(this.benchmark)},methods:{calDD:function(t){var e=[],n=0;for(var i in t)n=Math.max(t[i],n),e.push(t[i]/n);var o=this.index,r=[];for(var l in o)r.push([o[l],100*e[l]-100]);return r}}},m=(n(437),n(41)),component=Object(m.a)(y,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-chart",{staticClass:"chart",staticStyle:{"z-index":"0"},attrs:{option:t.option,autoresize:""}})}),[],!1,null,"bb9fd992",null);e.default=component.exports},415:function(t,e,n){"use strict";n.r(e);n(18),n(67);var o={props:{vip:{default:!1}},data:function(){return{fakeData:[["1258 其祥-KY",-.24226804123711343,.1,"2021-01-01"],["1336 台翰",-.015452538631346768,.1,"2021-01-01"],["1413 宏洲",-.08035714285714313,.1,"2021-01-01"],["1528 恩德",-.08727858293075608,.1,"2021-01-01"],["8916 光隆",.10973451327433681,.1,"2021-01-01"],["9962 有益",.00964630225080354,.1,"2021-01-01"]]}},methods:{stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()}}},r=(n(413),n(41)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"uk-inline uk-width-1-1",staticStyle:{"overflow-x":"hidden"}},[n("table",{staticClass:"uk-table uk-table-divider uk-width-1-1",staticStyle:{"white-space":"nowrap"}},[t._m(0),t._v(" "),n("tbody",t._l(t.fakeData,(function(e){return n("tr",{key:e[0]},[n("td",{staticClass:"uk-text-primary"},[t._v(t._s(e[0]))]),t._v(" "),n("td",{style:"color:"+t.stockReturnColor(e[1])},[t._v("\n            "+t._s(Math.round(100*t.sign(e[1]))/100)+"%\n          ")]),t._v(" "),n("td",{style:"color:"+t.stockReturnColor(e[2])},[t._v("\n            "+t._s(100*e[2])+" %\n          ")]),t._v(" "),n("td",{staticClass:"uk-text-right"},[t._v(t._s(e[3]))])])})),0)]),t._v(" "),n("div",{staticClass:"blur uk-position-cover uk-overlay uk-overlay-default uk-flex uk-flex-center uk-flex-middle"},[n("nuxt-link",{attrs:{to:"/pricing"}},[t.vip?n("div",{staticClass:"uk-text-center vip uk-text-primary",attrs:{"uk-scrollspy":"cls: uk-animation-kenburns; repeat: true"}},[n("span",{attrs:{"uk-icon":"icon: lock; ratio: 3.5"}}),t._v(" "),n("h2",{staticClass:"uk-text-primary"},[t._v("FinLab VIP")]),t._v(" "),n("p",[t._v("\n            學程式、練投資一切搞定\n          ")])]):t._e()]),t._v(" "),t.vip?t._e():n("a",{attrs:{"uk-toggle":"target: #login-ui"}},[t._m(1)])],1)])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("名稱")]),t._v(" "),n("th",[t._v("漲跌")]),t._v(" "),n("th",[t._v("權重")]),t._v(" "),n("th",{staticClass:"uk-text-right"},[t._v("清單新增")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"uk-text-center vip uk-text-primary",attrs:{"uk-scrollspy":"cls: uk-animation-kenburns; repeat: true"}},[n("span",{attrs:{"uk-icon":"icon: lock; ratio: 3.5"}}),t._v(" "),n("h2",{staticClass:"uk-text-primary"},[t._v("FinLab")]),t._v(" "),n("p",[t._v("\n            登入查看符合條件的清單\n          ")])])}],!1,null,"96fe9148",null);e.default=component.exports},419:function(t,e,n){},420:function(t,e,n){},421:function(t,e,n){"use strict";n.r(e);var o=n(23),r=n(8),l=(n(31),n(47),n(117),n(18),n(28),n(67),n(60),n(158),n(62),n(333),n(64),n(83),n(323)),c=n(19),d=n(94),h=n.n(d),f=Object(l.c)({components:{},props:{uid:{default:null,type:String},strategy_id:{default:null,type:String},position_id:{default:null,type:String},positionPredefined:{default:null,type:Object}},data:function(){var t=this;return window.goto=function(link){t.$router.push(link)},{showInfo:!1,position:null,mounted:!1,tableMode:"present",displayTableMode:["當前統計","近期更動清單"],sortTableCol:"股票",sortAscending:!0,table:[],weights:{},userCap:20,colabLink:null,buildingColab:!1,next_trading_date:null,update_date:null,last_updated:null,trade_at:null,stop_loss:-1/0,take_profit:1/0,displayStockId:"",failed:!1,freq:"1d"}},mounted:function(){this.init(),this.mounted=!0},methods:{openStockPanel:function(s){this.displayStockId=s.split(" ")[0],window.scrollTo(document.getElementById("stock-id-".concat(s)).top)},showStock:function(s){this.displayStockId=s,h.a.modal("#modal-stock").show()},setSortColumn:function(col){this.sortTableCol===col?this.sortAscending=!this.sortAscending:this.sortAscending=!1,this.sortTableCol=col},init:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,l,d,table,p,h,f,v,y,m,_,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.strategy_id&&t.position_id||t.positionPredefined){e.next=2;break}return e.abrupt("return");case 2:if(n=null,!t.positionPredefined){e.next=7;break}n=t.positionPredefined,e.next=21;break;case 7:return e.prev=7,e.next=10,c.c.collection("users").doc(t.uid).collection("strategies").doc(t.strategy_id).collection("positions").doc(t.position_id).get();case 10:r=e.sent,l=r.data(),n="position"in l?l.position:l,console.log(n),e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(7),console.log("PositionPanel: cannot read position "+e.t0),t.failed=!0,e.abrupt("return");case 21:d=n,t.next_trading_date=d.next_trading_date,t.update_date=d.update_date,t.trade_at=d.trade_at,t.last_updated=d.last_updated.toDate(),t.position=d,table=[],t.weights={},e.t1=regeneratorRuntime.keys(d);case 30:if((e.t2=e.t1()).done){e.next=54;break}if(p=e.t2.value,h=d[p],"object"===Object(o.a)(h)){e.next=36;break}return"freq"==p?t.freq=h:"stop_loss"===p?t.stop_loss=h:"take_profit"===p&&(t.take_profit=h),e.abrupt("continue",30);case 36:if("NaT"===h.exit_date&&(h.exit_date=""),h.exit_date&&(h.status="exit"),"weight"in h||"return"in h){e.next=40;break}return e.abrupt("continue",30);case 40:f={close:"收盤",open:"開盤","open|close":"盤中"},v=t.trade_at in f?f[self.trade_at]:self.trade_at,y={hold:"持有",exit:"移除",enter:"新增",sl:"".concat(v,"停損"),tp:"".concat(v,"停利"),sl_:"已停損",tp_:"已停利","買進":"新增","賣出":"移除","停損停利":h.return>0?"".concat(v,"停利"):"".concat(v,"停損")},m=h.status in y?y[h.status]:h.status,_=0,"next_weight"in h&&(_=h.next_weight),"string"==typeof h.exit_date&-1!=h.exit_date.indexOf("T")&&(h.exit_date=h.exit_date.split("T")[0]),"string"==typeof h.entry_date&-1!=h.entry_date.indexOf("T")&&(h.entry_date=h.entry_date.split("T")[0]),x={stock:p,action:m,profit:Math.round(1e3*h.return)/10,weight:Math.round(1e3*h.weight)/10,nextWeight:Math.round(1e3*_)/10,entry_sig_date:h.entry_date,exit_sig_date:h.exit_date,entry_price:h.entry_price},table.push(x),"買進"==h.status||"entry"==h.status?t.update_date=h.entry_date:"賣出"!=h.status&&"exit"!=h.status||(t.update_date=h.exit_date),"weight"in h&&(t.weights[p]=h.weight),e.next=30;break;case 54:t.table=table;case 55:case"end":return e.stop()}}),e,null,[[7,16]])})))()},stockStatusColor:function(t){var output={"新增":"gray","持有":"lightgray","移除":"gray","停損停利":"#252786"};return t in output?output[t]:"gray"},stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()},formatDate:function(t){if(null===t)return"";var e=new Date,n=t.toLocaleString("en-us").replace(/(\d+)\/(\d+)\/(\d+)/,"$3-$1-$2").replace(/(\d+):(\d+):(\d+)/,"$1:$2").split(", ");return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?n[1]:n[0]},generate_colab_script:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in t.buildingColab=!0,n="",t.weights)r=o.match(/\d+/)[0],n+='  "'.concat(r,'" : ').concat(t.weights[o],",\n");return l=["!pip install finlab -q","from finlab.online.order_executor import OrderExecutor\n\noe = OrderExecutor.from_weights({\n\n".concat(n,"\n}, ").concat(1e4*t.userCap,")"),"# 查看欲執行的委託單：\noe._calculate_new_orders()","# 市價下單（所有委託單）\noe.create_orders()","# 更新委託單價格到市價（所有未成交委託單）\noe.create_orders()","# 刪單（所有委託單）\noe.cancel_orders()"],c=null,e.prev=5,d={sid:t.$props.strategy_id,uid:t.$props.uid,code:JSON.stringify(l)},e.next=9,t.$axios.post("https://asia-northeast1-fdata-299302.cloudfunctions.net/generate_colab_strategy",d);case 9:c=e.sent,e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(5),alert("upload colab fail: "+e.t0.data+" "+e.t0),console.log(e.t0),e.abrupt("return");case 17:t.colabLink=c.data;case 18:case"end":return e.stop()}}),e,null,[[5,12]])})))()}},computed:{filteredCols:function(){return this.$store.state.user&&this.$route.query.uid===this.$store.state.user.uid?"present"===this.tableMode?["名稱","漲跌","權重","進場價格","清單新增"]:["名稱","新增移除","漲跌","權重更新","清單新增","清單移除"]:"present"===this.tableMode?["名稱","漲跌","權重","清單新增"]:["名稱","新增移除","漲跌","權重更新","清單新增","清單移除"]},realNextTradingDate:function(){if(0===this.table.length)return"";var t="1977-01-01";for(var e in this.table){var n=Object.assign({},this.table[e]);n.entry_sig_date>t&&(t=n.entry_sig_date),n.exit_sig_date>t&&(t=n.exit_sig_date)}return t},rows:function(){var t=this;if(0===this.table.length)return[];var e=[];for(var n in this.table)if("present"!==this.tableMode||0!=this.table[n].weight){var o=Object.assign({},this.table[n]);e.push(o)}return e.sort((function(a,b){var e={"名稱":"stock","漲跌":"profit","新增移除":"action","權重":"weight","權重更新":"nextWeight","進場價格":"entry_price","清單新增":"entry_sig_date","清單移除":"exit_sig_date"}[t.sortTableCol];return a[e]<b[e]^t.sortAscending?1:-1})),e},unrealizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,o=this.table[e].profit*(n/100);isNaN(o)||(t+=o,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},realizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,o=this.table[e].profit*(n/100);isNaN(o)||"移除"!==this.table[e].action||(t+=o,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},hasPermission:function(){var t=this.$store.state.strategy.info.public_position,e=null!==this.$store.state.user;return this.userPermission>=t||e&&this.$store.state.user.uid===this.$props.uid},userPermission:function(){return""===this.$store.state.role?0:"free"===this.$store.state.role?1:this.$store.state.role.includes("vip")?2:void 0}},watch:{userPermission:function(){this.init()}}}),v=(n(438),n(41)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"padding-bottom":"24px"}},[null===t.$store.state.user?n("div",[n("FakePosition",{attrs:{vip:!1}})],1):t._e(),t._v(" "),null!==t.$store.state.user?n("div",[n("div",{staticClass:"uk-width-1-1"},[n("ul",{staticClass:"uk-flex uk-subnav uk-subnav-divider",attrs:{"uk-margin":""}},[n("li",{staticClass:"{ 'uk-active': tableMode === 'present' }"},[n("a",{on:{click:function(e){t.tableMode="present"}}},[n("div",{staticClass:"uk-text-primary uk-padding-small",staticStyle:{border:"1px solid","border-radius":"12px"},style:{background:"present"===t.tableMode?"#f0f0fa":"white","border-color":"present"===t.tableMode?"blue":"#aaa"}},[t._v("\n              "+t._s(t.displayTableMode[0])+" "),n("br"),t._v(" "),n("span",{staticClass:"uk-text-lead uk-text-bold",style:{color:t.stockReturnColor(t.unrealizedReturn)}},[t._v("\n                "+t._s(t.sign(t.unrealizedReturn))+" %\n              ")])])])]),t._v(" "),n("li",{class:{"uk-active":"future"===t.tableMode}},[n("a",{on:{click:function(e){t.tableMode="future"}}},[n("div",{staticClass:"uk-text-primary  uk-padding-small",staticStyle:{border:"1px solid","border-radius":"12px"},style:{background:"future"===t.tableMode?"#f0f0fa":"white","border-color":"future"===t.tableMode?"blue":"#aaa"}},[t._v("\n              "+t._s(t.displayTableMode[1])+" "),n("br"),t._v(" "),n("span",{staticClass:"uk-text-lead uk-text-bold",staticStyle:{color:"#777"}},[t._v(t._s(t.realNextTradingDate))])])])])]),t._v(" "),"future"==t.tableMode?n("div",{staticClass:"uk-text-small uk-card uk-padding-small uk-margin-large-top uk-margin-large-bottom shadow"},[n("p",[t._v("此策略的模擬交易的細節")]),t._v(" "),n("ul",{staticClass:"uk-list"},[n("li",[t._v("於 "+t._s("1d"===t.freq?t.next_trading_date.split("T")[0]:t.next_trading_date)+" 之後的下個交易日\n            接近\n            "+t._s("close"===t.trade_at?"收盤":"開盤")+" 時調整部位\n          ")]),t._v(" "),t.stop_loss!=-1/0||t.take_profit!=1/0?n("li",[t._v("\n\n            "+t._s(t.stop_loss!=-1/0?"停損為"+100*t.stop_loss+"%，":"")+"\n            "+t._s(t.take_profit!=1/0?"停利為"+100*t.take_profit+"%，":"")+"\n            每日盤後檢查，如觸發則於下個交易日的\n            "+t._s("close"===t.trade_at?"收盤":"開盤")+"\n            出場\n          ")]):t._e()])]):t._e(),t._v(" "),t.mounted?n("div",{staticClass:"uk-overflow-auto"},[0!==t.rows.length?n("table",{staticClass:"uk-table uk-table-divider",staticStyle:{"white-space":"nowrap"}},[n("thead",[n("tr",{staticClass:"uk-text-right"},t._l(t.filteredCols,(function(e,o){return n("th",{key:"table-col-"+e,staticStyle:{"padding-left":"0"},style:0===o?"text-align:left!important":"text-align:right!important",on:{click:function(n){return t.setSortColumn(e)}}},[t._v("\n                "+t._s(e)+"\n                "),t.sortTableCol===e?n("span",[t._v(t._s(t.sortAscending?"▲":"▼"))]):t._e()])})),0)]),t._v(" "),n("tbody",{staticClass:"uk-text-right"},t._l(t.rows,(function(e){return n("tr",{key:"table-row-"+e.stock},[t.filteredCols.includes("名稱")?n("td",{staticClass:"uk-text-left",staticStyle:{"padding-left":"0"}},[n("div",{staticClass:"uk-text-primary",staticStyle:{cursor:"pointer"},attrs:{id:"stock-id-"+e.stock},on:{click:function(n){return t.openStockPanel(e.stock)}}},[t._v("\n                  "+t._s(e.stock)+"\n                  "),"持有"!==e.action&&"移除"!==e.action&&"新增"!==e.action?n("span",{staticClass:"round-border uk-background-primary",staticStyle:{"font-size":"0.9rem",color:"white",padding:"0 10px"}},[t._v(t._s(e.action))]):t._e()])]):t._e(),t._v(" "),t.filteredCols.includes("新增移除")?n("td",{style:"color:"+t.stockStatusColor(e.action)},[t._v("\n                "+t._s(e.action)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("漲跌")?n("td",{style:"color:"+t.stockReturnColor(e.profit)},[t._v("\n                "+t._s(t.sign(e.profit))+"%\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("權重")?n("td",{style:"color:"+t.stockReturnColor(e.weight)},[t._v("\n                "+t._s(e.weight)+" %\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("權重更新")?n("td",{style:"color:"+t.stockReturnColor(e.nextWeight)},[t._v("\n                "+t._s(e.nextWeight)+" %\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("進場價格")?n("td",[t._v("\n                "+t._s(e.entry_price)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("清單新增")?n("td",[t._v("\n                "+t._s(e.entry_sig_date)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("清單移除")?n("td",[t._v("\n                "+t._s(e.exit_sig_date)+"\n              ")]):t._e()])})),0)]):n("div",[t.failed?n("FakePosition",{attrs:{vip:!0}}):n("span",[t._v("目前策略無持股喔！")])],1)]):t._e(),t._v(" "),n("div",{staticClass:"uk-margin-large-top uk-margin-large-bottom"},[n("p",[t._v("\n          不知道怎麼使用？"),n("br"),t._v("趕快來看\n          "),n("nuxt-link",{attrs:{to:"/course?cid=LqYTLW3KkXRSPnci47xe"}},[n("span",{staticStyle:{"text-decoration":"underline"}},[t._v("平台速成教學")])]),t._v("\n          ！\n        ")],1)])])]):t._e(),t._v(" "),t.displayStockId?n("div",{staticClass:"stock-panel shadow"},[n("a",{staticClass:"uk-icon-button shadow",staticStyle:{border:"1px solid #ccc",top:"3px",right:"6px",position:"absolute","z-index":"100"},attrs:{"uk-icon":"close"},on:{click:function(e){t.displayStockId=""}}}),t._v(" "),n("div",{staticStyle:{height:"100%"}},[n("StockPanel",{attrs:{stock_id:t.displayStockId,displaySearchBar:!1}})],1)]):t._e()])}),[],!1,null,"36211ccd",null);e.default=component.exports;installComponents(component,{FakePosition:n(415).default,StockPanel:n(394).default})},437:function(t,e,n){"use strict";n(406)},438:function(t,e,n){"use strict";n(407)},441:function(t,e,n){"use strict";n.r(e);n(62),n(333),n(42);var o=n(323),r=n(414),l=Object(o.c)({components:{Maxdrawdown:r.default},props:{returns:{default:function(){return{value:[],time:[]}}},benchmark:[],drawdown_details:{default:function(){return{}}},dailyMean:{default:0},max_drawdown:{default:0}},data:function(){return{investCapital:20,investPercentage:80}},methods:{drawdownColor:function(t){var e=255-Math.min(255,t/10),n=Math.min(255,e-5);return"background: rgba(".concat(e,", ").concat(n,", 255, 0.5)")}},computed:{sortedDrawdownDetail:function(){var t=this;return Object.keys(this.drawdown_details).sort().reduce((function(e,n){return e[n]=t.drawdown_details[n],e}),{})},simulated_maxdrawdown:function(){var t=parseInt(this.investPercentage)*parseInt(this.investCapital)*this.max_drawdown;return Math.round(t/10)/10},simulated_stock_investment:function(){return Math.round(parseInt(this.investCapital)*parseInt(this.investPercentage)/10)/10},simulated_annual_return:function(){return Math.round(parseInt(this.investPercentage)*parseInt(this.investCapital)*this.dailyMean/10)/10}}}),c=(n(448),n(41)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"uk-margin-large-top uk-text-primary"},[t._v("下跌幅度")]),t._v(" "),n("Maxdrawdown",{attrs:{values:t.returns.value,benchmark:t.benchmark,index:t.returns.time}}),t._v(" "),n("h5",{staticClass:"uk-margin-large-top uk-text-primary"},[t._v("歷史最大下跌風險")]),t._v(" "),n("table",{staticClass:"uk-table uk-table-small uk-table-divider"},[t._m(0),t._v(" "),n("tbody",t._l(t.sortedDrawdownDetail,(function(e,o){return n("tr",{key:o,style:t.drawdownColor(e.Length)},[n("td",[t._v(t._s(o))]),t._v(" "),n("td",[t._v(t._s(Math.round(1e3*e.drawdown)/10)+"%")]),t._v(" "),n("td",[t._v(t._s(e.Length)+" 天")])])})),0)])],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("起始時間")]),t._v(" "),n("th",[t._v("虧損程度")]),t._v(" "),n("th",[t._v("時間長度")])])])}],!1,null,"3cd09cae",null);e.default=component.exports;installComponents(component,{Maxdrawdown:n(414).default})},442:function(t,e,n){"use strict";n.d(e,"a",(function(){return At}));var o=n(340),r=n(319),l=n(318),c=n(324),d={get:function(t,e,n){var o=l.d((h[t]||{})[e]);return n&&l.t(o)?o[o.length-1]:o}},h={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},f=d,v=n(332),y=n(350),m=l.k;function _(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function x(option,t,e){var n={};return m(t,(function(t){var o,r=n[t]=((o=function(){}).prototype.__hidden=o.prototype,new o);m(option[t],(function(n,o){if(v.a.isValidType(o)){var c={type:o,visual:n};e&&e(c,t),r[o]=new v.a(c),"opacity"===o&&((c=l.d(c)).type="colorAlpha",r.__hidden.__alphaForOpacity=new v.a(c))}}))})),n}var w=n(321),k=n(322),S=n(334),C=v.a.mapVisual,M=v.a.eachVisual,O=l.t,I=l.k,T=k.c,D=k.j,A=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return Object(r.a)(e,t),e.prototype.init=function(option,t,e){this.mergeDefaultAndTheme(option,e)},e.prototype.optionUpdated=function(t,e){var n=this.option;c.a.canvasSupported||(n.realtime=!1),!e&&function(t,e,n){var o;l.k(n,(function(t){e.hasOwnProperty(t)&&_(e[t])&&(o=!0)})),o&&l.k(n,(function(n){e.hasOwnProperty(n)&&_(e[n])?t[n]=l.d(e[n]):delete t[n]}))}(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var e=this.stateList;t=l.c(t,this),this.controllerVisuals=x(this.option.controller,e,t),this.targetVisuals=x(this.option.target,e,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries((function(t,n){e.push(n)})):e=w.p(t),e},e.prototype.eachTargetSeries=function(t,e){l.k(this.getTargetSeriesIndices(),(function(n){var o=this.ecModel.getSeriesByIndex(n);o&&t.call(e,o)}),this)},e.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries((function(n){n===t&&(e=!0)})),e},e.prototype.formatValueText=function(t,e,n){var o,option=this.option,r=option.precision,c=this.dataBound,d=option.formatter;n=n||["<",">"],l.t(t)&&(t=t.slice(),o=!0);var h=e?t:o?[f(t[0]),f(t[1])]:f(t);return l.B(d)?d.replace("{value}",o?h[0]:h).replace("{value2}",o?h[1]:h):l.w(d)?o?d(t[0],t[1]):d(t):o?t[0]===c[0]?n[0]+" "+h[1]:t[1]===c[1]?n[1]+" "+h[0]:h[0]+" - "+h[1]:h;function f(t){return t===c[0]?"min":t===c[1]?"max":(+t).toFixed(Math.min(r,20))}},e.prototype.resetExtent=function(){var t=this.option,e=T([t.min,t.max]);this._dataExtent=e},e.prototype.getDataDimensionIndex=function(data){var t=this.option.dimension;if(null!=t)return data.getDimensionIndex(t);for(var e=data.dimensions,i=e.length-1;i>=0;i--){var n=e[i],o=data.getDimensionInfo(n);if(!o.isCalculationCoord)return o.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,base={inRange:e.inRange,outOfRange:e.outOfRange},n=e.target||(e.target={}),o=e.controller||(e.controller={});l.H(n,base),l.H(o,base);var r=this.isCategory();function c(base){O(e.color)&&!base.inRange&&(base.inRange={color:e.color.slice().reverse()}),base.inRange=base.inRange||{color:t.get("gradientColor")}}c.call(this,n),c.call(this,o),function(base,t,e){var n=base[t],o=base[e];n&&!o&&(o=base[e]={},I(n,(function(t,e){if(v.a.isValidType(e)){var n=f.get(e,"inactive",r);null!=n&&(o[e]=n,"color"!==e||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}})))}.call(this,n,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,o=this.get("inactiveColor"),c=this.getItemSymbol()||"roundRect";I(this.stateList,(function(d){var h=this.itemSize,f=t[d];f||(f=t[d]={color:r?o:[o]}),null==f.symbol&&(f.symbol=e&&l.d(e)||(r?c:[c])),null==f.symbolSize&&(f.symbolSize=n&&l.d(n)||(r?h[0]:[h[0],h[0]])),f.symbol=C(f.symbol,(function(symbol){return"none"===symbol?c:symbol}));var v=f.symbolSize;if(null!=v){var y=-1/0;M(v,(function(t){t>y&&(y=t)})),f.symbolSize=C(v,(function(t){return D(t,[0,y],[0,h[0]],!0)}))}}),this)}.call(this,o)},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(S.a),P=A,component=n(347),L=[20,140],j=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()})),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=L[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=L[1])},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):l.t(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),l.k(this.stateList,(function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)}),this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=k.c((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries((function(n){var o=[],data=n.getData();data.each(this.getDataDimensionIndex(data),(function(e,n){t[0]<=e&&e<=t[1]&&o.push(n)}),this),e.push({seriesId:n.id,dataIndex:o})}),this),e},e.prototype.getVisualMeta=function(t){var e=R(this,"outOfRange",this.getExtent()),n=R(this,"inRange",this.option.range.slice()),o=[];function r(e,n){o.push({value:e,color:t(e,n)})}for(var l=0,c=0,d=n.length,h=e.length;c<h&&(!n.length||e[c]<=n[0]);c++)e[c]<n[l]&&r(e[c],"outOfRange");for(var f=1;l<d;l++,f=0)f&&o.length&&r(n[l],"outOfRange"),r(n[l],"inRange");for(f=1;c<h;c++)(!n.length||n[n.length-1]<e[c])&&(f&&(o.length&&r(o[o.length-1].value,"outOfRange"),f=0),r(e[c],"outOfRange"));var v=o.length;return{stops:o,outerColors:[v?o[0].color:"transparent",v?o[v-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Object(component.d)(P.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(P);function R(t,e,n){if(n[0]===n[1])return n.slice();for(var o=(n[1]-n[0])/200,r=n[0],l=[],i=0;i<=200&&r<n[1];i++)l.push(r),r+=o;return l.push(n[1]),l}var z=j,N=n(417),V=n(339),E=n(528),B=n(327),H=n(331),$=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return Object(r.a)(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,n,o){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,e,n,o):this.group.removeAll()},e.prototype.renderBackground=function(t){var e=this.visualMapModel,n=B.g(e.get("padding")||0),rect=t.getBoundingRect();t.add(new E.a({z2:-1,silent:!0,shape:{x:rect.x-n[3],y:rect.y-n[0],width:rect.width+n[3]+n[1],height:rect.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,n){var o=(n=n||{}).forceState,r=this.visualMapModel,c={};if("color"===e){var d=r.get("contentColor");c.color=d}function h(t){return c[t]}function f(t,e){c[t]=e}var y=r.controllerVisuals[o||r.getValueState(t)],m=v.a.prepareVisualTypes(y);return l.k(m,(function(o){var r=y[o];n.convertOpacityToAlpha&&"opacity"===o&&(o="colorAlpha",r=y.__alphaForOpacity),v.a.dependsOn(o,e)&&r&&r.applyVisual(t,h,f)})),c[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,n=this.api;H.g(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,e,n,o){},e.type="visualMap",e}(n(335).a),U=$,G=n(386),F=n(465),W=n(320),Y=n(553),X=n(342),J=[["left","right","width"],["top","bottom","height"]];function Z(t,e,n){var o=t.option,r=o.align;if(null!=r&&"auto"!==r)return r;for(var l={width:e.getWidth(),height:e.getHeight()},c="horizontal"===o.orient?1:0,d=J[c],h=[0,null,10],f={},i=0;i<3;i++)f[J[1-c][i]]=h[i],f[d[i]]=2===i?n[0]:o[d[i]];var v=[["x","width",3],["y","height",0]][c],rect=Object(H.e)(f,l,o.padding);return d[(rect.margin[v[2]]||0)+rect[v[0]]+.5*rect[v[1]]<.5*l[v[1]]?0:1]}function K(t,e){return l.k(t||[],(function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")})),t}var Q=n(380),tt=n(325),symbol=n(328),et=n(336),it=n(329),nt=k.j,at=l.k,ot=Math.min,st=Math.max,lt=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return Object(r.a)(e,t),e.prototype.doRender=function(t,e,n,o){this._api=n,o&&"selectDataRange"===o.type&&o.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,n){if(e){var text=e[1-n];text=null!=text?text+"":"";var o=this.visualMapModel,r=o.get("textGap"),l=o.itemSize,c=this._shapes.mainGroup,d=this._applyTransform([l[0]/2,0===n?-r:l[1]+r],c),h=this._applyTransform(0===n?"bottom":"top",c),f=this._orient,v=this.visualMapModel.textStyleModel;this.group.add(new G.a({style:{x:d[0],y:d[1],verticalAlign:"horizontal"===f?"middle":h,align:"horizontal"===f?h:"center",text:text,font:v.getFont(),fill:v.getTextColor()}}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,n=this._shapes,o=e.itemSize,r=this._orient,c=this._useHandle,d=Z(e,this.api,o),h=n.mainGroup=this._createBarGroup(d),f=new F.a;h.add(f),f.add(n.outOfRange=ut()),f.add(n.inRange=ut(null,c?ht(this._orient):null,l.c(this._dragHandle,this,"all",!1),l.c(this._dragHandle,this,"all",!0))),f.setClipPath(new E.a({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var v=e.textStyleModel.getTextRect("国"),y=st(v.width,v.height);c&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(e,h,0,o,y,r),this._createHandle(e,h,1,o,y,r)),this._createIndicator(e,h,o,y,r),t.add(h)},e.prototype._createHandle=function(t,e,n,o,r,c){var d=l.c(this._dragHandle,this,n,!1),h=l.c(this._dragHandle,this,n,!0),f=Object(Q.h)(t.get("handleSize"),o[0]),v=Object(symbol.a)(t.get("handleIcon"),-f/2,-f/2,f,f,null,!0),cursor=ht(this._orient);v.attr({cursor:cursor,draggable:!0,drift:d,ondragend:h,onmousemove:function(t){V.g(t.event)}}),v.x=o[0]/2,v.useStyle(t.getModel("handleStyle").getItemStyle()),v.setStyle({strokeNoScale:!0,strokeFirst:!0}),v.style.lineWidth*=2,v.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(tt.E)(v,!0),e.add(v);var y=this.visualMapModel.textStyleModel,m=new G.a({cursor:cursor,draggable:!0,drift:d,onmousemove:function(t){V.g(t.event)},ondragend:h,style:{x:0,y:0,text:"",font:y.getFont(),fill:y.getTextColor()}});m.ensureState("blur").style={opacity:.1},m.stateTransition={duration:200},this.group.add(m);var _=[f,0],x=this._shapes;x.handleThumbs[n]=v,x.handleLabelPoints[n]=_,x.handleLabels[n]=m},e.prototype._createIndicator=function(t,e,n,o,r){var c=Object(Q.h)(t.get("indicatorSize"),n[0]),d=Object(symbol.a)(t.get("indicatorIcon"),-c/2,-c/2,c,c,null,!0);d.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var h=t.getModel("indicatorStyle").getItemStyle();if(d instanceof et.a){var f=d.style;d.useStyle(l.m({image:f.image,x:f.x,y:f.y,width:f.width,height:f.height},h))}else d.useStyle(h);e.add(d);var v=this.visualMapModel.textStyleModel,y=new G.a({silent:!0,invisible:!0,style:{x:0,y:0,text:"",font:v.getFont(),fill:v.getTextColor()}});this.group.add(y);var m=[("horizontal"===r?o/2:6)+n[0]/2,0],_=this._shapes;_.indicator=d,_.indicatorLabel=y,_.indicatorLabelPoint=m,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,n,o){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([n,o],this._shapes.mainGroup,!0);this._updateInterval(t,r[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():ct(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),o=[0,t.itemSize[1]];this._handleEnds=[nt(e[0],n,o,!0),nt(e[1],n,o,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var n=this.visualMapModel,o=this._handleEnds,r=[0,n.itemSize[1]];Object(X.a)(e,o,r,t,0);var l=n.getExtent();this._dataInterval=[nt(o[0],r,l,!0),nt(o[1],r,l,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,n=e.getExtent(),o=this._shapes,r=[0,e.itemSize[1]],l=t?r:this._handleEnds,c=this._createBarVisual(this._dataInterval,n,l,"inRange"),d=this._createBarVisual(n,n,r,"outOfRange");o.inRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),o.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(l,c)},e.prototype._createBarVisual=function(t,e,n,o){var r={forceState:o,convertOpacityToAlpha:!0},l=this._makeColorGradient(t,r),c=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],d=this._createBarPoints(n,c);return{barColor:new N.a(0,0,0,1,l),barPoints:d,handlesColor:[l[0].color,l[l.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var n=[],o=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var i=1;i<100;i++){var r=t[0]+o*i;if(r>t[1])break;n.push({color:this.getControllerVisual(r,"color",e),offset:i/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},e.prototype._createBarPoints=function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new F.a("horizontal"!==e||n?"horizontal"===e&&n?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||n?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var n=this._shapes,o=this.visualMapModel,r=n.handleThumbs,l=n.handleLabels,c=o.itemSize,d=o.getExtent();at([0,1],(function(h){var f=r[h];f.setStyle("fill",e.handlesColor[h]),f.y=t[h];var v=nt(t[h],[0,c[1]],d,!0),y=this.getControllerVisual(v,"symbolSize");f.scaleX=f.scaleY=y/c[0],f.x=c[0]-y/2;var m=W.applyTransform(n.handleLabelPoints[h],W.getTransform(f,this.group));l[h].setStyle({x:m[0],y:m[1],text:o.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})}),this)}},e.prototype._showIndicator=function(t,e,n,o){var r=this.visualMapModel,l=r.getExtent(),c=r.itemSize,d=[0,c[1]],h=this._shapes,f=h.indicator;if(f){f.attr("invisible",!1);var v=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),y=this.getControllerVisual(t,"symbolSize"),m=nt(t,l,d,!0),_=c[0]-y/2,x={x:f.x,y:f.y};f.y=m,f.x=_;var w=W.applyTransform(h.indicatorLabelPoint,W.getTransform(f,this.group)),k=h.indicatorLabel;k.attr("invisible",!1);var S=this._applyTransform("left",h.mainGroup),C="horizontal"===this._orient;k.setStyle({text:(n||"")+r.formatValueText(e),verticalAlign:C?S:"middle",align:C?"center":S});var M={x:_,y:m,style:{fill:v}},O={style:{x:w[0],y:w[1]}};if(r.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var I={duration:100,easing:"cubicInOut",additive:!0};f.x=x.x,f.y=x.y,f.animateTo(M,I),k.animateTo(O,I)}else f.attr(M),k.attr(O);this._firstShowIndicator=!1;var T=this._shapes.handleLabels;if(T)for(var i=0;i<T.length;i++)this._api.enterBlur(T[i])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",(function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,o=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);o[1]=ot(st(0,o[1]),n[1]),t._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=n[0])}})).on("mouseout",(function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()}))},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var n=this.visualMapModel,o=n.itemSize;if(n.option.hoverLink){var r=[0,o[1]],l=n.getExtent();t=ot(st(r[0],t),r[1]);var c=function(t,e,n){var o=6,r=t.get("hoverLinkDataSize");r&&(o=nt(r,e,n,!0)/2);return o}(n,l,r),d=[t-c,t+c],h=nt(t,r,l,!0),f=[nt(d[0],r,l,!0),nt(d[1],r,l,!0)];d[0]<r[0]&&(f[0]=-1/0),d[1]>r[1]&&(f[1]=1/0),e&&(f[0]===-1/0?this._showIndicator(h,f[1],"< ",c):f[1]===1/0?this._showIndicator(h,f[0],"> ",c):this._showIndicator(h,h,"≈ ",c));var v=this._hoverLinkDataIndices,y=[];(e||ct(n))&&(y=this._hoverLinkDataIndices=n.findTargetDataIndices(f));var m=w.d(v,y);this._dispatchHighDown("downplay",K(m[0],n)),this._dispatchHighDown("highlight",K(m[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=Object(it.a)(e).dataIndex){var o=Object(it.a)(e),r=this.ecModel.getSeriesByIndex(o.seriesIndex);if(n.isTargetSeries(r)){var data=r.getData(o.dataType),l=data.getStore().get(n.getDataDimensionIndex(data),o.dataIndex);isNaN(l)||this._showIndicator(l,l)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var i=0;i<e.length;i++)this._api.leaveBlur(e[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",K(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,element,e,n){var o=W.getTransform(element,n?null:this.group);return l.t(t)?W.applyTransform(t,o,e):W.transformDirection(t,o,e)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(U);function ut(t,cursor,e,n){return new Y.a({shape:{points:t},draggable:!!e,cursor:cursor,drift:e,onmousemove:function(t){V.g(t.event)},ondragend:n})}function ct(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function ht(t){return"vertical"===t?"ns-resize":"ew-resize"}var pt=lt,ft={type:"selectDataRange",event:"dataRangeSelected",update:"update"},gt=function(t,e){e.eachComponent({mainType:"visualMap",query:t},(function(e){e.setSelected(t.selected)}))},vt=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",(function(e){var o,r,c,d,h,f=t.pipelineContext;!e.isTargetSeries(t)||f&&f.large||n.push((o=e.stateList,r=e.targetVisuals,c=l.c(e.getValueState,e),d=e.getDataDimensionIndex(t.getData()),h={},l.k(o,(function(t){var e=v.a.prepareVisualTypes(r[t]);h[t]=e})),{progress:function(t,data){var e,n;function o(t){return Object(y.a)(data,n,t)}function l(t,e){Object(y.c)(data,n,t,e)}null!=d&&(e=data.getDimensionIndex(d));for(var f=data.getStore();null!=(n=t.next());){var v=data.getRawDataItem(n);if(!v||!1!==v.visualMap)for(var m=null!=d?f.get(e,n):n,_=c(m),x=r[_],w=h[_],i=0,k=w.length;i<k;i++){var S=w[i];x[S]&&x[S].applyVisual(m,o,l)}}}}))})),n}},{createOnAllSeries:!0,reset:function(t,e){var data=t.getData(),n=[];e.eachComponent("visualMap",(function(e){if(e.isTargetSeries(t)){var o=e.getVisualMeta(l.c(yt,null,t,e))||{stops:[],outerColors:[]},r=e.getDataDimensionIndex(data);r>=0&&(o.dimension=r,n.push(o))}})),t.getData().setVisual("visualMeta",n)}}];function yt(t,e,n,o){for(var r=e.targetVisuals[o],l=v.a.prepareVisualTypes(r),c={color:Object(y.b)(t.getData(),"color")},i=0,d=l.length;i<d;i++){var h=l[i],f=r["opacity"===h?"__alphaForOpacity":h];f&&f.applyVisual(n,m,_)}return c.color;function m(t){return c[t]}function _(t,e){c[t]=e}}var mt=l.k;function _t(option){var t=option&&option.visualMap;l.t(t)||(t=t?[t]:[]),mt(t,(function(t){if(t){bt(t,"splitList")&&!bt(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&l.t(e)&&mt(e,(function(t){l.A(t)&&(bt(t,"start")&&!bt(t,"min")&&(t.min=t.start),bt(t,"end")&&!bt(t,"max")&&(t.max=t.end))}))}}))}function bt(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var xt=!1;function wt(t){xt||(xt=!0,t.registerSubTypeDefaulter("visualMap",(function(option){return option.categories||(option.pieces?option.pieces.length>0:option.splitNumber>0)&&!option.calculable?"piecewise":"continuous"})),t.registerAction(ft,gt),Object(l.k)(vt,(function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)})),t.registerPreprocessor(_t))}function kt(t){t.registerComponentModel(z),t.registerComponentView(pt),wt(t)}var St=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return Object(r.a)(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],Ct[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var r=this.option.categories;this.resetVisual((function(t,e){"categories"===o?(t.mappingMethod="category",t.categories=l.d(r)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=l.G(this._pieceList,(function(t){return t=l.d(t),"inRange"!==e&&(t.visual=null),t})))}))},e.prototype.completeVisualOption=function(){var option=this.option,e={},n=v.a.listVisualTypes(),o=this.isCategory();function r(t,e,n){return t&&t[e]&&t[e].hasOwnProperty(n)}l.k(option.pieces,(function(t){l.k(n,(function(n){t.hasOwnProperty(n)&&(e[n]=1)}))})),l.k(e,(function(t,e){var n=!1;l.k(this.stateList,(function(t){n=n||r(option,t,e)||r(option.target,t,e)}),this),!n&&l.k(this.stateList,(function(t){(option[t]||(option[t]={}))[e]=f.get(e,"inRange"===t?"active":"inactive",o)}))}),this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var n=this.option,o=this._pieceList,r=(e?n:t).selected||{};if(n.selected=r,l.k(o,(function(t,e){var n=this.getSelectedMapKey(t);r.hasOwnProperty(n)||(r[n]=!0)}),this),"single"===n.selectedMode){var c=!1;l.k(o,(function(t,e){var n=this.getSelectedMapKey(t);r[n]&&(c?r[n]=!1:c=!0)}),this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var option=this.option;return option.pieces&&option.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=l.d(t)},e.prototype.getValueState=function(t){var e=v.a.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],n=this._pieceList;return this.eachTargetSeries((function(o){var r=[],data=o.getData();data.each(this.getDataDimensionIndex(data),(function(e,o){v.a.findPieceIndex(e,n)===t&&r.push(o)}),this),e.push({seriesId:o.id,dataIndex:r})}),this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],n=["",""],o=this,r=this._pieceList.slice();if(r.length){var c=r[0].interval[0];c!==-1/0&&r.unshift({interval:[-1/0,c]}),(c=r[r.length-1].interval[1])!==1/0&&r.push({interval:[c,1/0]})}else r.push({interval:[-1/0,1/0]});var d=-1/0;return l.k(r,(function(t){var e=t.interval;e&&(e[0]>d&&h([d,e[0]],"outOfRange"),h(e.slice()),d=e[1])}),this),{stops:e,outerColors:n}}function h(r,l){var c=o.getRepresentValue({interval:r});l||(l=o.getValueState(c));var d=t(c,l);r[0]===-1/0?n[0]=d:r[1]===1/0?n[1]=d:e.push({value:r[0],color:d},{value:r[1],color:d})}},e.type="visualMap.piecewise",e.defaultOption=Object(component.d)(P.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(P),Ct={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),o=this.getExtent(),r=e.splitNumber;r=Math.max(parseInt(r,10),1),e.splitNumber=r;for(var c=(o[1]-o[0])/r;+c.toFixed(n)!==c&&n<5;)n++;e.precision=n,c=+c.toFixed(n),e.minOpen&&t.push({interval:[-1/0,o[0]],close:[0,0]});for(var d=0,h=o[0];d<r;h+=c,d++){var f=d===r-1?o[1]:h+c;t.push({interval:[h,f],close:[1,1]})}e.maxOpen&&t.push({interval:[o[1],1/0],close:[0,0]}),Object(k.p)(t),l.k(t,(function(t,e){t.index=e,t.text=this.formatValueText(t.interval)}),this)},categories:function(t){var e=this.option;l.k(e.categories,(function(e){t.push({text:this.formatValueText(e,!0),value:e})}),this),Mt(e,t)},pieces:function(t){var e=this.option;l.k(e.pieces,(function(e,n){l.A(e)||(e={value:e});var o={text:"",index:n};if(null!=e.label&&(o.text=e.label),e.hasOwnProperty("value")){var r=o.value=e.value;o.interval=[r,r],o.close=[1,1]}else{for(var c=o.interval=[],d=o.close=[0,0],h=[1,0,1],f=[-1/0,1/0],y=[],m=0;m<2;m++){for(var _=[["gte","gt","min"],["lte","lt","max"]][m],i=0;i<3&&null==c[m];i++)c[m]=e[_[i]],d[m]=h[i],y[m]=2===i;null==c[m]&&(c[m]=f[m])}y[0]&&c[1]===1/0&&(d[0]=0),y[1]&&c[0]===-1/0&&(d[1]=0),c[0]===c[1]&&d[0]&&d[1]&&(o.value=c[0])}o.visual=v.a.retrieveVisuals(e),t.push(o)}),this),Mt(e,t),Object(k.p)(t),l.k(t,(function(t){var e=t.close,n=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)}),this)}};function Mt(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var Ot=St,It=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),o=e.textStyleModel,r=o.getFont(),c=o.getTextColor(),d=this._getItemAlign(),h=e.itemSize,f=this._getViewData(),v=f.endsText,y=l.M(e.get("showLabel",!0),!v);v&&this._renderEndsText(t,v[0],h,y,d),l.k(f.viewPieceList,(function(o){var f=o.piece,v=new F.a;v.onclick=l.c(this._onItemClick,this,f),this._enableHoverLink(v,o.indexInModelPieceList);var m=e.getRepresentValue(f);if(this._createItemSymbol(v,m,[0,0,h[0],h[1]]),y){var _=this.visualMapModel.getValueState(m);v.add(new G.a({style:{x:"right"===d?-n:h[0]+n,y:h[1]/2,text:f.text,verticalAlign:"middle",align:d,font:r,fill:c,opacity:"outOfRange"===_?.5:1}}))}t.add(v)}),this),v&&this._renderEndsText(t,v[1],h,y,d),H.a(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var n=this;t.on("mouseover",(function(){return o("highlight")})).on("mouseout",(function(){return o("downplay")}));var o=function(t){var o=n.visualMapModel;o.option.hoverLink&&n.api.dispatchAction({type:t,batch:K(o.findTargetDataIndices(e),o)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return Z(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},e.prototype._renderEndsText=function(t,text,e,n,o){if(text){var r=new F.a,l=this.visualMapModel.textStyleModel;r.add(new G.a({style:{x:n?"right"===o?e[0]:0:e[0]/2,y:e[1]/2,verticalAlign:"middle",align:n?o:"center",text:text,font:l.getFont(),fill:l.getTextColor()}})),t.add(r)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=l.G(t.getPieceList(),(function(t,e){return{piece:t,indexInModelPieceList:e}})),n=t.get("text"),o=t.get("orient"),r=t.get("inverse");return("horizontal"===o?r:!r)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},e.prototype._createItemSymbol=function(t,e,n){t.add(Object(symbol.a)(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},e.prototype._onItemClick=function(t){var e=this.visualMapModel,option=e.option,n=l.d(option.selected),o=e.getSelectedMapKey(t);"single"===option.selectedMode?(n[o]=!0,l.k(n,(function(t,e){n[e]=e===o}))):n[o]=!n[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:n})},e.type="visualMap.piecewise",e}(U),Tt=It;function Dt(t){t.registerComponentModel(Ot),t.registerComponentView(Tt),wt(t)}function At(t){Object(o.a)(kt),Object(o.a)(Dt)}},443:function(t,e,n){"use strict";n.d(e,"a",(function(){return mt}));var o=n(319),r=n(378),l=n(370),c=n(328),d=n(465),h=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(o.a)(e,t),e.prototype.getInitialData=function(option){return Object(r.a)(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new d.a,line=Object(c.a)("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(line),line.setStyle(t.lineStyle);var n=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),r="none"===n?"circle":n,l=.8*t.itemHeight,symbol=Object(c.a)(r,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);e.add(symbol),symbol.setStyle(t.itemStyle);var h="inherit"===t.iconRotate?o:t.iconRotate||0;return symbol.rotation=h*Math.PI/180,symbol.setOrigin([t.itemWidth/2,t.itemHeight/2]),r.indexOf("empty")>-1&&(symbol.style.stroke=symbol.style.fill,symbol.style.fill="#fff",symbol.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={zlevel:0,z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0,lineStyle:{width:"bolder"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"}},e}(l.a),f=h,v=n(318),y=n(371),m=n(362),_=n(338);function x(t,data,e){var n=t.getBaseAxis(),o=t.getOtherAxis(n),r=function(t,e){var n=0,o=t.scale.getExtent();"start"===e?n=o[0]:"end"===e?n=o[1]:o[0]>0?n=o[0]:o[1]<0&&(n=o[1]);return n}(o,e),l=n.dim,c=o.dim,d=data.mapDimension(c),h=data.mapDimension(l),f="x"===c||"radius"===c?1:0,y=Object(v.G)(t.dimensions,(function(t){return data.mapDimension(t)})),m=!1,x=data.getCalculationInfo("stackResultDimension");return Object(_.c)(data,y[0])&&(m=!0,y[0]=x),Object(_.c)(data,y[1])&&(m=!0,y[1]=x),{dataDimsForPoint:y,valueStart:r,valueAxisDim:c,baseAxisDim:l,stacked:!!m,valueDim:d,baseDim:h,baseDataOffset:f,stackedOverDimension:data.getCalculationInfo("stackedOverDimension")}}function w(t,e,data,n){var o=NaN;t.stacked&&(o=data.get(data.getCalculationInfo("stackedOverDimension"),n)),isNaN(o)&&(o=t.valueStart);var r=t.baseDataOffset,l=[];return l[r]=data.get(t.baseDim,n),l[1-r]=o,e.dataToPoint(l)}var k="undefined"!=typeof Float32Array,S=k?Float32Array:Array;function C(t){return Object(v.t)(t)?k?new Float32Array(t):t:new S(t)}var M=n(417),O=n(375),I=n(386),T=n(321),D=n(353),A=n(403),P=n(404),L=Math.min,j=Math.max;function R(t,e){return isNaN(t)||isNaN(e)}function z(t,e,n,o,r,l,c,d,h){for(var f,v,y,m,_,x,w=n,k=0;k<o;k++){var S=e[2*w],C=e[2*w+1];if(w>=r||w<0)break;if(R(S,C)){if(h){w+=l;continue}break}if(w===n)t[l>0?"moveTo":"lineTo"](S,C),y=S,m=C;else{var M=S-f,O=C-v;if(M*M+O*O<.5){w+=l;continue}if(c>0){var I=w+l,T=e[2*I],D=e[2*I+1],A=k+1;if(h)for(;R(T,D)&&A<o;)A++,T=e[2*(I+=l)],D=e[2*I+1];var P=.5,z=0,N=0,V=void 0,E=void 0;if(A>=o||R(T,D))_=S,x=C;else{z=T-f,N=D-v;var B=S-f,H=T-S,$=C-v,U=D-C,G=void 0,F=void 0;"x"===d?(G=Math.abs(B),F=Math.abs(H),_=S-G*c,x=C,V=S+G*c,E=C):"y"===d?(G=Math.abs($),F=Math.abs(U),_=S,x=C-G*c,V=S,E=C+G*c):(G=Math.sqrt(B*B+$*$),_=S-z*c*(1-(P=(F=Math.sqrt(H*H+U*U))/(F+G))),x=C-N*c*(1-P),E=C+N*c*P,V=L(V=S+z*c*P,j(T,S)),E=L(E,j(D,C)),V=j(V,L(T,S)),x=C-(N=(E=j(E,L(D,C)))-C)*G/F,_=L(_=S-(z=V-S)*G/F,j(f,S)),x=L(x,j(v,C)),V=S+(z=S-(_=j(_,L(f,S))))*F/G,E=C+(N=C-(x=j(x,L(v,C))))*F/G)}t.bezierCurveTo(y,m,_,x,S,C),y=V,m=E}else t.lineTo(S,C)}f=S,v=C,w+=l}return k}var N=function(){this.smooth=0,this.smoothConstraint=!0},V=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polyline",n}return Object(o.a)(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new N},e.prototype.buildPath=function(t,e){var n=e.points,i=0,o=n.length/2;if(e.connectNulls){for(;o>0&&R(n[2*o-2],n[2*o-1]);o--);for(;i<o&&R(n[2*i],n[2*i+1]);i++);}for(;i<o;)i+=z(t,n,i,o,o,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,o,data=this.path.data,r=A.a.CMD,l="x"===e,c=[],i=0;i<data.length;){var d=void 0,h=void 0,f=void 0,v=void 0,y=void 0,m=void 0,_=void 0;switch(data[i++]){case r.M:n=data[i++],o=data[i++];break;case r.L:if(d=data[i++],h=data[i++],(_=l?(t-n)/(d-n):(t-o)/(h-o))<=1&&_>=0){var x=l?(h-o)*_+o:(d-n)*_+n;return l?[t,x]:[x,t]}n=d,o=h;break;case r.C:d=data[i++],h=data[i++],f=data[i++],v=data[i++],y=data[i++],m=data[i++];var w=l?Object(P.f)(n,d,f,y,t,c):Object(P.f)(o,h,v,m,t,c);if(w>0)for(var k=0;k<w;k++){var S=c[k];if(S<=1&&S>=0){x=l?Object(P.a)(o,h,v,m,S):Object(P.a)(n,d,f,y,S);return l?[t,x]:[x,t]}}n=y,o=m}}},e}(D.b),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.a)(e,t),e}(N),B=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polygon",n}return Object(o.a)(e,t),e.prototype.getDefaultShape=function(){return new E},e.prototype.buildPath=function(t,e){var n=e.points,o=e.stackedOnPoints,i=0,r=n.length/2,l=e.smoothMonotone;if(e.connectNulls){for(;r>0&&R(n[2*r-2],n[2*r-1]);r--);for(;i<r&&R(n[2*i],n[2*i+1]);i++);}for(;i<r;){var c=z(t,n,i,r,r,1,e.smooth,l,e.connectNulls);z(t,o,i+c-1,c,r,-1,e.stackedOnSmooth,l,e.connectNulls),i+=c+1,t.closePath()}},e}(D.b),H=n(369),$=n(528),U=n(728),G=n(322);function F(t,e,n,o,r){var rect=t.getArea(),l=rect.x,c=rect.y,d=rect.width,h=rect.height,f=n.get(["lineStyle","width"])||2;l-=f/2,c-=f/2,d+=f,h+=f,l=Math.floor(l),d=Math.round(d);var v=new $.a({shape:{x:l,y:c,width:d,height:h}});if(e){var y=t.getBaseAxis(),m=y.isHorizontal(),_=y.inverse;m?(_&&(v.shape.x+=d),v.shape.width=0):(_||(v.shape.y+=h),v.shape.height=0);var x="function"==typeof r?function(t){r(t,v)}:null;O.a(v,{shape:{width:d,height:h,x:l,y:c}},n,null,o,x)}return v}function W(t,e,n){var o=t.getArea(),r=Object(G.r)(o.r0,1),l=Object(G.r)(o.r,1),c=new U.a({shape:{cx:Object(G.r)(t.cx,1),cy:Object(G.r)(t.cy,1),r0:r,r:l,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});e&&("angle"===t.getBaseAxis().dim?c.shape.endAngle=o.startAngle:c.shape.r=r,O.a(c,{shape:{endAngle:o.endAngle,r:l}},n));return c}var Y=n(356),X=n(325),J=n(326),Z=n(363),K=n(329),Q=n(327),tt=n(337);function et(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return;return!0}}function it(t){for(var e=1/0,n=1/0,o=-1/0,r=-1/0,i=0;i<t.length;){var l=t[i++],c=t[i++];isNaN(l)||(e=Math.min(l,e),o=Math.max(l,o)),isNaN(c)||(n=Math.min(c,n),r=Math.max(c,r))}return[[e,n],[o,r]]}function nt(t,e){var n=it(t),o=n[0],r=n[1],l=it(e),c=l[0],d=l[1];return Math.max(Math.abs(o[0]-c[0]),Math.abs(o[1]-c[1]),Math.abs(r[0]-d[0]),Math.abs(r[1]-d[1]))}function at(t){return"number"==typeof t?t:t?.5:0}function ot(t,e,n){for(var o=e.getBaseAxis(),r="x"===o.dim||"radius"===o.dim?0:1,l=[],i=0,c=[],d=[],h=[];i<t.length-2;i+=2)switch(h[0]=t[i+2],h[1]=t[i+3],d[0]=t[i],d[1]=t[i+1],l.push(d[0],d[1]),n){case"end":c[r]=h[r],c[1-r]=d[1-r],l.push(c[0],c[1]);break;case"middle":var f=(d[r]+h[r])/2,v=[];c[r]=v[r]=f,c[1-r]=d[1-r],v[1-r]=h[1-r],l.push(c[0],c[1]),l.push(v[0],v[1]);break;default:c[r]=d[r],c[1-r]=h[1-r],l.push(c[0],c[1])}return l.push(t[i++],t[i++]),l}function st(data,t,e){var n=data.getVisual("visualMeta");if(n&&n.length&&data.count()&&"cartesian2d"===t.type){for(var o,r,i=n.length-1;i>=0;i--){var l=data.getDimensionInfo(n[i].dimension);if("x"===(o=l&&l.coordDim)||"y"===o){r=n[i];break}}if(r){var c=t.getAxis(o),d=v.G(r.stops,(function(t){return{coord:c.toGlobalCoord(c.dataToCoord(t.value)),color:t.color}})),h=d.length,f=r.outerColors.slice();h&&d[0].coord>d[h-1].coord&&(d.reverse(),f.reverse());var y=function(t,e){var n,o,r=[],l=t.length;function c(t,e,n){var o=t.coord,p=(n-o)/(e.coord-o);return{coord:n,color:Object(tt.b)(p,[t.color,e.color])}}for(var i=0;i<l;i++){var d=t[i],h=d.coord;if(h<0)n=d;else{if(h>e){o&&r.push(c(o,d,e));break}n&&(r.push(c(n,d,0)),n=null),r.push(d),o=d}}return r}(d,"x"===o?e.getWidth():e.getHeight()),m=y.length;if(!m&&h)return d[0].coord<0?f[1]?f[1]:d[h-1].color:f[0]?f[0]:d[0].color;var _=y[0].coord-0,x=y[m-1].coord+0,w=x-_;if(w<.001)return"transparent";v.k(y,(function(t){t.offset=(t.coord-_)/w})),y.push({offset:m?y[m-1].offset:.5,color:f[1]||"transparent"}),y.unshift({offset:m?y[0].offset:.5,color:f[0]||"transparent"});var k=new M.a(0,0,0,0,y,!0);return k[o]=_,k[o+"2"]=x,k}}}function lt(t,data,e){var n=t.get("showAllSymbol"),o="auto"===n;if(!n||o){var r=e.getAxesByScale("ordinal")[0];if(r&&(!o||!function(t,data){var e=t.getExtent(),n=Math.abs(e[1]-e[0])/t.scale.count();isNaN(n)&&(n=0);for(var o=data.count(),r=Math.max(1,Math.round(o/5)),l=0;l<o;l+=r)if(1.5*m.a.getSymbolSize(data,l)[t.isHorizontal()?1:0]>n)return!1;return!0}(r,data))){var l=data.mapDimension(r.dim),c={};return v.k(r.getViewLabels(),(function(t){var e=r.scale.getRawOrdinalNumber(t.tickValue);c[e]=1})),function(t){return!c.hasOwnProperty(data.get(l,t))}}}}function ut(t,e){return[t[2*e],t[2*e+1]]}function ct(t){if(t.get(["endLabel","show"]))return!0;for(var i=0;i<X.g.length;i++)if(t.get([X.g[i],"endLabel","show"]))return!0;return!1}function ht(t,e,n,o){if(Object(Y.a)(e,"cartesian2d")){var r=o.getModel("endLabel"),l=r.get("valueAnimation"),c=o.getData(),d={lastFrameIndex:0},h=ct(o)?function(n,o){t._endLabelOnDuring(n,o,c,d,l,r,e)}:null,f=e.getBaseAxis().isHorizontal(),v=F(e,n,o,(function(){var e=t._endLabel;e&&n&&null!=d.originalX&&e.attr({x:d.originalX,y:d.originalY})}),h);if(!o.get("clip",!0)){var y=v.shape,m=Math.max(y.width,y.height);f?(y.y-=m,y.height+=2*m):(y.x-=m,y.width+=2*m)}return h&&h(1,v),v}return W(e,n,o)}var pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.a)(e,t),e.prototype.init=function(){var t=new d.a,e=new y.a;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},e.prototype.render=function(t,e,n){var o=this,r=t.coordinateSystem,l=this.group,data=t.getData(),c=t.getModel("lineStyle"),d=t.getModel("areaStyle"),h=data.getLayout("points")||[],f="polar"===r.type,y=this._coordSys,m=this._symbolDraw,polyline=this._polyline,polygon=this._polygon,_=this._lineGroup,k=t.get("animation"),S=!d.isEmpty(),M=d.get("origin"),I=x(r,data,M),T=S&&function(t,data,e){if(!e.valueDim)return[];for(var n=data.count(),o=C(2*n),r=0;r<n;r++){var l=w(e,t,data,r);o[2*r]=l[0],o[2*r+1]=l[1]}return o}(r,data,I),D=t.get("showSymbol"),A=D&&!f&&lt(t,data,r),P=this._data;P&&P.eachItemGraphicEl((function(t,e){t.__temp&&(l.remove(t),P.setItemGraphicEl(e,null))})),D||m.remove(),l.add(_);var L,j=!f&&t.get("step");r&&r.getArea&&t.get("clip",!0)&&(null!=(L=r.getArea()).width?(L.x-=.1,L.y-=.1,L.width+=.2,L.height+=.2):L.r0&&(L.r0-=.5,L.r+=.5)),this._clipShapeForSymbol=L;var R=st(data,r,n)||data.getVisual("style")[data.getVisual("drawType")];if(polyline&&y.type===r.type&&j===this._step){S&&!polygon?polygon=this._newPolygon(h,T):polygon&&!S&&(_.remove(polygon),polygon=this._polygon=null),f||this._initOrUpdateEndLabel(t,r,Object(Q.b)(R));var z=_.getClipPath();if(z){var N=ht(this,r,!1,t);O.a(z,{shape:N.shape},t)}else _.setClipPath(ht(this,r,!0,t));D&&m.updateData(data,{isIgnore:A,clipShape:L,disableAnimation:!0,getSymbolPoint:function(t){return[h[2*t],h[2*t+1]]}}),et(this._stackedOnPoints,T)&&et(this._points,h)||(k?this._doUpdateAnimation(data,T,r,n,j,M):(j&&(h=ot(h,r,j),T&&(T=ot(T,r,j))),polyline.setShape({points:h}),polygon&&polygon.setShape({points:h,stackedOnPoints:T})))}else D&&m.updateData(data,{isIgnore:A,clipShape:L,disableAnimation:!0,getSymbolPoint:function(t){return[h[2*t],h[2*t+1]]}}),k&&this._initSymbolLabelAnimation(data,r,L),j&&(h=ot(h,r,j),T&&(T=ot(T,r,j))),polyline=this._newPolyline(h),S&&(polygon=this._newPolygon(h,T)),f||this._initOrUpdateEndLabel(t,r,Object(Q.b)(R)),_.setClipPath(ht(this,r,!0,t));var V=t.get(["emphasis","focus"]),E=t.get(["emphasis","blurScope"]);(polyline.useStyle(v.j(c.getLineStyle(),{fill:"none",stroke:R,lineJoin:"bevel"})),Object(X.H)(polyline,t,"lineStyle"),polyline.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"]))&&(polyline.getState("emphasis").style.lineWidth=+polyline.style.lineWidth+1);Object(K.a)(polyline).seriesIndex=t.seriesIndex,Object(X.n)(polyline,V,E);var B=at(t.get("smooth")),H=t.get("smoothMonotone"),$=t.get("connectNulls");if(polyline.setShape({smooth:B,smoothMonotone:H,connectNulls:$}),polygon){var U=data.getCalculationInfo("stackedOnSeries"),G=0;polygon.useStyle(v.j(d.getAreaStyle(),{fill:R,opacity:.7,lineJoin:"bevel",decal:data.getVisual("style").decal})),U&&(G=at(U.get("smooth"))),polygon.setShape({smooth:B,stackedOnSmooth:G,smoothMonotone:H,connectNulls:$}),Object(X.H)(polygon,t,"areaStyle"),Object(K.a)(polygon).seriesIndex=t.seriesIndex,Object(X.n)(polygon,V,E)}var F=function(t){o._changePolyState(t)};data.eachItemGraphicEl((function(t){t&&(t.onHoverStateChange=F)})),this._polyline.onHoverStateChange=F,this._data=data,this._coordSys=r,this._stackedOnPoints=T,this._points=h,this._step=j,this._valueOrigin=M},e.prototype.dispose=function(){},e.prototype.highlight=function(t,e,n,o){var data=t.getData(),r=T.s(data,o);if(this._changePolyState("emphasis"),!(r instanceof Array)&&null!=r&&r>=0){var l=data.getLayout("points"),symbol=data.getItemGraphicEl(r);if(!symbol){var c=l[2*r],d=l[2*r+1];if(isNaN(c)||isNaN(d))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,d))return;var h=t.get("zlevel"),f=t.get("z");(symbol=new m.a(data,r)).x=c,symbol.y=d,symbol.setZ(h,f);var v=symbol.getSymbolPath().getTextContent();v&&(v.zlevel=h,v.z=f,v.z2=this._polyline.z2+1),symbol.__temp=!0,data.setItemGraphicEl(r,symbol),symbol.stopSymbolAnimation(!0),this.group.add(symbol)}symbol.highlight()}else H.a.prototype.highlight.call(this,t,e,n,o)},e.prototype.downplay=function(t,e,n,o){var data=t.getData(),r=T.s(data,o);if(this._changePolyState("normal"),null!=r&&r>=0){var symbol=data.getItemGraphicEl(r);symbol&&(symbol.__temp?(data.setItemGraphicEl(r,null),this.group.remove(symbol)):symbol.downplay())}else H.a.prototype.downplay.call(this,t,e,n,o)},e.prototype._changePolyState=function(t){var polygon=this._polygon;Object(X.G)(this._polyline,t),polygon&&Object(X.G)(polygon,t)},e.prototype._newPolyline=function(t){var polyline=this._polyline;return polyline&&this._lineGroup.remove(polyline),polyline=new V({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(polyline),this._polyline=polyline,polyline},e.prototype._newPolygon=function(t,e){var polygon=this._polygon;return polygon&&this._lineGroup.remove(polygon),polygon=new B({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(polygon),this._polygon=polygon,polygon},e.prototype._initSymbolLabelAnimation=function(data,t,e){var n,o,r=t.getBaseAxis(),l=r.inverse;"cartesian2d"===t.type?(n=r.isHorizontal(),o=!1):"polar"===t.type&&(n="angle"===r.dim,o=!0);var c=data.hostModel,d=c.get("animationDuration");"function"==typeof d&&(d=d(null));var h=c.get("animationDelay")||0,f="function"==typeof h?h(null):h;data.eachItemGraphicEl((function(symbol,r){var c=symbol;if(c){var v=[symbol.x,symbol.y],y=void 0,m=void 0,_=void 0;if(e)if(o){var x=e,w=t.pointToCoord(v);n?(y=x.startAngle,m=x.endAngle,_=-w[1]/180*Math.PI):(y=x.r0,m=x.r,_=w[0])}else{var k=e;n?(y=k.x,m=k.x+k.width,_=symbol.x):(y=k.y+k.height,m=k.y,_=symbol.y)}var S=m===y?0:(_-y)/(m-y);l&&(S=1-S);var C="function"==typeof h?h(r):d*S+f,M=c.getSymbolPath(),text=M.getTextContent();c.attr({scaleX:0,scaleY:0}),c.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:C}),text&&text.animateFrom({style:{opacity:0}},{duration:300,delay:C}),M.disableLabelAnimation=!0}}))},e.prototype._initOrUpdateEndLabel=function(t,e,n){var o=t.getModel("endLabel");if(ct(t)){var r=t.getData(),polyline=this._polyline,l=this._endLabel;l||((l=this._endLabel=new I.a({z2:200})).ignoreClip=!0,polyline.setTextContent(this._endLabel),polyline.disableLabelAnimation=!0);var c=function(t){for(var e,n,o=t.length/2;o>0&&(e=t[2*o-2],n=t[2*o-1],isNaN(e)||isNaN(n));o--);return o-1}(r.getLayout("points"));c>=0&&(Object(J.f)(polyline,Object(J.d)(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:c,defaultText:function(t,e,n){return null!=n?Object(Z.a)(r,n):Object(Z.b)(r,t)},enableTextSetter:!0},function(t,e){var n=e.getBaseAxis(),o=n.isHorizontal(),r=n.inverse,l=o?r?"right":"left":"center",c=o?"middle":r?"top":"bottom";return{normal:{align:t.get("align")||l,verticalAlign:t.get("verticalAlign")||c}}}(o,e)),polyline.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,data,n,o,r,l){var c=this._endLabel,polyline=this._polyline;if(c){t<1&&null==n.originalX&&(n.originalX=c.x,n.originalY=c.y);var d=data.getLayout("points"),h=data.hostModel,f=h.get("connectNulls"),v=r.get("precision"),y=r.get("distance")||0,m=l.getBaseAxis(),_=m.isHorizontal(),x=m.inverse,w=e.shape,k=x?_?w.x:w.y+w.height:_?w.x+w.width:w.y,S=(_?y:0)*(x?-1:1),C=(_?0:-y)*(x?-1:1),M=_?"x":"y",O=function(t,e,n){for(var a,b,o=t.length/2,r="x"===n?0:1,l=0,c=-1,i=0;i<o;i++)if(b=t[2*i+r],!isNaN(b)&&!isNaN(t[2*i+1-r]))if(0!==i){if(a<=e&&b>=e||a>=e&&b<=e){c=i;break}l=i,a=b}else a=b;return{range:[l,c],t:(e-a)/(b-a)}}(d,k,M),I=O.range,D=I[1]-I[0],A=void 0;if(D>=1){if(D>1&&!f){var P=ut(d,I[0]);c.attr({x:P[0]+S,y:P[1]+C}),o&&(A=h.getRawValue(I[0]))}else{(P=polyline.getPointOn(k,M))&&c.attr({x:P[0]+S,y:P[1]+C});var L=h.getRawValue(I[0]),j=h.getRawValue(I[1]);o&&(A=T.j(data,v,L,j,O.t))}n.lastFrameIndex=I[0]}else{var R=1===t||n.lastFrameIndex>0?I[0]:0;P=ut(d,R);o&&(A=h.getRawValue(R)),c.attr({x:P[0]+S,y:P[1]+C})}o&&Object(J.e)(c).setLabelText(A)}},e.prototype._doUpdateAnimation=function(data,t,e,n,o,r){var polyline=this._polyline,polygon=this._polygon,l=data.hostModel,c=function(t,e,n,o,r,l,c,d){for(var h=function(t,e){var n=[];return e.diff(t).add((function(t){n.push({cmd:"+",idx:t})})).update((function(t,e){n.push({cmd:"=",idx:e,idx1:t})})).remove((function(t){n.push({cmd:"-",idx:t})})).execute(),n}(t,e),f=[],v=[],y=[],m=[],_=[],k=[],S=[],M=x(r,e,c),O=t.getLayout("points")||[],I=e.getLayout("points")||[],i=0;i<h.length;i++){var T=h[i],D=!0,A=void 0,P=void 0;switch(T.cmd){case"=":A=2*T.idx,P=2*T.idx1;var L=O[A],j=O[A+1],R=I[P],z=I[P+1];(isNaN(L)||isNaN(j))&&(L=R,j=z),f.push(L,j),v.push(R,z),y.push(n[A],n[A+1]),m.push(o[P],o[P+1]),S.push(e.getRawIndex(T.idx1));break;case"+":var N=T.idx,V=M.dataDimsForPoint,E=r.dataToPoint([e.get(V[0],N),e.get(V[1],N)]);P=2*N,f.push(E[0],E[1]),v.push(I[P],I[P+1]);var B=w(M,r,e,N);y.push(B[0],B[1]),m.push(o[P],o[P+1]),S.push(e.getRawIndex(N));break;case"-":D=!1}D&&(_.push(T),k.push(k.length))}k.sort((function(a,b){return S[a]-S[b]}));var H=f.length,$=C(H),U=C(H),G=C(H),F=C(H),W=[];for(i=0;i<k.length;i++){var Y=k[i],X=2*i,J=2*Y;$[X]=f[J],$[X+1]=f[J+1],U[X]=v[J],U[X+1]=v[J+1],G[X]=y[J],G[X+1]=y[J+1],F[X]=m[J],F[X+1]=m[J+1],W[i]=_[Y]}return{current:$,next:U,stackedOnCurrent:G,stackedOnNext:F,status:W}}(this._data,data,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),d=c.current,h=c.stackedOnCurrent,f=c.next,v=c.stackedOnNext;if(o&&(d=ot(c.current,e,o),h=ot(c.stackedOnCurrent,e,o),f=ot(c.next,e,o),v=ot(c.stackedOnNext,e,o)),nt(d,f)>3e3||polygon&&nt(h,v)>3e3)return polyline.stopAnimation(),polyline.setShape({points:f}),void(polygon&&(polygon.stopAnimation(),polygon.setShape({points:f,stackedOnPoints:v})));polyline.shape.__points=c.current,polyline.shape.points=d;var y={shape:{points:f}};c.current!==d&&(y.shape.__points=c.next),polyline.stopAnimation(),O.f(polyline,y,l),polygon&&(polygon.setShape({points:d,stackedOnPoints:h}),polygon.stopAnimation(),O.f(polygon,{shape:{stackedOnPoints:v}},l),polyline.shape.points!==polygon.shape.points&&(polygon.shape.points=polyline.shape.points));for(var m=[],_=c.status,i=0;i<_.length;i++){if("="===_[i].cmd){var k=data.getItemGraphicEl(_[i].idx1);k&&m.push({el:k,ptIdx:i})}}polyline.animators&&polyline.animators.length&&polyline.animators[0].during((function(){polygon&&polygon.dirtyShape();for(var t=polyline.shape.__points,i=0;i<m.length;i++){var e=m[i].el,n=2*m[i].ptIdx;e.x=t[n],e.y=t[n+1],e.markRedraw()}}))},e.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(t,o){t.__temp&&(e.remove(t),n.setItemGraphicEl(o,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(H.a),ft=pt,gt=n(423);var vt={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]||0;return e},max:function(t){for(var e=-1/0,i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,i=0;i<t.length;i++)t[i]<e&&(e=t[i]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},yt=function(t){return Math.round(t.length/2)};function mt(t){var e;t.registerChartView(ft),t.registerSeriesModel(f),t.registerLayout((e=!0,{seriesType:"line",plan:Object(gt.a)(),reset:function(t){var data=t.getData(),n=t.coordinateSystem,o=t.pipelineContext,r=e||o.large;if(n){var l=Object(v.G)(n.dimensions,(function(t){return data.mapDimension(t)})).slice(0,2),c=l.length,d=data.getCalculationInfo("stackResultDimension");Object(_.c)(data,l[0])&&(l[0]=d),Object(_.c)(data,l[1])&&(l[1]=d);var h=data.getStore(),f=data.getDimensionIndex(l[0]),y=data.getDimensionIndex(l[1]);return c&&{progress:function(t,data){for(var e=t.end-t.start,o=r&&C(e*c),l=[],d=[],i=t.start,v=0;i<t.end;i++){var m=void 0;if(1===c){var _=h.get(f,i);m=n.dataToPoint(_,null,d)}else l[0]=h.get(f,i),l[1]=h.get(y,i),m=n.dataToPoint(l,null,d);r?(o[v++]=m[0],o[v++]=m[1]):data.setItemLayout(i,m.slice())}r&&data.setLayout("points",o)}}}}})),t.registerVisual({seriesType:"line",reset:function(t){var data=t.getData(),e=t.getModel("lineStyle").getLineStyle();e&&!e.stroke&&(e.stroke=data.getVisual("style").fill),data.setVisual("legendLineStyle",e)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(t){return{seriesType:t,reset:function(t,e,n){var data=t.getData(),o=t.get("sampling"),r=t.coordinateSystem,l=data.count();if(l>10&&"cartesian2d"===r.type&&o){var c=r.getBaseAxis(),d=r.getOtherAxis(c),h=c.getExtent(),f=n.getDevicePixelRatio(),v=Math.abs(h[1]-h[0])*(f||1),y=Math.round(l/v);if(y>1){"lttb"===o&&t.setData(data.lttbDownSample(data.mapDimension(d.dim),1/y));var m=void 0;"string"==typeof o?m=vt[o]:"function"==typeof o&&(m=o),m&&t.setData(data.downSample(data.mapDimension(d.dim),1/y,m,yt))}}}}}("line"))}},447:function(t,e,n){"use strict";n(419)},448:function(t,e,n){"use strict";n(420)},458:function(t,e,n){"use strict";n.r(e);var o=n(21),r=(n(18),n(28),n(340)),l=n(540),c=n(319),d=n(528),h=n(336),f=n(325),v=n(318),y=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var canvas=v.f();this.canvas=canvas}return t.prototype.update=function(data,t,e,n,o,r){var l=this._getBrush(),c=this._getGradient(o,"inRange"),d=this._getGradient(o,"outOfRange"),h=this.pointSize+this.blurSize,canvas=this.canvas,f=canvas.getContext("2d"),v=data.length;canvas.width=t,canvas.height=e;for(var i=0;i<v;++i){var p=data[i],y=p[0],m=p[1],_=n(p[2]);f.globalAlpha=_,f.drawImage(l,y-h,m-h)}if(!canvas.width||!canvas.height)return canvas;for(var x=f.getImageData(0,0,canvas.width,canvas.height),w=x.data,k=0,S=w.length,C=this.minOpacity,M=this.maxOpacity-C;k<S;){_=w[k+3]/256;var O=4*Math.floor(255*_);if(_>0){var I=r(_)?c:d;_>0&&(_=_*M+C),w[k++]=I[O],w[k++]=I[O+1],w[k++]=I[O+2],w[k++]=I[O+3]*_*256}else k+=4}return f.putImageData(x,0,0),canvas},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=v.f()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var o=t.getContext("2d");return o.clearRect(0,0,n,n),o.shadowOffsetX=n,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-e,e,this.pointSize,0,2*Math.PI,!0),o.closePath(),o.fill(),t},t.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,o=n[e]||(n[e]=new Uint8ClampedArray(1024)),r=[0,0,0,0],l=0,i=0;i<256;i++)t[e](i/255,!0,r),o[l++]=r[0],o[l++]=r[1],o[l++]=r[2],o[l++]=r[3];return o},t}(),m=n(369),_=n(356),x=n(326);function w(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var k=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(c.a)(e,t),e.prototype.render=function(t,e,n){var o;e.eachComponent("visualMap",(function(e){e.eachTargetSeries((function(n){n===t&&(o=e)}))})),this.group.removeAll(),this._incrementalDisplayable=null;var r=t.coordinateSystem;"cartesian2d"===r.type||"calendar"===r.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):w(r)&&this._renderOnGeo(r,t,o,n)},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,e,n,o){var r=e.coordinateSystem;r&&(w(r)?this.render(e,n,o):this._renderOnCartesianAndCalendar(e,o,t.start,t.end,!0))},e.prototype._renderOnCartesianAndCalendar=function(t,e,n,o,r){var l,c,h,v,y=t.coordinateSystem;if(Object(_.a)(y,"cartesian2d")){var m=y.getAxis("x"),w=y.getAxis("y");0,l=m.getBandWidth(),c=w.getBandWidth(),h=m.scale.getExtent(),v=w.scale.getExtent()}for(var k=this.group,data=t.getData(),S=t.getModel(["emphasis","itemStyle"]).getItemStyle(),C=t.getModel(["blur","itemStyle"]).getItemStyle(),M=t.getModel(["select","itemStyle"]).getItemStyle(),O=Object(x.d)(t),I=t.get(["emphasis","focus"]),T=t.get(["emphasis","blurScope"]),D=Object(_.a)(y,"cartesian2d")?[data.mapDimension("x"),data.mapDimension("y"),data.mapDimension("value")]:[data.mapDimension("time"),data.mapDimension("value")],A=n;A<o;A++){var rect=void 0,style=data.getItemVisual(A,"style");if(Object(_.a)(y,"cartesian2d")){var P=data.get(D[0],A),L=data.get(D[1],A);if(isNaN(data.get(D[2],A))||P<h[0]||P>h[1]||L<v[0]||L>v[1])continue;var j=y.dataToPoint([P,L]);rect=new d.a({shape:{x:Math.floor(Math.round(j[0])-l/2),y:Math.floor(Math.round(j[1])-c/2),width:Math.ceil(l),height:Math.ceil(c)},style:style})}else{if(isNaN(data.get(D[1],A)))continue;rect=new d.a({z2:1,shape:y.dataToRect([data.get(D[0],A)]).contentShape,style:style})}var R=data.getItemModel(A);if(data.hasItemOption){var z=R.getModel("emphasis");S=z.getModel("itemStyle").getItemStyle(),C=R.getModel(["blur","itemStyle"]).getItemStyle(),M=R.getModel(["select","itemStyle"]).getItemStyle(),I=z.get("focus"),T=z.get("blurScope"),O=Object(x.d)(R)}var N=t.getRawValue(A),V="-";N&&null!=N[2]&&(V=N[2]+""),Object(x.f)(rect,O,{labelFetcher:t,labelDataIndex:A,defaultOpacity:style.opacity,defaultText:V}),rect.ensureState("emphasis").style=S,rect.ensureState("blur").style=C,rect.ensureState("select").style=M,Object(f.n)(rect,I,T),rect.incremental=r,r&&(rect.states.emphasis.hoverLayer=!0),k.add(rect),data.setItemGraphicEl(A,rect)}},e.prototype._renderOnGeo=function(t,e,n,o){var r=n.targetVisuals.inRange,l=n.targetVisuals.outOfRange,data=e.getData(),c=this._hmLayer||this._hmLayer||new y;c.blurSize=e.get("blurSize"),c.pointSize=e.get("pointSize"),c.minOpacity=e.get("minOpacity"),c.maxOpacity=e.get("maxOpacity");var rect=t.getViewRect().clone(),d=t.getRoamTransform();rect.applyTransform(d);var f=Math.max(rect.x,0),m=Math.max(rect.y,0),_=Math.min(rect.width+rect.x,o.getWidth()),x=Math.min(rect.height+rect.y,o.getHeight()),w=_-f,k=x-m,S=[data.mapDimension("lng"),data.mapDimension("lat"),data.mapDimension("value")],C=data.mapArray(S,(function(e,n,o){var r=t.dataToPoint([e,n]);return r[0]-=f,r[1]-=m,r.push(o),r})),M=n.getExtent(),O="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(M,n.option.range):function(t,e,n){var o=t[1]-t[0],r=(e=v.G(e,(function(e){return{interval:[(e.interval[0]-t[0])/o,(e.interval[1]-t[0])/o]}}))).length,l=0;return function(t){var i;for(i=l;i<r;i++)if((o=e[i].interval)[0]<=t&&t<=o[1]){l=i;break}if(i===r)for(i=l-1;i>=0;i--){var o;if((o=e[i].interval)[0]<=t&&t<=o[1]){l=i;break}}return i>=0&&i<r&&n[i]}}(M,n.getPieceList(),n.option.selected);c.update(C,w,k,r.color.getNormalizer(),{inRange:r.color.getColorMapper(),outOfRange:l.color.getColorMapper()},O);var img=new h.a({style:{width:w,height:k,x:f,y:m,image:c.canvas},silent:!0});this.group.add(img)},e.type="heatmap",e}(m.a),S=k,C=n(370),M=n(378),O=n(396),I=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(c.a)(e,t),e.prototype.getInitialData=function(option,t){return Object(M.a)(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=O.a.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(C.a),T=I;var D=n(870),A=n(868),P=n(442),L=n(358);Object(r.a)([l.a,D.a,A.a,P.a,function(t){t.registerChartView(S),t.registerSeriesModel(T)}]);var j={name:"HelloWorld",props:{values:{2010:{JAN:1,FEB:2,MAR:3},2011:{JAN:1,FEB:2,MAR:3}},stats:{}},components:{VChart:L.b},provide:Object(o.a)({},L.a,"light"),data:function(){return{option:{backgroundColor:"transparent",tooltip:{position:"top"},grid:{top:"12px",bottom:"48px",right:"0",left:"36px"},xAxis:{type:"category",data:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],splitArea:{show:!0}},yAxis:{type:"category",data:[],splitArea:{show:!0}},visualMap:{min:0,max:100,calculable:!0,orient:"horizontal",right:"0",top:"0",formatter:function(t){return t+"%"},inRange:{color:["#9a91ff","white","#ff85b6"]},show:!1},series:[{name:"報酬率",type:"heatmap",data:[],label:{show:!0,formatter:function(t){return"".concat(t.value[2],"%")}},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},optionYearly:null,years:0}},mounted:function(){this.init()},methods:{init:function(){this.optionYearly=JSON.parse(JSON.stringify(this.option)),this.optionYearly.grid.left="0";var t=this.values,e=[],n=[],o=0;for(var r in t)for(var l in o+=1,t[r])"YTD"!==l&&0!==t[r][l]&&(e.push([l,r,t[r][l]]),n.push(100*t[r][l]));this.years=o;var c={},d=[],i=0;for(var h in t)c[h]=o-1-i,d.unshift(h),i+=1;var f={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};for(var v in e){var y=e[v][0],m=e[v][1];e[v]=[f[y],c[m],Math.round(1e3*e[v][2])/10]}this.option.series[0].data=e,this.option.yAxis.data=d;var _=Math.max.apply(Math,n),x=Math.max.apply(Math,n),w=Math.round(10*Math.max(Math.abs(_),Math.abs(x)))/10;this.option.visualMap.min=-w,this.option.visualMap.max=w;var k={},S=[];for(var C in i=0,t)k[C]=i,S.push(C),i+=1;var M=[],O=[];for(var I in t){var T=1;for(var D in t[I])"YTD"!==D&&(T*=1+t[I][D]);T-=1,M.push([k[I],0,Math.round(100*T)]),O.push(T)}this.optionYearly.series[0].data=M,this.optionYearly.xAxis.data=S,this.optionYearly.series[0].label.formatter=function(t){return"".concat(t.value[2],"%")},this.optionYearly.yAxis.data=["報酬"],_=100*Math.max.apply(Math,O),x=100*Math.min.apply(Math,O),w=Math.round(Math.max(Math.abs(_),Math.max(x))),this.optionYearly.visualMap.min=-w,this.optionYearly.visualMap.max=w}},watch:{values:function(){this.init()}}},R=(n(447),n(41)),component=Object(R.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"uk-text-primary uk-margin-large-top"},[t._v("年報酬")]),t._v(" "),n("v-chart",{staticClass:"chartYearly",attrs:{option:t.optionYearly,autoresize:""}}),t._v(" "),n("h5",{staticClass:"uk-text-primary uk-margin-large-top"},[t._v("月報酬")]),t._v(" "),n("div",{staticClass:"uk-overflow-auto",staticStyle:{width:"100%"}},[n("div",{staticStyle:{"min-width":"420px"}},[n("v-chart",{staticClass:"chart",style:{height:30*t.years+150+"px"},attrs:{option:t.option,autoresize:""}})],1)])],1)}),[],!1,null,"04b16d7f",null);e.default=component.exports},516:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n(18),n(34),n(28),n(592),n(233),n(39),n(42),n(67);function o(t){var e=t.sid,n=(t.uid,new URL("https://asia-east1-fdata-299302.cloudfunctions.net/social-image"));return Object.keys(t).forEach((function(e){t[e]&&n.searchParams.set(e,t[e])})),[{hid:"twitter:title",name:"twitter:title",content:e},{hid:"twitter:site",name:"twitter:site",content:"finlab"},{hid:"twitter:image",name:"twitter:image",content:n.toString()},{hid:"og:title",property:"og:title",content:e},{hid:"og:type",property:"og:type",content:"website"},{hid:"og:image",property:"og:image",content:n.toString()},{hid:"og:image:width",property:"og:image:width",content:"1200"},{hid:"og:image:height",property:"og:image:height",content:"630"}]}},526:function(t,e,n){},538:function(t,e,n){"use strict";n.d(e,"a",(function(){return ft}));var o=n(337);function r(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function l(t){var e;if(t&&"transparent"!==t){if("string"==typeof t&&t.indexOf("rgba")>-1){var n=Object(o.g)(t);n&&(t="rgb("+n[0]+","+n[1]+","+n[2]+")",e=n[3])}}else t="none";return{color:t,opacity:null==e?1:e}}var c=n(318),d=n(353),h=n(336),f=n(422);function v(t,e,n,o,r){for(var l=e.length,c=n.length,d=t.newPos,h=d-o,f=0;d+1<l&&h+1<c&&r(e[d+1],n[h+1]);)d++,h++,f++;return f&&t.components.push({count:f,added:!1,removed:!1,indices:[]}),t.newPos=d,h}function y(t,e,n){var o=t[t.length-1];o&&o.added===e&&o.removed===n?t[t.length-1]={count:o.count+1,added:e,removed:n,indices:[]}:t.push({count:1,added:e,removed:n,indices:[]})}function m(t){for(var e=0,n=t.length,o=0,r=0;e<n;e++){var component=t[e];if(component.removed){for(i=r;i<r+component.count;i++)component.indices.push(i);r+=component.count}else{for(var l=[],i=o;i<o+component.count;i++)l.push(i);component.indices=l,o+=component.count,component.added||(r+=component.count)}}return t}function _(t,e,n){return function(t,e,n){n||(n=function(a,b){return a===b}),t=t.slice();var o=(e=e.slice()).length,r=t.length,l=1,c=o+r,d=[{newPos:-1,components:[]}],h=v(d[0],e,t,0,n);if(d[0].newPos+1>=o&&h+1>=r){for(var f=[],i=0;i<e.length;i++)f.push(i);return[{indices:f,count:e.length,added:!1,removed:!1}]}function _(){for(var c=-1*l;c<=l;c+=2){var h,f=d[c-1],_=d[c+1],x=(_?_.newPos:0)-c;f&&(d[c-1]=void 0);var w=f&&f.newPos+1<o,k=_&&0<=x&&x<r;if(w||k){if(!w||k&&f.newPos<_.newPos?y((h={newPos:(path=_).newPos,components:path.components.slice(0)}).components,!1,!0):((h=f).newPos++,y(h.components,!0,!1)),x=v(h,e,t,c,n),h.newPos+1>=o&&x+1>=r)return m(h.components);d[c]=h}else d[c]=void 0}var path;l++}for(;l<=c;){var x=_();if(x)return x}}(t,e,n)}var x=n(341),w=n(380),k=n(478),S="none",C=Math.round,M=Math.sin,O=Math.cos,I=Math.PI,T=2*Math.PI,D=180/I,A=1e-4;function P(t){return C(1e3*t)/1e3}function L(t){return C(1e4*t)/1e4}function j(t){return t<A&&t>-1e-4}function R(t,e){e&&z(t,"transform","matrix("+P(e[0])+","+P(e[1])+","+P(e[2])+","+P(e[3])+","+L(e[4])+","+L(e[5])+")")}function z(t,e,n){(!n||"linear"!==n.type&&"radial"!==n.type)&&t.setAttribute(e,n)}function N(t,style,e){var n=null==style.opacity?1:style.opacity;if(e instanceof h.a)z(t,"opacity",n+"");else{if(function(style){var t=style.fill;return null!=t&&t!==S}(style)){var o=l(style.fill);z(t,"fill",o.color),z(t,"fill-opacity",(null!=style.fillOpacity?style.fillOpacity*o.opacity*n:o.opacity*n)+"")}else z(t,"fill",S);if(function(style){var t=style.stroke;return null!=t&&t!==S}(style)){var r=l(style.stroke);z(t,"stroke",r.color);var d=style.lineWidth,f=style.strokeNoScale?e.getLineScale():1;z(t,"stroke-width",(f?d/f:0)+""),z(t,"paint-order",style.strokeFirst?"stroke":"fill"),z(t,"stroke-opacity",(null!=style.strokeOpacity?style.strokeOpacity*r.opacity*n:r.opacity*n)+"");var v=style.lineDash&&d>0&&Object(k.a)(style.lineDash,d);if(v){var y=style.lineDashOffset;f&&1!==f&&(v=Object(c.G)(v,(function(t){return t/f})),y&&(y=C(y/=f))),z(t,"stroke-dasharray",v.join(",")),z(t,"stroke-dashoffset",(y||0)+"")}else z(t,"stroke-dasharray",S);style.lineCap&&z(t,"stroke-linecap",style.lineCap),style.lineJoin&&z(t,"stroke-linejoin",style.lineJoin),style.miterLimit&&z(t,"stroke-miterlimit",style.miterLimit+"")}else z(t,"stroke",S)}}var V=function(){function t(){}return t.prototype.reset=function(){this._d=[],this._str=""},t.prototype.moveTo=function(t,e){this._add("M",t,e)},t.prototype.lineTo=function(t,e){this._add("L",t,e)},t.prototype.bezierCurveTo=function(t,e,n,o,r,l){this._add("C",t,e,n,o,r,l)},t.prototype.quadraticCurveTo=function(t,e,n,o){this._add("Q",t,e,n,o)},t.prototype.arc=function(t,e,n,o,r,l){this.ellipse(t,e,n,n,0,o,r,l)},t.prototype.ellipse=function(t,e,n,o,r,l,c,d){var h=0===this._d.length,f=c-l,v=!d,y=Math.abs(f),m=j(y-T)||(v?f>=T:-f>=T),_=f>0?f%T:f%T+T,x=!1;x=!!m||!j(y)&&_>=I==!!v;var w=L(t+n*O(l)),k=L(e+o*M(l));m&&(f=v?T-1e-4:1e-4-T,x=!0,h&&this._d.push("M",w,k));var S=L(t+n*O(l+f)),A=L(e+o*M(l+f));if(isNaN(w)||isNaN(k)||isNaN(n)||isNaN(o)||isNaN(r)||isNaN(D)||isNaN(S)||isNaN(A))return"";this._d.push("A",L(n),L(o),C(r*D),+x,+v,S,A)},t.prototype.rect=function(t,e,n,o){this._add("M",t,e),this._add("L",t+n,e),this._add("L",t+n,e+o),this._add("L",t,e+o),this._add("L",t,e),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(t,a,b,e,n,o,r,g,l){this._d.push(t);for(var i=1;i<arguments.length;i++){var c=arguments[i];if(isNaN(c))return void(this._invalid=!0);this._d.push(L(c))}},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(" "),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),E={brush:function(t){var style=t.style,e=t.__svgEl;e||(e=r("path"),t.__svgEl=e),t.path||t.createPathProxy();var path=t.path;t.shapeChanged()&&(path.beginPath(),t.buildPath(path,t.shape),t.pathUpdated());var n=path.getVersion(),o=t,l=o.__svgPathBuilder;(o.__svgPathVersion!==n||!l||t.style.strokePercent<1)&&(l||(l=o.__svgPathBuilder=new V),l.reset(),path.rebuildPath(l,t.style.strokePercent),l.generateStr(),o.__svgPathVersion=n),z(e,"d",l.getStr()),N(e,style,t),R(e,t.transform)}},B={brush:function(t){var style=t.style,image=style.image;if(image instanceof HTMLImageElement?image=image.src:image instanceof HTMLCanvasElement&&(image=image.toDataURL()),image){var e=style.x||0,n=style.y||0,o=style.width,l=style.height,c=t.__svgEl;c||(c=r("image"),t.__svgEl=c),image!==t.__imageSrc&&(!function(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}(c,"href",image),t.__imageSrc=image),z(c,"width",o+""),z(c,"height",l+""),z(c,"x",e+""),z(c,"y",n+""),N(c,style,t),R(c,t.transform)}}},H={left:"start",right:"end",center:"middle",middle:"middle"};var $={brush:function(t){var style=t.style,text=style.text;if(null!=text&&(text+=""),text&&!isNaN(style.x)&&!isNaN(style.y)){var e=t.__svgEl;e||(function(t,e,n){t.setAttributeNS("http://www.w3.org/XML/1998/namespace",e,n)}(e=r("text"),"xml:space","preserve"),t.__svgEl=e);var n=style.font||w.a;e.style.font=n,e.textContent=text,N(e,style,t),R(e,t.transform);var o=style.x||0,l=function(t,e,n){return"top"===n?t+=e/2:"bottom"===n&&(t-=e/2),t}(style.y||0,Object(w.f)(n),style.textBaseline),c=H[style.textAlign]||style.textAlign;z(e,"dominant-baseline","central"),z(e,"text-anchor",c),z(e,"x",o+""),z(e,"y",l+"")}}},U=function(){function t(t,e,n,o,l){this.nextId=0,this._domName="_dom",this.createElement=r,this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=o,l&&(this._domName=l)}return t.prototype.getDefs=function(t){var e=this._svgRoot,defs=this._svgRoot.getElementsByTagName("defs");if(0===defs.length){if(t){var n=e.insertBefore(this.createElement("defs"),e.firstChild);return n.contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var i=e.length-1;i>=0;--i)if(e[i]===t)return!0;return!1}),n}return null}return defs[0]},t.prototype.doUpdate=function(t,e){if(t){var defs=this.getDefs(!1);if(t[this._domName]&&defs.contains(t[this._domName]))"function"==typeof e&&e(t);else{var n=this.add(t);n&&(t[this._domName]=n)}}},t.prototype.add=function(t){return null},t.prototype.addDom=function(t){var defs=this.getDefs(!0);t.parentNode!==defs&&defs.appendChild(t)},t.prototype.removeDom=function(t){var defs=this.getDefs(!1);defs&&t[this._domName]&&(defs.removeChild(t[this._domName]),t[this._domName]=null)},t.prototype.getDoms=function(){var defs=this.getDefs(!1);if(!defs)return[];var t=[];return c.k(this._tagNames,(function(e){for(var n=defs.getElementsByTagName(e),i=0;i<n.length;i++)t.push(n[i])})),t},t.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;c.k(t,(function(t){t[e._markLabel]="0"}))},t.prototype.markDomUsed=function(t){t&&(t[this._markLabel]="1")},t.prototype.markDomUnused=function(t){t&&(t[this._markLabel]="0")},t.prototype.isDomUnused=function(t){return t&&"1"!==t[this._markLabel]},t.prototype.removeUnused=function(){var t=this,defs=this.getDefs(!1);if(defs){var e=this.getDoms();c.k(e,(function(e){t.isDomUnused(e)&&defs.removeChild(e)}))}},t.prototype.getSvgProxy=function(t){return t instanceof d.b?E:t instanceof h.a?B:t instanceof f.a?$:E},t.prototype.getSvgElement=function(t){return t.__svgEl},t}();function G(t){return"linear"===t.type}function F(t){return"radial"===t.type}function W(t){return t&&("linear"===t.type||"radial"===t.type)}var Y=function(t){function e(e,n){return t.call(this,e,n,["linearGradient","radialGradient"],"__gradient_in_use__")||this}return Object(x.a)(e,t),e.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;c.k(["fill","stroke"],(function(o){var r=e.style[o];if(W(r)){var l=r,defs=n.getDefs(!0),c=void 0;l.__dom?(c=l.__dom,defs.contains(l.__dom)||n.addDom(c)):c=n.add(l),n.markUsed(e);var d=c.getAttribute("id");t.setAttribute(o,"url(#"+d+")")}}))}},e.prototype.add=function(t){var e;if(G(t))e=this.createElement("linearGradient");else{if(!F(t))return c.F("Illegal gradient type."),null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},e.prototype.update=function(t){if(W(t)){var e=this;this.doUpdate(t,(function(){var n=t.__dom;if(n){var o=n.tagName,r=t.type;"linear"===r&&"linearGradient"===o||"radial"===r&&"radialGradient"===o?e.updateDom(t,t.__dom):(e.removeDom(t),e.add(t))}}))}},e.prototype.updateDom=function(t,e){if(G(t))e.setAttribute("x1",t.x+""),e.setAttribute("y1",t.y+""),e.setAttribute("x2",t.x2+""),e.setAttribute("y2",t.y2+"");else{if(!F(t))return void c.F("Illegal gradient type.");e.setAttribute("cx",t.x+""),e.setAttribute("cy",t.y+""),e.setAttribute("r",t.r+"")}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,i=0,r=n.length;i<r;++i){var l=this.createElement("stop");l.setAttribute("offset",100*n[i].offset+"%");var d=n[i].color;if(d.indexOf("rgba")>-1){var h=o.g(d)[3],f=o.i(d);l.setAttribute("stop-color","#"+f),l.setAttribute("stop-opacity",h+"")}else l.setAttribute("stop-color",n[i].color);e.appendChild(l)}t.__dom=e},e.prototype.markUsed=function(e){if(e.style){var n=e.style.fill;n&&n.__dom&&t.prototype.markDomUsed.call(this,n.__dom),(n=e.style.stroke)&&n.__dom&&t.prototype.markDomUsed.call(this,n.__dom)}},e}(U),X=n(467);function J(t){return t&&(!!t.image||!!t.svgElement)}var Z=new(n(477).a),K=function(t){function e(e,n){return t.call(this,e,n,["pattern"],"__pattern_in_use__")||this}return Object(x.a)(e,t),e.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;c.k(["fill","stroke"],(function(o){var pattern=e.style[o];if(J(pattern)){var defs=n.getDefs(!0),r=Z.get(pattern);r?defs.contains(r)||n.addDom(r):r=n.add(pattern),n.markUsed(e);var l=r.getAttribute("id");t.setAttribute(o,"url(#"+l+")")}}))}},e.prototype.add=function(pattern){if(J(pattern)){var t=this.createElement("pattern");return pattern.id=null==pattern.id?this.nextId++:pattern.id,t.setAttribute("id","zr"+this._zrId+"-pattern-"+pattern.id),t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("patternUnits","userSpaceOnUse"),this.updateDom(pattern,t),this.addDom(t),t}},e.prototype.update=function(pattern){if(J(pattern)){var t=this;this.doUpdate(pattern,(function(){var e=Z.get(pattern);t.updateDom(pattern,e)}))}},e.prototype.updateDom=function(pattern,t){var e=pattern.svgElement;if(e instanceof SVGElement)e.parentNode!==t&&(t.innerHTML="",t.appendChild(e),t.setAttribute("width",pattern.svgWidth+""),t.setAttribute("height",pattern.svgHeight+""));else{var img=void 0,n=t.getElementsByTagName("image");if(n.length){if(!pattern.image)return void t.removeChild(n[0]);img=n[0]}else pattern.image&&(img=this.createElement("image"));if(img){var o=void 0,r=pattern.image;if("string"==typeof r?o=r:r instanceof HTMLImageElement?o=r.src:r instanceof HTMLCanvasElement&&(o=r.toDataURL()),o){img.setAttribute("href",o),img.setAttribute("x","0"),img.setAttribute("y","0");var l=Object(X.a)(o,img,{dirty:function(){}},(function(img){t.setAttribute("width",img.width+""),t.setAttribute("height",img.height+"")}));l&&l.width&&l.height&&(t.setAttribute("width",l.width+""),t.setAttribute("height",l.height+"")),t.appendChild(img)}}}var c="translate("+(pattern.x||0)+", "+(pattern.y||0)+") rotate("+(pattern.rotation||0)/Math.PI*180+") scale("+(pattern.scaleX||1)+", "+(pattern.scaleY||1)+")";t.setAttribute("patternTransform",c),Z.set(pattern,t)},e.prototype.markUsed=function(e){e.style&&(J(e.style.fill)&&t.prototype.markDomUsed.call(this,Z.get(e.style.fill)),J(e.style.stroke)&&t.prototype.markDomUsed.call(this,Z.get(e.style.stroke)))},e}(U),Q=n(436);function tt(t){var e=t.__clipPaths;return e&&e.length>0}var et=function(t){function e(e,n){var o=t.call(this,e,n,"clipPath","__clippath_in_use__")||this;return o._refGroups={},o._keyDuplicateCount={},o}return Object(x.a)(e,t),e.prototype.markAllUnused=function(){t.prototype.markAllUnused.call(this);var e=this._refGroups;for(var n in e)e.hasOwnProperty(n)&&this.markDomUnused(e[n]);this._keyDuplicateCount={}},e.prototype._getClipPathGroup=function(t,e){if(tt(t)){var n=t.__clipPaths,o=this._keyDuplicateCount,r=function(t){var e=[];if(t)for(var i=0;i<t.length;i++){var n=t[i];e.push(n.id)}return e.join(",")}(n);return Object(Q.b)(n,e&&e.__clipPaths)&&(o[r]=o[r]||0,o[r]&&(r+="-"+o[r]),o[r]++),this._refGroups[r]||(this._refGroups[r]=this.createElement("g"))}},e.prototype.update=function(t,e){var n=this._getClipPathGroup(t,e);return n&&(this.markDomUsed(n),this.updateDom(n,t.__clipPaths)),n},e.prototype.updateDom=function(t,e){if(e&&e.length>0){var defs=this.getDefs(!0),n=e[0],o=void 0,r=void 0;n._dom?(r=n._dom.getAttribute("id"),o=n._dom,defs.contains(o)||defs.appendChild(o)):(r="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(o=this.createElement("clipPath")).setAttribute("id",r),defs.appendChild(o),n._dom=o),this.getSvgProxy(n).brush(n);var l=this.getSvgElement(n);o.innerHTML="",o.appendChild(l),t.setAttribute("clip-path","url(#"+r+")"),e.length>1&&this.updateDom(o,e.slice(1))}else t&&t.setAttribute("clip-path","none")},e.prototype.markUsed=function(e){var n=this;e.__clipPaths&&c.k(e.__clipPaths,(function(e){e._dom&&t.prototype.markDomUsed.call(n,e._dom)}))},e.prototype.removeUnused=function(){t.prototype.removeUnused.call(this);var e={},n=this._refGroups;for(var o in n)if(n.hasOwnProperty(o)){var r=n[o];this.isDomUnused(r)?r.parentNode&&r.parentNode.removeChild(r):e[o]=r}this._refGroups=e},e}(U),it=function(t){function e(e,n){var o=t.call(this,e,n,["filter"],"__filter_in_use__","_shadowDom")||this;return o._shadowDomMap={},o._shadowDomPool=[],o}return Object(x.a)(e,t),e.prototype._getFromPool=function(){var t=this._shadowDomPool.pop();if(!t){(t=this.createElement("filter")).setAttribute("id","zr"+this._zrId+"-shadow-"+this.nextId++);var e=this.createElement("feDropShadow");t.appendChild(e),this.addDom(t)}return t},e.prototype.update=function(t,e){if(function(style){return style&&(style.shadowBlur||style.shadowOffsetX||style.shadowOffsetY)}(e.style)){var n=function(t){var style=t.style,e=t.getGlobalScale();return[style.shadowColor,(style.shadowBlur||0).toFixed(2),(style.shadowOffsetX||0).toFixed(2),(style.shadowOffsetY||0).toFixed(2),e[0],e[1]].join(",")}(e),o=e._shadowDom=this._shadowDomMap[n];o||(o=this._getFromPool(),this._shadowDomMap[n]=o),this.updateDom(t,e,o)}else this.remove(t,e)},e.prototype.remove=function(t,e){null!=e._shadowDom&&(e._shadowDom=null,t.removeAttribute("filter"))},e.prototype.updateDom=function(t,e,n){var o=n.children[0],style=e.style,r=e.getGlobalScale(),c=r[0],d=r[1];if(c&&d){var h=style.shadowOffsetX||0,f=style.shadowOffsetY||0,v=style.shadowBlur,y=l(style.shadowColor);o.setAttribute("dx",h/c+""),o.setAttribute("dy",f/d+""),o.setAttribute("flood-color",y.color),o.setAttribute("flood-opacity",y.opacity+"");var m=v/2/c+" "+v/2/d;o.setAttribute("stdDeviation",m),n.setAttribute("x","-100%"),n.setAttribute("y","-100%"),n.setAttribute("width","300%"),n.setAttribute("height","300%"),e._shadowDom=n;var _=n.getAttribute("id");t.setAttribute("filter","url(#"+_+")")}},e.prototype.removeUnused=function(){if(this.getDefs(!1)){var t=this._shadowDomPool,e=this._shadowDomMap;for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);this._shadowDomMap={}}},e}(U);function nt(t){return parseInt(t,10)}function at(t){return t instanceof d.b?E:t instanceof h.a?B:t instanceof f.a?$:E}function ot(t,e){return e&&t&&e.parentNode!==t}function st(t,e,n){if(ot(t,e)&&n){var o=n.nextSibling;o?t.insertBefore(e,o):t.appendChild(e)}}function lt(t,e){if(ot(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function ut(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function ct(t){return t.__svgEl}function ht(t){return function(){c.F('In SVG mode painter not support method "'+t+'"')}}var pt=function(){function t(t,e,n,o){this.type="svg",this.refreshHover=ht("refreshHover"),this.pathToImage=ht("pathToImage"),this.configLayer=ht("configLayer"),this.root=t,this.storage=e,this._opts=n=c.m({},n||{});var l=r("svg");l.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),l.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("version","1.1"),l.setAttribute("baseProfile","full"),l.style.cssText="user-select:none;position:absolute;left:0;top:0;";var d=r("g");l.appendChild(d);var h=r("g");l.appendChild(h),this._gradientManager=new Y(o,h),this._patternManager=new K(o,h),this._clipPathManager=new et(o,h),this._shadowManager=new it(o,h);var f=document.createElement("div");f.style.cssText="overflow:hidden;position:relative",this._svgDom=l,this._svgRoot=h,this._backgroundRoot=d,this._viewport=f,t.appendChild(f),f.appendChild(l),this.resize(n.width,n.height),this._visibleList=[]}return t.prototype.getType=function(){return"svg"},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.getSvgRoot=function(){return this._svgRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},t.prototype.setBackgroundColor=function(t){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var e=r("rect");e.setAttribute("width",this.getWidth()),e.setAttribute("height",this.getHeight()),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("id",0);var n=l(t),o=n.color,c=n.opacity;e.setAttribute("fill",o),e.setAttribute("fill-opacity",c),this._backgroundRoot.appendChild(e),this._backgroundNode=e},t.prototype.createSVGElement=function(t){return r(t)},t.prototype.paintOne=function(t){var e=at(t);return e&&e.brush(t),ct(t)},t.prototype._paintList=function(t){var e=this._gradientManager,n=this._patternManager,o=this._clipPathManager,r=this._shadowManager;e.markAllUnused(),n.markAllUnused(),o.markAllUnused(),r.markAllUnused();for(var l=this._svgRoot,c=this._visibleList,d=t.length,h=[],i=0;i<d;i++){var f=at(O=t[i]),v=ct(O);O.invisible||(!O.__dirty&&v||(f&&f.brush(O),(v=ct(O))&&O.style&&(e.update(O.style.fill),e.update(O.style.stroke),n.update(O.style.fill),n.update(O.style.stroke),r.update(v,O)),O.__dirty=0),v&&h.push(O))}var y,m,x,w,k,S=_(c,h);for(i=0;i<S.length;i++){if((M=S[i]).removed)for(var C=0;C<M.count;C++){v=ct(O=c[M.indices[C]]);tt(O)?(x=v)&&x.parentNode&&x.parentNode.removeChild(x):ut(l,v)}}for(i=0;i<S.length;i++){var M;if(!(M=S[i]).removed)for(C=0;C<M.count;C++){var O=h[M.indices[C]],I=o.update(O,w);I!==k&&(y=m,I&&(y?st(l,I,y):lt(l,I),m=I,y=null),k=I);v=ct(O);y?st(k||l,v,y):lt(k||l,v),y=v||y,k||(m=y),e.markUsed(O),e.addWithoutUpdate(v,O),n.markUsed(O),n.addWithoutUpdate(v,O),o.markUsed(O),w=O}}e.removeUnused(),n.removeUnused(),o.removeUnused(),r.removeUnused(),this._visibleList=h},t.prototype.resize=function(t,e){var n=this._viewport;n.style.display="none";var o=this._opts;if(null!=t&&(o.width=t),null!=e&&(o.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var r=n.style;r.width=t+"px",r.height=e+"px";var l=this._svgDom;l.setAttribute("width",t+""),l.setAttribute("height",e+"")}this._backgroundNode&&(this._backgroundNode.setAttribute("width",t),this._backgroundNode.setAttribute("height",e))},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype._getSize=function(t){var e=this._opts,n=["width","height"][t],o=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],l=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var c=this.root,d=document.defaultView.getComputedStyle(c);return(c[o]||nt(d[n])||nt(c.style[n]))-(nt(d[r])||0)-(nt(d[l])||0)|0},t.prototype.dispose=function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},t.prototype.clear=function(){var t=this._viewport;t&&t.parentNode&&t.parentNode.removeChild(t)},t.prototype.toDataURL=function(){this.refresh();var t=this._svgDom,e=t.outerHTML||(t.parentNode&&t.parentNode).innerHTML;return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(e.replace(/></g,">\n\r<"))},t}();function ft(t){t.registerPainter("svg",pt)}},540:function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var o=n(416),r=n(318),l=n(341),c=n(383),d=n(436),h=n(435),f=n(382),v=n(412);function y(){return!1}function m(t,e,n){var o=r.f(),l=e.getWidth(),c=e.getHeight(),d=o.style;return d&&(d.position="absolute",d.left="0",d.top="0",d.width=l+"px",d.height=c+"px",o.setAttribute("data-zr-dom-id",t)),o.width=l*n,o.height=c*n,o}var _=function(t){function e(e,n,l){var c,d=t.call(this)||this;d.motionBlur=!1,d.lastFrameAlpha=.7,d.dpr=1,d.virtual=!1,d.config={},d.incremental=!1,d.zlevel=0,d.maxRepaintRectCount=5,d.__dirty=!0,d.__firstTimePaint=!0,d.__used=!1,d.__drawIndex=0,d.__startIndex=0,d.__endIndex=0,d.__prevStartIndex=null,d.__prevEndIndex=null,l=l||o.e,"string"==typeof e?c=m(e,n,l):r.A(e)&&(e=(c=e).id),d.id=e,d.dom=c;var h=c.style;return h&&(c.onselectstart=y,h.webkitUserSelect="none",h.userSelect="none",h.webkitTapHighlightColor="rgba(0,0,0,0)",h["-webkit-touch-callout"]="none",h.padding="0",h.margin="0",h.borderWidth="0"),d.domBack=null,d.ctxBack=null,d.painter=n,d.config=null,d.dpr=l,d}return Object(l.a)(e,t),e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=m("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,e,n,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var r,l=[],c=this.maxRepaintRectCount,d=!1,h=new f.a(0,0,0,0);function y(rect){if(rect.isFinite()&&!rect.isZero())if(0===l.length){(t=new f.a(0,0,0,0)).copy(rect),l.push(t)}else{for(var t,e=!1,n=1/0,o=0,i=0;i<l.length;++i){var r=l[i];if(r.intersect(rect)){var v=new f.a(0,0,0,0);v.copy(r),v.union(rect),l[i]=v,e=!0;break}if(d){h.copy(rect),h.union(r);var y=rect.width*rect.height,m=r.width*r.height,_=h.width*h.height-y-m;_<n&&(n=_,o=i)}}if(d&&(l[o].union(rect),e=!0),!e)(t=new f.a(0,0,0,0)).copy(rect),l.push(t);d||(d=l.length>=c)}}for(var i=this.__startIndex;i<this.__endIndex;++i){if(x=t[i]){var m=x.shouldBePainted(n,o,!0,!0);(w=x.__isRendered&&(x.__dirty&v.a||!m)?x.getPrevPaintRect():null)&&y(w);var _=m&&(x.__dirty&v.a||!x.__isRendered)?x.getPaintRect():null;_&&y(_)}}for(i=this.__prevStartIndex;i<this.__prevEndIndex;++i){var x,w;m=(x=e[i]).shouldBePainted(n,o,!0,!0);if(x&&(!m||!x.__zr)&&x.__isRendered)(w=x.getPrevPaintRect())&&y(w)}do{r=!1;for(i=0;i<l.length;)if(l[i].isZero())l.splice(i,1);else{for(var k=i+1;k<l.length;)l[i].intersect(l[k])?(r=!0,l[i].union(l[k]),l.splice(k,1)):k++;i++}}while(r);return this._paintRects=l,l},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,e){var n=this.dpr,o=this.dom,r=o.style,l=this.domBack;r&&(r.width=t+"px",r.height=e+"px"),o.width=t*n,o.height=e*n,l&&(l.width=t*n,l.height=e*n,1!==n&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,e,n){var o=this.dom,l=this.ctx,c=o.width,f=o.height;e=e||this.clearColor;var v=this.motionBlur&&!t,y=this.lastFrameAlpha,m=this.dpr,_=this;v&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,c/m,f/m));var x=this.domBack;function w(t,n,o,c){if(l.clearRect(t,n,o,c),e&&"transparent"!==e){var f=void 0;r.x(e)?(f=e.__canvasGradient||Object(d.a)(l,e,{x:0,y:0,width:o,height:c}),e.__canvasGradient=f):r.y(e)&&(f=Object(h.c)(l,e,{dirty:function(){_.setUnpainted(),_.__painter.refresh()}})),l.save(),l.fillStyle=f||e,l.fillRect(t,n,o,c),l.restore()}v&&(l.save(),l.globalAlpha=y,l.drawImage(x,t,n,o,c),l.restore())}!n||v?w(0,0,c,f):n.length&&r.k(n,(function(rect){w(rect.x*m,rect.y*m,rect.width*m,rect.height*m)}))},e}(c.a),x=n(476),w=n(336),k=n(324),S=1e5,C=314159,M=.01;function O(t){return parseInt(t,10)}var I=function(){function t(t,e,n,l){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var c=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=r.m({},n||{}),this.dpr=n.devicePixelRatio||o.e,this._singleCanvas=c,this.root=t;var d=t.style;d&&(d.webkitTapHighlightColor="transparent",d.webkitUserSelect="none",d.userSelect="none",d["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var h=this._zlevelList;this._prevDisplayList=[];var f=this._layers;if(c){var v=t,y=v.width,m=v.height;null!=n.width&&(y=n.width),null!=n.height&&(m=n.height),this.dpr=n.devicePixelRatio||1,v.width=y*this.dpr,v.height=m*this.dpr,this._width=y,this._height=m;var x=new _(v,this,this.dpr);x.__builtin__=!0,x.initContext(),f[314159]=x,x.zlevel=C,h.push(C),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var w=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(w)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),n=this._prevDisplayList,o=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,n,t,this._redrawId);for(var i=0;i<o.length;i++){var r=o[i],l=this._layers[r];if(!l.__builtin__&&l.refresh){var c=0===i?this._backgroundColor:null;l.refresh(c)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){for(var o,r={inHover:!0,viewWidth:this._width,viewHeight:this._height},i=0;i<e;i++){var l=t[i];l.__inHover&&(n||(n=this._hoverlayer=this.getLayer(S)),o||(o=n.ctx).save(),Object(h.a)(o,l,r,i===e-1))}o&&o.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(S)},t.prototype.paintOne=function(t,e){Object(h.b)(t,e)},t.prototype._paintList=function(t,e,n,o){if(this._redrawId===o){n=n||!1,this._updateLayerStatus(t);var r=this._doPaintList(t,e,n),l=r.finished,c=r.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),c&&this._paintHoverList(t),l)this.eachLayer((function(t){t.afterBrush&&t.afterBrush()}));else{var d=this;Object(x.a)((function(){d._paintList(t,e,n,o)}))}}},t.prototype._compositeManually=function(){var t=this.getLayer(C).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer((function(o){o.virtual&&t.drawImage(o.dom,0,0,e,n)}))},t.prototype._doPaintList=function(t,e,n){for(var o=this,l=[],c=this._opts.useDirtyRect,d=0;d<this._zlevelList.length;d++){var h=this._zlevelList[d],f=this._layers[h];f.__builtin__&&f!==this._hoverlayer&&(f.__dirty||n)&&l.push(f)}for(var v=!0,y=!1,m=function(r){var i,d=l[r],h=d.ctx,f=c&&d.createRepaintRects(t,e,_._width,_._height),m=n?d.__startIndex:d.__drawIndex,x=!n&&d.incremental&&Date.now,w=x&&Date.now(),k=d.zlevel===_._zlevelList[0]?_._backgroundColor:null;if(d.__startIndex===d.__endIndex)d.clear(!1,k,f);else if(m===d.__startIndex){var S=t[m];S.incremental&&S.notClear&&!n||d.clear(!1,k,f)}-1===m&&(console.error("For some unknown reason. drawIndex is -1"),m=d.__startIndex);var C=function(e){var n={inHover:!1,allClipped:!1,prevEl:null,viewWidth:o._width,viewHeight:o._height};for(i=m;i<d.__endIndex;i++){var r=t[i];if(r.__inHover&&(y=!0),o._doPaintEl(r,d,c,e,n,i===d.__endIndex-1),x)if(Date.now()-w>15)break}n.prevElClipPaths&&h.restore()};if(f)if(0===f.length)i=d.__endIndex;else for(var M=_.dpr,O=0;O<f.length;++O){var rect=f[O];h.save(),h.beginPath(),h.rect(rect.x*M,rect.y*M,rect.width*M,rect.height*M),h.clip(),C(rect),h.restore()}else h.save(),C(),h.restore();d.__drawIndex=i,d.__drawIndex<d.__endIndex&&(v=!1)},_=this,x=0;x<l.length;x++)m(x);return k.a.wxa&&r.k(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),{finished:v,needsRefreshHover:y}},t.prototype._doPaintEl=function(t,e,n,o,r,l){var c=e.ctx;if(n){var d=t.getPaintRect();(!o||d&&d.intersect(o))&&(Object(h.a)(c,t,r,l),t.setPrevPaintRect(d))}else Object(h.a)(c,t,r,l)},t.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=C);var n=this._layers[t];return n||((n=new _("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]?r.H(n,this._layerConfig[t],!0):this._layerConfig[t-M]&&r.H(n,this._layerConfig[t-M],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},t.prototype.insertLayer=function(t,e){var n=this._layers,o=this._zlevelList,l=o.length,c=this._domRoot,d=null,i=-1;if(n[t])r.F("ZLevel "+t+" has been used already");else if(function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(l>0&&t>o[0]){for(i=0;i<l-1&&!(o[i]<t&&o[i+1]>t);i++);d=n[o[i]]}if(o.splice(i+1,0,t),n[t]=e,!e.virtual)if(d){var h=d.dom;h.nextSibling?c.insertBefore(e.dom,h.nextSibling):c.appendChild(e.dom)}else c.firstChild?c.insertBefore(e.dom,c.firstChild):c.appendChild(e.dom);e.__painter=this}else r.F("Layer of zlevel "+t+" is not valid")},t.prototype.eachLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(e,this._layers[o],o)}},t.prototype.eachBuiltinLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],r=this._layers[o];r.__builtin__&&t.call(e,r,o)}},t.prototype.eachOtherLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],r=this._layers[o];r.__builtin__||t.call(e,r,o)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function e(t){l&&(l.__endIndex!==t&&(l.__dirty=!0),l.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var n=1;n<t.length;n++){if((d=t[n]).zlevel!==t[n-1].zlevel||d.incremental){this._needsManuallyCompositing=!0;break}}var o,i,l=null,c=0;for(i=0;i<t.length;i++){var d,h=(d=t[i]).zlevel,f=void 0;o!==h&&(o=h,c=0),d.incremental?((f=this.getLayer(h+.001,this._needsManuallyCompositing)).incremental=!0,c=1):f=this.getLayer(h+(c>0?M:0),this._needsManuallyCompositing),f.__builtin__||r.F("ZLevel "+h+" has been used by unkown layer "+f.id),f!==l&&(f.__used=!0,f.__startIndex!==i&&(f.__dirty=!0),f.__startIndex=i,f.incremental?f.__drawIndex=-1:f.__drawIndex=i,e(i),l=f),d.__dirty&v.a&&!d.__inHover&&(f.__dirty=!0,f.incremental&&f.__drawIndex<0&&(f.__drawIndex=i))}e(i),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,r.k(this._layers,(function(t){t.setUnpainted()}))},t.prototype.configLayer=function(t,e){if(e){var n=this._layerConfig;n[t]?r.H(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+M){var l=this._layers[o];r.H(l,n[t],!0)}}}},t.prototype.delLayer=function(t){var e=this._layers,n=this._zlevelList,o=e[t];o&&(o.dom.parentNode.removeChild(o.dom),delete e[t],n.splice(r.r(n,t),1))},t.prototype.resize=function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var o=this._opts;if(null!=t&&(o.width=t),null!=e&&(o.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var r in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(C).resize(t,e)}return this},t.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new _("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var n=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var o=e.dom.width,r=e.dom.height;this.eachLayer((function(t){t.__builtin__?n.drawImage(t.dom,0,0,o,r):t.renderToCanvas&&(n.save(),t.renderToCanvas(n),n.restore())}))}else for(var l={inHover:!1,viewWidth:this._width,viewHeight:this._height},c=this.storage.getDisplayList(!0),i=0,d=c.length;i<d;i++){var f=c[i];Object(h.a)(n,f,l,i===d-1)}return e.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype._getSize=function(t){var e=this._opts,n=["width","height"][t],o=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],l=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var c=this.root,d=document.defaultView.getComputedStyle(c);return(c[o]||O(d[n])||O(c.style[n]))-(O(d[r])||0)-(O(d[l])||0)|0},t.prototype.pathToImage=function(path,t){t=t||this.dpr;var canvas=document.createElement("canvas"),e=canvas.getContext("2d"),rect=path.getBoundingRect(),style=path.style,n=style.shadowBlur*t,o=style.shadowOffsetX*t,l=style.shadowOffsetY*t,c=path.hasStroke()?style.lineWidth:0,d=Math.max(c/2,-o+n),f=Math.max(c/2,o+n),v=Math.max(c/2,-l+n),y=Math.max(c/2,l+n),m=rect.width+d+f,_=rect.height+v+y;canvas.width=m*t,canvas.height=_*t,e.scale(t,t),e.clearRect(0,0,m,_),e.dpr=t;var x={x:path.x,y:path.y,scaleX:path.scaleX,scaleY:path.scaleY,rotation:path.rotation,originX:path.originX,originY:path.originY};path.x=d-rect.x,path.y=v-rect.y,path.rotation=0,path.scaleX=1,path.scaleY=1,path.updateTransform(),path&&Object(h.a)(e,path,{inHover:!1,viewWidth:this._width,viewHeight:this._height},!0);var k=new w.a({style:{x:0,y:0,image:canvas}});return r.m(path,x),k},t}();function T(t){t.registerPainter("canvas",I)}},609:function(t,e,n){"use strict";n(526)},691:function(t,e,n){},722:function(t,e,n){"use strict";n.r(e);var o=n(8),r=(n(18),n(28),n(67),n(47),n(117),n(60),n(158),n(62),n(333),n(64),n(83),n(31),n(323)),l=n(19),c=n(94),d=n.n(c),h=Object(r.c)({components:{},props:{uid:{default:null,type:String},strategy_id:{default:null,type:String},position_id:{default:null,type:String},positionPredefined:{default:null,type:Object}},data:function(){var t=this;return window.goto=function(link){t.$router.push(link)},{position:null,mounted:!1,hide:!1,tableMode:"present",displayTableMode:["當前統計","下期統計"],sortTableCol:"股票",sortAscending:!0,table:[],weights:{},userCap:20,colabLink:null,buildingColab:!1,next_trading_date:null,update_date:null,last_updated:null,trade_at:null,entryAssets:!1,exitAssets:!1,stopAssets:!1,displayStockId:"",failed:!1}},mounted:function(){this.init(),this.mounted=!0},methods:{showStock:function(s){this.displayStockId=s,d.a.modal("#modal-stock").show()},setSortColumn:function(col){this.sortTableCol===col?this.sortAscending=!this.sortAscending:this.sortAscending=!1,this.sortTableCol=col},init:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,table,p,c,d,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.strategy_id&&t.position_id||t.positionPredefined){e.next=2;break}return e.abrupt("return");case 2:if(n=null,!t.positionPredefined){e.next=7;break}n=t.positionPredefined,e.next=20;break;case 7:return e.prev=7,e.next=10,l.c.collection("users").doc(t.uid).collection("strategies").doc(t.strategy_id).collection("positions").doc(t.position_id).get();case 10:o=e.sent,n=o.data(),console.log(n),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(7),console.log("PositionPanel: cannot read position "+e.t0),t.failed=!0,e.abrupt("return");case 20:r=n,t.next_trading_date=r.next_trading_date,t.update_date=r.update_date,t.trade_at=r.trade_at,t.last_updated=r.last_updated.toDate(),delete r.next_trading_date,delete r.update_date,delete r.trade_at,r.last_updated&&delete r.last_updated,t.position=r,table=[],t.weights={},e.t1=regeneratorRuntime.keys(r);case 33:if((e.t2=e.t1()).done){e.next=51;break}if(p=e.t2.value,(c=r[p]).exit_date&&(c.status="賣出"),"weight"in c||"return"in c){e.next=39;break}return e.abrupt("continue",33);case 39:d=c.status,"買進"===c.status&&(t.entryAssets=!0,d="新增"),"賣出"===c.status&&(t.exitAssets=!0,d="移除"),"停損停利"===c.status&&(t.stopAssets=!0,d="close"===t.trade_at?"收盤":"開盤",d+=c.return>0?"停利":"停損"),h=0,"next_weight"in c&&(h=c.next_weight),f={stock:p,action:d,profit:Math.round(1e3*c.return)/10,weight:Math.round(1e3*c.weight)/10,nextWeight:Math.round(1e3*h)/10,entry_sig_date:c.entry_date,exit_sig_date:c.exit_date,entry_price:c.entry_price},table.push(f),"買進"==c.status?t.update_date=c.entry_date:"賣出"==c.status&&(t.update_date=c.exit_date),"weight"in c&&(t.weights[p]=c.weight),e.next=33;break;case 51:t.table=table;case 52:case"end":return e.stop()}}),e,null,[[7,15]])})))()},stockStatusColor:function(t){var output={"新增":"gray","持有":"lightgray","移除":"gray","停損停利":"#252786"};return t in output?output[t]:"gray"},stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()},formatDate:function(t){if(null===t)return"";var e=new Date,n=t.toLocaleString("en-us").replace(/(\d+)\/(\d+)\/(\d+)/,"$3-$1-$2").replace(/(\d+):(\d+):(\d+)/,"$1:$2").split(", ");return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?n[1]:n[0]},generate_colab_script:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in t.buildingColab=!0,n="",t.weights)r=o.match(/\d+/)[0],n+='  "'.concat(r,'" : ').concat(t.weights[o],",\n");return l=["!pip install finlab -q","from finlab.online.order_executor import OrderExecutor\n\noe = OrderExecutor.from_weights({\n\n".concat(n,"\n}, ").concat(1e4*t.userCap,")"),"# 查看欲執行的委託單：\noe._calculate_new_orders()","# 市價下單（所有委託單）\noe.create_orders()","# 更新委託單價格到市價（所有未成交委託單）\noe.create_orders()","# 刪單（所有委託單）\noe.cancel_orders()"],c=null,e.prev=5,d={sid:t.$props.strategy_id,uid:t.$props.uid,code:JSON.stringify(l)},e.next=9,t.$axios.post("https://asia-northeast1-fdata-299302.cloudfunctions.net/generate_colab_strategy",d);case 9:c=e.sent,e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(5),alert("upload colab fail: "+e.t0.data+" "+e.t0),console.log(e.t0),e.abrupt("return");case 17:t.colabLink=c.data;case 18:case"end":return e.stop()}}),e,null,[[5,12]])})))()}},computed:{filteredCols:function(){return this.hide?["名稱"]:["名稱","漲跌","權重"]},realNextTradingDate:function(){if(0===this.table.length)return"";var t="1977-01-01";for(var e in this.table){var n=Object.assign({},this.table[e]);n.entry_sig_date>t&&(t=n.entry_sig_date),n.exit_sig_date>t&&(t=n.exit_sig_date)}return t},rows:function(){var t=this;if(0===this.table.length)return[];var e=[];for(var n in this.table){var o=new Date(this.table[n].entry_sig_date),r=this.table[n].exit_sig_date?new Date(this.table[n].exit_sig_date):null;if(console.log(this.table[n].stock,r),!(null!==r&&r<new Date||o>new Date)){var l=Object.assign({},this.table[n]);e.push(l)}}return e.sort((function(a,b){var e={"股票":"stock","獲利":"profit","動作":"action","當前權重":"weight","換股權重":"nextWeight","進場價格":"entry_price","進場訊號":"entry_sig_date","出場訊號":"exit_sig_date"}[t.sortTableCol];return a[e]<b[e]^t.sortAscending?1:-1})),e},unrealizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,o=this.table[e].profit*(n/100);isNaN(o)||(t+=o,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},realizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,o=this.table[e].profit*(n/100);isNaN(o)||"移除"!==this.table[e].action||(t+=o,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},hasPermission:function(){var t=this.$store.state.strategy.info.public_position,e=null!==this.$store.state.user;return this.userPermission>=t||e&&this.$store.state.user.uid===this.$props.uid},userPermission:function(){return""===this.$store.state.role?0:"free"===this.$store.state.role?1:this.$store.state.role.includes("vip")?2:void 0}},watch:{userPermission:function(){this.init()}}}),f=(n(609),n(41)),component=Object(f.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.mounted?n("div",{staticStyle:{"padding-bottom":"24px","min-height":"100vh"}},[null===t.$store.state.user?n("div",[n("FakePosition",{attrs:{vip:!1}})],1):t._e(),t._v(" "),null!==t.$store.state.user?n("div",{staticClass:"uk-overflow-auto"},[0!==t.rows.length?n("table",{staticClass:"uk-table uk-table-divider",staticStyle:{"white-space":"nowrap"}},[n("thead",[n("tr",t._l(t.filteredCols,(function(e,o){return n("th",{key:"table-col-"+e,style:0===o?"text-align:left!important":"text-align:right!important",on:{click:function(e){t.hide=!1}}},[t._v("\n\n              "+t._s(e)+"\n              "),t.sortTableCol===e?n("span",[t._v(t._s(t.sortAscending?"▲":"▼"))]):t._e()])})),0)]),t._v(" "),n("tbody",{staticClass:"uk-text-right"},t._l(t.rows,(function(e){return n("tr",{key:"table-row-"+e.stock},[t.filteredCols.includes("名稱")?n("td",{staticClass:"uk-text-left"},[n("div",{staticClass:"uk-text-primary",staticStyle:{cursor:"pointer"},on:{click:function(n){t.displayStockId=e.stock.split(" ")[0]}}},[t._v("\n                "+t._s(e.stock)+"\n                "),"持有"!==e.action&&"移除"!==e.action&&"新增"!==e.action?n("span",{staticClass:"round-border uk-background-primary",staticStyle:{"font-size":"0.9rem",color:"white",padding:"0 10px"}},[t._v(t._s(e.action))]):t._e()])]):t._e(),t._v(" "),t.filteredCols.includes("資料處理")?n("td",{style:"color:"+t.stockStatusColor(e.action)},[t._v("\n              "+t._s(e.action)+"\n            ")]):t._e(),t._v(" "),t.filteredCols.includes("漲跌")?n("td",{style:"color:"+t.stockReturnColor(e.profit)},[t._v("\n              "+t._s(t.sign(e.profit))+"%\n            ")]):t._e(),t._v(" "),t.filteredCols.includes("權重")?n("td",{style:"color:"+t.stockReturnColor(e.weight)},[t._v("\n              "+t._s(e.weight>0?e.weight+" %":0==e.weight?"":e.weight+" %")+"\n            ")]):t._e(),t._v(" "),t.filteredCols.includes("權重更新")?n("td",{style:"color:"+t.stockReturnColor(e.nextWeight)},[t._v("\n              "+t._s(e.nextWeight>0?e.nextWeight+" %":0==e.nextWeight?"":e.nextWeight+" %")+"\n            ")]):t._e(),t._v(" "),t.filteredCols.includes("進場價格")?n("td",[t._v("\n              "+t._s(e.entry_price)+"\n            ")]):t._e(),t._v(" "),t.filteredCols.includes("資料新增")?n("td",[t._v("\n              "+t._s(e.entry_sig_date)+"\n            ")]):t._e(),t._v(" "),t.filteredCols.includes("資料刪除")?n("td",[t._v("\n              "+t._s(e.exit_sig_date)+"\n            ")]):t._e()])})),0)]):n("div",[t.failed?n("FakePosition",{attrs:{vip:!0}}):n("span",[t._v("目前策略無持股喔！")])],1),t._v(" "),n("p",{staticClass:"uk-text-center"},[t._v("\n        不知道怎麼使用？趕快來看\n        "),n("nuxt-link",{attrs:{to:"/course?cid=LqYTLW3KkXRSPnci47xe"}},[n("span",{staticStyle:{"text-decoration":"underline"}},[t._v("平台速成教學")])]),t._v("\n        ！\n      ")],1)]):t._e(),t._v(" "),t.displayStockId?n("div",{staticClass:"stock-panel shadow2"},[n("a",{staticClass:"uk-icon-button shadow2",staticStyle:{border:"1px solid #ccc",top:"3px",right:"6px",position:"absolute","z-index":"100"},attrs:{"uk-icon":"close"},on:{click:function(e){t.displayStockId=""}}}),t._v(" "),n("div",{staticStyle:{height:"100%"}},[n("StockPanel",{attrs:{stock_id:t.displayStockId,displaySearchBar:!1}})],1)]):n("div",{staticStyle:{height:"60vh"}})]):t._e()}),[],!1,null,"42a59f82",null);e.default=component.exports;installComponents(component,{FakePosition:n(415).default,StockPanel:n(394).default})},804:function(t,e,n){"use strict";n(691)},894:function(t,e,n){"use strict";n.r(e);n(42),n(29),n(44),n(55),n(39),n(56);var o=n(21),r=n(8),l=(n(47),n(60),n(64),n(83),n(63),n(62),n(31),n(94)),c=n.n(l),d=n(46),h=n(19),f=n(516),v=n(421),y=n(722),m=n(458),_=n(441);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k={name:"strategy",head:function(){var t=this.$route.query.sid,e=this.$route.query.uid,meta=Object(f.a)({sid:t,uid:e}),n={title:t+" - FinLab 線上回測"};return meta&&(n.meta=meta),n},components:{PositionPanel:v.default,PositionPanelFinlab:y.default,monthlyReturnChart:m.default,RiskPanel:_.default},watchQuery:["uid","sid"],data:function(){return{viewmode:!1,newStrategyName:this.$route.query.sid,isChangingName:!1,uid:this.$route.query.uid,sid:this.$route.query.sid,public_performance:!0,public_position:!1,public_code:!1,post:null,shareImage:null,generatingSocialImage:!1,uploadingPost:!1,tab:"統計清單",infoCollapse:!0,ndays:0,finlabUserID:"TJN4FDuqrwU8DML7DAjUYFIMutp2"}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==window.navigator.userAgent.indexOf("Prerender")){e.next=3;break}return e.next=3,t.setRealTimeUpdate({uid:t.$route.query.uid,sid:t.$route.query.sid});case 3:t.downloadPost();case 4:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.cancelRealTimeUpdate()},computed:w({postPureText:function(){if(this.post)return this.post.replace(/<[^>]*>?/gm,"")},userRank:function(){var t=null!==this.$store.state.user,e=this.$store.state.role.includes("vip"),n=t&&this.$store.state.user.uid===this.$props.uid;return t?n?10:e?2:1:0},isAuthor:function(){return null!==this.$store.state.user&&this.$store.state.user.uid===this.$route.query.uid},wideScreen:function(){return window.innerWidth>600},returns:function(){if(!this.strategy||!this.strategy.info)return[];var t=this.strategy.info.returns.value,b=this.strategy.info.benchmark,e={5:"週",20:"月",60:"季",252:"年"};return[5,20,60,252].map((function(n){var o,s=(o=n,Math.round(1e3*(t[t.length-1]/t[t.length-o]-1))/10||0),r=function(t){return Math.round(1e3*(b[b.length-1]/b[b.length-t]-1))/10||0}(n),l=s>0?"color:#e35676":"color:#18b89b",c=s>r?"color:#e35676":"color:#18b89b";return{name:"近".concat(e[n]),svalue:s,bvalue:r,ssign:s>0?"+":"",bsign:r>0?"+":"",unit:"％",scolor:l,bcolor:c,days:n}}))},copyCodeBtnText:function(){if(!this.strategy||!this.strategy.info)return["",!1,!1];var t=null!==this.$store.state.user,e=this.$store.state.role.includes("vip"),n=t&&this.$store.state.user.uid===this.uid,o=this.strategy.info?this.strategy.info.public_code:10;return n?["程式碼",!0,!0]:0===o||1===o?["程式碼",t,!0]:2===o?["VIP 程式碼",t&&e,!0]:["",!1,!1]}},Object(d.c)({strategy:"strategy"})),methods:w(w({inIframe:function(){try{return window.self!==window.top}catch(t){return!1}},to_notebook:function(){var t=this.sid,e=this.strategy.info?this.strategy.info.public_code:10;console.log(this.$store.state.user.uid),this.$store.state.user.uid!==this.uid?10!=e?2!==e?1!==e?0!==e?c.a.modal.alert("神奇的權限等級: "+e):this.$router.push("/notebook/?uid=".concat(this.uid,"&sid=").concat(t)):this.$store.state.userInfo.info?this.$router.push("/notebook/?uid=".concat(this.uid,"&sid=").concat(t)):c.a.modal.alert("請登入來觀看策略"):"vip_y"===this.$store.state.role||"vip_m"===this.$store.state.role?this.$router.push("/notebook/?uid=".concat(this.uid,"&sid=").concat(t)):c.a.modal.alert("限 VIP 權限之用戶使用！"):c.a.modal.alert("該策略並沒有對外開放！"):this.$router.push("/notebook/?uid=".concat(this.uid,"&sid=").concat(t))},generateSocialImage:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t.generatingSocialImage){e.next=2;break}return e.abrupt("return");case 2:return t.generatingSocialImage=!0,n=null,e.prev=4,o="https://asia-east1-fdata-299302.cloudfunctions.net/social-image/?sid=".concat(t.$route.query.sid,"&uid=").concat(t.$route.query.uid,"&photoURL=").concat(t.$store.state.user.photoURL,"&author=").concat(t.$store.state.user.displayName,"&force=true"),r="https://asia-east1-fdata-299302.cloudfunctions.net/social-image/?sid=".concat(t.$route.query.sid,"&uid=").concat(t.$route.query.uid,"&photoURL=").concat(t.$store.state.user.photoURL,"&author=").concat(t.$store.state.user.displayName),e.next=9,t.$axios.get(o);case 9:e.sent,n=r,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log("fail to generate image",e.t0);case 16:return e.prev=16,l="https://ai.finlab.tw/strategy/?uid=".concat(t.$route.query.uid,"&sid=").concat(t.$route.query.sid),c={"User-Agent":"facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)",Connection:"close"},e.next=21,t.$axios.get(l,{},{headers:c});case 21:e.sent,e.next=27;break;case 24:e.prev=24,e.t1=e.catch(16),console.log("fail to update crawler",e.t1);case 27:n&&(t.shareImage=n),t.generatingSocialImage=!1;case 29:case"end":return e.stop()}}),e,null,[[4,13],[16,24]])})))()}},Object(d.b)({setRealTimeUpdate:"strategy/setRealTimeUpdate",cancelRealTimeUpdate:"strategy/cancelRealtimeUpdate"})),{},{downloadPost:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.c.collection("users").doc(t.uid).collection("strategies").doc(t.sid).collection("articles").doc("article"),o=null,e.prev=2,e.next=5,n.get();case 5:o=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert("cannot download post ref"+e.t0.response.data);case 11:o&&o.exists&&(r=o.data(),t.post=r.post,""===t.post&&(t.post=null));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))()},uploadPost:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.post){e.next=2;break}return e.abrupt("return");case 2:return n=h.c.collection("users").doc(t.uid).collection("strategies").doc(t.sid).collection("articles").doc("article"),t.uploadingPost=!0,e.prev=4,e.next=7,n.set({post:t.post});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),alert("上傳 post 失敗："+e.t0.response.data);case 12:t.uploadingPost=!1;case 13:case"end":return e.stop()}}),e,null,[[4,9]])})))()}})},S=(n(804),n(41)),component=Object(S.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dark-muted"},[n("div",{staticClass:"uk-container uk-container-small top-container"},[n("div",{staticClass:"uk-grid uk-grid-collapse uk-margin-large-top uk-margin-large-bottom"},[n("div",{staticClass:"uk-width-3-5"},[n("h1",{staticClass:"uk-text-primary title"},[t._v("\n          "+t._s(this.$route.query.sid)+"\n        ")])]),t._v(" "),n("div",{staticClass:"uk-width-2-5"},[n("div",{staticClass:"uk-flex uk-flex-middle uk-flex-right",staticStyle:{height:"100%"}},[t.copyCodeBtnText[2]&&t.$store.state.user?n("button",{staticClass:"uk-button uk-button-primary",on:{click:t.to_notebook}},[t._v("\n            "+t._s(t.copyCodeBtnText[0])+"\n          ")]):t._e(),t._v(" "),t.copyCodeBtnText[2]&&!t.$store.state.user?n("button",{staticClass:"uk-button uk-button-primary",attrs:{"uk-toggle":"target: #login-ui"}},[t._v("\n            "+t._s(t.copyCodeBtnText[0])+"\n          ")]):t._e()])])]),t._v(" "),n("div",{staticClass:"uk-margin-large-top"},[n("a",{staticStyle:{color:"gray"},attrs:{href:"#modal-strategy-description","uk-toggle":""}},[t.post&&0!==t.post.length?n("div",{staticClass:"vhtml",domProps:{innerHTML:t._s(t.postPureText.slice(0,100)+" ... <span style='color: #383b9a;'>詳細介紹</span></p>")}}):t._e()]),t._v(" "),n("div",{staticClass:"uk-modal-container",attrs:{id:"modal-strategy-description","uk-modal":""}},[n("div",{staticClass:"uk-modal-dialog uk-modal-body uk-padding-small",staticStyle:{"border-radius":"15px"}},[n("div",{staticClass:"uk-container"},[n("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),t._v(" "),n("h1",{staticClass:"uk-text-primary uk-margin-large-top"},[t._v(t._s(this.$route.query.sid))]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"vhtml",domProps:{innerHTML:t._s(t.post)}})])])])]),t._v(" "),n("div",{staticClass:"uk-width-3-4@m uk-width-1-1",staticStyle:{"z-index":"3"}},[t.returns?n("div",{staticClass:"uk-grid-collapse uk-child-width-1-5@m uk-child-width-1-3",attrs:{"uk-grid":""}},[t._l(t.returns,(function(e,i){return n("div",{key:e.name,staticClass:"ret-tab",staticStyle:{"z-index":"3",cursor:"pointer"},on:{click:function(n){t.ndays=t.ndays===-e.days?0:-e.days}}},[n("div",{staticClass:"uk-text-small ret-btn"},[t._v("\n            "+t._s(e.name[1])),n("span",{staticStyle:{"white-space":"nowrap"},style:e.bcolor},[t._v("\n              "+t._s(e.svalue>e.bvalue?"贏大盤":"輸大盤")+"\n            ")]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"uk-text-bold uk-text-large",staticStyle:{"white-space":"nowrap"},style:e.scolor},[t._v("\n              "+t._s(e.ssign)+t._s(e.svalue)+" ")]),t._v(t._s(e.unit)+"\n          ")])])})),t._v(" "),t._m(0)],2):t._e(),t._v(" "),n("br"),t._v(" "),0===t.ndays?n("div",{staticClass:"uk-text-small uk-margin"},[n("span",{staticClass:"uk-text-primary"},[t._v("策略報酬 －")]),n("br"),t._v(" "),n("span",[t._v("大盤報酬 －")])]):n("div",[n("br"),n("br"),n("br")])])]),t._v(" "),t.strategy&&t.strategy.info?n("div",{staticClass:"return-panel",staticStyle:{"z-index":"0"},style:0===t.ndays&t.wideScreen?"margin-top: -130px !important":"margin-top: -80px !important",attrs:{href:"#modal-return-chart","uk-toggle":""}},[n("LazyCumulativeReturnChart",{attrs:{values:[t.strategy.info.returns.value.slice(t.ndays)],index:t.strategy.info.returns.time.slice(t.ndays),benchmark:t.strategy.info.benchmark.slice(t.ndays),height:"200px",livePerformanceUpdate:t.strategy.info.live_performance_start,benchmarkName:""}})],1):n("div",{staticClass:"uk-text-center",staticStyle:{height:"200px"},style:0===t.ndays&t.wideScreen?"margin-top: -130px !important":"margin-top: -80px !important"},[n("span",{attrs:{"uk-spinner":"ratio: 4.5"}})]),t._v(" "),t.strategy&&t.strategy.info?n("div",{staticClass:"uk-background-muted"},[n("div",{staticClass:"uk-section"},[n("div",{staticClass:"uk-container uk-container-small"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"統計清單"==t.tab,expression:"tab == '統計清單'"}],staticClass:"uk-margin-top"},[n("LazyPositionPanel",{attrs:{uid:t.$route.query.uid,strategy_id:t.$route.query.sid,position_id:this.strategy.info.position_id}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"策略分析"==t.tab,expression:"tab == '策略分析'"}],staticClass:"uk-margin-top"})])])]):t._e(),t._v(" "),n("div",{staticClass:"uk-modal-container",attrs:{id:"modal-return-chart","uk-modal":""}},[n("div",{staticClass:"uk-modal-dialog uk-modal-body",staticStyle:{"border-radius":"15px"}},[n("div",{staticClass:"uk-container uk-container-small"},[n("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),t._v(" "),t.strategy.info?n("div",[n("monthlyReturnChart",{attrs:{values:t.strategy.info.return_table,benchmark:t.strategy.info.benchmark,stats:t.strategy.stats}}),t._v(" "),n("LazyRiskPanel",{attrs:{returns:t.strategy.info.returns,benchmark:t.strategy.info.benchmark,drawdown_details:t.strategy.info.drawdown_details,dailyMean:t.strategy.info.stats.daily_mean,max_drawdown:t.strategy.info.stats.max_drawdown}})],1):t._e()])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"uk-text-small",staticStyle:{"z-index":"3"}},[n("div",{staticClass:"ret-btn",staticStyle:{cursor:"pointer"},attrs:{href:"#modal-return-chart","uk-toggle":""}},[t._v("\n            歷史報酬"),n("br"),t._v("分析")])])}],!1,null,"34c72353",null);e.default=component.exports}}]);