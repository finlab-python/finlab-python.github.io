(window.webpackJsonp=window.webpackJsonp||[]).push([[96,3,11,15,16,17,38,43,49,51,59,62,68,110,112],{1016:function(t,e,n){"use strict";n.r(e);n(54),n(75),n(23),n(45),n(66),n(67),n(53),n(56);var r=n(28),o=n(12),l=(n(74),n(43),n(196)),c=n(57),d=n(122),h=n.n(d),f=n(598),v=n(26),y=n(634);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach(function(e){Object(r.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var x={name:"strategy",head:function(){var t=this.$route.query.sid,e=this.$route.query.uid,meta=Object(y.a)({sid:t,uid:e}),n={title:t+" - FinLab 線上回測"};return meta&&(n.meta=meta),n},components:{StrategyPanel:f.default},watchQuery:["uid","sid"],data:function(){return{viewmode:!1,newStrategyName:this.$route.query.sid,isChangingName:!1,uid:this.$route.query.uid,sid:this.$route.query.sid,public_performance:!0,public_position:!1,public_code:!1,post:null,shareImage:null,generatingSocialImage:!1,uploadingPost:!1,editorOption:{theme:"snow",placeholder:"策略研發筆記",modules:{syntax:{highlight:function(text){return window.hljs.highlightAuto(text).value}},toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{header:[2,3,!1]}],[{color:[]},{background:[]}],[{size:["small",!1,"large","huge"]}],[{align:[]}],["link","image"],["clean"],["video"],["code-block"]]}}}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$store.state.user){e.next=1;break}return h.a.modal("#login-ui").show(),e.abrupt("return");case 1:if(-1!==window.navigator.userAgent.indexOf("Prerender")){e.next=2;break}return e.next=2,t.setRealTimeUpdate({uid:t.$route.query.uid,sid:t.$route.query.sid});case 2:case"end":return e.stop()}},e)}))()},beforeDestroy:function(){console.log("destory strategy page"),this.cancelRealTimeUpdate()},computed:_({isAuthor:function(){return null!==this.$store.state.user&&this.$store.state.user.uid===this.$route.query.uid},showMainEditor:function(){return(this.isAuthor||null!==this.$store.state.user&&this.$store.state.user.uid!==this.$route.query.uid&&this.strategy.info&&!0===this.strategy.info.public_code)&&!this.inIframe()},showCodeViewer:function(){return!!this.inIframe()||null!==this.$store.state.user&&this.$store.state.user.uid!==this.$route.query.uid&&this.strategy.info&&!0===this.strategy.info.public_code},strategyNameInfo:function(){var t=Object(l.a)(this.newStrategyName);return t[0]?"":t[1]}},Object(c.c)({strategy:"strategy"})),methods:_(_({inIframe:function(){try{return window.self!==window.top}catch(t){return!1}},changeStrategyName:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isChangingName=!0,e.prev=1,e.next=2,Object(l.b)(t.$route.query.uid,t.$route.query.sid,t.newStrategyName);case 2:return e.next=3,Object(l.c)(t.$route.query.uid,t.$route.query.sid);case 3:e.next=5;break;case 4:e.prev=4,n=e.catch(1),console.log("error",n);case 5:return e.next=6,t.cancelRealTimeUpdate();case 6:return e.next=7,t.setRealTimeUpdate({uid:t.$route.query.uid,sid:t.newStrategyName});case 7:t.isChangingName=!1,h.a.modal("#modal-copy").hide(),t.$router.push("/strategy/?uid=".concat(t.$route.query.uid,"&sid=").concat(t.newStrategyName));case 8:case"end":return e.stop()}},e,null,[[1,4]])}))()},generateSocialImage:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,r,o,l,c,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t.generatingSocialImage){e.next=1;break}return e.abrupt("return");case 1:return t.generatingSocialImage=!0,n=null,e.prev=2,r="https://asia-east1-fdata-299302.cloudfunctions.net/social-image/?sid=".concat(t.$route.query.sid,"&uid=").concat(t.$route.query.uid,"&photoURL=").concat(t.$store.state.user.photoURL,"&author=").concat(t.$store.state.user.displayName,"&force=true"),o="https://asia-east1-fdata-299302.cloudfunctions.net/social-image/?sid=".concat(t.$route.query.sid,"&uid=").concat(t.$route.query.uid,"&photoURL=").concat(t.$store.state.user.photoURL,"&author=").concat(t.$store.state.user.displayName),e.next=3,t.$axios.get(r);case 3:e.sent,n=o,e.next=5;break;case 4:e.prev=4,d=e.catch(2),console.log("fail to generate image",d);case 5:return e.prev=5,l="https://ai.finlab.tw/strategy/?uid=".concat(t.$route.query.uid,"&sid=").concat(t.$route.query.sid),c={"User-Agent":"facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)",Connection:"close"},e.next=6,t.$axios.get(l,{},{headers:c});case 6:e.sent,e.next=8;break;case 7:e.prev=7,h=e.catch(5),console.log("fail to update crawler",h);case 8:n&&(t.shareImage=n),t.generatingSocialImage=!1;case 9:case"end":return e.stop()}},e,null,[[2,4],[5,7]])}))()},updateSettings:function(){this.strategy.info&&void 0!==this.strategy.info.public_performance&&(this.public_performance=this.strategy.info.public_performance),this.strategy.info&&void 0!==this.strategy.info.public_position&&(this.public_position=this.strategy.info.public_position),this.strategy.info&&void 0!==this.strategy.info.public_code&&(this.public_code=this.strategy.info.public_code)}},Object(c.b)({setRealTimeUpdate:"strategy/setRealTimeUpdate",cancelRealTimeUpdate:"strategy/cancelRealtimeUpdate"})),{},{updatePermission:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.c.collection("users").doc(t.uid).collection("strategies").doc(t.sid).update({public_performance:t.public_performance,public_position:t.public_position,public_code:t.public_code});case 1:case"end":return e.stop()}},e)}))()},downloadPost:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,r,o,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.c.collection("users").doc(t.uid).collection("strategies").doc(t.sid).collection("articles").doc("article"),r=null,e.prev=1,e.next=2,n.get();case 2:r=e.sent,e.next=4;break;case 3:e.prev=3,l=e.catch(1),alert("cannot download post ref"+l.response.data);case 4:r&&r.exists&&(o=r.data(),t.post=o.post,""===t.post&&(t.post=null));case 5:case"end":return e.stop()}},e,null,[[1,3]])}))()},uploadPost:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.post){e.next=1;break}return e.abrupt("return");case 1:return n=v.c.collection("users").doc(t.uid).collection("strategies").doc(t.sid).collection("articles").doc("article"),t.uploadingPost=!0,e.prev=2,e.next=3,n.set({post:t.post});case 3:e.next=5;break;case 4:e.prev=4,r=e.catch(2),alert("上傳 post 失敗："+r.response.data);case 5:t.uploadingPost=!1;case 6:case"end":return e.stop()}},e,null,[[2,4]])}))()}})},S=(n(920),n(52)),component=Object(S.a)(x,function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"min-height":"100vh",background:"white"}},[e("div",{staticClass:"uk-container uk-container-small"},[t.inIframe()?t._e():e("div",{staticClass:"uk-card uk-background-muted round-border shadow uk-padding"},[e("div",{staticClass:"uk-child-width-1-2",attrs:{"uk-grid":""}},[e("div",[e("h1",{staticClass:"uk-text-primary",staticStyle:{"font-size":"1.6rem",margin:"0"}},[t._v("\n            "+t._s(this.$route.query.sid)+"\n            "),t.$store.state.user&&t.$route.query.uid===t.$store.state.user.uid?e("span",{staticStyle:{cursor:"pointer"},attrs:{"uk-icon":"icon: pencil; ratio: 1","uk-toggle":"target: #modal-copy"}}):t._e()])]),t._v(" "),e("div",{staticClass:"uk-text-right"},[t.$store.state.user&&t.$route.query.uid===t.$store.state.user.uid?e("span",{staticStyle:{cursor:"pointer","margin-right":"20px"},attrs:{"uk-icon":"icon:  file-edit; ratio: 1"},on:{click:function(e){t.post=null===t.post?"":""===t.post?null:t.post}}}):t._e(),t._v(" "),t.$store.state.user&&t.$route.query.uid===t.$store.state.user.uid?e("span",{staticStyle:{cursor:"pointer"},attrs:{"uk-icon":"icon: cog; ratio: 1","uk-toggle":"target: #modal-example"},on:{click:t.updateSettings}}):t._e()])]),t._v(" "),e("div",{attrs:{id:"modal-copy","uk-modal":""}},[e("div",{staticClass:"uk-modal-dialog uk-modal-body round-border"},[e("h3",{staticClass:"uk-modal-title",staticStyle:{"font-weight":"300"}},[t._v("重新命名")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newStrategyName,expression:"newStrategyName"}],staticClass:"uk-input",attrs:{type:"text",placeholder:"複製的策略名稱",autocomplete:"off"},domProps:{value:t.newStrategyName},on:{input:function(e){e.target.composing||(t.newStrategyName=e.target.value)}}}),t._v(" "),e("span",{staticStyle:{color:"#c9187a"}},[t._v(t._s(t.strategyNameInfo))]),t._v(" "),e("p",{staticClass:"uk-text-right"},[e("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"button",disabled:t.isChangingName},on:{click:t.changeStrategyName}},[t._v("\n              "+t._s(t.isChangingName?"命名中...":"重新命名")+"\n            ")])])])]),t._v(" "),t.strategy?e("div",{attrs:{id:"modal-example","uk-modal":""}},[e("div",{staticClass:"uk-modal-dialog uk-modal-body round-border"},[e("h2",{staticClass:"uk-modal-title"},[t._v("設定")]),t._v("\n          分享績效\n          "),e("div",{staticClass:"uk-margin"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.public_performance,expression:"public_performance"}],staticClass:"uk-select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.public_performance=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:10}},[t._v("隱藏")]),t._v(" "),e("option",{domProps:{value:2}},[t._v("分享於VIP1用戶")]),t._v(" "),e("option",{domProps:{value:1}},[t._v("分享於登入用戶")]),t._v(" "),e("option",{domProps:{value:0}},[t._v("分享於所有用戶")])])]),t._v("\n          分享選股標的\n          "),e("div",{staticClass:"uk-margin"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.public_position,expression:"public_position"}],staticClass:"uk-select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.public_position=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:10}},[t._v("隱藏")]),t._v(" "),e("option",{domProps:{value:2}},[t._v("分享於VIP1用戶")]),t._v(" "),e("option",{domProps:{value:1}},[t._v("分享於登入用戶")]),t._v(" "),e("option",{domProps:{value:0}},[t._v("分享於所有用戶")])])]),t._v("\n          分享程式碼\n          "),e("div",{staticClass:"uk-margin"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.public_code,expression:"public_code"}],staticClass:"uk-select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.public_code=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:10}},[t._v("隱藏")]),t._v(" "),e("option",{domProps:{value:2}},[t._v("分享於VIP1用戶")]),t._v(" "),e("option",{domProps:{value:1}},[t._v("分享於登入用戶")]),t._v(" "),e("option",{domProps:{value:0}},[t._v("分享於所有用戶")])])]),t._v(" "),e("div",{staticClass:"uk-margin-large",staticStyle:{border:"1px solid #ddd"}},[t.strategy.info&&0===t.strategy.info.public_performance&&this.$store.state.user?e("button",{staticClass:"uk-button",on:{click:t.generateSocialImage}},[t._v("\n              "+t._s(!1===t.generatingSocialImage?"產生分享圖片":"產生中(約30秒)...")+"\n            ")]):t._e(),t._v(" "),t.shareImage?e("img",{attrs:{width:"100%",src:t.shareImage,alt:"顯示圖片"}}):t._e()]),t._v(" "),e("p",{staticClass:"uk-text-right"},[e("button",{staticClass:"uk-button uk-button-default uk-modal-close",attrs:{type:"button"}},[t._v("\n              取消\n            ")]),t._v(" "),e("button",{staticClass:"uk-button uk-button-primary uk-modal-close",attrs:{type:"button"},on:{click:t.updatePermission}},[t._v("\n              確認\n            ")])])])]):t._e(),t._v(" "),null!==t.post&&t.isAuthor&&!t.inIframe()?e("div",{staticClass:"uk-margin-large-top"},[e("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},model:{value:t.post,callback:function(e){t.post=e},expression:"post"}}),t._v(" "),e("div",{staticClass:"post-toolbar2"},[t.uploadingPost?e("span",{staticStyle:{height:"24px",width:"24px"}},[e("div",{attrs:{"uk-spinner":""}})]):e("span",{staticStyle:{cursor:"pointer"},attrs:{"uk-icon":"icon:  cloud-upload; ratio: 1.2"},on:{click:t.uploadPost}})])],1):t._e(),t._v(" "),!t.isAuthor&&t.post&&0!==t.post.length?e("div",{staticClass:"vhtml uk-margin-large-top",domProps:{innerHTML:t._s(t.post)}}):t._e()]),t._v(" "),t.showMainEditor?e("div",{staticClass:"uk-margin-large-top"}):t._e()]),t._v(" "),t.strategy&&t.strategy.info?e("StrategyPanel",{attrs:{strategy:t.strategy.info,post:t.post,uid:t.$route.query.uid,sid:t.$route.query.sid,viewmode:t.inIframe()||null===t.$store.state.user||t.uid!==t.$store.state.user.uid,smallSize:!0}}):t._e()],1)},[],!1,null,"30e93170",null);e.default=component.exports;installComponents(component,{StrategyPanel:n(598).default})},443:function(t,e,n){"use strict";var r=n(4),o=n(461),l=n(149);r({target:"Array",proto:!0},{fill:o}),l("fill")},451:function(t,e,n){"use strict";var r=n(424),o=n(431),l=n(457),c=n(573),d=n(432),h=n(430),f=n(452),v=n(423),y=n(428),m=n(438),_=function(t){function e(data,e,n,r){var o=t.call(this)||this;return o.updateData(data,e,n,r),o}return Object(r.a)(e,t),e.prototype._createSymbol=function(t,data,e,n,r){this.removeAll();var l=Object(o.a)(t,-1,-1,2,2,null,r);l.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),l.drift=x,this._symbolType=t,this.add(l)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Object(h.r)(this.childAt(0))},e.prototype.downplay=function(){Object(h.C)(this.childAt(0))},e.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},e.prototype.setDraggable=function(t,e){var n=this.childAt(0);n.draggable=t,n.cursor=!e&&t?"move":n.cursor},e.prototype.updateData=function(data,t,n,r){this.silent=!1;var o=data.getItemVisual(t,"symbol")||"circle",c=data.hostModel,d=e.getSymbolSize(data,t),h=o!==this._symbolType,f=r&&r.disableAnimation;if(h){var v=data.getItemVisual(t,"symbolKeepAspect");this._createSymbol(o,data,t,d,v)}else{(m=this.childAt(0)).silent=!1;var y={scaleX:d[0]/2,scaleY:d[1]/2};f?m.attr(y):l.g(m,y,c,t),Object(l.f)(m)}if(this._updateCommon(data,t,d,n,r),h){var m=this.childAt(0);if(!f){y={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:m.style.opacity}};m.scaleX=m.scaleY=0,m.style.opacity=0,l.b(m,y,c,t)}}f&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(data,t,e,n,r){var l,c,d,_,x,S,k,w,O,C=this.childAt(0),I=data.hostModel;if(n&&(l=n.emphasisItemStyle,c=n.blurItemStyle,d=n.selectItemStyle,_=n.focus,x=n.blurScope,k=n.labelStatesModels,w=n.hoverScale,O=n.cursorStyle,S=n.emphasisDisabled),!n||data.hasItemOption){var M=n&&n.itemModel?n.itemModel:data.getItemModel(t),j=M.getModel("emphasis");l=j.getModel("itemStyle").getItemStyle(),d=M.getModel(["select","itemStyle"]).getItemStyle(),c=M.getModel(["blur","itemStyle"]).getItemStyle(),_=j.get("focus"),x=j.get("blurScope"),S=j.get("disabled"),k=Object(y.d)(M),w=j.getShallow("scale"),O=M.getShallow("cursor")}var A=data.getItemVisual(t,"symbolRotate");C.attr("rotation",(A||0)*Math.PI/180||0);var T=Object(o.b)(data.getItemVisual(t,"symbolOffset"),e);T&&(C.x=T[0],C.y=T[1]),O&&C.attr("cursor",O);var L=data.getItemVisual(t,"style"),D=L.fill;if(C instanceof m.a){var P=C.style;C.useStyle(Object(v.m)({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},L))}else C.__isEmptyBrush?C.useStyle(Object(v.m)({},L)):C.useStyle(L),C.style.decal=null,C.setColor(D,r&&r.symbolInnerColor),C.style.strokeNoScale=!0;var z=data.getItemVisual(t,"liftZ"),N=this._z2;null!=z?null==N&&(this._z2=C.z2,C.z2+=z):null!=N&&(C.z2=N,this._z2=null);var R=r&&r.useNameLabel;Object(y.f)(C,k,{labelFetcher:I,labelDataIndex:t,defaultText:function(t){return R?data.getName(t):Object(f.b)(data,t)},inheritColor:D,defaultOpacity:L.opacity}),this._sizeX=e[0]/2,this._sizeY=e[1]/2;var V=C.ensureState("emphasis");V.style=l,C.ensureState("select").style=d,C.ensureState("blur").style=c;var E=null==w||!0===w?Math.max(1.1,3/this._sizeY):isFinite(w)&&w>0?+w:1;V.scaleX=this._sizeX*E,V.scaleY=this._sizeY*E,this.setSymbolScale(1),Object(h.J)(this,_,x,S)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e,n){var r=this.childAt(0),o=Object(d.a)(this).dataIndex,c=n&&n.animation;if(this.silent=r.silent=!0,n&&n.fadeLabel){var h=r.getTextContent();h&&l.d(h,{style:{opacity:0}},e,{dataIndex:o,removeOpt:c,cb:function(){r.removeTextContent()}})}else r.removeTextContent();l.d(r,{style:{opacity:0},scaleX:0,scaleY:0},e,{dataIndex:o,cb:t,removeOpt:c})},e.getSymbolSize=function(data,t){return Object(o.c)(data.getItemVisual(t,"symbolSize"))},e}(c.a);function x(t,e){this.parent.drift(t,e)}e.a=_},452:function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return c});var r=n(510),o=n(423);function l(data,t){var e=data.mapDimensionsAll("defaultedLabel"),n=e.length;if(1===n){var o=Object(r.e)(data,t,e[0]);return null!=o?o+"":null}if(n){for(var l=[],i=0;i<e.length;i++)l.push(Object(r.e)(data,t,e[i]));return l.join(" ")}}function c(data,t){var e=data.mapDimensionsAll("defaultedLabel");if(!Object(o.t)(t))return t+"";for(var n=[],i=0;i<e.length;i++){var r=data.getDimensionIndex(e[i]);r>=0&&n.push(t[r])}return n.join(" ")}},453:function(t,e,n){t.exports={}},454:function(t,e,n){t.exports={}},456:function(t,e,n){"use strict";n.r(e);n(75),n(23),n(38);var r=n(6),o=n(462),l=n(595),c=n(1040),d=n(546),h=n(827),f=n(656),v=n(658);Object(o.a)([c.a,h.a,f.a,d.a,v.a]);var y=Object(r.b)({name:"RadarChart",props:{height:{type:String,default:"300px"},names:{default:function(){return null}},indicators:{default:function(){return["a","b","c"]}},values:{default:function(){return{values:{a:.5,b:.8,c:.3}}}}},data:function(){return{chartInstance:null,resizeObserver:null}},mounted:function(){var t=this;this.initChart(),this.updateChart(),window.addEventListener("resize",this.resizeChart),"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(function(){t.resizeChart()}),this.$refs.chart&&this.resizeObserver.observe(this.$refs.chart))},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChart),this.resizeObserver&&this.resizeObserver.disconnect(),this.chartInstance&&this.chartInstance.dispose()},watch:{values:{handler:"updateChart",deep:!0},indicators:{handler:"updateChart",deep:!0},names:{handler:"updateChart",deep:!0}},computed:{option:function(){return{scale:{pointLabels:{fontSize:20}},color:["rgba(255, 133, 182, 0.5)","#FFE43488","#56A3F188","#FF917C88"],legend:{data:this.seriesNames,bottom:0,right:0,textStyle:{fontSize:18}},radar:{indicator:this.indicators_,shape:"circle",startAngle:135,axisName:{fontSize:18}},series:[{type:"radar",data:this.valueData}]}},indicators_:function(){return this.indicators.map(function(t){return{name:t,max:1}})},seriesNames:function(){if(this.names)return this.names;var t=[];for(var e in this.values)t.push(e);return t},valueData:function(){var label={show:1==this.seriesNames.length,formatter:function(t){return Math.round(1e3*t.value)/10+"%"}},t={},e=[];for(var n in this.values){var r=this.values[n],o=[];for(var i in this.indicators)o.push(r[this.indicators[i]]);e.push({value:o,name:this.seriesNames[n],label:label,areaStyle:t,textStyle:{color:"black",fontSize:20}})}return e}},methods:{initChart:function(){this.$refs.chart&&(this.chartInstance=Object(l.b)(this.$refs.chart,"light"))},resizeChart:function(){this.chartInstance&&this.chartInstance.resize()},updateChart:function(){this.chartInstance&&this.chartInstance.setOption(this.option,!0)}}}),m=(n(488),n(52)),component=Object(m.a)(y,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{ref:"chart",staticClass:"chart",style:{height:t.height,zIndex:0}})},[],!1,null,"38f8178d",null);e.default=component.exports},459:function(t,e,n){"use strict";var r=n(423),o=n(450),l=n(427),c=(n(444),r.k),d=r.A,h=-1,f=function(){function t(option){var e=option.mappingMethod,n=option.type,o=this.option=r.d(option);this.type=n,this.mappingMethod=e,this._normalizeData=C[e];var l=t.visualHandlers[n];this.applyVisual=l.applyVisual,this.getColorMapper=l.getColorMapper,this._normalizedToVisual=l._normalizedToVisual[e],"piecewise"===e?(v(o),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,r.k(e,function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)})}(o)):"category"===e?o.categories?function(t){var e=t.categories,n=t.categoryMap={},o=t.visual;if(c(e,function(t,e){n[t]=e}),!r.t(o)){var l=[];r.A(o)?c(o,function(t,e){var r=n[e];l[null!=r?r:h]=t}):l[-1]=o,o=O(t,l)}for(var i=e.length-1;i>=0;i--)null==o[i]&&(delete n[e[i]],e.pop())}(o):v(o,!0):(r.b("linear"!==e||o.dataExtent),v(o))}return t.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},t.prototype.getNormalizer=function(){return r.c(this._normalizeData,this)},t.listVisualTypes=function(){return r.F(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(t,e,n){r.A(t)?r.k(t,e,n):e.call(n,t)},t.mapVisual=function(e,n,o){var l,c=r.t(e)?[]:r.A(e)?{}:(l=!0,null);return t.eachVisual(e,function(t,e){var r=n.call(o,t,e);l?c=r:c[e]=r}),c},t.retrieveVisuals=function(e){var n,r={};return e&&c(t.visualHandlers,function(t,o){e.hasOwnProperty(o)&&(r[o]=e[o],n=!0)}),n?r:null},t.prepareVisualTypes=function(t){if(r.t(t))t=t.slice();else{if(!d(t))return[];var e=[];c(t,function(t,n){e.push(n)}),t=e}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},t.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},t.findPieceIndex=function(t,e,n){for(var o,l=1/0,i=0,c=e.length;i<c;i++){var d=e[i].value;if(null!=d){if(d===t||r.C(d)&&d===t+"")return i;n&&y(d,i)}}for(i=0,c=e.length;i<c;i++){var h=e[i],f=h.interval,v=h.close;if(f){if(f[0]===-1/0){if(I(v[1],t,f[1]))return i}else if(f[1]===1/0){if(I(v[0],f[0],t))return i}else if(I(v[0],f[0],t)&&I(v[1],t,f[1]))return i;n&&y(f[0],i),n&&y(f[1],i)}}if(n)return t===1/0?e.length-1:t===-1/0?0:o;function y(e,n){var r=Math.abs(e-t);r<l&&(l=r,o=n)}},t.visualHandlers={color:{applyVisual:_("color"),getColorMapper:function(){var t=this.option;return r.c("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),x.call(this,t)}:function(e,n,r){var l=!!r;return!n&&(e=this._normalizeData(e)),r=o.a(e,t.parsedVisual,r),l?r:o.h(r,"rgba")},this)},_normalizedToVisual:{linear:function(t){return o.h(o.a(t,this.option.parsedVisual),"rgba")},category:x,piecewise:function(t,e){var n=w.call(this,e);return null==n&&(n=o.h(o.a(t,this.option.parsedVisual),"rgba")),n},fixed:S}},colorHue:y(function(t,e){return o.f(t,e)}),colorSaturation:y(function(t,e){return o.f(t,null,e)}),colorLightness:y(function(t,e){return o.f(t,null,null,e)}),colorAlpha:y(function(t,e){return o.e(t,e)}),decal:{applyVisual:_("decal"),_normalizedToVisual:{linear:null,category:x,piecewise:null,fixed:null}},opacity:{applyVisual:_("opacity"),_normalizedToVisual:k([0,1])},liftZ:{applyVisual:_("liftZ"),_normalizedToVisual:{linear:S,category:S,piecewise:S,fixed:S}},symbol:{applyVisual:function(t,e,n){n("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:m,category:x,piecewise:function(t,e){var n=w.call(this,e);return null==n&&(n=m.call(this,t)),n},fixed:S}},symbolSize:{applyVisual:_("symbolSize"),_normalizedToVisual:k([0,1])}},t}();function v(t,e){var n=t.visual,o=[];r.A(n)?c(n,function(t){o.push(t)}):null!=n&&o.push(n);e||1!==o.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(o[1]=o[0]),O(t,o)}function y(t){return{applyVisual:function(e,n,r){var o=this.mapValueToVisual(e);r("color",t(n("color"),o))},_normalizedToVisual:k([0,1])}}function m(t){var e=this.option.visual;return e[Math.round(Object(l.j)(t,[0,1],[0,e.length-1],!0))]||{}}function _(t){return function(e,n,r){r(t,this.mapValueToVisual(e))}}function x(t){var e=this.option.visual;return e[this.option.loop&&t!==h?t%e.length:t]}function S(){return this.option.visual[0]}function k(t){return{linear:function(e){return Object(l.j)(e,t,this.option.visual,!0)},category:x,piecewise:function(e,n){var r=w.call(this,n);return null==r&&(r=Object(l.j)(e,t,this.option.visual,!0)),r},fixed:S}}function w(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var r=n[f.findPieceIndex(t,n)];if(r&&r.visual)return r.visual[this.type]}}function O(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=r.H(e,function(t){var e=o.g(t);return e||[0,0,0,1]})),e}var C={linear:function(t){return Object(l.j)(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=f.findPieceIndex(t,e,!0);if(null!=n)return Object(l.j)(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?h:e},fixed:r.L};function I(t,a,b){return t?a<=b:a<b}e.a=f},461:function(t,e,n){"use strict";var r=n(50),o=n(123),l=n(76);t.exports=function(t){for(var e=r(this),n=l(e),c=arguments.length,d=o(c>1?arguments[1]:void 0,n),h=c>2?arguments[2]:void 0,f=void 0===h?n:o(h,n);f>d;)e[d++]=t;return e}},464:function(t,e,n){"use strict";n.r(e);n(54),n(23),n(30),n(64);var r=n(26),o={props:{value:{type:String},autocomplete:{type:String,default:"true"}},data:function(){return{sid:[],sdict:{},candidates:[],currentStock:"",text:"",target:0,composing:!1,history:[]}},created:function(){this.text=this.value;var t=this;r.c.collection("twStock").doc("searchTree").get().then(function(e){if(e.exists){var data=e.data();t.sdict=data.searchTree.sdict,t.slist=data.searchTree.slist}else console.log("cannot find strategy menu")})},methods:{moveCursor:function(t){0!=this.candidates.length?this.target+=t:this.target=-1},selectStock:function(t){t.preventDefault(),-1!=this.target&&this.chooseStock(this.candidates[this.target])},chooseStock:function(s){if(!this.composing){var t=this;console.log("emit",s),this.$emit("input",s),this.history.unshift(s),this.history=this.history.filter(function(e,n){return t.history.indexOf(e)==n}),this.history.length>3&&(this.history=[this.history[0],this.history[1],this.history[2]]),this.currentStock=s,this.candidates=[],this.text=s,this.target=-1,document.getElementById("search-box").blur()}},clearStock:function(t){this.text="",this.candidates=[],this.target=-1,this.$emit("update","")},digitupdate:function(t){var s,e=t.target.value;this.$emit("update",e),(s=e).replace(/[^\x00-\xff]/g,"rr").length==s.length&&this.update(t)},update:function(t){var e=event.target.value;if(this.text=e,""!=e){var n=this.sdict;for(var i in e){var r=e[i];if(!(r in n))return void(this.candidates=["找不到此股票代號"]);n=n[r]}for(var o=[],l=[n];l&&0!=l.length&&!((n=l.pop())===parseInt(n,10)&&(o.push(this.slist[n]),o.length>20));)for(var c in n)l.unshift(n[c]);this.candidates=o,1==this.candidates.length&&this.chooseStock(this.candidates[0])}else this.candidates=[]}}},l=(n(489),n(52)),component=Object(l.a)(o,function(){var t=this,e=t._self._c;return e("div",[e("form",{staticClass:"uk-search uk-search-navbar uk-card uk-flex",staticStyle:{width:"100%",border:"1px solid #ddd",background:"rgba(255, 255, 255, 0.2)"}},[e("span",{staticStyle:{"padding-left":"10px"},attrs:{"uk-search-icon":""}}),t._v(" "),e("input",{staticClass:"uk-search-input uk-text-primary uk-text-light",staticStyle:{"padding-left":"60px"},attrs:{id:"search-box",name:"Search",type:"search",placeholder:"股票代號",autocomplete:"off"},domProps:{value:t.text},on:{change:t.digitupdate,input:t.digitupdate,compositionstart:function(e){t.composing=!0},compositionend:function(e){t.composing=!1,t.update()},focus:t.clearStock,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.moveCursor(1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.moveCursor(-1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.selectStock.apply(null,arguments))}]}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.candidates.length>0&&"true"==t.autocomplete,expression:"candidates.length > 0 && autocomplete == 'true'"}],staticClass:"uk-flex uk-flex-wrap uk-flex-wrap-around"},t._l(t.candidates,function(n,i){return e("div",{key:n,staticClass:"uk-card uk-card-default uk-card-body uk-padding-small uk-card-hover",staticStyle:{cursor:"pointer","border-radius":"10px",margin:"20px 20px 0 0"},on:{click:function(e){return t.chooseStock(n)}}},[t._v("\n        "+t._s(i==t.target?n+" * ":n)+"\n      ")])}),0)])},[],!1,null,"3c0325ef",null);e.default=component.exports},465:function(t,e,n){"use strict";n.r(e);var r=n(479);n(276),n(277),n(30),n(44),n(64),n(193),n(87);var o={name:"TVChartContainer",props:{symbol:{default:"stock",type:String},price:{default:function(){},type:Object},indicators:{default:function(){},type:Object},interval:{default:"D",type:String},containerId:{default:"tv_chart_container",type:String},datafeedUrl:{default:"https://demo_feed.tradingview.com",type:String},libraryPath:{default:"/charting_library/",type:String},chartsStorageUrl:{default:"https://saveload.tradingview.com",type:String},chartsStorageApiVersion:{default:"1.1",type:String},clientId:{default:"tradingview.com",type:String},userId:{default:"public_user_id",type:String},fullscreen:{default:!1,type:Boolean},autosize:{default:!0,type:Boolean},studiesOverrides:{type:Object,default:function(){return{}}}},data:function(){return{isReady:!1,predictionOption:"未來20天"}},watch:{price:function(){null!==this.tvWidget&&this.isReady&&this.tvWidget.setSymbol(this.$props.symbol,"1D")},indicators:function(){console.log("change indicator"),this.isReady&&this.initStudies()}},tvWidget:null,mounted:function(){this.deleteTvWidget(),this.createTvWidget(),this.predictionOption=localStorage.getItem("predictionOption"),null===this.predictionOption&&(this.predictionOption="未來10天")},destroyed:function(){this.deleteTvWidget()},methods:{initStudies:function(){null!==this.tvWidget&&(console.log("----aaa----"),console.log(this.predictionOption),this.tvWidget.activeChart().removeAllStudies(),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[5]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[20]),this.tvWidget.activeChart().createStudy("Moving Average",!1,!1,[60]),this.tvWidget.activeChart().createStudy("Volume"))},deleteTvWidget:function(){this.tvWidget&&(this.tvWidget.remove(),this.tvWidget=null,this.isReady=!1)},createTvWidget:function(){var t,e=this,n=this.createDatafeed(),r={symbol:this.symbol,datafeed:n,interval:this.interval,container:this.containerId,library_path:this.libraryPath,locale:(t=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search),(null===t?null:decodeURIComponent(t[1].replace(/\+/g," ")))||"zh_TW"),disabled_features:["header_widget","header_widget_dom_node","compare_symbol","display_market_status","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","timeframes_toolbar","use_localstorage_for_settings","volume_force_overlay","header_saveload","go_to_date","edit_buttons_in_legend","symbol_search_hot_key","border_around_the_chart","control_bar","context_menus","show_chart_property_page","countdown","study_market_minimized","main_series_scale_menu","display_market_status","remove_library_container_border","chart_property_page_style","property_pages","chart_property_page_scales","chart_property_page_background","source_selection_markers"],detail:!0,enabled_features:["hide_left_toolbar_by_default"],charts_storage_url:this.chartsStorageUrl,charts_storage_api_version:this.chartsStorageApiVersion,client_id:this.clientId,user_id:this.userId,fullscreen:this.fullscreen,autosize:!0,studies_overrides:this.studiesOverrides,debug:!1},o=this.$TVChart.Widget;this.isReady=!1;var l=new o(r);this.tvWidget=l,l.onChartReady(function(){l.activeChart().dataReady(function(){e.initStudies(),e.isReady=!0;var iframe=document.getElementsByTagName("iframe")[0],t=document.getElementsByClassName("TVChartContainer")[0];iframe.style.height=t.offsetHeight+"px"})})},createDatafeed:function(){var t=this,e=this;return{onReady:function(t){var e={supported_resolutions:["1D","1W","1M"],exchanges:[{value:"TPEX",name:"TPEX",desc:"TPEX"}],symbols_types:[{name:"stock",value:"stock"}]};console.log("[onReady]: Method call"),setTimeout(function(){return t(e)})},searchSymbols:function(t,e,n,r){console.log("[searchSymbol]: Method call",symbolName)},resolveSymbol:function(e,n,r){var o=e===t.$props.symbol?e:e+"-"+t.$props.symbol,l={ticker:o,name:o,description:o,type:"TYPE",session:"0900-1330",timezone:"Asia/Taipei",exchange:"TWII",minmov:.01,pricescale:.01,has_intraday:!1,has_weekly_and_monthly:!1,supported_resolutions:["1D","1W","1M"]};setTimeout(function(){return n(l)},0),console.log("[resolveSymbol]: Method call",e)},getBars:function(n,o,l,c,d){if(n.ticker==t.$props.symbol){var p=[];for(var i in e.$props.price.close){var h=e.$props.price.date[i].seconds;if("number"==typeof e.$props.price.date[i]){var f=e.$props.price.date[i];Number(f/1e6);Object(r.a)("t")}if(!(h<l.from||h>=l.to)){var v={open:e.$props.price.open[i],close:e.$props.price.close[i],high:e.$props.price.high[i],low:e.$props.price.low[i],volume:e.$props.price.volume[i],time:1e3*h};isNaN(v.open)||p.push(v)}}console.log(p),c(p,{noData:0===p.length})}else{var y=t.$props.indicators[n.ticker.split("-")[0]],m=t.$props.indicators.date,_=[];for(var x in y){var S=m[x].seconds;if(!(S<l.from||S>=l.to)){var k={open:y[x],close:y[x],high:y[x],low:y[x],time:1e3*S};isNaN(k.open)||_.push(k)}}c(_,{noData:0===_.length})}},subscribeBars:function(t,e,n,r,o){console.log("[subscribeBars]: Method call with subscribeUID:",r)},unsubscribeBars:function(t){console.log("[unsubscribeBars]: Method call with subscriberUID:",t)}}}}},l=n(52),component=Object(l.a)(o,function(){return(0,this._self._c)("div",{staticClass:"TVChartContainer",staticStyle:{height:"100%"},attrs:{id:this.containerId}})},[],!1,null,null,null);e.default=component.exports},467:function(t,e,n){"use strict";function r(t,e){return t.type===e}n.d(e,"a",function(){return r})},469:function(t,e,n){t.exports={}},472:function(t,e,n){"use strict";var r=n(423),o=n(468),l=n(478),c=n(529),d=n(426),h=n(501),f=function(t){this.coordSysDims=[],this.axisMap=Object(r.f)(),this.categoryAxisMap=Object(r.f)(),this.coordSysName=t};var v={cartesian2d:function(t,e,n,r){var o=t.getReferringComponents("xAxis",d.b).models[0],l=t.getReferringComponents("yAxis",d.b).models[0];e.coordSysDims=["x","y"],n.set("x",o),n.set("y",l),y(o)&&(r.set("x",o),e.firstCategoryDimIndex=0),y(l)&&(r.set("y",l),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,r){var o=t.getReferringComponents("singleAxis",d.b).models[0];e.coordSysDims=["single"],n.set("single",o),y(o)&&(r.set("single",o),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var o=t.getReferringComponents("polar",d.b).models[0],l=o.findAxisModel("radiusAxis"),c=o.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",l),n.set("angle",c),y(l)&&(r.set("radius",l),e.firstCategoryDimIndex=0),y(c)&&(r.set("angle",c),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,o){var l=t.ecModel,c=l.getComponent("parallel",t.get("parallelIndex")),d=e.coordSysDims=c.dimensions.slice();Object(r.k)(c.parallelAxisIndex,function(t,r){var c=l.getComponent("parallelAxis",t),h=d[r];n.set(h,c),y(c)&&(o.set(h,c),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=r))})}};function y(t){return"category"===t.get("type")}var m=n(495),_=n(441),x=n(509),S=n(484);e.a=function(t,e,n){n=n||{};var source,y=e.getSourceManager(),k=!1;t?(k=!0,source=Object(m.c)(t)):k=(source=y.getSource()).sourceFormat===S.f;var w=function(t){var e=t.get("coordinateSystem"),n=new f(e),r=v[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}(e),O=function(t,e){var n,o=t.get("coordinateSystem"),l=h.a.get(o);return e&&e.coordSysDims&&(n=r.H(e.coordSysDims,function(t){var n={name:t},r=e.axisMap.get(t);if(r){var o=r.get("type");n.type=Object(c.a)(o)}return n})),n||(n=l&&(l.getDimensionsInfo?l.getDimensionsInfo():l.dimensions.slice())||["x","y"]),n}(e,w),C=n.useEncodeDefaulter,I=r.w(C)?C:C?r.h(x.c,O,e):null,M={coordDimensions:O,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:I,canOmitUnusedDimensions:!k},j=Object(l.a)(source,M),A=function(t,e,n){var o,l;return n&&r.k(t,function(t,r){var c=t.coordDim,d=n.categoryAxisMap.get(c);d&&(null==o&&(o=r),t.ordinalMeta=d.getOrdinalMeta(),e&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(l=!0)}),l||null==o||(t[o].otherDims.itemName=0),o}(j.dimensions,n.createInvertedIndices,w),T=k?null:y.getSharedDataStore(j),L=Object(_.a)(e,{schema:j,store:T}),data=new o.a(j,e);data.setCalculationInfo(L);var D=null!=A&&function(source){if(source.sourceFormat===S.f){var t=function(t){var i=0;for(;i<t.length&&null==t[i];)i++;return t[i]}(source.data||[]);return!r.t(Object(d.h)(t))}}(source)?function(t,e,n,r){return r===A?n:this.defaultDimValueGetter(t,e,n,r)}:null;return data.hasItemOption=!1,data.initData(k?source:T,null,D),data}},474:function(t,e,n){t.exports={}},476:function(t,e,n){t.exports={}},479:function(t,e,n){"use strict";function r(t){throw new TypeError('"'+t+'" is read-only')}n.d(e,"a",function(){return r})},480:function(t,e,n){"use strict";n.d(e,"a",function(){return z});var r=n(424),o=n(423),l=n(504),c=n(470),d=n(492),h=n(437),f=l.a.value;function v(t,e){return o.i({show:e},t)}var y=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),r=this.get("axisLine"),l=this.get("axisTick"),h=this.get("axisLabel"),f=this.get("axisName"),v=this.get(["axisName","show"]),y=this.get(["axisName","formatter"]),m=this.get("axisNameGap"),_=this.get("triggerEvent"),x=o.H(this.get("indicator")||[],function(x){null!=x.max&&x.max>0&&!x.min?x.min=0:null!=x.min&&x.min<0&&!x.max&&(x.max=0);var S=f;null!=x.color&&(S=o.i({color:x.color},f));var k=o.I(o.d(x),{boundaryGap:t,splitNumber:e,scale:n,axisLine:r,axisTick:l,axisLabel:h,name:x.text,showName:v,nameLocation:"end",nameGap:m,nameTextStyle:S,triggerEvent:_},!1);if(o.C(y)){var w=k.name;k.name=y.replace("{value}",null!=w?w:"")}else o.w(y)&&(k.name=y(k.name,k));var O=new c.a(k,null,this.ecModel);return o.K(O,d.a.prototype),O.mainType="radar",O.componentIndex=this.componentIndex,O},this);this._indicatorModels=x},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:o.I({lineStyle:{color:"#bbb"}},f.axisLine),axisLabel:v(f.axisLabel,!1),axisTick:v(f.axisTick,!1),splitLine:v(f.splitLine,!0),splitArea:v(f.splitArea,!0),indicator:[]},e}(h.a),m=y,_=n(491),x=n(678),S=n(761),k=n(681),w=n(680),O=n(425),C=n(439),I=["axisLine","axisTickLabel","axisName"],M=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.render=function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),r=o.H(n,function(t){var n=t.model.get("showName")?t.name:"";return new _.a(t.model,{axisName:n,position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});o.k(r,function(t){o.k(I,t.add,t),this.group.add(t.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var r=t.get("shape"),l=t.getModel("splitLine"),c=t.getModel("splitArea"),d=l.getModel("lineStyle"),h=c.getModel("areaStyle"),f=l.get("show"),v=c.get("show"),y=d.get("color"),m=h.get("color"),_=o.t(y)?y:[y],C=o.t(m)?m:[m],I=[],M=[];if("circle"===r)for(var j=n[0].getTicksCoords(),A=e.cx,T=e.cy,i=0;i<j.length;i++){if(f)I[E(I,_,i)].push(new x.a({shape:{cx:A,cy:T,r:j[i].coord}}));if(v&&i<j.length-1)M[E(M,C,i)].push(new S.a({shape:{cx:A,cy:T,r0:j[i].coord,r:j[i+1].coord}}))}else{var L,D=o.H(n,function(t,n){var r=t.getTicksCoords();return L=null==L?r.length-1:Math.min(r.length-1,L),o.H(r,function(t){return e.coordToPoint(t.coord,n)})}),P=[];for(i=0;i<=L;i++){for(var z=[],N=0;N<n.length;N++)z.push(D[N][i]);if(z[0]&&z.push(z[0].slice()),f)I[E(I,_,i)].push(new k.a({shape:{points:z}}));if(v&&P)M[E(M,C,i-1)].push(new w.a({shape:{points:z.concat(P)}}));P=z.slice().reverse()}}var R=d.getLineStyle(),V=h.getAreaStyle();o.k(M,function(t,e){this.group.add(O.mergePath(t,{style:o.i({stroke:"none",fill:C[e%C.length]},V),silent:!0}))},this),o.k(I,function(t,e){this.group.add(O.mergePath(t,{style:o.i({fill:"none",stroke:_[e%_.length]},R),silent:!0}))},this)}function E(t,e,n){var r=n%e.length;return t[r]=t[r]||[],r}},e.type="radar",e}(C.a),j=M,A=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.type="value",o.angle=0,o.name="",o}return Object(r.a)(e,t),e}(n(486).a),T=n(496),L=n(427),D=n(503),P=function(){function t(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=Object(o.H)(t.getIndicatorModels(),function(t,e){var n="indicator_"+e,r=new A(n,new T.a);return r.name=t.get("name"),r.model=t,t.axis=r,this.dimensions.push(n),r},this),this.resize(t,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,r=Math.sqrt(e*e+n*n);e/=r,n/=r;for(var o,l=Math.atan2(-n,e),c=1/0,d=-1,i=0;i<this._indicatorAxes.length;i++){var h=this._indicatorAxes[i],f=Math.abs(l-h.angle);f<c&&(o=h,d=i,c=f)}return[d,+(o&&o.coordToData(r))]},t.prototype.resize=function(t,e){var n=t.get("center"),r=e.getWidth(),l=e.getHeight(),c=Math.min(r,l)/2;this.cx=L.n(n[0],r),this.cy=L.n(n[1],l),this.startAngle=t.get("startAngle")*Math.PI/180;var d=t.get("radius");(Object(o.C)(d)||Object(o.z)(d))&&(d=[0,d]),this.r0=L.n(d[0],c),this.r=L.n(d[1],c),Object(o.k)(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n},this)},t.prototype.update=function(t,e){var n=this._indicatorAxes,r=this._model;Object(o.k)(n,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(e,l){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===r){var data=e.getData();Object(o.k)(n,function(t){t.scale.unionExtentFromData(data,data.mapDimension(t.dim))})}},this);var l=r.get("splitNumber"),c=new T.a;c.setExtent(0,l),c.setInterval(1),Object(o.k)(n,function(t,e){Object(D.a)(t.scale,t.model,c)})},t.prototype.convertToPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.create=function(e,n){var r=[];return e.eachComponent("radar",function(o){var l=new t(o,e,n);r.push(l),o.coordinateSystem=l}),e.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=r[t.get("radarIndex")||0])}),r},t.dimensions=[],t}();function z(t){t.registerCoordinateSystem("radar",P),t.registerComponentModel(m),t.registerComponentView(j),t.registerVisual({seriesType:"radar",reset:function(t){var data=t.getData();data.each(function(t){data.setItemVisual(t,"legendIcon","roundRect")}),data.setVisual("legendIcon","roundRect")}})}},482:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(478),o=n(468),l=n(423);function c(t,e,n){e=Object(l.t)(e)&&{coordDimensions:e}||Object(l.m)({encodeDefine:t.getEncode()},e);var source=t.getSource(),c=Object(r.a)(source,e).dimensions,d=new o.a(c,t);return d.initData(source,n),d}},485:function(t,e,n){"use strict";var r=n(573),o=n(457),l=n(425),c=n(451),d=n(423),h=n(428);function f(data,t,e,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(e))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&"none"!==data.getItemVisual(e,"symbol")}function v(t){return null==t||Object(d.A)(t)||(t={isIgnore:t}),t||{}}function y(data){var t=data.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:Object(h.d)(t),cursorStyle:t.get("cursor")}}var m=function(){function t(t){this.group=new r.a,this._SymbolCtor=t||c.a}return t.prototype.updateData=function(data,t){this._progressiveEls=null,t=v(t);var e=this.group,n=data.hostModel,r=this._data,l=this._SymbolCtor,c=t.disableAnimation,d=y(data),h={disableAnimation:c},m=t.getSymbolPoint||function(t){return data.getItemLayout(t)};r||e.removeAll(),data.diff(r).add(function(n){var r=m(n);if(f(data,r,n,t)){var o=new l(data,n,d,h);o.setPosition(r),data.setItemGraphicEl(n,o),e.add(o)}}).update(function(v,y){var _=r.getItemGraphicEl(y),x=m(v);if(f(data,x,v,t)){var S=data.getItemVisual(v,"symbol")||"circle",k=_&&_.getSymbolType&&_.getSymbolType();if(!_||k&&k!==S)e.remove(_),(_=new l(data,v,d,h)).setPosition(x);else{_.updateData(data,v,d,h);var w={x:x[0],y:x[1]};c?_.attr(w):o.g(_,w,n)}e.add(_),data.setItemGraphicEl(v,_)}else e.remove(_)}).remove(function(t){var o=r.getItemGraphicEl(t);o&&o.fadeOut(function(){e.remove(o)},n)}).execute(),this._getSymbolPoint=m,this._data=data},t.prototype.updateLayout=function(){var t=this,data=this._data;data&&data.eachItemGraphicEl(function(e,n){var r=t._getSymbolPoint(n);e.setPosition(r),e.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(data){this._seriesScope=y(data),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,data,e){function n(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],e=v(e);for(var r=t.start;r<t.end;r++){var o=data.getItemLayout(r);if(f(data,o,r,e)){var l=new this._SymbolCtor(data,r,this._seriesScope);l.traverse(n),l.setPosition(o),this.group.add(l),data.setItemGraphicEl(r,l),this._progressiveEls.push(l)}}},t.prototype.eachRendered=function(t){l.traverseElements(this._progressiveEls||this.group,t)},t.prototype.remove=function(t){var e=this.group,data=this._data;data&&t?data.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)},data.hostModel)}):e.removeAll()},t}();e.a=m},486:function(t,e,n){"use strict";var r=n(423),o=n(427),l=n(481),c=n(426),d=n(514),h=Object(c.n)();function f(t,e){var n=r.H(e,function(e){return t.scale.parse(e)});return"time"===t.type&&n.length>0&&(n.sort(),n.unshift(n[0]),n.push(n[n.length-1])),n}function v(t){var e=t.getLabelModel().get("customValues");if(e){var n=Object(d.h)(t),o=t.scale.getExtent(),l=f(t,e),c=r.n(l,function(t){return t>=o[0]&&t<=o[1]});return{labels:r.H(c,function(e){var r={value:e};return{formattedLabel:n(r),rawLabel:t.scale.getLabel(r),tickValue:e}})}}return"category"===t.type?function(t){var e=t.getLabelModel(),n=m(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(t):function(t){var e=t.scale.getTicks(),n=Object(d.h)(t);return{labels:r.H(e,function(e,r){return{level:e.level,formattedLabel:n(e,r),rawLabel:t.scale.getLabel(e),tickValue:e.value}})}}(t)}function y(t,e){var n=t.getTickModel().get("customValues");if(n){var o=t.scale.getExtent(),l=f(t,n);return{ticks:r.n(l,function(t){return t>=o[0]&&t<=o[1]})}}return"category"===t.type?function(t,e){var n,o,l=_(t,"ticks"),c=Object(d.e)(e),h=x(l,c);if(h)return h;e.get("show")&&!t.scale.isBlank()||(n=[]);if(r.w(c))n=w(t,c,!0);else if("auto"===c){var f=m(t,t.getLabelModel());o=f.labelCategoryInterval,n=r.H(f.labels,function(t){return t.tickValue})}else n=k(t,o=c,!0);return S(l,c,{ticks:n,tickCategoryInterval:o})}(t,e):{ticks:r.H(t.scale.getTicks(),function(t){return t.value})}}function m(t,e){var n,o,l=_(t,"labels"),c=Object(d.e)(e),f=x(l,c);return f||(r.w(c)?n=w(t,c):(o="auto"===c?function(t){var e=h(t).autoInterval;return null!=e?e:h(t).autoInterval=t.calculateCategoryInterval()}(t):c,n=k(t,o)),S(l,c,{labels:n,labelCategoryInterval:o}))}function _(t,e){return h(t)[e]||(h(t)[e]=[])}function x(t,e){for(var i=0;i<t.length;i++)if(t[i].key===e)return t[i].value}function S(t,e,n){return t.push({key:e,value:n}),n}function k(t,e,n){var r=Object(d.h)(t),o=t.scale,l=o.getExtent(),c=t.getLabelModel(),h=[],f=Math.max((e||0)+1,1),v=l[0],y=o.count();0!==v&&f>1&&y/f>2&&(v=Math.round(Math.ceil(v/f)*f));var m=Object(d.j)(t),_=c.get("showMinLabel")||m,x=c.get("showMaxLabel")||m;_&&v!==l[0]&&k(l[0]);for(var S=v;S<=l[1];S+=f)k(S);function k(t){var e={value:t};h.push(n?t:{formattedLabel:r(e),rawLabel:o.getLabel(e),tickValue:t})}return x&&S-f!==l[1]&&k(l[1]),h}function w(t,e,n){var o=t.scale,l=Object(d.h)(t),c=[];return r.k(o.getTicks(),function(t){var r=o.getLabel(t),d=t.value;e(t.value,r)&&c.push(n?d:{formattedLabel:l(t),rawLabel:r,tickValue:d})}),c}var O=[0,1],C=function(){function t(t,e,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=n||[0,0]}return t.prototype.contain=function(t){var e=this._extent,n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]);return t>=n&&t<=r},t.prototype.containData=function(data){return this.scale.contain(data)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(t){return Object(o.e)(t||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(t,e){var n=this._extent;n[0]=t,n[1]=e},t.prototype.dataToCoord=function(data,t){var e=this._extent,n=this.scale;return data=n.normalize(data),this.onBand&&"ordinal"===n.type&&I(e=e.slice(),n.count()),Object(o.j)(data,O,e,t)},t.prototype.coordToData=function(t,e){var n=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&I(n=n.slice(),r.count());var l=Object(o.j)(t,n,O,e);return this.scale.scale(l)},t.prototype.pointToData=function(t,e){},t.prototype.getTicksCoords=function(t){var e=(t=t||{}).tickModel||this.getTickModel(),n=y(this,e).ticks,l=Object(r.H)(n,function(t){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(t):t),tickValue:t}},this);return function(t,e,n,l){var c=e.length;if(!t.onBand||n||!c)return;var d,h,f=t.getExtent();if(1===c)e[0].coord=f[0],d=e[1]={coord:f[1],tickValue:e[0].tickValue};else{var v=e[c-1].tickValue-e[0].tickValue,y=(e[c-1].coord-e[0].coord)/v;Object(r.k)(e,function(t){t.coord-=y/2});var m=t.scale.getExtent();h=1+m[1]-e[c-1].tickValue,d={coord:e[c-1].coord+y*h,tickValue:m[1]+1},e.push(d)}var _=f[0]>f[1];x(e[0].coord,f[0])&&(l?e[0].coord=f[0]:e.shift());l&&x(f[0],e[0].coord)&&e.unshift({coord:f[0]});x(f[1],d.coord)&&(l?d.coord=f[1]:e.pop());l&&x(d.coord,f[1])&&e.push({coord:f[1]});function x(a,b){return a=Object(o.s)(a),b=Object(o.s)(b),_?a>b:a<b}}(this,l,e.get("alignWithLabel"),t.clamp),l},t.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");t>0&&t<100||(t=5);var e=this.scale.getMinorTicks(t);return Object(r.H)(e,function(t){return Object(r.H)(t,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this)},this)},t.prototype.getViewLabels=function(){return v(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var r=Math.abs(t[1]-t[0]);return Math.abs(r)/n},t.prototype.calculateCategoryInterval=function(){return function(t){var e=function(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}(t),n=Object(d.h)(t),r=(e.axisRotate-e.labelRotate)/180*Math.PI,o=t.scale,c=o.getExtent(),f=o.count();if(c[1]-c[0]<1)return 0;var v=1;f>40&&(v=Math.max(1,Math.floor(f/40)));for(var y=c[0],m=t.dataToCoord(y+1)-t.dataToCoord(y),_=Math.abs(m*Math.cos(r)),x=Math.abs(m*Math.sin(r)),S=0,k=0;y<=c[1];y+=v){var w,O,rect=l.d(n({value:y}),e.font,"center","top");w=1.3*rect.width,O=1.3*rect.height,S=Math.max(S,w,7),k=Math.max(k,O,7)}var C=S/_,I=k/x;isNaN(C)&&(C=1/0),isNaN(I)&&(I=1/0);var M=Math.max(0,Math.floor(Math.min(C,I))),j=h(t.model),A=t.getExtent(),T=j.lastAutoInterval,L=j.lastTickCount;return null!=T&&null!=L&&Math.abs(T-M)<=1&&Math.abs(L-f)<=1&&T>M&&j.axisExtent0===A[0]&&j.axisExtent1===A[1]?M=T:(j.lastTickCount=f,j.lastAutoInterval=M,j.axisExtent0=A[0],j.axisExtent1=A[1]),M}(this)},t}();function I(t,e){var n=(t[1]-t[0])/e/2;t[0]+=n,t[1]-=n}e.a=C},488:function(t,e,n){"use strict";n(453)},489:function(t,e,n){"use strict";n(454)},492:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){}return t.prototype.getNeedCrossZero=function(){return!this.option.scale},t.prototype.getCoordSysModel=function(){},t}()},497:function(t,e,n){"use strict";n(469)},498:function(t,e,n){"use strict";n.r(e);n(39),n(429),n(192),n(53);var r=n(6),o=n(26),l=n(456),c=n(464),d=n(465),h=Object(r.b)({name:"line-chart",components:{RadarChart:l.default,SearchBar:c.default,TVChartContainer:d.default},props:{stock_id:{default:"1101"},displaySearchBar:{default:!0}},data:function(){return{stock:null,tab:"AI技術指標",currentCategory:null,indicators:["成長率","獲利能力","單位基本面","安全性"],headerHeight:64,orgHeadHeight:64}},mounted:function(){this.headMaxHeight=this.orgHeadHeight,this.getStock(this.stock_id)},computed:{stockEvaluation:function(){if(null===this.stock)return null},categories:function(){var t=this;return this.stock&&this.stock.fundamentalSummaryIndustry?Object.keys(this.stock.fundamentalSummaryIndustry).sort(function(a,b){return-t.stock.fundamentalSummaryIndustry[a]["檔數"]+t.stock.fundamentalSummaryIndustry[b]["檔數"]}).splice(0,3):[]},radarValues:function(){var t={};return t[this.stock_id]=this.stock.fundamentalSummaryIndustry[this.currentCategory],t},importance:function(){if(!this.stock)return[];var t=[];for(var e in this.stock.fundamentalContribution)t.push({name:e,value:this.stock.fundamentalContribution[e]});return t.sort(function(a,b){return Math.abs(b.value)-Math.abs(a.value)})}},watch:{categories:function(){this.categories&&this.stock&&(this.currentCategory=this.categories[0])},stock_id:{handler:function(t){console.log("stock panel id change!",t),this.getStock(t)},deep:!0}},methods:{getStock:function(t){if(""!==t){var e=o.c.collection("twStock").doc(t),n=this;e.get().then(function(t){t.exists&&(n.stock=t.data(),console.log(n.stock))}).catch(function(e){console.log("Error getting document:",e),console.log(t)})}},percentage:function(t){return t>0?"+"+Math.round(10*t)/10+"%":Math.round(10*t)/10+"%"},percentageColor:function(t){var th=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this.stock.fundamentalContribution[this.importance[0].name],n=Math.abs(t)/Math.abs(e)*th;return t>0?"rgba(255, 133, 182, ".concat(n,")"):"rgba(154, 145, 255, ".concat(n,")")},percentageColor2:function(t){return t>0?"rgba(255, 133, 182)":"rgba(154, 145, 255)"},changeStock:function(t){console.log("get change stock",t),this.headerHeight=this.orgHeadHeight;var e=t.split(" ")[0];this.stock_id=e,window.history.pushState({},null,window.location.href.split("?")[0]+"?stock_id="+e),this.getStock(e)},fitHeaderSize:function(text){0!==text.length?this.headerHeight=400:this.headerHeight=this.orgHeadHeight}}}),f=h,v=(n(497),n(52)),component=Object(v.a)(f,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticStyle:{height:"100%"}},[e("div",{staticClass:"dark-muted stock-head"},[t.stock&&t.displaySearchBar?e("div",[e("SearchBar",{ref:"searchBar",attrs:{value:t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id},on:{input:t.changeStock,update:t.fitHeaderSize}})],1):t._e(),t._v(" "),e("ul",{staticClass:"uk-flex-left",staticStyle:{"margin-top":"12px","margin-bottom":"0"},attrs:{"uk-tab":""}},[t.displaySearchBar?t._e():e("li",{staticClass:"uk-disabled"},[e("a",[t._v(t._s(t.stock&&t.stock.category?t.stock_id+" "+t.stock.category.name:t.stock_id))])]),t._v(" "),e("li",{class:{"uk-active":"AI技術指標"==t.tab},on:{click:function(e){t.tab="AI技術指標"}}},[e("a",[t._v("技術指標")])]),t._v(" "),e("li",{class:{"uk-active":"AI財報分析"==t.tab},on:{click:function(e){t.tab="AI財報分析"}}},[e("a",[t._v("財報分析")])])])]),t._v(" "),e("div",{staticClass:"light-muted",staticStyle:{height:"calc(100% - 32px)"}},[t.stock&&t.stock.price?e("div",{style:{height:"AI技術指標"===t.tab?"100%":"0px"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"AI技術指標"===t.tab,expression:"tab === 'AI技術指標'"}],staticStyle:{height:"100%"}},[e("TVChartContainer",{attrs:{symbol:t.stock_id,price:t.stock.price,indicators:t.stock.indicatorPrediction}})],1)]):t._e(),t._v(" "),t.stock&&"AI財報分析"===t.tab?e("div",{staticClass:"uk-padding-small"},[t.stock.fundamentalValue?e("div",{staticClass:"uk-grid uk-grid-small",attrs:{"uk-height-match":"target: > div > .uk-card","uk-grid":""}},[e("div",{staticClass:"uk-width-1-2@m"},[t.stock?e("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[e("nuxt-link",{attrs:{to:"/ml_fundamental"}},[e("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),e("h3",{staticClass:"uk-card-title"},[t._v("\n              財報排名 "+t._s(t.stock.fundamentalValue.季別)+"\n            ")]),t._v(" "),e("p",{attrs:{"uk-margin":""}},t._l(t.categories,function(n){return e("button",{key:"category_"+n,staticClass:"uk-button uk-button-small",class:n===t.currentCategory?"uk-button-primary":"uk-button-default",on:{click:function(e){t.currentCategory=n}}},[t._v("\n                "+t._s(n)+"\n              ")])}),0),t._v(" "),e("p",[t._v("\n              "+t._s(t.currentCategory)+"排名：\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"]-Math.round(t.stock.fundamentalSummaryIndustry[t.currentCategory]["綜合評分"]*t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+1)+"\n              /\n              "+t._s(t.stock.fundamentalSummaryIndustry[t.currentCategory]["檔數"])+"\n              名\n            ")]),t._v(" "),e("RadarChart",{attrs:{names:[t.stock_id],indicators:t.indicators,values:t.radarValues}})],1):t._e()]),t._v(" "),e("div",{staticClass:"uk-width-1-2@m"},[e("div",{staticClass:"uk-card uk-background-default shadow uk-card-body"},[e("nuxt-link",{attrs:{to:"/ml_fundamental"}},[e("div",{staticClass:"uk-card-badge uk-label",staticStyle:{color:"white"}},[t._v("\n                使用方法\n              ")])]),t._v(" "),e("h3",{staticClass:"uk-card-title"},[t._v("財報股價影響力")]),t._v(" "),e("div",{staticClass:"uk-grid-collapse",attrs:{"uk-grid":""}},[e("div",{staticStyle:{width:"150px"}},[e("div",{staticStyle:{height:"85px","padding-bottom":"70px"},style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution.綜合評分,1)},[e("span",{staticStyle:{"font-size":"2.2em"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution.綜合評分)))]),e("span",[t._v("/年")]),t._v(" "),e("br"),t._v(" "),e("span",{staticStyle:{"font-size":"1em"}},[t._v("股價總影響力")])]),t._v(" "),t._l(t.indicators,function(i){return e("div",{key:"score"+i,staticClass:"fundamental-tab uk-text-center",style:"color:"+t.percentageColor2(t.stock.fundamentalSummaryContribution[i],1)},[e("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.percentage(t.stock.fundamentalSummaryContribution[i],100))+" ")]),e("br"),t._v(" "),e("span",[t._v(t._s(i))]),t._v(" "),e("div",{staticClass:"line"})])})],2),t._v(" "),e("div",{staticClass:"uk-width-expand"},[e("div",{staticClass:"table-value uk-overflow-auto",staticStyle:{"max-height":"400px"}},[e("table",{staticClass:"uk-table uk-table-small top-container",staticStyle:{width:"400px","font-size":"0.8rem"}},[t._m(0),t._v(" "),e("tbody",t._l(t.importance,function(n){return e("tr",{key:n.name+"fd",style:"background:"+t.percentageColor(n.value,.7)},[e("td",[t._v(t._s(n.name))]),t._v(" "),e("td",[t._v("\n                          "+t._s(t.percentage(n.value))+"\n                        ")]),t._v(" "),e("td",[t._v("\n                          "+t._s(Math.round(100*t.stock.fundamentalValue[n.name])/100)+"\n                        ")])])}),0)])])])])],1)])]):e("div",[t._v("\n        並無財報數據喔！\n      ")])]):t._e()])])},[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("th",[t._v("名稱")]),t._v(" "),e("th",[t._v("影響力（大⇀小）")]),t._v(" "),e("th",[t._v("數值")])])}],!1,null,"e5dbce3a",null);e.default=component.exports;installComponents(component,{SearchBar:n(464).default,TVChartContainer:n(465).default,RadarChart:n(456).default})},503:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(427),o=n(496),l=n(514),c=n(528),d=Math.log;function h(t,e,n){var h=o.a.prototype,f=h.getTicks.call(n),v=h.getTicks.call(n,!0),y=f.length-1,m=h.getInterval.call(n),_=Object(l.f)(t,e),x=_.extent,S=_.fixMin,k=_.fixMax;if("log"===t.type){var w=d(t.base);x=[d(x[0])/w,d(x[1])/w]}t.setExtent(x[0],x[1]),t.calcNiceExtent({splitNumber:y,fixMin:S,fixMax:k});var O=h.getExtent.call(t);S&&(x[0]=O[0]),k&&(x[1]=O[1]);var C=h.getInterval.call(t),I=x[0],M=x[1];if(S&&k)C=(M-I)/y;else if(S)for(M=x[0]+C*y;M<x[1]&&isFinite(M)&&isFinite(x[1]);)C=Object(c.c)(C),M=x[0]+C*y;else if(k)for(I=x[1]-C*y;I>x[0]&&isFinite(I)&&isFinite(x[0]);)C=Object(c.c)(C),I=x[1]-C*y;else{t.getTicks().length-1>y&&(C=Object(c.c)(C));var j=C*y;M=Math.ceil(x[1]/C)*C,(I=Object(r.s)(M-j))<0&&x[0]>=0?(I=0,M=Object(r.s)(j)):M>0&&x[1]<=0&&(M=0,I=-Object(r.s)(j))}var A=(f[0].value-v[0].value)/m,T=(f[y].value-v[y].value)/m;h.setExtent.call(t,I+C*A,M+C*T),h.setInterval.call(t,C),(A||T)&&h.setNiceExtent.call(t,I+C,M-C)}},504:function(t,e,n){"use strict";var r=n(423),o={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},l=r.I({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},o),c=r.I({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},o),d=r.I({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},c),h=r.i({logBase:10},c);e.a={category:l,value:c,time:d,log:h}},505:function(t,e,n){"use strict";n(474)},506:function(t,e,n){t.exports={}},507:function(t,e,n){t.exports={}},508:function(t,e,n){"use strict";n(476)},511:function(t,e,n){"use strict";n.d(e,"b",function(){return h}),n.d(e,"d",function(){return f}),n.d(e,"a",function(){return v}),n.d(e,"c",function(){return y});var r=n(423),o=n(459),l=n(518),c=r.k;function d(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function h(option,t,e){var n={};return c(t,function(t){var l,d=n[t]=((l=function(){}).prototype.__hidden=l.prototype,new l);c(option[t],function(n,l){if(o.a.isValidType(l)){var c={type:l,visual:n};e&&e(c,t),d[l]=new o.a(c),"opacity"===l&&((c=r.d(c)).type="colorAlpha",d.__hidden.__alphaForOpacity=new o.a(c))}})}),n}function f(t,e,n){var o;r.k(n,function(t){e.hasOwnProperty(t)&&d(e[t])&&(o=!0)}),o&&r.k(n,function(n){e.hasOwnProperty(n)&&d(e[n])?t[n]=r.d(e[n]):delete t[n]})}function v(t,e,data,n,c,d){var h,f={};function v(t){return Object(l.a)(data,h,t)}function y(t,e){Object(l.c)(data,h,t,e)}function m(t,r){h=null==d?t:r;var o=data.getRawDataItem(h);if(!o||!1!==o.visualMap)for(var l=n.call(c,t),m=e[l],_=f[l],i=0,x=_.length;i<x;i++){var S=_[i];m[S]&&m[S].applyVisual(t,v,y)}}r.k(t,function(t){var n=o.a.prepareVisualTypes(e[t]);f[t]=n}),null==d?data.each(m):data.each([d],m)}function y(t,e,n,c){var d={};return r.k(t,function(t){var n=o.a.prepareVisualTypes(e[t]);d[t]=n}),{progress:function(t,data){var r,o;function h(t){return Object(l.a)(data,o,t)}function f(t,e){Object(l.c)(data,o,t,e)}null!=c&&(r=data.getDimensionIndex(c));for(var v=data.getStore();null!=(o=t.next());){var y=data.getRawDataItem(o);if(!y||!1!==y.visualMap)for(var m=null!=c?v.get(r,o):o,_=n(m),x=e[_],S=d[_],i=0,k=S.length;i<k;i++){var w=S[i];x[w]&&x[w].applyVisual(m,h,f)}}}}}},512:function(t,e,n){"use strict";n.r(e);var r=n(12),o=(n(43),n(443),n(60),n(276),n(53),n(23),n(40),n(38),n(6)),l=n(462),c=n(595),d=n(1040),h=n(545),f=n(827),v=n(656),y=n(658);Object(l.a)([d.a,f.a,v.a,h.a,y.a]);var m=!1;function _(){return x.apply(this,arguments)}function x(){return(x=Object(r.a)(regeneratorRuntime.mark(function t(){var e,r,o,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!m){t.next=1;break}return t.abrupt("return");case 1:return t.next=2,Promise.all([n.e(16),n.e(113)]).then(n.bind(null,446));case 2:e=t.sent,r=e.MarkPointComponent,o=e.MarkLineComponent,c=e.VisualMapComponent,d=e.DataZoomComponent,Object(l.a)([r,o,c,d]),m=!0;case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}var S=Object(o.b)({name:"CumulativeReturnChart",props:{values:{type:Array,default:function(){return[[1,2,3,4]]}},index:{type:Array,default:function(){return["2020-01-01","2020-02-01","2020-03-01","2020-04-01"]}},benchmark:{type:Array,default:function(){return null}},height:{type:String,default:"300px"},valueName:{type:Array,default:function(){return[""]}},benchmarkName:{type:String,default:"大盤報酬"},fill:{type:Boolean,default:!0},secondaryBenchmark:{type:Boolean,default:!1},visualMap:{type:Object,default:function(){return null}},livePerformanceUpdate:{default:function(){return null}},maxSamples:{type:Number,default:100},dataZoom:{type:Object,default:function(){return null}},colors:{type:Array,default:function(){return["#37459c","#eb7e26","#14b363"]}}},data:function(){var t={animation:!1,type:"value",scale:!0,axisLabel:{formatter:"{value}%",inside:!0},show:!0,minorTick:{show:!1},minorSplitLine:{show:!1},axisTick:{show:!0,inside:!0},axisLine:{show:!1},splitLine:{show:!1},position:"right"},e=t;return this.secondaryBenchmark&&((e=[JSON.parse(JSON.stringify(t)),JSON.parse(JSON.stringify(t))])[0].position="right",e[0].axisLabel.formatter=null,e[0].axisLabel.inside=!0,e[1].position="left",e[1].axisLabel.inside=!0),{chartInstance:null,resizeObserver:null,chartOption:{visualMap:this.visualMap,dataZoom:this.dataZoom,legend:{bottom:80,left:5,orient:"vertical",show:!this.secondaryBenchmark},grid:{left:0,right:0,top:"12px",bottom:"20px"},xAxis:{type:"time",animation:!1,name:"日期",minorTick:{show:!1},minorSplitLine:{show:!1},axisLine:{lineStyle:{color:"#aaa"}},axisLabel:{inside:!0},inverval:1},yAxis:e,series:[],backgroundColor:"transparent"}}},watch:{index:{handler:"updateChart",deep:!0},values:{handler:"updateChart",deep:!0},benchmark:{handler:"updateChart",deep:!0}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.visualMap||t.dataZoom||t.livePerformanceUpdate)){e.next=1;break}return e.next=1,_();case 1:t.initChart(),t.updateChart(),window.addEventListener("resize",t.resizeChart),"undefined"!=typeof ResizeObserver&&(t.resizeObserver=new ResizeObserver(function(){t.resizeChart()}),t.resizeObserver.observe(t.$refs.chart));case 2:case"end":return e.stop()}},e)}))()},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChart),this.resizeObserver&&this.resizeObserver.disconnect(),this.chartInstance&&this.chartInstance.dispose()},methods:{initChart:function(){this.chartInstance=Object(c.b)(this.$refs.chart,"light")},resizeChart:function(){this.chartInstance&&this.chartInstance.resize()},makeSeriesData:function(t,e,i){var n=this.fill?[{offset:0,color:this.colors[i]+"99"},{offset:1,color:this.colors[i]+"00",alpha:1}]:[],r=this.secondaryBenchmark?null:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:n,global:!1}},o=null,l=null;if(this.livePerformanceUpdate){var c=this.livePerformanceUpdate;e[0][0]>c&&(c=e[0][0]),o={data:[{coord:[c,0],symbol:"circle",symbolSize:10,itemStyle:{color:"#55bd95"},value:"Live",label:{color:"#459979",offset:[-20,0]}}]},l={symbol:"circle",symbolSize:10,itemStyle:{color:"#55bd95"},data:[[{coord:[c,0]},{coord:[e.slice(-1)[0][0],0]}]],lineStyle:{type:"solid",cap:"round",width:3}}}return{name:t,data:e,markPoint:o,markLine:l,animation:!1,zlevel:100,type:"line",smooth:!1,areaStyle:r,itemStyle:{opacity:0},lineStyle:{color:this.secondaryBenchmark?null:this.colors[i]},silent:!0}},updateChart:function(){if(this.chartOption.series=[],this.values&&this.index&&Array.isArray(this.values)&&Array.isArray(this.index)){for(var i in this.values){var t=this.valueName[i],e=this.index,n=this.values[i];if(n&&Array.isArray(n)&&0!==n.length){var r=this.values[i][0],o=Math.max(Math.round(n.length/this.maxSamples),1),data=[];for(var l in e)(l=parseInt(l))%o!==0&&0!==l&&l!==e.length-1||(this.secondaryBenchmark?data.push([e[l],n[l]]):data.push([e[l],n[l]/r*100-100]));var c=this.makeSeriesData(t,data,i);this.chartOption.series.push(c)}}if(void 0!==this.benchmark&&null!==this.benchmark&&Array.isArray(this.benchmark)&&0!==this.benchmark.length){var d=Math.max(Math.round(this.index.length/this.maxSamples),1),h=[];for(var f in this.index)(f=parseInt(f))%d!==0&&f!==this.index.length-1&&0!==f||h.push([this.index[f],100*(this.benchmark[f]/this.benchmark[0]-1)]);this.chartOption.series.push({name:this.benchmarkName,data:h,animation:!1,smooth:!1,type:"line",itemStyle:{color:"#000",borderColor:"#000",opacity:0},lineStyle:{color:"#aaa"},yAxisIndex:this.secondaryBenchmark?1:0,silent:!0}),this.chartInstance&&this.chartInstance.setOption(this.chartOption,!0)}else this.chartInstance&&this.chartInstance.setOption(this.chartOption,!0)}}}}),k=(n(505),n(52)),component=Object(k.a)(S,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticStyle:{position:"relative"}},[e("div",{staticStyle:{"z-index":"1"}},[e("div",{ref:"chart",staticClass:"chart",style:{height:t.height,width:"100%",zIndex:0}})])])},[],!1,null,"710eede2",null);e.default=component.exports},513:function(t,e,n){"use strict";n.r(e);n(23),n(44);var r={props:{vip:{default:!1}},data:function(){return{fakeData:[["1258 其祥-KY",-.24226804123711343,.1,"2021-01-01"],["1336 台翰",-.015452538631346768,.1,"2021-01-01"],["1413 宏洲",-.08035714285714313,.1,"2021-01-01"],["1528 恩德",-.08727858293075608,.1,"2021-01-01"],["8916 光隆",.10973451327433681,.1,"2021-01-01"],["9962 有益",.00964630225080354,.1,"2021-01-01"]]}},methods:{stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()}}},o=(n(508),n(52)),component=Object(o.a)(r,function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"uk-inline uk-width-1-1",staticStyle:{"overflow-x":"hidden"}},[e("table",{staticClass:"uk-table uk-table-divider uk-width-1-1",staticStyle:{"white-space":"nowrap"}},[t._m(0),t._v(" "),e("tbody",t._l(t.fakeData,function(n){return e("tr",{key:n[0]},[e("td",{staticClass:"uk-text-primary"},[t._v(t._s(n[0]))]),t._v(" "),e("td",{style:"color:".concat(t.stockReturnColor(n[1]))},[t._v("\n            "+t._s(Math.round(100*t.sign(n[1]))/100)+"%\n          ")]),t._v(" "),e("td",{style:"color:".concat(t.stockReturnColor(n[2]))},[t._v("\n            "+t._s(100*n[2])+" %\n          ")]),t._v(" "),e("td",{staticClass:"uk-text-right"},[t._v(t._s(n[3]))])])}),0)]),t._v(" "),e("div",{staticClass:"blur uk-position-cover uk-overlay uk-overlay-default uk-flex uk-flex-center uk-flex-middle"},[e("nuxt-link",{attrs:{to:"/pricing"}},[t.vip?e("div",{staticClass:"uk-text-center vip uk-text-primary",attrs:{"uk-scrollspy":"cls: uk-animation-kenburns; repeat: true"}},[e("span",{attrs:{"uk-icon":"icon: lock; ratio: 3.5"}}),t._v(" "),e("h2",{staticClass:"uk-text-primary"},[t._v("FinLab VIP")]),t._v(" "),e("p",[t._v("\n            學程式、練投資一切搞定\n          ")])]):t._e()]),t._v(" "),t.vip?t._e():e("a",{attrs:{"uk-toggle":"target: #login-ui"}},[t._m(1)])],1)])])},[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("名稱")]),t._v(" "),e("th",[t._v("漲跌")]),t._v(" "),e("th",[t._v("權重")]),t._v(" "),e("th",{staticClass:"uk-text-right"},[t._v("清單新增")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"uk-text-center vip uk-text-primary",attrs:{"uk-scrollspy":"cls: uk-animation-kenburns; repeat: true"}},[e("span",{attrs:{"uk-icon":"icon: lock; ratio: 3.5"}}),t._v(" "),e("h2",{staticClass:"uk-text-primary"},[t._v("FinLab")]),t._v(" "),e("p",[t._v("\n            登入查看符合條件的清單\n          ")])])}],!1,null,"96fe9148",null);e.default=component.exports},516:function(t,e,n){"use strict";n.r(e);n(23),n(38);var r=n(6),o=n(462),l=n(595),c=n(668),d=n(545),h=n(827),f=n(656),v=n(658);Object(o.a)([c.a,h.a,f.a,d.a,v.a]);var y=Object(r.b)({name:"Maxdrawdown",props:{values:{type:Array,default:function(){return[1,2,3,4]}},benchmark:{type:Array,default:function(){return[1,2,3,4]}},index:{type:Array,default:function(){return["2020-01-01","2020-02-01","2020-03-01","2020-04-01"]}},height:{type:String,default:"250px"},width:{type:String,default:"100%"}},data:function(){return{chartInstance:null,chartOption:{legend:{bottom:50,left:-5,orient:"vertical"},tooltip:{trigger:"axis",position:function(t){return[t[0]-100,t[1]-100]},axisPointer:{type:"line",snap:!0,axis:"x"},formatter:function(t){for(var e,n=t[0].value[0]+"<br/>",i=0,r=t.length;i<r;i++)e=Math.round(100*t[i].value[1])/100+"%",n+=t[i].marker+t[i].seriesName+"："+e+"<br/>";return n}},grid:{left:0,right:0,top:"12px",bottom:"10px"},xAxis:{type:"time",name:"日期",minorTick:{show:!1},minorSplitLine:{show:!1},axisLabel:{inside:!0},inverval:1},yAxis:{type:"value",name:"下跌幅度",axisLabel:{formatter:"{value}%",inside:!0,position:"right"},show:!0,minorTick:{show:!1},minorSplitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},lineStyle:{width:0},position:"right"},series:[{name:"策略",data:[],type:"line",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(232, 56, 115, 0)"},{offset:1,color:"rgba(232, 56, 115, 1)",alpha:1}],global:!1}},itemStyle:{color:"rgba(232, 56, 115, 0.5)",borderColor:"rgba(232, 56, 115, 0.5)",opacity:0},lineStyle:{color:"rgba(232, 56, 115, 0.5)"}},{name:"大盤",data:[],type:"line",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(209, 204, 204, 0)"},{offset:1,color:"#aaa",alpha:1}],global:!1}},itemStyle:{color:"#aaa",borderColor:"#aaa",opacity:0},lineStyle:{color:"#aaa"}}],backgroundColor:"transparent"}}},watch:{values:{handler:"updateChart",deep:!0},benchmark:{handler:"updateChart",deep:!0},index:{handler:"updateChart",deep:!0}},mounted:function(){var t=this;this.initChart(),this.updateChart(),window.addEventListener("resize",this.resizeChart),"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(function(){t.resizeChart()}),this.resizeObserver.observe(this.$refs.chart))},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChart),this.resizeObserver&&this.resizeObserver.disconnect(),this.chartInstance&&this.chartInstance.dispose()},methods:{initChart:function(){this.chartInstance=Object(l.b)(this.$refs.chart,"light")},resizeChart:function(){this.chartInstance&&this.chartInstance.resize()},calDD:function(t){if(!(t&&Array.isArray(t)&&0!==t.length&&this.index&&Array.isArray(this.index)&&0!==this.index.length))return[];var e=[],n=0;for(var i in t)n=Math.max(t[i],n),e.push(t[i]/n);var r=[];for(var o in this.index)r.push([this.index[o],100*e[o]-100]);return r},updateChart:function(){this.values&&Array.isArray(this.values)&&this.values.length>0&&this.index&&Array.isArray(this.index)&&this.index.length>0&&(this.chartOption.series[0].data=this.calDD(this.values)),this.benchmark&&Array.isArray(this.benchmark)&&this.benchmark.length>0&&this.index&&Array.isArray(this.index)&&this.index.length>0&&(this.chartOption.series[1].data=this.calDD(this.benchmark)),this.chartInstance&&this.chartInstance.setOption(this.chartOption)}}}),m=(n(537),n(52)),component=Object(m.a)(y,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("div",{ref:"chart",staticClass:"chart",style:{height:t.height,width:t.width,zIndex:0}})])},[],!1,null,"5b5fc17b",null);e.default=component.exports},519:function(t,e,n){"use strict";var r=n(424),o=n(423),l=n(520),c=n(459),d=n(511),h=n(426),f=n(427),v=n(437),y=c.a.mapVisual,m=c.a.eachVisual,_=o.t,x=o.k,S=f.c,k=f.j,w=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return Object(r.a)(e,t),e.prototype.init=function(option,t,e){this.mergeDefaultAndTheme(option,e)},e.prototype.optionUpdated=function(t,e){var n=this.option;!e&&d.d(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var e=this.stateList;t=o.c(t,this),this.controllerVisuals=d.b(this.option.controller,e,t),this.targetVisuals=d.b(this.option.target,e,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,n){e.push(n)}):e=h.q(t),e},e.prototype.eachTargetSeries=function(t,e){o.k(this.getTargetSeriesIndices(),function(n){var r=this.ecModel.getSeriesByIndex(n);r&&t.call(e,r)},this)},e.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries(function(n){n===t&&(e=!0)}),e},e.prototype.formatValueText=function(t,e,n){var r,option=this.option,l=option.precision,c=this.dataBound,d=option.formatter;n=n||["<",">"],o.t(t)&&(t=t.slice(),r=!0);var h=e?t:r?[f(t[0]),f(t[1])]:f(t);return o.C(d)?d.replace("{value}",r?h[0]:h).replace("{value2}",r?h[1]:h):o.w(d)?r?d(t[0],t[1]):d(t):r?t[0]===c[0]?n[0]+" "+h[1]:t[1]===c[1]?n[1]+" "+h[0]:h[0]+" - "+h[1]:h;function f(t){return t===c[0]?"min":t===c[1]?"max":(+t).toFixed(Math.min(l,20))}},e.prototype.resetExtent=function(){var t=this.option,e=S([t.min,t.max]);this._dataExtent=e},e.prototype.getDataDimensionIndex=function(data){var t=this.option.dimension;if(null!=t)return data.getDimensionIndex(t);for(var e=data.dimensions,i=e.length-1;i>=0;i--){var n=e[i],r=data.getDimensionInfo(n);if(!r.isCalculationCoord)return r.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,base={inRange:e.inRange,outOfRange:e.outOfRange},n=e.target||(e.target={}),r=e.controller||(e.controller={});o.I(n,base),o.I(r,base);var d=this.isCategory();function h(base){_(e.color)&&!base.inRange&&(base.inRange={color:e.color.slice().reverse()}),base.inRange=base.inRange||{color:t.get("gradientColor")}}h.call(this,n),h.call(this,r),function(base,t,e){var n=base[t],r=base[e];n&&!r&&(r=base[e]={},x(n,function(t,e){if(c.a.isValidType(e)){var n=l.a.get(e,"inactive",d);null!=n&&(r[e]=n,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}}))}.call(this,n,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,r=this.get("inactiveColor"),l=this.getItemSymbol()||"roundRect";x(this.stateList,function(c){var h=this.itemSize,f=t[c];f||(f=t[c]={color:d?r:[r]}),null==f.symbol&&(f.symbol=e&&o.d(e)||(d?l:[l])),null==f.symbolSize&&(f.symbolSize=n&&o.d(n)||(d?h[0]:[h[0],h[0]])),f.symbol=y(f.symbol,function(symbol){return"none"===symbol?l:symbol});var v=f.symbolSize;if(null!=v){var _=-1/0;m(v,function(t){t>_&&(_=t)}),f.symbolSize=y(v,function(t){return k(t,[0,_],[0,h[0]],!0)})}},this)}.call(this,r)},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(v.a);e.a=w},520:function(t,e,n){"use strict";var r=n(423),o={get:function(t,e,n){var o=r.d((l[t]||{})[e]);return n&&r.t(o)?o[o.length-1]:o}},l={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};e.a=o},521:function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return d});var r=n(423),o=n(433),l=[["left","right","width"],["top","bottom","height"]];function c(t,e,n){var r=t.option,c=r.align;if(null!=c&&"auto"!==c)return c;for(var d={width:e.getWidth(),height:e.getHeight()},h="horizontal"===r.orient?1:0,f=l[h],v=[0,null,10],y={},i=0;i<3;i++)y[l[1-h][i]]=v[i],y[f[i]]=2===i?n[0]:r[f[i]];var m=[["x","width",3],["y","height",0]][h],rect=Object(o.g)(y,d,r.padding);return f[(rect.margin[m[2]]||0)+rect[m[0]]+.5*rect[m[1]]<.5*d[m[1]]?0:1]}function d(t,e){return r.k(t||[],function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}},522:function(t,e,n){"use strict";function r(t,e,n,r,c,d){t=t||0;var h=n[1]-n[0];if(null!=c&&(c=l(c,[0,h])),null!=d&&(d=Math.max(d,null!=c?c:0)),"all"===r){var f=Math.abs(e[1]-e[0]);f=l(f,[0,h]),c=d=l(f,[c,d]),r=0}e[0]=l(e[0],n),e[1]=l(e[1],n);var v=o(e,r);e[r]+=t;var y,m=c||0,_=n.slice();return v.sign<0?_[0]+=m:_[1]-=m,e[r]=l(e[r],_),y=o(e,r),null!=c&&(y.sign!==v.sign||y.span<c)&&(e[1-r]=e[r]+v.sign*c),y=o(e,r),null!=d&&y.span>d&&(e[1-r]=e[r]+y.sign*d),e}function o(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function l(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}n.d(e,"a",function(){return r})},523:function(t,e,n){"use strict";var r=n(424),o=n(423),l=n(647),c=n(463),d=n(433),h=n(459),f=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return Object(r.a)(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,n,r){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,e,n,r):this.group.removeAll()},e.prototype.renderBackground=function(t){var e=this.visualMapModel,n=c.g(e.get("padding")||0),rect=t.getBoundingRect();t.add(new l.a({z2:-1,silent:!0,shape:{x:rect.x-n[3],y:rect.y-n[0],width:rect.width+n[3]+n[1],height:rect.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,n){var r=(n=n||{}).forceState,l=this.visualMapModel,c={};if("color"===e){var d=l.get("contentColor");c.color=d}function f(t){return c[t]}function v(t,e){c[t]=e}var y=l.controllerVisuals[r||l.getValueState(t)],m=h.a.prepareVisualTypes(y);return o.k(m,function(r){var o=y[r];n.convertOpacityToAlpha&&"opacity"===r&&(r="colorAlpha",o=y.__alphaForOpacity),h.a.dependsOn(r,e)&&o&&o.applyVisual(t,f,v)}),c[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,n=this.api;d.i(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,e,n,r){},e.type="visualMap",e}(n(439).a);e.a=f},524:function(t,e,n){t.exports={}},525:function(t,e,n){t.exports={}},526:function(t,e,n){"use strict";n.d(e,"a",function(){return S});var r={type:"selectDataRange",event:"dataRangeSelected",update:"update"},o=function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})},l=n(423),c=n(511),d=n(459),h=n(518),f=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(e){var r=t.pipelineContext;!e.isTargetSeries(t)||r&&r.large||n.push(c.c(e.stateList,e.targetVisuals,l.c(e.getValueState,e),e.getDataDimensionIndex(t.getData())))}),n}},{createOnAllSeries:!0,reset:function(t,e){var data=t.getData(),n=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var r=e.getVisualMeta(l.c(v,null,t,e))||{stops:[],outerColors:[]},o=e.getDataDimensionIndex(data);o>=0&&(r.dimension=o,n.push(r))}}),t.getData().setVisual("visualMeta",n)}}];function v(t,e,n,r){for(var o=e.targetVisuals[r],l=d.a.prepareVisualTypes(o),c={color:Object(h.b)(t.getData(),"color")},i=0,f=l.length;i<f;i++){var v=l[i],y=o["opacity"===v?"__alphaForOpacity":v];y&&y.applyVisual(n,m,_)}return c.color;function m(t){return c[t]}function _(t,e){c[t]=e}}var y=l.k;function m(option){var t=option&&option.visualMap;l.t(t)||(t=t?[t]:[]),y(t,function(t){if(t){_(t,"splitList")&&!_(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&l.t(e)&&y(e,function(t){l.A(t)&&(_(t,"start")&&!_(t,"min")&&(t.min=t.start),_(t,"end")&&!_(t,"max")&&(t.max=t.end))})}})}function _(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var x=!1;function S(t){x||(x=!0,t.registerSubTypeDefaulter("visualMap",function(option){return option.categories||(option.pieces?option.pieces.length>0:option.splitNumber>0)&&!option.calculable?"piecewise":"continuous"}),t.registerAction(r,o),Object(l.k)(f,function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)}),t.registerPreprocessor(m))}},531:function(t,e,n){"use strict";n.r(e);n(65),n(86);var r=n(21),o=n(12),l=(n(74),n(429),n(23),n(30),n(44),n(194),n(64),n(38),n(43),n(6)),c=n(26),d=n(122),h=n.n(d),f=Object(l.b)({components:{},props:{uid:{default:null,type:String},strategy_id:{default:null,type:String},position_id:{default:null,type:String},positionPredefined:{default:null,type:Object}},data:function(){var t=this;return window.goto=function(link){t.$router.push(link)},{showInfo:!1,position:null,mounted:!1,tableMode:"present",displayTableMode:["當前統計","近期更動清單"],sortTableCol:"股票",sortAscending:!0,table:[],weights:{},userCap:20,colabLink:null,buildingColab:!1,next_trading_date:null,update_date:null,last_updated:null,trade_at:null,stop_loss:-1/0,take_profit:1/0,displayStockId:"",failed:!1,freq:"1d"}},mounted:function(){this.init(),this.mounted=!0},methods:{openStockPanel:function(s){this.displayStockId=s.split(" ")[0],window.scrollTo(document.getElementById("stock-id-".concat(s)).top)},showStock:function(s){this.displayStockId=s,h.a.modal("#modal-stock").show()},setSortColumn:function(col){this.sortTableCol===col?this.sortAscending=!this.sortAscending:this.sortAscending=!1,this.sortTableCol=col},init:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,o,l,d,table,p,h,f,v,y,m,_,x,S,k,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.strategy_id&&t.position_id||t.positionPredefined){e.next=1;break}return e.abrupt("return");case 1:if(n=null,!t.positionPredefined){e.next=2;break}n=t.positionPredefined,e.next=5;break;case 2:return e.prev=2,e.next=3,c.c.collection("users").doc(t.uid).collection("strategies").doc(t.strategy_id).collection("positions").doc(t.position_id).get();case 3:o=e.sent,l=o.data(),n="position"in l?l.position:l,console.log(n),e.next=5;break;case 4:return e.prev=4,S=e.catch(2),console.log("PositionPanel: cannot read position "+S),t.failed=!0,e.abrupt("return");case 5:d=n,t.next_trading_date=d.next_trading_date,t.update_date=d.update_date,t.trade_at=d.trade_at,t.last_updated=d.last_updated.toDate(),t.position=d,table=[],t.weights={},k=regeneratorRuntime.keys(d);case 6:if((w=k()).done){e.next=9;break}if(p=w.value,h=d[p],"object"===Object(r.a)(h)){e.next=7;break}return"freq"==p?t.freq=h:"stop_loss"===p?t.stop_loss=h:"take_profit"===p&&(t.take_profit=h),e.abrupt("continue",6);case 7:if("NaT"===h.exit_date&&(h.exit_date=""),h.exit_date,"weight"in h||"return"in h){e.next=8;break}return e.abrupt("continue",6);case 8:f={close:"收盤",open:"開盤","open|close":"盤中"},v=t.trade_at in f?f[t.trade_at]:t.trade_at,console.log(v,t.trade_at),y={hold:"持有",exit:"移除",enter:"新增",sl:"".concat(v,"停損"),tp:"".concat(v,"停利"),sl_:"已停損",tp_:"已停利","買進":"新增","賣出":"移除","停損停利":h.return>0?"".concat(v,"停利"):"".concat(v,"停損")},m=h.status in y?y[h.status]:h.status,_=0,"next_weight"in h&&(_=h.next_weight),"string"==typeof h.exit_date&-1!=h.exit_date.indexOf("T")&&(h.exit_date=h.exit_date.split("T")[0]),"string"==typeof h.entry_date&-1!=h.entry_date.indexOf("T")&&(h.entry_date=h.entry_date.split("T")[0]),x={stock:p,action:m,profit:Math.round(1e3*h.return)/10,weight:Math.round(1e3*h.weight)/10,nextWeight:Math.round(1e3*_)/10,entry_sig_date:h.entry_date,exit_sig_date:h.exit_date,entry_price:h.entry_price},table.push(x),"買進"==h.status||"entry"==h.status?t.update_date=h.entry_date:"賣出"!=h.status&&"exit"!=h.status||(t.update_date=h.exit_date),"weight"in h&&(t.weights[p]=h.weight),e.next=6;break;case 9:t.table=table;case 10:case"end":return e.stop()}},e,null,[[2,4]])}))()},stockStatusColor:function(t){var output={"新增":"gray","持有":"lightgray","移除":"gray","停損停利":"#252786"};return t in output?output[t]:"gray"},stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()},formatDate:function(t){if(null===t)return"";var e=new Date,n=t.toLocaleString("en-us").replace(/(\d+)\/(\d+)\/(\d+)/,"$3-$1-$2").replace(/(\d+):(\d+):(\d+)/,"$1:$2").split(", ");return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?n[1]:n[0]},generate_colab_script:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,r,o,l,c,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t.buildingColab=!0,n="",t.weights)o=r.match(/\d+/)[0],n+='  "'.concat(o,'" : ').concat(t.weights[r],",\n");return l=["!pip install finlab -q","from finlab.online.order_executor import OrderExecutor\n\noe = OrderExecutor.from_weights({\n\n".concat(n,"\n}, ").concat(1e4*t.userCap,")"),"# 查看欲執行的委託單：\noe._calculate_new_orders()","# 市價下單（所有委託單）\noe.create_orders()","# 更新委託單價格到市價（所有未成交委託單）\noe.create_orders()","# 刪單（所有委託單）\noe.cancel_orders()"],c=null,e.prev=1,d={sid:t.$props.strategy_id,uid:t.$props.uid,code:JSON.stringify(l)},e.next=2,t.$axios.post("https://asia-northeast1-fdata-299302.cloudfunctions.net/generate_colab_strategy",d);case 2:c=e.sent,e.next=4;break;case 3:return e.prev=3,h=e.catch(1),alert("upload colab fail: "+h.data+" "+h),console.log(h),e.abrupt("return");case 4:t.colabLink=c.data;case 5:case"end":return e.stop()}},e,null,[[1,3]])}))()}},computed:{filteredCols:function(){return this.$store.state.user&&this.$route.query.uid===this.$store.state.user.uid?"present"===this.tableMode?["名稱","漲跌","權重","進場價格","清單新增"]:["名稱","新增移除","漲跌","權重更新","清單新增","清單移除"]:"present"===this.tableMode?["名稱","漲跌","權重","清單新增"]:["名稱","新增移除","漲跌","權重更新","清單新增","清單移除"]},realNextTradingDate:function(){if(0===this.table.length)return"";var t="1977-01-01";for(var e in this.table){var n=Object.assign({},this.table[e]);n.entry_sig_date>t&&(t=n.entry_sig_date),n.exit_sig_date>t&&(t=n.exit_sig_date)}return t},rows:function(){var t=this;if(0===this.table.length)return[];var e=[];for(var n in this.table)if("present"!==this.tableMode||0!=this.table[n].weight){var r=Object.assign({},this.table[n]);e.push(r)}return e.sort(function(a,b){var e={"名稱":"stock","漲跌":"profit","新增移除":"action","權重":"weight","權重更新":"nextWeight","進場價格":"entry_price","清單新增":"entry_sig_date","清單移除":"exit_sig_date"}[t.sortTableCol];return a[e]<b[e]^t.sortAscending?1:-1}),e},unrealizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,r=this.table[e].profit*(n/100);isNaN(r)||(t+=r,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},realizedReturn:function(){var t=0;for(var e in this.table){var n=this.table[e].weight,r=this.table[e].profit*(n/100);isNaN(r)||"移除"!==this.table[e].action||(t+=r,n)}return t=Math.round(10*t)/10,isNaN(t)?0:t},hasPermission:function(){var t=this.$store.state.strategy.info.public_position,e=null!==this.$store.state.user;return this.userPermission>=t||e&&this.$store.state.user.uid===this.$props.uid},userPermission:function(){return""===this.$store.state.role?0:"free"===this.$store.state.role?1:this.$store.state.role.includes("vip")?2:void 0}},watch:{userPermission:function(){this.init()}}}),v=(n(538),n(52)),component=Object(v.a)(f,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticStyle:{"padding-bottom":"24px"}},[null===t.$store.state.user?e("div",[e("FakePosition",{attrs:{vip:!1}})],1):t._e(),t._v(" "),null!==t.$store.state.user?e("div",[e("div",{staticClass:"uk-width-1-1"},[e("ul",{staticClass:"uk-flex uk-subnav uk-subnav-divider",attrs:{"uk-margin":""}},[e("li",{staticClass:"{ 'uk-active': tableMode === 'present' }"},[e("a",{on:{click:function(e){t.tableMode="present"}}},[e("div",{staticClass:"uk-text-primary uk-padding-small",staticStyle:{border:"1px solid","border-radius":"12px"},style:{background:"present"===t.tableMode?"#f0f0fa":"white","border-color":"present"===t.tableMode?"blue":"#aaa"}},[t._v("\n              "+t._s(t.displayTableMode[0])+" "),e("br"),t._v(" "),e("span",{staticClass:"uk-text-lead uk-text-bold",style:{color:t.stockReturnColor(t.unrealizedReturn)}},[t._v("\n                "+t._s(t.sign(t.unrealizedReturn))+" %\n              ")])])])]),t._v(" "),e("li",{class:{"uk-active":"future"===t.tableMode}},[e("a",{on:{click:function(e){t.tableMode="future"}}},[e("div",{staticClass:"uk-text-primary uk-padding-small",staticStyle:{border:"1px solid","border-radius":"12px"},style:{background:"future"===t.tableMode?"#f0f0fa":"white","border-color":"future"===t.tableMode?"blue":"#aaa"}},[t._v("\n              "+t._s(t.displayTableMode[1])+" "),e("br"),t._v(" "),e("span",{staticClass:"uk-text-lead uk-text-bold",staticStyle:{color:"#777"}},[t._v(t._s(t.realNextTradingDate))])])])])]),t._v(" "),"future"==t.tableMode?e("div",{staticClass:"uk-text-small uk-card uk-padding-small uk-margin-large-top uk-margin-large-bottom shadow"},[e("p",[t._v("此策略的模擬交易的細節")]),t._v(" "),e("ul",{staticClass:"uk-list"},[e("li",[t._v("於 "+t._s("1d"===t.freq?t.next_trading_date.split("T")[0]:t.next_trading_date)+" 之後的下個交易日\n            接近\n            "+t._s("close"===t.trade_at?"收盤":"開盤")+" 時調整部位\n          ")]),t._v(" "),t.stop_loss!=-1/0||t.take_profit!=1/0?e("li",[t._v("\n\n            "+t._s(t.stop_loss!=-1/0?"停損為".concat(100*t.stop_loss,"%，"):"")+"\n            "+t._s(t.take_profit!=1/0?"停利為".concat(100*t.take_profit,"%，"):"")+"\n            每日盤後檢查，如觸發則於下個交易日的\n            "+t._s("close"===t.trade_at?"收盤":"開盤")+"\n            出場\n          ")]):t._e()])]):t._e(),t._v(" "),t.mounted?e("div",{staticClass:"uk-overflow-auto"},[0!==t.rows.length?e("table",{staticClass:"uk-table uk-table-divider",staticStyle:{"white-space":"nowrap"}},[e("thead",[e("tr",{staticClass:"uk-text-right"},t._l(t.filteredCols,function(n,r){return e("th",{key:"table-col-".concat(n),staticStyle:{"padding-left":"0"},style:0===r?"text-align:left!important":"text-align:right!important",on:{click:function(e){return t.setSortColumn(n)}}},[t._v("\n                "+t._s(n)+"\n                "),t.sortTableCol===n?e("span",[t._v(t._s(t.sortAscending?"▲":"▼"))]):t._e()])}),0)]),t._v(" "),e("tbody",{staticClass:"uk-text-right"},t._l(t.rows,function(n){return e("tr",{key:"table-row-".concat(n.stock)},[t.filteredCols.includes("名稱")?e("td",{staticClass:"uk-text-left",staticStyle:{"padding-left":"0"}},[e("div",{staticClass:"uk-text-primary",staticStyle:{cursor:"pointer"},attrs:{id:"stock-id-".concat(n.stock)},on:{click:function(e){return t.openStockPanel(n.stock)}}},[t._v("\n                  "+t._s(n.stock)+"\n                  "),"持有"!==n.action&&"移除"!==n.action&&"新增"!==n.action?e("span",{staticClass:"round-border uk-background-primary",staticStyle:{"font-size":"0.9rem",color:"white",padding:"0 10px"}},[t._v(t._s(n.action))]):t._e()])]):t._e(),t._v(" "),t.filteredCols.includes("新增移除")?e("td",{style:"color:".concat(t.stockStatusColor(n.action))},[t._v("\n                "+t._s(n.action)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("漲跌")?e("td",{style:"color:".concat(t.stockReturnColor(n.profit))},[t._v("\n                "+t._s(t.sign(n.profit))+"%\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("權重")?e("td",{style:"color:".concat(t.stockReturnColor(n.weight))},[t._v("\n                "+t._s(n.weight)+" %\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("權重更新")?e("td",{style:"color:".concat(t.stockReturnColor(n.nextWeight))},[t._v("\n                "+t._s(n.nextWeight)+" %\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("進場價格")?e("td",[t._v("\n                "+t._s(n.entry_price)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("清單新增")?e("td",[t._v("\n                "+t._s(n.entry_sig_date)+"\n              ")]):t._e(),t._v(" "),t.filteredCols.includes("清單移除")?e("td",[t._v("\n                "+t._s(n.exit_sig_date)+"\n              ")]):t._e()])}),0)]):e("div",[t.failed?e("FakePosition",{attrs:{vip:!0}}):e("span",[t._v("目前策略無持股喔！")])],1)]):t._e(),t._v(" "),e("div",{staticClass:"uk-margin-large-top uk-margin-large-bottom"},[e("p",[t._v("\n          不知道怎麼使用？"),e("br"),t._v("趕快來看\n          "),e("nuxt-link",{attrs:{to:"/course?cid=LqYTLW3KkXRSPnci47xe"}},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v("平台速成教學")])]),t._v("\n          ！\n        ")],1)])])]):t._e(),t._v(" "),t.displayStockId?e("div",{staticClass:"stock-panel shadow"},[e("a",{staticClass:"uk-icon-button shadow",staticStyle:{border:"1px solid #ccc",top:"3px",right:"6px",position:"absolute","z-index":"100"},attrs:{"uk-icon":"close"},on:{click:function(e){t.displayStockId=""}}}),t._v(" "),e("div",{staticStyle:{height:"100%"}},[e("StockPanel",{attrs:{stock_id:t.displayStockId,displaySearchBar:!1}})],1)]):t._e()])},[],!1,null,"2fdfffc8",null);e.default=component.exports;installComponents(component,{FakePosition:n(513).default,StockPanel:n(498).default})},537:function(t,e,n){"use strict";n(506)},538:function(t,e,n){"use strict";n(507)},540:function(t,e,n){"use strict";n.r(e);var r=n(21),o=(n(74),n(429),n(53),n(23),n(6)),l=n(516),c=Object(o.b)({components:{Maxdrawdown:l.default},props:{returns:{default:function(){return{value:[],time:[]}}},benchmark:[],drawdown_details:{default:function(){return{}}},dailyMean:{default:0},max_drawdown:{default:0}},data:function(){return{investCapital:20,investPercentage:80}},computed:{sortedDrawdownDetail:function(){var t=this;return this.drawdown_details&&"object"===Object(r.a)(this.drawdown_details)?Object.keys(this.drawdown_details).sort().reduce(function(e,n){return e[n]=t.drawdown_details[n],e},{}):{}},simulated_maxdrawdown:function(){var t=parseInt(this.investPercentage)*parseInt(this.investCapital)*this.max_drawdown;return Math.round(t/10)/10},simulated_stock_investment:function(){return Math.round(parseInt(this.investCapital)*parseInt(this.investPercentage)/10)/10},simulated_annual_return:function(){return Math.round(parseInt(this.investPercentage)*parseInt(this.investCapital)*this.dailyMean/10)/10}},methods:{drawdownColor:function(t){var e=255-Math.min(255,t/10),n=Math.min(255,e-5);return"background: rgba(".concat(e,", ").concat(n,", 255, 0.5)")}}}),d=(n(552),n(52)),component=Object(d.a)(c,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("h5",{staticClass:"uk-margin-large-top uk-text-primary"},[t._v("下跌幅度")]),t._v(" "),t.returns&&t.returns.value&&t.returns.time?e("Maxdrawdown",{attrs:{values:t.returns.value,benchmark:t.benchmark,index:t.returns.time}}):t._e(),t._v(" "),e("h5",{staticClass:"uk-margin-large-top uk-text-primary"},[t._v("歷史最大下跌風險")]),t._v(" "),e("table",{staticClass:"uk-table uk-table-small uk-table-divider"},[t._m(0),t._v(" "),e("tbody",t._l(t.sortedDrawdownDetail,function(n,r){return e("tr",{key:r,style:t.drawdownColor(n.Length)},[e("td",[t._v(t._s(r))]),t._v(" "),e("td",[t._v(t._s(Math.round(1e3*n.drawdown)/10)+"%")]),t._v(" "),e("td",[t._v(t._s(n.Length)+" 天")])])}),0)])],1)},[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("tr",[e("th",[t._v("起始時間")]),t._v(" "),e("th",[t._v("虧損程度")]),t._v(" "),e("th",[t._v("時間長度")])])])}],!1,null,"2e0646e6",null);e.default=component.exports;installComponents(component,{Maxdrawdown:n(516).default})},541:function(t,e,n){"use strict";n.d(e,"a",function(){return W});var r=n(424),o=n(423),l=n(519),c=n(427),component=n(483),d=[20,140],h=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=d[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=d[1])},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):o.t(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),o.k(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=c.c((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries(function(n){var r=[],data=n.getData();data.each(this.getDataDimensionIndex(data),function(e,n){t[0]<=e&&e<=t[1]&&r.push(n)},this),e.push({seriesId:n.id,dataIndex:r})},this),e},e.prototype.getVisualMeta=function(t){var e=f(this,"outOfRange",this.getExtent()),n=f(this,"inRange",this.option.range.slice()),r=[];function o(e,n){r.push({value:e,color:t(e,n)})}for(var l=0,c=0,d=n.length,h=e.length;c<h&&(!n.length||e[c]<=n[0]);c++)e[c]<n[l]&&o(e[c],"outOfRange");for(var v=1;l<d;l++,v=0)v&&r.length&&o(n[l],"outOfRange"),o(n[l],"inRange");for(v=1;c<h;c++)(!n.length||n[n.length-1]<e[c])&&(v&&(r.length&&o(r[r.length-1].value,"outOfRange"),v=0),o(e[c],"outOfRange"));var y=r.length;return{stops:r,outerColors:[y?r[0].color:"transparent",y?r[y-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Object(component.d)(l.a.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(l.a);function f(t,e,n){if(n[0]===n[1])return n.slice();for(var r=(n[1]-n[0])/200,o=n[0],l=[],i=0;i<=200&&o<n[1];i++)l.push(o),o+=r;return l.push(n[1]),l}var v=h,y=n(560),m=n(517),_=n(523),x=n(535),S=n(573),k=n(647),w=n(425),O=n(680),C=n(522),I=n(521),M=n(426),j=n(481),A=n(430),symbol=n(431),T=n(438),L=n(432),D=n(428),P=n(559),z=c.j,N=o.k,R=Math.min,V=Math.max,E=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return Object(r.a)(e,t),e.prototype.init=function(e,n){t.prototype.init.call(this,e,n),this._hoverLinkFromSeriesMouseOver=o.c(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=o.c(this._hideIndicator,this)},e.prototype.doRender=function(t,e,n,r){r&&"selectDataRange"===r.type&&r.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,n){if(e){var text=e[1-n];text=null!=text?text+"":"";var r=this.visualMapModel,o=r.get("textGap"),l=r.itemSize,c=this._shapes.mainGroup,d=this._applyTransform([l[0]/2,0===n?-o:l[1]+o],c),h=this._applyTransform(0===n?"bottom":"top",c),f=this._orient,v=this.visualMapModel.textStyleModel;this.group.add(new x.a({style:Object(D.b)(v,{x:d[0],y:d[1],verticalAlign:"horizontal"===f?"middle":h,align:"horizontal"===f?h:"center",text:text})}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,n=this._shapes,r=e.itemSize,l=this._orient,c=this._useHandle,d=I.a(e,this.api,r),h=n.mainGroup=this._createBarGroup(d),f=new S.a;h.add(f),f.add(n.outOfRange=H()),f.add(n.inRange=H(null,c?B(this._orient):null,o.c(this._dragHandle,this,"all",!1),o.c(this._dragHandle,this,"all",!0))),f.setClipPath(new k.a({shape:{x:0,y:0,width:r[0],height:r[1],r:3}}));var v=e.textStyleModel.getTextRect("国"),y=V(v.width,v.height);c&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(e,h,0,r,y,l),this._createHandle(e,h,1,r,y,l)),this._createIndicator(e,h,r,y,l),t.add(h)},e.prototype._createHandle=function(t,e,n,r,l,c){var d=o.c(this._dragHandle,this,n,!1),h=o.c(this._dragHandle,this,n,!0),f=Object(j.g)(t.get("handleSize"),r[0]),v=Object(symbol.a)(t.get("handleIcon"),-f/2,-f/2,f,f,null,!0),cursor=B(this._orient);v.attr({cursor:cursor,draggable:!0,drift:d,ondragend:h,onmousemove:function(t){m.g(t.event)}}),v.x=r[0]/2,v.useStyle(t.getModel("handleStyle").getItemStyle()),v.setStyle({strokeNoScale:!0,strokeFirst:!0}),v.style.lineWidth*=2,v.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(A.F)(v,!0),e.add(v);var y=this.visualMapModel.textStyleModel,_=new x.a({cursor:cursor,draggable:!0,drift:d,onmousemove:function(t){m.g(t.event)},ondragend:h,style:Object(D.b)(y,{x:0,y:0,text:""})});_.ensureState("blur").style={opacity:.1},_.stateTransition={duration:200},this.group.add(_);var S=[f,0],k=this._shapes;k.handleThumbs[n]=v,k.handleLabelPoints[n]=S,k.handleLabels[n]=_},e.prototype._createIndicator=function(t,e,n,r,l){var c=Object(j.g)(t.get("indicatorSize"),n[0]),d=Object(symbol.a)(t.get("indicatorIcon"),-c/2,-c/2,c,c,null,!0);d.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var h=t.getModel("indicatorStyle").getItemStyle();if(d instanceof T.a){var f=d.style;d.useStyle(o.m({image:f.image,x:f.x,y:f.y,width:f.width,height:f.height},h))}else d.useStyle(h);e.add(d);var v=this.visualMapModel.textStyleModel,y=new x.a({silent:!0,invisible:!0,style:Object(D.b)(v,{x:0,y:0,text:""})});this.group.add(y);var m=[("horizontal"===l?r/2:6)+n[0]/2,0],_=this._shapes;_.indicator=d,_.indicatorLabel=y,_.indicatorLabelPoint=m,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,n,r){if(this._useHandle){if(this._dragging=!e,!e){var o=this._applyTransform([n,r],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():G(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),r=[0,t.itemSize[1]];this._handleEnds=[z(e[0],n,r,!0),z(e[1],n,r,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var n=this.visualMapModel,r=this._handleEnds,o=[0,n.itemSize[1]];Object(C.a)(e,r,o,t,0);var l=n.getExtent();this._dataInterval=[z(r[0],o,l,!0),z(r[1],o,l,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,n=e.getExtent(),r=this._shapes,o=[0,e.itemSize[1]],l=t?o:this._handleEnds,c=this._createBarVisual(this._dataInterval,n,l,"inRange"),d=this._createBarVisual(n,n,o,"outOfRange");r.inRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),r.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(l,c)},e.prototype._createBarVisual=function(t,e,n,r){var o={forceState:r,convertOpacityToAlpha:!0},l=this._makeColorGradient(t,o),c=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],d=this._createBarPoints(n,c);return{barColor:new y.a(0,0,0,1,l),barPoints:d,handlesColor:[l[0].color,l[l.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var n=[],r=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var i=1;i<100;i++){var o=t[0]+r*i;if(o>t[1])break;n.push({color:this.getControllerVisual(o,"color",e),offset:i/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},e.prototype._createBarPoints=function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new S.a("horizontal"!==e||n?"horizontal"===e&&n?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||n?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var n=this._shapes,r=this.visualMapModel,o=n.handleThumbs,l=n.handleLabels,c=r.itemSize,d=r.getExtent(),h=this._applyTransform("left",n.mainGroup);N([0,1],function(f){var v=o[f];v.setStyle("fill",e.handlesColor[f]),v.y=t[f];var y=z(t[f],[0,c[1]],d,!0),m=this.getControllerVisual(y,"symbolSize");v.scaleX=v.scaleY=m/c[0],v.x=c[0]-m/2;var _=w.applyTransform(n.handleLabelPoints[f],w.getTransform(v,this.group));if("horizontal"===this._orient){var x="left"===h||"top"===h?(c[0]-m)/2:(c[0]-m)/-2;_[1]+=x}l[f].setStyle({x:_[0],y:_[1],text:r.formatValueText(this._dataInterval[f]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,e,n,r){var o=this.visualMapModel,l=o.getExtent(),c=o.itemSize,d=[0,c[1]],h=this._shapes,f=h.indicator;if(f){f.attr("invisible",!1);var v=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),y=this.getControllerVisual(t,"symbolSize"),m=z(t,l,d,!0),_=c[0]-y/2,x={x:f.x,y:f.y};f.y=m,f.x=_;var S=w.applyTransform(h.indicatorLabelPoint,w.getTransform(f,this.group)),k=h.indicatorLabel;k.attr("invisible",!1);var O=this._applyTransform("left",h.mainGroup),C="horizontal"===this._orient;k.setStyle({text:(n||"")+o.formatValueText(e),verticalAlign:C?O:"middle",align:C?"center":O});var I={x:_,y:m,style:{fill:v}},M={style:{x:S[0],y:S[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var j={duration:100,easing:"cubicInOut",additive:!0};f.x=x.x,f.y=x.y,f.animateTo(I,j),k.animateTo(M,j)}else f.attr(I),k.attr(M);this._firstShowIndicator=!1;var A=this._shapes.handleLabels;if(A)for(var i=0;i<A.length;i++)this.api.enterBlur(A[i])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,r=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);r[1]=R(V(0,r[1]),n[1]),t._doHoverLinkToSeries(r[1],0<=r[0]&&r[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var n=this.visualMapModel,r=n.itemSize;if(n.option.hoverLink){var o=[0,r[1]],l=n.getExtent();t=R(V(o[0],t),o[1]);var c=function(t,e,n){var r=6,o=t.get("hoverLinkDataSize");o&&(r=z(o,e,n,!0)/2);return r}(n,l,o),d=[t-c,t+c],h=z(t,o,l,!0),f=[z(d[0],o,l,!0),z(d[1],o,l,!0)];d[0]<o[0]&&(f[0]=-1/0),d[1]>o[1]&&(f[1]=1/0),e&&(f[0]===-1/0?this._showIndicator(h,f[1],"< ",c):f[1]===1/0?this._showIndicator(h,f[0],"> ",c):this._showIndicator(h,h,"≈ ",c));var v=this._hoverLinkDataIndices,y=[];(e||G(n))&&(y=this._hoverLinkDataIndices=n.findTargetDataIndices(f));var m=M.d(v,y);this._dispatchHighDown("downplay",I.b(m[0],n)),this._dispatchHighDown("highlight",I.b(m[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var e;if(Object(P.a)(t.target,function(t){var n=Object(L.a)(t);if(null!=n.dataIndex)return e=n,!0},!0),e){var n=this.ecModel.getSeriesByIndex(e.seriesIndex),r=this.visualMapModel;if(r.isTargetSeries(n)){var data=n.getData(e.dataType),o=data.getStore().get(r.getDataDimensionIndex(data),e.dataIndex);isNaN(o)||this._showIndicator(o,o)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var i=0;i<e.length;i++)this.api.leaveBlur(e[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",I.b(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,element,e,n){var r=w.getTransform(element,n?null:this.group);return o.t(t)?w.applyTransform(t,r,e):w.transformDirection(t,r,e)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(_.a);function H(t,cursor,e,n){return new O.a({shape:{points:t},draggable:!!e,cursor:cursor,drift:e,onmousemove:function(t){m.g(t.event)},ondragend:n})}function G(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function B(t){return"vertical"===t?"ns-resize":"ew-resize"}var $=E,F=n(526);function W(t){t.registerComponentModel(v),t.registerComponentView($),Object(F.a)(t)}},542:function(t,e,n){"use strict";n.d(e,"a",function(){return j});var r=n(424),o=n(423),l=n(519),c=n(459),d=n(520),h=n(427),component=n(483),f=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return Object(r.a)(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],v[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var l=this.option.categories;this.resetVisual(function(t,e){"categories"===r?(t.mappingMethod="category",t.categories=o.d(l)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=o.H(this._pieceList,function(t){return t=o.d(t),"inRange"!==e&&(t.visual=null),t}))})},e.prototype.completeVisualOption=function(){var option=this.option,e={},n=c.a.listVisualTypes(),r=this.isCategory();function l(t,e,n){return t&&t[e]&&t[e].hasOwnProperty(n)}o.k(option.pieces,function(t){o.k(n,function(n){t.hasOwnProperty(n)&&(e[n]=1)})}),o.k(e,function(t,e){var n=!1;o.k(this.stateList,function(t){n=n||l(option,t,e)||l(option.target,t,e)},this),!n&&o.k(this.stateList,function(t){(option[t]||(option[t]={}))[e]=d.a.get(e,"inRange"===t?"active":"inactive",r)})},this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var n=this.option,r=this._pieceList,l=(e?n:t).selected||{};if(n.selected=l,o.k(r,function(t,e){var n=this.getSelectedMapKey(t);l.hasOwnProperty(n)||(l[n]=!0)},this),"single"===n.selectedMode){var c=!1;o.k(r,function(t,e){var n=this.getSelectedMapKey(t);l[n]&&(c?l[n]=!1:c=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var option=this.option;return option.pieces&&option.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=o.d(t)},e.prototype.getValueState=function(t){var e=c.a.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],n=this._pieceList;return this.eachTargetSeries(function(r){var o=[],data=r.getData();data.each(this.getDataDimensionIndex(data),function(e,r){c.a.findPieceIndex(e,n)===t&&o.push(r)},this),e.push({seriesId:r.id,dataIndex:o})},this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],n=["",""],r=this,l=this._pieceList.slice();if(l.length){var c=l[0].interval[0];c!==-1/0&&l.unshift({interval:[-1/0,c]}),(c=l[l.length-1].interval[1])!==1/0&&l.push({interval:[c,1/0]})}else l.push({interval:[-1/0,1/0]});var d=-1/0;return o.k(l,function(t){var e=t.interval;e&&(e[0]>d&&h([d,e[0]],"outOfRange"),h(e.slice()),d=e[1])},this),{stops:e,outerColors:n}}function h(o,l){var c=r.getRepresentValue({interval:o});l||(l=r.getValueState(c));var d=t(c,l);o[0]===-1/0?n[0]=d:o[1]===1/0?n[1]=d:e.push({value:o[0],color:d},{value:o[1],color:d})}},e.type="visualMap.piecewise",e.defaultOption=Object(component.d)(l.a.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(l.a),v={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),r=this.getExtent(),l=e.splitNumber;l=Math.max(parseInt(l,10),1),e.splitNumber=l;for(var c=(r[1]-r[0])/l;+c.toFixed(n)!==c&&n<5;)n++;e.precision=n,c=+c.toFixed(n),e.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var d=0,f=r[0];d<l;f+=c,d++){var v=d===l-1?r[1]:f+c;t.push({interval:[f,v],close:[1,1]})}e.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),Object(h.q)(t),o.k(t,function(t,e){t.index=e,t.text=this.formatValueText(t.interval)},this)},categories:function(t){var e=this.option;o.k(e.categories,function(e){t.push({text:this.formatValueText(e,!0),value:e})},this),y(e,t)},pieces:function(t){var e=this.option;o.k(e.pieces,function(e,n){o.A(e)||(e={value:e});var r={text:"",index:n};if(null!=e.label&&(r.text=e.label),e.hasOwnProperty("value")){var l=r.value=e.value;r.interval=[l,l],r.close=[1,1]}else{for(var d=r.interval=[],h=r.close=[0,0],f=[1,0,1],v=[-1/0,1/0],y=[],m=0;m<2;m++){for(var _=[["gte","gt","min"],["lte","lt","max"]][m],i=0;i<3&&null==d[m];i++)d[m]=e[_[i]],h[m]=f[i],y[m]=2===i;null==d[m]&&(d[m]=v[m])}y[0]&&d[1]===1/0&&(h[0]=0),y[1]&&d[0]===-1/0&&(h[1]=0),d[0]===d[1]&&h[0]&&h[1]&&(r.value=d[0])}r.visual=c.a.retrieveVisuals(e),t.push(r)},this),y(e,t),Object(h.q)(t),o.k(t,function(t){var e=t.close,n=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)},this)}};function y(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var m=f,_=n(523),x=n(573),S=n(535),symbol=n(431),k=n(433),w=n(521),O=n(428),C=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),r=e.textStyleModel,l=r.getFont(),c=r.getTextColor(),d=this._getItemAlign(),h=e.itemSize,f=this._getViewData(),v=f.endsText,y=o.O(e.get("showLabel",!0),!v),m=!e.get("selectedMode");v&&this._renderEndsText(t,v[0],h,y,d),o.k(f.viewPieceList,function(r){var f=r.piece,v=new x.a;v.onclick=o.c(this._onItemClick,this,f),this._enableHoverLink(v,r.indexInModelPieceList);var _=e.getRepresentValue(f);if(this._createItemSymbol(v,_,[0,0,h[0],h[1]],m),y){var k=this.visualMapModel.getValueState(_);v.add(new S.a({style:{x:"right"===d?-n:h[0]+n,y:h[1]/2,text:f.text,verticalAlign:"middle",align:d,font:l,fill:c,opacity:"outOfRange"===k?.5:1},silent:m}))}t.add(v)},this),v&&this._renderEndsText(t,v[1],h,y,d),k.b(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var n=this;t.on("mouseover",function(){return r("highlight")}).on("mouseout",function(){return r("downplay")});var r=function(t){var r=n.visualMapModel;r.option.hoverLink&&n.api.dispatchAction({type:t,batch:w.b(r.findTargetDataIndices(e),r)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return w.a(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},e.prototype._renderEndsText=function(t,text,e,n,r){if(text){var o=new x.a,l=this.visualMapModel.textStyleModel;o.add(new S.a({style:Object(O.b)(l,{x:n?"right"===r?e[0]:0:e[0]/2,y:e[1]/2,verticalAlign:"middle",align:n?r:"center",text:text})})),t.add(o)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=o.H(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),n=t.get("text"),r=t.get("orient"),l=t.get("inverse");return("horizontal"===r?l:!l)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},e.prototype._createItemSymbol=function(t,e,n,r){var o=Object(symbol.a)(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color"));o.silent=r,t.add(o)},e.prototype._onItemClick=function(t){var e=this.visualMapModel,option=e.option,n=option.selectedMode;if(n){var r=o.d(option.selected),l=e.getSelectedMapKey(t);"single"===n||!0===n?(r[l]=!0,o.k(r,function(t,e){r[e]=e===l})):r[l]=!r[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:r})}},e.type="visualMap.piecewise",e}(_.a),I=C,M=n(526);function j(t){t.registerComponentModel(m),t.registerComponentView(I),Object(M.a)(t)}},545:function(t,e,n){"use strict";n.d(e,"a",function(){return yt});var r=n(424),o=n(472),l=n(460),c=n(431),d=n(573),h=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(r.a)(e,t),e.prototype.getInitialData=function(option){return Object(o.a)(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new d.a,line=Object(c.a)("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(line),line.setStyle(t.lineStyle);var n=this.getData().getVisual("symbol"),r=this.getData().getVisual("symbolRotate"),o="none"===n?"circle":n,l=.8*t.itemHeight,symbol=Object(c.a)(o,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);e.add(symbol),symbol.setStyle(t.itemStyle);var h="inherit"===t.iconRotate?r:t.iconRotate||0;return symbol.rotation=h*Math.PI/180,symbol.setOrigin([t.itemWidth/2,t.itemHeight/2]),o.indexOf("empty")>-1&&(symbol.style.stroke=symbol.style.fill,symbol.style.fill="#fff",symbol.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(l.a),f=h,v=n(423),y=n(485),m=n(451),_=n(441);function x(t,data,e){var n=t.getBaseAxis(),r=t.getOtherAxis(n),o=function(t,e){var n=0,r=t.scale.getExtent();"start"===e?n=r[0]:"end"===e?n=r[1]:Object(v.z)(e)&&!isNaN(e)?n=e:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]);return n}(r,e),l=n.dim,c=r.dim,d=data.mapDimension(c),h=data.mapDimension(l),f="x"===c||"radius"===c?1:0,y=Object(v.H)(t.dimensions,function(t){return data.mapDimension(t)}),m=!1,x=data.getCalculationInfo("stackResultDimension");return Object(_.c)(data,y[0])&&(m=!0,y[0]=x),Object(_.c)(data,y[1])&&(m=!0,y[1]=x),{dataDimsForPoint:y,valueStart:o,valueAxisDim:c,baseAxisDim:l,stacked:!!m,valueDim:d,baseDim:h,baseDataOffset:f,stackedOverDimension:data.getCalculationInfo("stackedOverDimension")}}function S(t,e,data,n){var r=NaN;t.stacked&&(r=data.get(data.getCalculationInfo("stackedOverDimension"),n)),isNaN(r)&&(r=t.valueStart);var o=t.baseDataOffset,l=[];return l[o]=data.get(t.baseDim,n),l[1-o]=r,e.dataToPoint(l)}var k=n(445);var w=n(560),O=n(457),C=n(535),I=n(426),M=n(442),j=n(487),A=n(500),T=Math.min,L=Math.max;function D(t,e){return isNaN(t)||isNaN(e)}function P(t,e,n,r,o,l,c,d,h){for(var f,v,y,m,_,x,S=n,k=0;k<r;k++){var w=e[2*S],O=e[2*S+1];if(S>=o||S<0)break;if(D(w,O)){if(h){S+=l;continue}break}if(S===n)t[l>0?"moveTo":"lineTo"](w,O),y=w,m=O;else{var C=w-f,I=O-v;if(C*C+I*I<.5){S+=l;continue}if(c>0){for(var M=S+l,j=e[2*M],A=e[2*M+1];j===w&&A===O&&k<r;)k++,S+=l,j=e[2*(M+=l)],A=e[2*M+1],C=(w=e[2*S])-f,I=(O=e[2*S+1])-v;var P=k+1;if(h)for(;D(j,A)&&P<r;)P++,j=e[2*(M+=l)],A=e[2*M+1];var z=.5,N=0,R=0,V=void 0,E=void 0;if(P>=r||D(j,A))_=w,x=O;else{N=j-f,R=A-v;var H=w-f,G=j-w,B=O-v,$=A-O,F=void 0,W=void 0;if("x"===d){var U=N>0?1:-1;_=w-U*(F=Math.abs(H))*c,x=O,V=w+U*(W=Math.abs(G))*c,E=O}else if("y"===d){var Y=R>0?1:-1;_=w,x=O-Y*(F=Math.abs(B))*c,V=w,E=O+Y*(W=Math.abs($))*c}else F=Math.sqrt(H*H+B*B),_=w-N*c*(1-(z=(W=Math.sqrt(G*G+$*$))/(W+F))),x=O-R*c*(1-z),E=O+R*c*z,V=T(V=w+N*c*z,L(j,w)),E=T(E,L(A,O)),V=L(V,T(j,w)),x=O-(R=(E=L(E,T(A,O)))-O)*F/W,_=T(_=w-(N=V-w)*F/W,L(f,w)),x=T(x,L(v,O)),V=w+(N=w-(_=L(_,T(f,w))))*W/F,E=O+(R=O-(x=L(x,T(v,O))))*W/F}t.bezierCurveTo(y,m,_,x,w,O),y=V,m=E}else t.lineTo(w,O)}f=w,v=O,S+=l}return k}var z=function(){this.smooth=0,this.smoothConstraint=!0},N=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polyline",n}return Object(r.a)(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new z},e.prototype.buildPath=function(t,e){var n=e.points,i=0,r=n.length/2;if(e.connectNulls){for(;r>0&&D(n[2*r-2],n[2*r-1]);r--);for(;i<r&&D(n[2*i],n[2*i+1]);i++);}for(;i<r;)i+=P(t,n,i,r,r,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,r,data=this.path.data,o=j.a.CMD,l="x"===e,c=[],i=0;i<data.length;){var d=void 0,h=void 0,f=void 0,v=void 0,y=void 0,m=void 0,_=void 0;switch(data[i++]){case o.M:n=data[i++],r=data[i++];break;case o.L:if(d=data[i++],h=data[i++],(_=l?(t-n)/(d-n):(t-r)/(h-r))<=1&&_>=0){var x=l?(h-r)*_+r:(d-n)*_+n;return l?[t,x]:[x,t]}n=d,r=h;break;case o.C:d=data[i++],h=data[i++],f=data[i++],v=data[i++],y=data[i++],m=data[i++];var S=l?Object(A.f)(n,d,f,y,t,c):Object(A.f)(r,h,v,m,t,c);if(S>0)for(var k=0;k<S;k++){var w=c[k];if(w<=1&&w>=0){x=l?Object(A.a)(r,h,v,m,w):Object(A.a)(n,d,f,y,w);return l?[t,x]:[x,t]}}n=y,r=m}}},e}(M.b),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.a)(e,t),e}(z),V=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polygon",n}return Object(r.a)(e,t),e.prototype.getDefaultShape=function(){return new R},e.prototype.buildPath=function(t,e){var n=e.points,r=e.stackedOnPoints,i=0,o=n.length/2,l=e.smoothMonotone;if(e.connectNulls){for(;o>0&&D(n[2*o-2],n[2*o-1]);o--);for(;i<o&&D(n[2*i],n[2*i+1]);i++);}for(;i<o;){var c=P(t,n,i,o,o,1,e.smooth,l,e.connectNulls);P(t,r,i+c-1,c,o,-1,e.stackedOnSmooth,l,e.connectNulls),i+=c+1,t.closePath()}},e}(M.b),E=n(458),H=n(647),G=n(843),B=n(427);function $(t,e,n,r,o){var rect=t.getArea(),l=rect.x,c=rect.y,d=rect.width,h=rect.height,f=n.get(["lineStyle","width"])||0;l-=f/2,c-=f/2,d+=f,h+=f,d=Math.ceil(d),l!==Math.floor(l)&&(l=Math.floor(l),d++);var y=new H.a({shape:{x:l,y:c,width:d,height:h}});if(e){var m=t.getBaseAxis(),_=m.isHorizontal(),x=m.inverse;_?(x&&(y.shape.x+=d),y.shape.width=0):(x||(y.shape.y+=h),y.shape.height=0);var S=Object(v.w)(o)?function(t){o(t,y)}:null;O.b(y,{shape:{width:d,height:h,x:l,y:c}},n,null,r,S)}return y}function F(t,e,n){var r=t.getArea(),o=Object(B.s)(r.r0,1),l=Object(B.s)(r.r,1),c=new G.a({shape:{cx:Object(B.s)(t.cx,1),cy:Object(B.s)(t.cy,1),r0:o,r:l,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});e&&("angle"===t.getBaseAxis().dim?c.shape.endAngle=r.startAngle:c.shape.r=o,O.b(c,{shape:{endAngle:r.endAngle,r:l}},n));return c}var W=n(467),U=n(430),Y=n(428),X=n(452),J=n(432),Z=n(463),K=n(450);function Q(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return;return!0}}function tt(t){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,i=0;i<t.length;){var l=t[i++],c=t[i++];isNaN(l)||(e=Math.min(l,e),r=Math.max(l,r)),isNaN(c)||(n=Math.min(c,n),o=Math.max(c,o))}return[[e,n],[r,o]]}function et(t,e){var n=tt(t),r=n[0],o=n[1],l=tt(e),c=l[0],d=l[1];return Math.max(Math.abs(r[0]-c[0]),Math.abs(r[1]-c[1]),Math.abs(o[0]-d[0]),Math.abs(o[1]-d[1]))}function it(t){return v.z(t)?t:t?.5:0}function nt(t,e,n,r,o){var l=n.getBaseAxis(),c="x"===l.dim||"radius"===l.dim?0:1,d=[],i=0,h=[],f=[],v=[],y=[];if(o){for(i=0;i<t.length;i+=2){var m=e||t;isNaN(m[i])||isNaN(m[i+1])||y.push(t[i],t[i+1])}t=y}for(i=0;i<t.length-2;i+=2)switch(v[0]=t[i+2],v[1]=t[i+3],f[0]=t[i],f[1]=t[i+1],d.push(f[0],f[1]),r){case"end":h[c]=v[c],h[1-c]=f[1-c],d.push(h[0],h[1]);break;case"middle":var _=(f[c]+v[c])/2,x=[];h[c]=x[c]=_,h[1-c]=f[1-c],x[1-c]=v[1-c],d.push(h[0],h[1]),d.push(x[0],x[1]);break;default:h[c]=f[c],h[1-c]=v[1-c],d.push(h[0],h[1])}return d.push(t[i++],t[i++]),d}function at(data,t,e){var n=data.getVisual("visualMeta");if(n&&n.length&&data.count()&&"cartesian2d"===t.type){for(var r,o,i=n.length-1;i>=0;i--){var l=data.getDimensionInfo(n[i].dimension);if("x"===(r=l&&l.coordDim)||"y"===r){o=n[i];break}}if(o){var c=t.getAxis(r),d=v.H(o.stops,function(t){return{coord:c.toGlobalCoord(c.dataToCoord(t.value)),color:t.color}}),h=d.length,f=o.outerColors.slice();h&&d[0].coord>d[h-1].coord&&(d.reverse(),f.reverse());var y=function(t,e){var n,r,o=[],l=t.length;function c(t,e,n){var r=t.coord,p=(n-r)/(e.coord-r);return{coord:n,color:Object(K.b)(p,[t.color,e.color])}}for(var i=0;i<l;i++){var d=t[i],h=d.coord;if(h<0)n=d;else{if(h>e){r?o.push(c(r,d,e)):n&&o.push(c(n,d,0),c(n,d,e));break}n&&(o.push(c(n,d,0)),n=null),o.push(d),r=d}}return o}(d,"x"===r?e.getWidth():e.getHeight()),m=y.length;if(!m&&h)return d[0].coord<0?f[1]?f[1]:d[h-1].color:f[0]?f[0]:d[0].color;var _=y[0].coord-10,x=y[m-1].coord+10,S=x-_;if(S<.001)return"transparent";v.k(y,function(t){t.offset=(t.coord-_)/S}),y.push({offset:m?y[m-1].offset:.5,color:f[1]||"transparent"}),y.unshift({offset:m?y[0].offset:.5,color:f[0]||"transparent"});var k=new w.a(0,0,0,0,y,!0);return k[r]=_,k[r+"2"]=x,k}}}function ot(t,data,e){var n=t.get("showAllSymbol"),r="auto"===n;if(!n||r){var o=e.getAxesByScale("ordinal")[0];if(o&&(!r||!function(t,data){var e=t.getExtent(),n=Math.abs(e[1]-e[0])/t.scale.count();isNaN(n)&&(n=0);for(var r=data.count(),o=Math.max(1,Math.round(r/5)),l=0;l<r;l+=o)if(1.5*m.a.getSymbolSize(data,l)[t.isHorizontal()?1:0]>n)return!1;return!0}(o,data))){var l=data.mapDimension(o.dim),c={};return v.k(o.getViewLabels(),function(t){var e=o.scale.getRawOrdinalNumber(t.tickValue);c[e]=1}),function(t){return!c.hasOwnProperty(data.get(l,t))}}}}function st(t,e){return isNaN(t)||isNaN(e)}function lt(t,e){return[t[2*e],t[2*e+1]]}function ct(t){if(t.get(["endLabel","show"]))return!0;for(var i=0;i<U.g.length;i++)if(t.get([U.g[i],"endLabel","show"]))return!0;return!1}function ut(t,e,n,r){if(Object(W.a)(e,"cartesian2d")){var o=r.getModel("endLabel"),l=o.get("valueAnimation"),c=r.getData(),d={lastFrameIndex:0},h=ct(r)?function(n,r){t._endLabelOnDuring(n,r,c,d,l,o,e)}:null,f=e.getBaseAxis().isHorizontal(),v=$(e,n,r,function(){var e=t._endLabel;e&&n&&null!=d.originalX&&e.attr({x:d.originalX,y:d.originalY})},h);if(!r.get("clip",!0)){var y=v.shape,m=Math.max(y.width,y.height);f?(y.y-=m,y.height+=2*m):(y.x-=m,y.width+=2*m)}return h&&h(1,v),v}return F(e,n,r)}var ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.a)(e,t),e.prototype.init=function(){var t=new d.a,e=new y.a;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t,this._changePolyState=v.c(this._changePolyState,this)},e.prototype.render=function(t,e,n){var r=t.coordinateSystem,o=this.group,data=t.getData(),l=t.getModel("lineStyle"),c=t.getModel("areaStyle"),d=data.getLayout("points")||[],h="polar"===r.type,f=this._coordSys,y=this._symbolDraw,polyline=this._polyline,polygon=this._polygon,m=this._lineGroup,_=!e.ssr&&t.get("animation"),w=!c.isEmpty(),C=c.get("origin"),I=x(r,data,C),M=w&&function(t,data,e){if(!e.valueDim)return[];for(var n=data.count(),r=Object(k.a)(2*n),o=0;o<n;o++){var l=S(e,t,data,o);r[2*o]=l[0],r[2*o+1]=l[1]}return r}(r,data,I),j=t.get("showSymbol"),A=t.get("connectNulls"),T=j&&!h&&ot(t,data,r),L=this._data;L&&L.eachItemGraphicEl(function(t,e){t.__temp&&(o.remove(t),L.setItemGraphicEl(e,null))}),j||y.remove(),o.add(m);var D,P=!h&&t.get("step");r&&r.getArea&&t.get("clip",!0)&&(null!=(D=r.getArea()).width?(D.x-=.1,D.y-=.1,D.width+=.2,D.height+=.2):D.r0&&(D.r0-=.5,D.r+=.5)),this._clipShapeForSymbol=D;var z=at(data,r,n)||data.getVisual("style")[data.getVisual("drawType")];if(polyline&&f.type===r.type&&P===this._step){w&&!polygon?polygon=this._newPolygon(d,M):polygon&&!w&&(m.remove(polygon),polygon=this._polygon=null),h||this._initOrUpdateEndLabel(t,r,Object(Z.b)(z));var N=m.getClipPath();if(N){var R=ut(this,r,!1,t);O.b(N,{shape:R.shape},t)}else m.setClipPath(ut(this,r,!0,t));j&&y.updateData(data,{isIgnore:T,clipShape:D,disableAnimation:!0,getSymbolPoint:function(t){return[d[2*t],d[2*t+1]]}}),Q(this._stackedOnPoints,M)&&Q(this._points,d)||(_?this._doUpdateAnimation(data,M,r,n,P,C,A):(P&&(M&&(M=nt(M,d,r,P,A)),d=nt(d,null,r,P,A)),polyline.setShape({points:d}),polygon&&polygon.setShape({points:d,stackedOnPoints:M})))}else j&&y.updateData(data,{isIgnore:T,clipShape:D,disableAnimation:!0,getSymbolPoint:function(t){return[d[2*t],d[2*t+1]]}}),_&&this._initSymbolLabelAnimation(data,r,D),P&&(M&&(M=nt(M,d,r,P,A)),d=nt(d,null,r,P,A)),polyline=this._newPolyline(d),w?polygon=this._newPolygon(d,M):polygon&&(m.remove(polygon),polygon=this._polygon=null),h||this._initOrUpdateEndLabel(t,r,Object(Z.b)(z)),m.setClipPath(ut(this,r,!0,t));var V=t.getModel("emphasis"),E=V.get("focus"),H=V.get("blurScope"),G=V.get("disabled");(polyline.useStyle(v.i(l.getLineStyle(),{fill:"none",stroke:z,lineJoin:"bevel"})),Object(U.I)(polyline,t,"lineStyle"),polyline.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"]))&&(polyline.getState("emphasis").style.lineWidth=+polyline.style.lineWidth+1);Object(J.a)(polyline).seriesIndex=t.seriesIndex,Object(U.J)(polyline,E,H,G);var B=it(t.get("smooth")),$=t.get("smoothMonotone");if(polyline.setShape({smooth:B,smoothMonotone:$,connectNulls:A}),polygon){var F=data.getCalculationInfo("stackedOnSeries"),W=0;polygon.useStyle(v.i(c.getAreaStyle(),{fill:z,opacity:.7,lineJoin:"bevel",decal:data.getVisual("style").decal})),F&&(W=it(F.get("smooth"))),polygon.setShape({smooth:B,stackedOnSmooth:W,smoothMonotone:$,connectNulls:A}),Object(U.I)(polygon,t,"areaStyle"),Object(J.a)(polygon).seriesIndex=t.seriesIndex,Object(U.J)(polygon,E,H,G)}var Y=this._changePolyState;data.eachItemGraphicEl(function(t){t&&(t.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=data,this._coordSys=r,this._stackedOnPoints=M,this._points=d,this._step=P,this._valueOrigin=C,t.get("triggerLineEvent")&&(this.packEventData(t,polyline),polygon&&this.packEventData(t,polygon))},e.prototype.packEventData=function(t,e){Object(J.a)(e).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,e,n,r){var data=t.getData(),o=I.t(data,r);if(this._changePolyState("emphasis"),!(o instanceof Array)&&null!=o&&o>=0){var l=data.getLayout("points"),symbol=data.getItemGraphicEl(o);if(!symbol){var c=l[2*o],d=l[2*o+1];if(isNaN(c)||isNaN(d))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,d))return;var h=t.get("zlevel")||0,f=t.get("z")||0;(symbol=new m.a(data,o)).x=c,symbol.y=d,symbol.setZ(h,f);var v=symbol.getSymbolPath().getTextContent();v&&(v.zlevel=h,v.z=f,v.z2=this._polyline.z2+1),symbol.__temp=!0,data.setItemGraphicEl(o,symbol),symbol.stopSymbolAnimation(!0),this.group.add(symbol)}symbol.highlight()}else E.a.prototype.highlight.call(this,t,e,n,r)},e.prototype.downplay=function(t,e,n,r){var data=t.getData(),o=I.t(data,r);if(this._changePolyState("normal"),null!=o&&o>=0){var symbol=data.getItemGraphicEl(o);symbol&&(symbol.__temp?(data.setItemGraphicEl(o,null),this.group.remove(symbol)):symbol.downplay())}else E.a.prototype.downplay.call(this,t,e,n,r)},e.prototype._changePolyState=function(t){var polygon=this._polygon;Object(U.H)(this._polyline,t),polygon&&Object(U.H)(polygon,t)},e.prototype._newPolyline=function(t){var polyline=this._polyline;return polyline&&this._lineGroup.remove(polyline),polyline=new N({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(polyline),this._polyline=polyline,polyline},e.prototype._newPolygon=function(t,e){var polygon=this._polygon;return polygon&&this._lineGroup.remove(polygon),polygon=new V({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(polygon),this._polygon=polygon,polygon},e.prototype._initSymbolLabelAnimation=function(data,t,e){var n,r,o=t.getBaseAxis(),l=o.inverse;"cartesian2d"===t.type?(n=o.isHorizontal(),r=!1):"polar"===t.type&&(n="angle"===o.dim,r=!0);var c=data.hostModel,d=c.get("animationDuration");v.w(d)&&(d=d(null));var h=c.get("animationDelay")||0,f=v.w(h)?h(null):h;data.eachItemGraphicEl(function(symbol,o){var c=symbol;if(c){var y=[symbol.x,symbol.y],m=void 0,_=void 0,x=void 0;if(e)if(r){var S=e,k=t.pointToCoord(y);n?(m=S.startAngle,_=S.endAngle,x=-k[1]/180*Math.PI):(m=S.r0,_=S.r,x=k[0])}else{var w=e;n?(m=w.x,_=w.x+w.width,x=symbol.x):(m=w.y+w.height,_=w.y,x=symbol.y)}var O=_===m?0:(x-m)/(_-m);l&&(O=1-O);var C=v.w(h)?h(o):d*O+f,I=c.getSymbolPath(),text=I.getTextContent();c.attr({scaleX:0,scaleY:0}),c.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:C}),text&&text.animateFrom({style:{opacity:0}},{duration:300,delay:C}),I.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,e,n){var r=t.getModel("endLabel");if(ct(t)){var o=t.getData(),polyline=this._polyline,l=o.getLayout("points");if(!l)return polyline.removeTextContent(),void(this._endLabel=null);var c=this._endLabel;c||((c=this._endLabel=new C.a({z2:200})).ignoreClip=!0,polyline.setTextContent(this._endLabel),polyline.disableLabelAnimation=!0);var d=function(t){for(var e=t.length/2;e>0&&st(t[2*e-2],t[2*e-1]);e--);return e-1}(l);d>=0&&(Object(Y.f)(polyline,Object(Y.d)(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:d,defaultText:function(t,e,n){return null!=n?Object(X.a)(o,n):Object(X.b)(o,t)},enableTextSetter:!0},function(t,e){var n=e.getBaseAxis(),r=n.isHorizontal(),o=n.inverse,l=r?o?"right":"left":"center",c=r?"middle":o?"top":"bottom";return{normal:{align:t.get("align")||l,verticalAlign:t.get("verticalAlign")||c}}}(r,e)),polyline.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,data,n,r,o,l){var c=this._endLabel,polyline=this._polyline;if(c){t<1&&null==n.originalX&&(n.originalX=c.x,n.originalY=c.y);var d=data.getLayout("points"),h=data.hostModel,f=h.get("connectNulls"),v=o.get("precision"),y=o.get("distance")||0,m=l.getBaseAxis(),_=m.isHorizontal(),x=m.inverse,S=e.shape,k=x?_?S.x:S.y+S.height:_?S.x+S.width:S.y,w=(_?y:0)*(x?-1:1),O=(_?0:-y)*(x?-1:1),C=_?"x":"y",M=function(t,e,n){for(var a,b,r=t.length/2,o="x"===n?0:1,l=0,c=-1,i=0;i<r;i++)if(b=t[2*i+o],!isNaN(b)&&!isNaN(t[2*i+1-o]))if(0!==i){if(a<=e&&b>=e||a>=e&&b<=e){c=i;break}l=i,a=b}else a=b;return{range:[l,c],t:(e-a)/(b-a)}}(d,k,C),j=M.range,A=j[1]-j[0],T=void 0;if(A>=1){if(A>1&&!f){var L=lt(d,j[0]);c.attr({x:L[0]+w,y:L[1]+O}),r&&(T=h.getRawValue(j[0]))}else{(L=polyline.getPointOn(k,C))&&c.attr({x:L[0]+w,y:L[1]+O});var D=h.getRawValue(j[0]),P=h.getRawValue(j[1]);r&&(T=I.j(data,v,D,P,M.t))}n.lastFrameIndex=j[0]}else{var z=1===t||n.lastFrameIndex>0?j[0]:0;L=lt(d,z);r&&(T=h.getRawValue(z)),c.attr({x:L[0]+w,y:L[1]+O})}if(r){var N=Object(Y.e)(c);"function"==typeof N.setLabelText&&N.setLabelText(T)}}},e.prototype._doUpdateAnimation=function(data,t,e,n,r,o,l){var polyline=this._polyline,polygon=this._polygon,c=data.hostModel,d=function(t,e,n,r,o,l,c){for(var d=function(t,e){var n=[];return e.diff(t).add(function(t){n.push({cmd:"+",idx:t})}).update(function(t,e){n.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){n.push({cmd:"-",idx:t})}).execute(),n}(t,e),h=[],f=[],v=[],y=[],m=[],_=[],w=[],O=x(o,e,c),C=t.getLayout("points")||[],I=e.getLayout("points")||[],i=0;i<d.length;i++){var M=d[i],j=!0,A=void 0,T=void 0;switch(M.cmd){case"=":A=2*M.idx,T=2*M.idx1;var L=C[A],D=C[A+1],P=I[T],z=I[T+1];(isNaN(L)||isNaN(D))&&(L=P,D=z),h.push(L,D),f.push(P,z),v.push(n[A],n[A+1]),y.push(r[T],r[T+1]),w.push(e.getRawIndex(M.idx1));break;case"+":var N=M.idx,R=O.dataDimsForPoint,V=o.dataToPoint([e.get(R[0],N),e.get(R[1],N)]);T=2*N,h.push(V[0],V[1]),f.push(I[T],I[T+1]);var E=S(O,o,e,N);v.push(E[0],E[1]),y.push(r[T],r[T+1]),w.push(e.getRawIndex(N));break;case"-":j=!1}j&&(m.push(M),_.push(_.length))}_.sort(function(a,b){return w[a]-w[b]});var H=h.length,G=Object(k.a)(H),B=Object(k.a)(H),$=Object(k.a)(H),F=Object(k.a)(H),W=[];for(i=0;i<_.length;i++){var U=_[i],Y=2*i,X=2*U;G[Y]=h[X],G[Y+1]=h[X+1],B[Y]=f[X],B[Y+1]=f[X+1],$[Y]=v[X],$[Y+1]=v[X+1],F[Y]=y[X],F[Y+1]=y[X+1],W[i]=m[U]}return{current:G,next:B,stackedOnCurrent:$,stackedOnNext:F,status:W}}(this._data,data,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),h=d.current,f=d.stackedOnCurrent,v=d.next,y=d.stackedOnNext;if(r&&(f=nt(d.stackedOnCurrent,d.current,e,r,l),h=nt(d.current,null,e,r,l),y=nt(d.stackedOnNext,d.next,e,r,l),v=nt(d.next,null,e,r,l)),et(h,v)>3e3||polygon&&et(f,y)>3e3)return polyline.stopAnimation(),polyline.setShape({points:v}),void(polygon&&(polygon.stopAnimation(),polygon.setShape({points:v,stackedOnPoints:y})));polyline.shape.__points=d.current,polyline.shape.points=h;var m={shape:{points:v}};d.current!==h&&(m.shape.__points=d.next),polyline.stopAnimation(),O.g(polyline,m,c),polygon&&(polygon.setShape({points:h,stackedOnPoints:f}),polygon.stopAnimation(),O.g(polygon,{shape:{stackedOnPoints:y}},c),polyline.shape.points!==polygon.shape.points&&(polygon.shape.points=polyline.shape.points));for(var _=[],w=d.status,i=0;i<w.length;i++){if("="===w[i].cmd){var C=data.getItemGraphicEl(w[i].idx1);C&&_.push({el:C,ptIdx:i})}}polyline.animators&&polyline.animators.length&&polyline.animators[0].during(function(){polygon&&polygon.dirtyShape();for(var t=polyline.shape.__points,i=0;i<_.length;i++){var e=_[i].el,n=2*_[i].ptIdx;e.x=t[n],e.y=t[n+1],e.markRedraw()}})},e.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(t,r){t.__temp&&(e.remove(t),n.setItemGraphicEl(r,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(E.a),pt=ht,ft=n(527);var gt={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]||0;return e},max:function(t){for(var e=-1/0,i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,i=0;i<t.length;i++)t[i]<e&&(e=t[i]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},vt=function(t){return Math.round(t.length/2)};function yt(t){var e;t.registerChartView(pt),t.registerSeriesModel(f),t.registerLayout((e=!0,{seriesType:"line",plan:Object(ft.a)(),reset:function(t){var data=t.getData(),n=t.coordinateSystem,r=t.pipelineContext,o=e||r.large;if(n){var l=Object(v.H)(n.dimensions,function(t){return data.mapDimension(t)}).slice(0,2),c=l.length,d=data.getCalculationInfo("stackResultDimension");Object(_.c)(data,l[0])&&(l[0]=d),Object(_.c)(data,l[1])&&(l[1]=d);var h=data.getStore(),f=data.getDimensionIndex(l[0]),y=data.getDimensionIndex(l[1]);return c&&{progress:function(t,data){for(var e=t.end-t.start,r=o&&Object(k.a)(e*c),l=[],d=[],i=t.start,v=0;i<t.end;i++){var m=void 0;if(1===c){var _=h.get(f,i);m=n.dataToPoint(_,null,d)}else l[0]=h.get(f,i),l[1]=h.get(y,i),m=n.dataToPoint(l,null,d);o?(r[v++]=m[0],r[v++]=m[1]):data.setItemLayout(i,m.slice())}o&&data.setLayout("points",r)}}}}})),t.registerVisual({seriesType:"line",reset:function(t){var data=t.getData(),e=t.getModel("lineStyle").getLineStyle();e&&!e.stroke&&(e.stroke=data.getVisual("style").fill),data.setVisual("legendLineStyle",e)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(t){return{seriesType:t,reset:function(t,e,n){var data=t.getData(),r=t.get("sampling"),o=t.coordinateSystem,l=data.count();if(l>10&&"cartesian2d"===o.type&&r){var c=o.getBaseAxis(),d=o.getOtherAxis(c),h=c.getExtent(),f=n.getDevicePixelRatio(),y=Math.abs(h[1]-h[0])*(f||1),m=Math.round(l/y);if(isFinite(m)&&m>1){"lttb"===r?t.setData(data.lttbDownSample(data.mapDimension(d.dim),1/m)):"minmax"===r&&t.setData(data.minmaxDownSample(data.mapDimension(d.dim),1/m));var _=void 0;Object(v.C)(r)?_=gt[r]:Object(v.w)(r)&&(_=r),_&&t.setData(data.downSample(data.mapDimension(d.dim),1/m,_,vt))}}}}}("line"))}},546:function(t,e,n){"use strict";n.d(e,"a",function(){return z});var r=n(462),o=n(423);function l(t){t.eachSeriesByType("radar",function(t){var data=t.getData(),e=[],n=t.coordinateSystem;if(n){var r=n.getIndicatorAxes();o.k(r,function(t,o){data.each(data.mapDimension(r[o].dim),function(t,r){e[r]=e[r]||[];var l=n.dataToPoint(t,o);e[r][o]=c(l)?l:d(n)})}),data.each(function(t){var r=o.o(e[t],function(t){return c(t)})||d(n);e[t].push(r.slice()),data.setItemLayout(t,e[t])})}})}function c(t){return!isNaN(t[0])&&!isNaN(t[1])}function d(t){return[t.cx,t.cy]}function h(option){var t=option.polar;if(t){o.t(t)||(t=[t]);var e=[];o.k(t,function(t,n){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),option.radar=option.radar||[],o.t(option.radar)||(option.radar=[option.radar]),option.radar.push(t)):e.push(t)}),option.polar=e}o.k(option.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})}var f=n(424),v=n(425),y=n(680),m=n(681),_=n(457),x=n(573),S=n(430),symbol=n(431),k=n(458),w=n(428),O=n(438),C=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(f.a)(e,t),e.prototype.render=function(t,e,n){var r=t.coordinateSystem,l=this.group,data=t.getData(),c=this._data;function d(data,t){var e=data.getItemVisual(t,"symbol")||"circle";if("none"!==e){var n=symbol.c(data.getItemVisual(t,"symbolSize")),r=symbol.a(e,-1,-1,2,2),o=data.getItemVisual(t,"symbolRotate")||0;return r.attr({style:{strokeNoScale:!0},z2:100,scaleX:n[0]/2,scaleY:n[1]/2,rotation:o*Math.PI/180||0}),r}}function h(e,n,r,data,o,l){r.removeAll();for(var i=0;i<n.length-1;i++){var c=d(data,o);c&&(c.__dimIdx=i,e[i]?(c.setPosition(e[i]),v[l?"initProps":"updateProps"](c,{x:n[i][0],y:n[i][1]},t,o)):c.setPosition(n[i]),r.add(c))}}function f(t){return o.H(t,function(t){return[r.cx,r.cy]})}data.diff(c).add(function(e){var n=data.getItemLayout(e);if(n){var polygon=new y.a,polyline=new m.a,r={shape:{points:n}};polygon.shape.points=f(n),polyline.shape.points=f(n),_.b(polygon,r,t,e),_.b(polyline,r,t,e);var o=new x.a,l=new x.a;o.add(polyline),o.add(polygon),o.add(l),h(polyline.shape.points,n,l,data,e,!0),data.setItemGraphicEl(e,o)}}).update(function(e,n){var r=c.getItemGraphicEl(n),polyline=r.childAt(0),polygon=r.childAt(1),o=r.childAt(2),l={shape:{points:data.getItemLayout(e)}};l.shape.points&&(h(polyline.shape.points,l.shape.points,o,data,e,!1),Object(_.f)(polygon),Object(_.f)(polyline),_.g(polyline,l,t),_.g(polygon,l,t),data.setItemGraphicEl(e,r))}).remove(function(t){l.remove(c.getItemGraphicEl(t))}).execute(),data.eachItemGraphicEl(function(t,e){var n=data.getItemModel(e),polyline=t.childAt(0),polygon=t.childAt(1),r=t.childAt(2),c=data.getItemVisual(e,"style"),d=c.fill;l.add(t),polyline.useStyle(o.i(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:d})),Object(S.I)(polyline,n,"lineStyle"),Object(S.I)(polygon,n,"areaStyle");var h=n.getModel("areaStyle"),f=h.isEmpty()&&h.parentModel.isEmpty();polygon.ignore=f,o.k(["emphasis","select","blur"],function(t){var e=n.getModel([t,"areaStyle"]),r=e.isEmpty()&&e.parentModel.isEmpty();polygon.ensureState(t).ignore=r&&f}),polygon.useStyle(o.i(h.getAreaStyle(),{fill:d,opacity:.7,decal:c.decal}));var v=n.getModel("emphasis"),y=v.getModel("itemStyle").getItemStyle();r.eachChild(function(t){if(t instanceof O.a){var r=t.style;t.useStyle(o.m({image:r.image,x:r.x,y:r.y,width:r.width,height:r.height},c))}else t.useStyle(c),t.setColor(d),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=o.d(y);var l=data.getStore().get(data.getDimensionIndex(t.__dimIdx),e);(null==l||isNaN(l))&&(l=""),Object(w.f)(t,Object(w.d)(n),{labelFetcher:data.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:l,inheritColor:d,defaultOpacity:c.opacity})}),Object(S.J)(t,v.get("focus"),v.get("blurScope"),v.get("disabled"))}),this._data=data},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(k.a),I=C,M=n(460),j=n(482),A=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),T=n(502),L=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(f.a)(e,t),e.prototype.init=function(option){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new A(o.c(this.getData,this),o.c(this.getRawData,this))},e.prototype.getInitialData=function(option,t){return Object(j.a)(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,n){var data=this.getData(),r=this.coordinateSystem.getIndicatorAxes(),l=this.getData().getName(t),c=""===l?this.name:l,d=Object(T.e)(this,t);return Object(T.c)("section",{header:c,sortBlocks:!0,blocks:o.H(r,function(e){var n=data.get(data.mapDimension(e.dim),t);return Object(T.c)("nameValue",{markerType:"subItem",markerColor:d,name:e.name,value:n,sortParam:n})})})},e.prototype.getTooltipPosition=function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,r=e.getValues(o.H(n.dimensions,function(t){return e.mapDimension(t)}),t),i=0,l=r.length;i<l;i++)if(!isNaN(r[i])){var c=n.getIndicatorAxes();return n.coordToPoint(c[i].dataToCoord(r[i]),i)}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(M.a),D=L,P=n(480);function z(t){Object(r.a)(P.a),t.registerChartView(I),t.registerSeriesModel(D),t.registerLayout(l),t.registerProcessor({seriesType:"radar",reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var data=t.getData();data.filterSelf(function(t){for(var e=data.getName(t),i=0;i<n.length;i++)if(!n[i].isSelected(e))return!1;return!0})}}}),t.registerPreprocessor(h)}},547:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(562),o=n(563);function l(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var i=0;i<e.length;i++)if(!e[i].isSelected(t.name))return!1;return!0})}var c=n(423);function d(t,e,n){var r="allSelect"===t||"inverseSelect"===t,o={},l=[];n.eachComponent({mainType:"legend",query:e},function(n){r?n[t]():n[t](e.name),h(n,o),l.push(n.componentIndex)});var d={};return n.eachComponent("legend",function(t){Object(c.k)(o,function(e,n){t[e?"select":"unSelect"](n)}),h(t,d)}),r?{selected:d,legendIndex:l}:{name:e.name,selected:d}}function h(t,e){var n=e||{};return Object(c.k)(t.getData(),function(e){var r=e.get("name");if("\n"!==r&&""!==r){var o=t.isSelected(r);Object(c.q)(n,r)?n[r]=n[r]&&o:n[r]=o}}),n}function f(t){t.registerComponentModel(r.a),t.registerComponentView(o.a),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,l),t.registerSubTypeDefaulter("legend",function(){return"plain"}),function(t){t.registerAction("legendToggleSelect","legendselectchanged",Object(c.h)(d,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Object(c.h)(d,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Object(c.h)(d,"inverseSelect")),t.registerAction("legendSelect","legendselected",Object(c.h)(d,"select")),t.registerAction("legendUnSelect","legendunselected",Object(c.h)(d,"unSelect"))}(t)}},551:function(t,e,n){"use strict";n(524)},552:function(t,e,n){"use strict";n(525)},562:function(t,e,n){"use strict";var r=n(424),o=n(423),l=n(470),c=n(426),d=n(437),h=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return Object(r.a)(e,t),e.prototype.init=function(option,t,e){this.mergeDefaultAndTheme(option,e),option.selected=option.selected||{},this._updateSelector(option)},e.prototype.mergeOption=function(option,e){t.prototype.mergeOption.call(this,option,e),this._updateSelector(option)},e.prototype._updateSelector=function(option){var t=option.selector,e=this.ecModel;!0===t&&(t=option.selector=["all","inverse"]),o.t(t)&&o.k(t,function(n,r){o.C(n)&&(n={type:n}),t[r]=o.I(n,function(t,e){return"all"===e?{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])}:"inverse"===e?{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(e,n.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,i=0;i<t.length;i++){var n=t[i].get("name");if(this.isSelected(n)){this.select(n),e=!0;break}}!e&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var e=[],n=[];t.eachRawSeries(function(r){var o,l=r.name;if(n.push(l),r.legendVisualProvider){var d=r.legendVisualProvider.getAllNames();t.isSeriesFiltered(r)||(n=n.concat(d)),d.length?e=e.concat(d):o=!0}else o=!0;o&&Object(c.m)(r)&&e.push(r.name)}),this._availableNames=n;var r=this.get("data")||e,d=o.f(),h=o.H(r,function(t){return(o.C(t)||o.z(t))&&(t={name:t}),d.get(t.name)?null:(d.set(t.name,!0),new l.a(t,this,this.ecModel))},this);this._data=o.n(h,function(t){return!!t})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var e=this.option.selected;if("single"===this.get("selectedMode")){var data=this._data;o.k(data,function(t){e[t.get("name")]=!1})}e[t]=!0},e.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var data=this._data,t=this.option.selected;o.k(data,function(e){t[e.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var data=this._data,t=this.option.selected;o.k(data,function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]})},e.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&o.r(this._availableNames,t)>=0},e.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(d.a);e.a=h},563:function(t,e,n){"use strict";var r=n(424),o=n(423),l=n(450),c=n(573),d=n(535),h=n(647),f=n(425),v=n(430),y=n(428),m=n(592),_=n(433),x=n(439),S=n(431),k=n(648),w=n(432),O=o.h,C=o.k,I=c.a,M=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return Object(r.a)(e,t),e.prototype.init=function(){this.group.add(this._contentGroup=new I),this.group.add(this._selectorGroup=new I),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,e,n){var r=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var l=t.get("align"),c=t.get("orient");l&&"auto"!==l||(l="right"===t.get("left")&&"vertical"===c?"right":"left");var d=t.get("selector",!0),h=t.get("selectorPosition",!0);!d||h&&"auto"!==h||(h="horizontal"===c?"end":"start"),this.renderInner(l,t,e,n,d,c,h);var f=t.getBoxLayoutParams(),v={width:n.getWidth(),height:n.getHeight()},y=t.get("padding"),x=_.g(f,v,y),S=this.layoutInner(t,l,x,r,d,h),k=_.g(o.i({width:S.width,height:S.height},f),v,y);this.group.x=k.x-S.x,this.group.y=k.y-S.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Object(m.b)(S,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,e,n,r,c,d,h){var f=this.getContentGroup(),v=o.f(),y=e.get("selectedMode"),m=[];n.eachRawSeries(function(t){!t.get("legendHoverLink")&&m.push(t.id)}),C(e.getData(),function(c,d){var h=c.get("name");if(!this.newlineDisabled&&(""===h||"\n"===h)){var g=new I;return g.newline=!0,void f.add(g)}var _=n.getSeriesByName(h)[0];if(!v.get(h)){if(_){var data=_.getData(),x=data.getVisual("legendLineStyle")||{},S=data.getVisual("legendIcon"),style=data.getVisual("style"),k=this._createItem(_,h,d,c,e,t,x,style,S,y,r);k.on("click",O(j,h,null,r,m)).on("mouseover",O(T,_.name,null,r,m)).on("mouseout",O(L,_.name,null,r,m)),n.ssr&&k.eachChild(function(t){var e=Object(w.a)(t);e.seriesIndex=_.seriesIndex,e.dataIndex=d,e.ssrType="legend"}),v.set(h,!0)}else n.eachRawSeries(function(f){if(!v.get(h)&&f.legendVisualProvider){var _=f.legendVisualProvider;if(!_.containName(h))return;var x=_.indexOfName(h),style=_.getItemVisual(x,"style"),S=_.getItemVisual(x,"legendIcon"),k=Object(l.g)(style.fill);k&&0===k[3]&&(k[3]=.2,style=o.m(o.m({},style),{fill:Object(l.h)(k,"rgba")}));var C=this._createItem(f,h,d,c,e,t,{},style,S,y,r);C.on("click",O(j,null,h,r,m)).on("mouseover",O(T,null,h,r,m)).on("mouseout",O(L,null,h,r,m)),n.ssr&&C.eachChild(function(t){var e=Object(w.a)(t);e.seriesIndex=f.seriesIndex,e.dataIndex=d,e.ssrType="legend"}),v.set(h,!0)}},this);0}},this),c&&this._createSelector(c,e,r,d,h)},e.prototype._createSelector=function(t,e,n,r,o){var l=this.getSelectorGroup();C(t,function(t){var r=t.type,o=new d.a({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===r?"legendAllSelect":"legendInverseSelect",legendId:e.id})}});l.add(o);var c=e.getModel("selectorLabel"),h=e.getModel(["emphasis","selectorLabel"]);Object(y.f)(o,{normal:c,emphasis:h},{defaultText:t.title}),Object(v.o)(o)})},e.prototype._createItem=function(t,e,n,r,l,c,m,_,x,w,O){var M=t.visualDrawType,j=l.get("itemWidth"),A=l.get("itemHeight"),T=l.isSelected(e),L=r.get("symbolRotate"),D=r.get("symbolKeepAspect"),P=r.get("icon"),style=function(t,e,n,r,o,l,c){function d(style,t){"auto"===style.lineWidth&&(style.lineWidth=t.lineWidth>0?2:0),C(style,function(e,n){"inherit"===style[n]&&(style[n]=t[n])})}var h=e.getModel("itemStyle"),f=h.getItemStyle(),v=0===t.lastIndexOf("empty",0)?"fill":"stroke",y=h.getShallow("decal");f.decal=y&&"inherit"!==y?Object(k.a)(y,c):r.decal,"inherit"===f.fill&&(f.fill=r[o]);"inherit"===f.stroke&&(f.stroke=r[v]);"inherit"===f.opacity&&(f.opacity=("fill"===o?r:n).opacity);d(f,r);var m=e.getModel("lineStyle"),_=m.getLineStyle();if(d(_,n),"auto"===f.fill&&(f.fill=r.fill),"auto"===f.stroke&&(f.stroke=r.fill),"auto"===_.stroke&&(_.stroke=r.fill),!l){var x=e.get("inactiveBorderWidth"),S=f[v];f.lineWidth="auto"===x?r.lineWidth>0&&S?2:0:f.lineWidth,f.fill=e.get("inactiveColor"),f.stroke=e.get("inactiveBorderColor"),_.stroke=m.get("inactiveColor"),_.lineWidth=m.get("inactiveWidth")}return{itemStyle:f,lineStyle:_}}(x=P||x||"roundRect",r,m,_,M,T,O),z=new I,N=r.getModel("textStyle");if(!o.w(t.getLegendIcon)||P&&"inherit"!==P){var R="inherit"===P&&t.getData().getVisual("symbol")?"inherit"===L?t.getData().getVisual("symbolRotate"):L:0;z.add(function(t){var e=t.icon||"roundRect",n=Object(S.a)(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2);return n}({itemWidth:j,itemHeight:A,icon:x,iconRotate:R,itemStyle:style.itemStyle,lineStyle:style.lineStyle,symbolKeepAspect:D}))}else z.add(t.getLegendIcon({itemWidth:j,itemHeight:A,icon:x,iconRotate:L,itemStyle:style.itemStyle,lineStyle:style.lineStyle,symbolKeepAspect:D}));var V="left"===c?j+5:-5,E=c,H=l.get("formatter"),content=e;o.C(H)&&H?content=H.replace("{name}",null!=e?e:""):o.w(H)&&(content=H(e));var G=T?N.getTextColor():r.get("inactiveColor");z.add(new d.a({style:Object(y.b)(N,{text:content,x:V,y:A/2,fill:G,align:E,verticalAlign:"middle"},{inheritColor:G})}));var B=new h.a({shape:z.getBoundingRect(),style:{fill:"transparent"}}),$=r.getModel("tooltip");return $.get("show")&&f.setTooltipConfig({el:B,componentModel:l,itemName:e,itemTooltipOption:$.option}),z.add(B),z.eachChild(function(t){t.silent=!0}),B.silent=!w,this.getContentGroup().add(z),Object(v.o)(z),z.__legendDataIndex=n,z},e.prototype.layoutInner=function(t,e,n,r,o,l){var c=this.getContentGroup(),d=this.getSelectorGroup();_.b(t.get("orient"),c,t.get("itemGap"),n.width,n.height);var h=c.getBoundingRect(),f=[-h.x,-h.y];if(d.markRedraw(),c.markRedraw(),o){_.b("horizontal",d,t.get("selectorItemGap",!0));var v=d.getBoundingRect(),y=[-v.x,-v.y],m=t.get("selectorButtonGap",!0),x=t.getOrient().index,S=0===x?"width":"height",k=0===x?"height":"width",w=0===x?"y":"x";"end"===l?y[x]+=h[S]+m:f[x]+=v[S]+m,y[1-x]+=h[k]/2-v[k]/2,d.x=y[0],d.y=y[1],c.x=f[0],c.y=f[1];var O={x:0,y:0};return O[S]=h[S]+m+v[S],O[k]=Math.max(h[k],v[k]),O[w]=Math.min(0,v[w]+y[1-x]),O}return c.x=f[0],c.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(x.a);function j(t,e,n,r){L(t,e,n,r),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),T(t,e,n,r)}function A(t){for(var e,n=t.getZr().storage.getDisplayList(),i=0,r=n.length;i<r&&!(e=n[i].states.emphasis);)i++;return e&&e.hoverLayer}function T(t,e,n,r){A(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:r})}function L(t,e,n,r){A(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:r})}e.a=M},565:function(t,e,n){t.exports={}},570:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(424),o=n(504),l=n(433),c=n(655),d={value:1,category:1,time:1,log:1},h=n(423);function f(t,e,n,f){Object(h.k)(d,function(d,y){var m=Object(h.I)(Object(h.I)({},o.a[y],!0),f,!0),_=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e+"Axis."+y,n}return Object(r.a)(n,t),n.prototype.mergeDefaultAndTheme=function(option,t){var e=Object(l.d)(this),n=e?Object(l.f)(option):{},r=t.getTheme();Object(h.I)(option,r.get(y+"Axis")),Object(h.I)(option,this.getDefaultOption()),option.type=v(option),e&&Object(l.h)(option,n,e)},n.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=c.a.createByAxisModel(this))},n.prototype.getCategories=function(t){var option=this.option;if("category"===option.type)return t?option.data:this.__ordinalMeta.categories},n.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},n.type=e+"Axis."+y,n.defaultOption=m,n}(n);t.registerComponentModel(_)}),t.registerSubTypeDefaulter(e+"Axis",v)}function v(option){return option.type||(option.data?"category":"value")}},584:function(t,e,n){"use strict";n.r(e);n(60),n(53),n(23),n(38);var r=n(6),o=n(462),l=n(595),c=n(1040),d=n(424),h=n(425),f=n(647),v=n(438),y=n(430),m=n(493),_=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var canvas=m.d.createCanvas();this.canvas=canvas}return t.prototype.update=function(data,t,e,n,r,o){var l=this._getBrush(),c=this._getGradient(r,"inRange"),d=this._getGradient(r,"outOfRange"),h=this.pointSize+this.blurSize,canvas=this.canvas,f=canvas.getContext("2d"),v=data.length;canvas.width=t,canvas.height=e;for(var i=0;i<v;++i){var p=data[i],y=p[0],m=p[1],_=n(p[2]);f.globalAlpha=_,f.drawImage(l,y-h,m-h)}if(!canvas.width||!canvas.height)return canvas;for(var x=f.getImageData(0,0,canvas.width,canvas.height),S=x.data,k=0,w=S.length,O=this.minOpacity,C=this.maxOpacity-O;k<w;){_=S[k+3]/256;var I=4*Math.floor(255*_);if(_>0){var M=o(_)?c:d;_>0&&(_=_*C+O),S[k++]=M[I],S[k++]=M[I+1],S[k++]=M[I+2],S[k++]=M[I+3]*_*256}else k+=4}return f.putImageData(x,0,0),canvas},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=m.d.createCanvas()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var r=t.getContext("2d");return r.clearRect(0,0,n,n),r.shadowOffsetX=n,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-e,e,this.pointSize,0,2*Math.PI,!0),r.closePath(),r.fill(),t},t.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,r=n[e]||(n[e]=new Uint8ClampedArray(1024)),o=[0,0,0,0],l=0,i=0;i<256;i++)t[e](i/255,!0,o),r[l++]=o[0],r[l++]=o[1],r[l++]=o[2],r[l++]=o[3];return r},t}(),x=n(423),S=n(458),k=n(467),w=n(428);function O(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var C=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(d.a)(e,t),e.prototype.render=function(t,e,n){var r;e.eachComponent("visualMap",function(e){e.eachTargetSeries(function(n){n===t&&(r=e)})}),this._progressiveEls=null,this.group.removeAll();var o=t.coordinateSystem;"cartesian2d"===o.type||"calendar"===o.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):O(o)&&this._renderOnGeo(o,t,r,n)},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,e,n,r){var o=e.coordinateSystem;o&&(O(o)?this.render(e,n,r):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(e,r,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){h.traverseElements(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,e,n,r,o){var l,c,d,h,v=t.coordinateSystem,m=Object(k.a)(v,"cartesian2d");if(m){var _=v.getAxis("x"),x=v.getAxis("y");0,l=_.getBandWidth()+.5,c=x.getBandWidth()+.5,d=_.scale.getExtent(),h=x.scale.getExtent()}for(var S=this.group,data=t.getData(),O=t.getModel(["emphasis","itemStyle"]).getItemStyle(),C=t.getModel(["blur","itemStyle"]).getItemStyle(),I=t.getModel(["select","itemStyle"]).getItemStyle(),M=t.get(["itemStyle","borderRadius"]),j=Object(w.d)(t),A=t.getModel("emphasis"),T=A.get("focus"),L=A.get("blurScope"),D=A.get("disabled"),P=m?[data.mapDimension("x"),data.mapDimension("y"),data.mapDimension("value")]:[data.mapDimension("time"),data.mapDimension("value")],z=n;z<r;z++){var rect=void 0,style=data.getItemVisual(z,"style");if(m){var N=data.get(P[0],z),R=data.get(P[1],z);if(isNaN(data.get(P[2],z))||isNaN(N)||isNaN(R)||N<d[0]||N>d[1]||R<h[0]||R>h[1])continue;var V=v.dataToPoint([N,R]);rect=new f.a({shape:{x:V[0]-l/2,y:V[1]-c/2,width:l,height:c},style:style})}else{if(isNaN(data.get(P[1],z)))continue;rect=new f.a({z2:1,shape:v.dataToRect([data.get(P[0],z)]).contentShape,style:style})}if(data.hasItemOption){var E=data.getItemModel(z),H=E.getModel("emphasis");O=H.getModel("itemStyle").getItemStyle(),C=E.getModel(["blur","itemStyle"]).getItemStyle(),I=E.getModel(["select","itemStyle"]).getItemStyle(),M=E.get(["itemStyle","borderRadius"]),T=H.get("focus"),L=H.get("blurScope"),D=H.get("disabled"),j=Object(w.d)(E)}rect.shape.r=M;var G=t.getRawValue(z),B="-";G&&null!=G[2]&&(B=G[2]+""),Object(w.f)(rect,j,{labelFetcher:t,labelDataIndex:z,defaultOpacity:style.opacity,defaultText:B}),rect.ensureState("emphasis").style=O,rect.ensureState("blur").style=C,rect.ensureState("select").style=I,Object(y.J)(rect,T,L,D),rect.incremental=o,o&&(rect.states.emphasis.hoverLayer=!0),S.add(rect),data.setItemGraphicEl(z,rect),this._progressiveEls&&this._progressiveEls.push(rect)}},e.prototype._renderOnGeo=function(t,e,n,r){var o=n.targetVisuals.inRange,l=n.targetVisuals.outOfRange,data=e.getData(),c=this._hmLayer||this._hmLayer||new _;c.blurSize=e.get("blurSize"),c.pointSize=e.get("pointSize"),c.minOpacity=e.get("minOpacity"),c.maxOpacity=e.get("maxOpacity");var rect=t.getViewRect().clone(),d=t.getRoamTransform();rect.applyTransform(d);var h=Math.max(rect.x,0),f=Math.max(rect.y,0),y=Math.min(rect.width+rect.x,r.getWidth()),m=Math.min(rect.height+rect.y,r.getHeight()),S=y-h,k=m-f,w=[data.mapDimension("lng"),data.mapDimension("lat"),data.mapDimension("value")],O=data.mapArray(w,function(e,n,r){var o=t.dataToPoint([e,n]);return o[0]-=h,o[1]-=f,o.push(r),o}),C=n.getExtent(),I="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(C,n.option.range):function(t,e,n){var r=t[1]-t[0],o=(e=x.H(e,function(e){return{interval:[(e.interval[0]-t[0])/r,(e.interval[1]-t[0])/r]}})).length,l=0;return function(t){var i;for(i=l;i<o;i++)if((r=e[i].interval)[0]<=t&&t<=r[1]){l=i;break}if(i===o)for(i=l-1;i>=0;i--){var r;if((r=e[i].interval)[0]<=t&&t<=r[1]){l=i;break}}return i>=0&&i<o&&n[i]}}(C,n.getPieceList(),n.option.selected);c.update(O,S,k,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:l.color.getColorMapper()},I);var img=new v.a({style:{width:S,height:k,x:h,y:f,image:c.canvas},silent:!0});this.group.add(img)},e.type="heatmap",e}(S.a),I=C,M=n(460),j=n(472),A=n(501),T=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(d.a)(e,t),e.prototype.getInitialData=function(option,t){return Object(j.a)(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=A.a.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(M.a),L=T;var D=n(656),P=n(658),z=n(594),N=n(827);Object(o.a)([c.a,D.a,P.a,z.a,function(t){t.registerChartView(I),t.registerSeriesModel(L)},N.a]);var R=Object(r.b)({name:"MonthlyReturnChart",props:{values:{type:Object,default:function(){return{2010:{JAN:1,FEB:2,MAR:3},2011:{JAN:1,FEB:2,MAR:3}}}},stats:{type:Object,default:function(){return{}}}},data:function(){return{option:{backgroundColor:"transparent",tooltip:{position:"top"},grid:{top:"12px",bottom:"48px",right:"0",left:"36px"},xAxis:{type:"category",data:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],splitArea:{show:!0}},yAxis:{type:"category",data:[],splitArea:{show:!0}},visualMap:{min:0,max:100,calculable:!0,orient:"horizontal",right:"0",top:"0",formatter:function(t){return t+"%"},inRange:{color:["#9a91ff","white","#ff85b6"]},show:!1},series:[{name:"報酬率",type:"heatmap",data:[],label:{show:!0,formatter:function(t){return"".concat(t.value[2],"%")}},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},optionYearly:null,years:0,chartInstance:null,chartYearlyInstance:null,resizeObserver:null}},watch:{values:{handler:"init",deep:!0}},mounted:function(){var t=this;this.initChart(),this.init(),window.addEventListener("resize",this.resizeChart),"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(function(){t.resizeChart()}),this.$refs.chart&&this.resizeObserver.observe(this.$refs.chart),this.$refs.chartYearly&&this.resizeObserver.observe(this.$refs.chartYearly))},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChart),this.resizeObserver&&this.resizeObserver.disconnect(),this.chartInstance&&this.chartInstance.dispose(),this.chartYearlyInstance&&this.chartYearlyInstance.dispose()},methods:{initChart:function(){this.$refs.chart&&(this.chartInstance=Object(l.b)(this.$refs.chart,"light")),this.$refs.chartYearly&&(this.chartYearlyInstance=Object(l.b)(this.$refs.chartYearly,"light"))},resizeChart:function(){this.chartInstance&&this.chartInstance.resize(),this.chartYearlyInstance&&this.chartYearlyInstance.resize()},init:function(){if(null!=this.values){this.optionYearly=JSON.parse(JSON.stringify(this.option)),this.optionYearly.grid.left="0";var t=this.values,e=[],n=[],r=0;for(var o in t)for(var l in r+=1,t[o])"YTD"!==l&&0!==t[o][l]&&(e.push([l,o,t[o][l]]),n.push(100*t[o][l]));this.years=r;var c={},d=[],i=0;for(var h in t)c[h]=r-1-i,d.unshift(h),i+=1;var f={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},v=[];for(var y in e){var m=e[y][0],_=e[y][1],x=f[String(m).slice(0,3).toLowerCase()];void 0!==x&&v.push([x,c[_],Math.round(1e3*e[y][2])/10])}this.option.series[0].data=v,this.option.yAxis.data=d;var S=n.length?Math.max.apply(Math,n):0,k=n.length?Math.min.apply(Math,n):0,w=Math.round(10*Math.max(Math.abs(S),Math.abs(k)))/10;this.option.visualMap.min=-w,this.option.visualMap.max=w;var O={},C=[];for(var I in i=0,t)O[I]=i,C.push(I),i+=1;var M=[],j=[];for(var A in t){var T=1;for(var L in t[A])"YTD"!==L&&(T*=1+t[A][L]);T-=1,M.push([O[A],0,Math.round(100*T)]),j.push(T)}this.optionYearly.series[0].data=M,this.optionYearly.xAxis.data=C,this.optionYearly.series[0].label.formatter=function(t){return"".concat(t.value[2],"%")},this.optionYearly.yAxis.data=["報酬"],S=100*Math.max.apply(Math,j),k=100*Math.min.apply(Math,j),w=Math.round(Math.max(Math.abs(S),Math.max(k))),this.optionYearly.visualMap.min=-w,this.optionYearly.visualMap.max=w,this.chartInstance&&this.chartInstance.setOption(this.option),this.chartYearlyInstance&&this.chartYearlyInstance.setOption(this.optionYearly)}}}}),V=(n(551),n(52)),component=Object(V.a)(R,function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("h5",{staticClass:"uk-text-primary uk-margin-large-top"},[t._v("年報酬")]),t._v(" "),e("div",{ref:"chartYearly",staticClass:"chartYearly"}),t._v(" "),e("h5",{staticClass:"uk-text-primary uk-margin-large-top"},[t._v("月報酬")]),t._v(" "),e("div",{staticClass:"uk-overflow-auto",staticStyle:{width:"100%"}},[e("div",{staticStyle:{"min-width":"420px"}},[e("div",{ref:"chart",staticClass:"chart",style:{height:"".concat(30*t.years+150,"px")}})])])])},[],!1,null,"347baf8c",null);e.default=component.exports},585:function(t,e,n){"use strict";n.d(e,"a",function(){return tt});var r=n(424),o=n(439),l=n(437),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.a)(e,t),e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(l.a),d=c,h=n(647),f=n(423),v=n(492),y=n(426),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.a)(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",y.b).models[0]},e.type="cartesian2dAxis",e}(l.a);f.K(m,v.a);var _=n(570),x=n(433),S=n(514),k=n(466),w=function(){function t(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return t.prototype.getAxis=function(t){return this._axes[t]},t.prototype.getAxes=function(){return f.H(this._dimList,function(t){return this._axes[t]},this)},t.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),f.n(this.getAxes(),function(e){return e.scale.type===t})},t.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},t}(),O=n(515),C=n(499),I=["x","y"];function M(t){return"interval"===t.type||"time"===t.type}var j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=I,e}return Object(r.a)(e,t),e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,e=this.getAxis("y").scale;if(M(t)&&M(e)){var n=t.getExtent(),r=e.getExtent(),o=this.dataToPoint([n[0],r[0]]),l=this.dataToPoint([n[1],r[1]]),c=n[1]-n[0],d=r[1]-r[0];if(c&&d){var h=(l[0]-o[0])/c,f=(l[1]-o[1])/d,v=o[0]-n[0]*h,y=o[1]-r[0]*f,m=this._transform=[h,0,0,f,v,y];this._invTransform=Object(O.d)([],m)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(data){return this.getAxis("x").containData(data[0])&&this.getAxis("y").containData(data[1])},e.prototype.containZone=function(t,e){var n=this.dataToPoint(t),r=this.dataToPoint(e),area=this.getArea(),o=new k.a(n[0],n[1],r[0]-n[0],r[1]-n[1]);return area.intersect(o)},e.prototype.dataToPoint=function(data,t,e){e=e||[];var n=data[0],r=data[1];if(this._transform&&null!=n&&isFinite(n)&&null!=r&&isFinite(r))return Object(C.b)(e,data,this._transform);var o=this.getAxis("x"),l=this.getAxis("y");return e[0]=o.toGlobalCoord(o.dataToCoord(n,t)),e[1]=l.toGlobalCoord(l.dataToCoord(r,t)),e},e.prototype.clampData=function(data,t){var e=this.getAxis("x").scale,n=this.getAxis("y").scale,r=e.getExtent(),o=n.getExtent(),l=e.parse(data[0]),c=n.parse(data[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(r[0],r[1]),l),Math.max(r[0],r[1])),t[1]=Math.min(Math.max(Math.min(o[0],o[1]),c),Math.max(o[0],o[1])),t},e.prototype.pointToData=function(t,e){var n=[];if(this._invTransform)return Object(C.b)(n,t,this._invTransform);var r=this.getAxis("x"),o=this.getAxis("y");return n[0]=r.coordToData(r.toLocalCoord(t[0]),e),n[1]=o.coordToData(o.toLocalCoord(t[1]),e),n},e.prototype.getOtherAxis=function(t){return this.getAxis("x"===t.dim?"y":"x")},e.prototype.getArea=function(t){t=t||0;var e=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),r=Math.min(e[0],e[1])-t,o=Math.min(n[0],n[1])-t,l=Math.max(e[0],e[1])-r+t,c=Math.max(n[0],n[1])-o+t;return new k.a(r,o,l,c)},e}(w),A=j,T=function(t){function e(e,n,r,o,l){var c=t.call(this,e,n,r)||this;return c.index=0,c.type=o||"value",c.position=l||"bottom",c}return Object(r.a)(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.getGlobalExtent=function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},e.prototype.pointToData=function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},e.prototype.setCategorySortInfo=function(t){if("category"!==this.type)return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(n(486).a),L=n(578),D=n(528),P=n(503);function z(t,e){return t.getCoordSysModel()===e}function N(t,e,n,r){n.getAxesOnZeroOf=function(){return o?[o]:[]};var o,l=t[e],c=n.model,d=c.get(["axisLine","onZero"]),h=c.get(["axisLine","onZeroAxisIndex"]);if(d){if(null!=h)R(l[h])&&(o=l[h]);else for(var f in l)if(l.hasOwnProperty(f)&&R(l[f])&&!r[v(l[f])]){o=l[f];break}o&&(r[v(o)]=!0)}function v(t){return t.dim+"_"+t.index}}function R(t){return t&&"category"!==t.type&&"time"!==t.type&&Object(S.g)(t)}var V=function(){function t(t,e,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=I,this._initCartesian(t,e,n),this.model=t}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(t,e){var n=this._axesMap;function r(t){var e,n=Object(f.F)(t),r=n.length;if(r){for(var o=[],i=r-1;i>=0;i--){var l=t[+n[i]],c=l.model,d=l.scale;Object(D.e)(d)&&c.get("alignTicks")&&null==c.get("interval")?o.push(l):(Object(S.i)(d,c),Object(D.e)(d)&&(e=l))}o.length&&(e||(e=o.pop(),Object(S.i)(e.scale,e.model)),Object(f.k)(o,function(t){Object(P.a)(t.scale,t.model,e.scale)}))}}this._updateScale(t,this.model),r(n.x),r(n.y);var o={};Object(f.k)(n.x,function(t){N(n,"y",t,o)}),Object(f.k)(n.y,function(t){N(n,"x",t,o)}),this.resize(this.model,e)},t.prototype.resize=function(t,e,n){var r=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),l=Object(x.g)(r,{width:e.getWidth(),height:e.getHeight()});this._rect=l;var c=this._axesList;function d(){Object(f.k)(c,function(t){var e=t.isHorizontal(),n=e?[0,l.width]:[0,l.height],r=t.inverse?1:0;t.setExtent(n[r],n[1-r]),function(t,e){var n=t.getExtent(),r=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return r-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return r-t+e}}(t,e?l.x:l.y)})}d(),o&&(Object(f.k)(c,function(t){if(!t.model.get(["axisLabel","inside"])){var e=Object(S.b)(t);if(e){var n=t.isHorizontal()?"height":"width",r=t.model.get(["axisLabel","margin"]);l[n]-=e[n]+r,"top"===t.position?l.y+=e.height+r:"left"===t.position&&(l.x+=e.width+r)}}}),d()),Object(f.k)(this._coordsList,function(t){t.calcAffineTransform()})},t.prototype.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n)return n[e||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}Object(f.A)(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,r=this._coordsList;i<r.length;i++)if(r[i].getAxis("x").index===t||r[i].getAxis("y").index===e)return r[i]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(t,e,n){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.dataToPoint(n):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(n)):null},t.prototype.convertFromPixel=function(t,e,n){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.pointToData(n):r.axis?r.axis.coordToData(r.axis.toLocalCoord(n)):null},t.prototype._findConvertTarget=function(t){var e,n,r=t.seriesModel,o=t.xAxisModel||r&&r.getReferringComponents("xAxis",y.b).models[0],l=t.yAxisModel||r&&r.getReferringComponents("yAxis",y.b).models[0],c=t.gridModel,d=this._coordsList;if(r)e=r.coordinateSystem,Object(f.r)(d,e)<0&&(e=null);else if(o&&l)e=this.getCartesian(o.componentIndex,l.componentIndex);else if(o)n=this.getAxis("x",o.componentIndex);else if(l)n=this.getAxis("y",l.componentIndex);else if(c){c.coordinateSystem===this&&(e=this._coordsList[0])}return{cartesian:e,axis:n}},t.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},t.prototype._initCartesian=function(t,e,n){var r=this,o=this,l={left:!1,right:!1,top:!1,bottom:!1},c={x:{},y:{}},d={x:0,y:0};if(e.eachComponent("xAxis",h("x"),this),e.eachComponent("yAxis",h("y"),this),!d.x||!d.y)return this._axesMap={},void(this._axesList=[]);function h(e){return function(n,r){if(z(n,t)){var h=n.get("position");"x"===e?"top"!==h&&"bottom"!==h&&(h=l.bottom?"top":"bottom"):"left"!==h&&"right"!==h&&(h=l.left?"right":"left"),l[h]=!0;var f=new T(e,Object(S.a)(n),[0,0],n.get("type"),h),v="category"===f.type;f.onBand=v&&n.get("boundaryGap"),f.inverse=n.get("inverse"),n.axis=f,f.model=n,f.grid=o,f.index=r,o._axesList.push(f),c[e][r]=f,d[e]++}}}this._axesMap=c,Object(f.k)(c.x,function(e,n){Object(f.k)(c.y,function(o,l){var c="x"+n+"y"+l,d=new A(c);d.master=r,d.model=t,r._coordsMap[c]=d,r._coordsList.push(d),d.addAxis(e),d.addAxis(o)})})},t.prototype._updateScale=function(t,e){function n(data,t){Object(f.k)(Object(S.d)(data,t.dim),function(e){t.scale.unionExtentFromData(data,e)})}Object(f.k)(this._axesList,function(t){if(t.scale.setExtent(1/0,-1/0),"category"===t.type){var e=t.model.get("categorySortInfo");t.scale.setSortInfo(e)}}),t.eachSeries(function(t){if(Object(L.b)(t)){var r=Object(L.a)(t),o=r.xAxisModel,l=r.yAxisModel;if(!z(o,e)||!z(l,e))return;var c=this.getCartesian(o.componentIndex,l.componentIndex),data=t.getData(),d=c.getAxis("x"),h=c.getAxis("y");n(data,d),n(data,h)}},this)},t.prototype.getTooltipAxes=function(t){var e=[],n=[];return Object(f.k)(this.getCartesians(),function(r){var o=null!=t&&"auto"!==t?r.getAxis(t):r.getBaseAxis(),l=r.getOtherAxis(o);Object(f.r)(e,o)<0&&e.push(o),Object(f.r)(n,l)<0&&n.push(l)}),{baseAxes:e,otherAxes:n}},t.create=function(e,n){var r=[];return e.eachComponent("grid",function(o,l){var c=new t(o,e,n);c.name="grid_"+l,c.resize(o,n,!0),o.coordinateSystem=c,r.push(c)}),e.eachSeries(function(t){if(Object(L.b)(t)){var e=Object(L.a)(t),n=e.xAxisModel,r=e.yAxisModel;0;var o=n.getCoordSysModel().coordinateSystem;t.coordinateSystem=o.getCartesian(n.componentIndex,r.componentIndex)}}),r},t.dimensions=I,t}(),E=n(573),H=n(425),G=n(682),B=n(491),$=n(549),F=n(593),W=["axisLine","axisTickLabel","axisName"],U=["splitArea","splitLine","minorSplitLine"],Y=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="CartesianAxisPointer",n}return Object(r.a)(e,t),e.prototype.render=function(e,n,r,o){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new E.a,this.group.add(this._axisGroup),e.get("show")){var c=e.getCoordSysModel(),d=L.c(c,e),h=new B.a(e,f.m({handleAutoShown:function(t){for(var n=c.coordinateSystem.getCartesians(),i=0;i<n.length;i++)if(Object(D.e)(n[i].getOtherAxis(e.axis).scale))return!0;return!1}},d));f.k(W,h.add,h),this._axisGroup.add(h.getGroup()),f.k(U,function(t){e.get([t,"show"])&&X[t](this,this._axisGroup,e,c)},this),o&&"changeAxisOrder"===o.type&&o.isInitSort||H.groupTransition(l,this._axisGroup,e),t.prototype.render.call(this,e,n,r,o)}},e.prototype.remove=function(){Object(F.b)(this)},e.type="cartesianAxis",e}($.a),X={splitLine:function(t,e,n,r){var o=n.axis;if(!o.scale.isBlank()){var l=n.getModel("splitLine"),c=l.getModel("lineStyle"),d=c.get("color"),h=!1!==l.get("showMinLine"),v=!1!==l.get("showMaxLine");d=f.t(d)?d:[d];for(var y=r.coordinateSystem.getRect(),m=o.isHorizontal(),_=0,x=o.getTicksCoords({tickModel:l}),S=[],k=[],w=c.getLineStyle(),i=0;i<x.length;i++){var O=o.toGlobalCoord(x[i].coord);if((0!==i||h)&&(i!==x.length-1||v)){var C=x[i].tickValue;m?(S[0]=O,S[1]=y.y,k[0]=O,k[1]=y.y+y.height):(S[0]=y.x,S[1]=O,k[0]=y.x+y.width,k[1]=O);var I=_++%d.length,line=new G.a({anid:null!=C?"line_"+C:null,autoBatch:!0,shape:{x1:S[0],y1:S[1],x2:k[0],y2:k[1]},style:f.i({stroke:d[I]},w),silent:!0});H.subPixelOptimizeLine(line.shape,w.lineWidth),e.add(line)}}}},minorSplitLine:function(t,e,n,r){var o=n.axis,l=n.getModel("minorSplitLine").getModel("lineStyle"),c=r.coordinateSystem.getRect(),d=o.isHorizontal(),h=o.getMinorTicksCoords();if(h.length)for(var f=[],v=[],y=l.getLineStyle(),i=0;i<h.length;i++)for(var m=0;m<h[i].length;m++){var _=o.toGlobalCoord(h[i][m].coord);d?(f[0]=_,f[1]=c.y,v[0]=_,v[1]=c.y+c.height):(f[0]=c.x,f[1]=_,v[0]=c.x+c.width,v[1]=_);var line=new G.a({anid:"minor_line_"+h[i][m].tickValue,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:v[0],y2:v[1]},style:y,silent:!0});H.subPixelOptimizeLine(line.shape,y.lineWidth),e.add(line)}},splitArea:function(t,e,n,r){Object(F.a)(t,e,n,r)}},J=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.type="xAxis",e}(Y),Z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=J.type,e}return Object(r.a)(e,t),e.type="yAxis",e}(Y),K=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="grid",e}return Object(r.a)(e,t),e.prototype.render=function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new h.a({shape:t.coordinateSystem.getRect(),style:Object(f.i)({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(o.a),Q={offset:0};function tt(t){t.registerComponentView(K),t.registerComponentModel(d),t.registerCoordinateSystem("cartesian2d",V),Object(_.a)(t,"x",m,Q),Object(_.a)(t,"y",m,Q),t.registerComponentView(J),t.registerComponentView(Z),t.registerPreprocessor(function(option){option.xAxis&&option.yAxis&&!option.grid&&(option.grid={})})}},588:function(t,e,n){"use strict";n.d(e,"a",function(){return A});var r=n(462),o=n(547),l=n(424),c=n(562),d=n(433),component=n(483),h=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(l.a)(e,t),e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(option,e,n){var r=Object(d.f)(option);t.prototype.init.call(this,option,e,n),f(this,option,r)},e.prototype.mergeOption=function(option,e){t.prototype.mergeOption.call(this,option,e),f(this,this.option,option)},e.type="legend.scroll",e.defaultOption=Object(component.d)(c.a.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(c.a);function f(t,e,n){var r=[1,1];r[t.getOrient().index]=0,Object(d.h)(e,n,{type:"box",ignoreSize:!!r})}var v=h,y=n(423),m=n(573),_=n(535),x=n(425),S=n(647),k=n(457),w=n(563),O=m.a,C=["width","height"],I=["x","y"],M=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return Object(l.a)(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new O),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new O)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(e,n,r,o,l,c,d){var h=this;t.prototype.renderInner.call(this,e,n,r,o,l,c,d);var f=this._controllerGroup,v=n.get("pageIconSize",!0),m=y.t(v)?v:[v,v];k("pagePrev",0);var S=n.getModel("pageTextStyle");function k(t,e){var r=t+"DataIndex",l=x.createIcon(n.get("pageIcons",!0)[n.getOrient().name][e],{onclick:y.c(h._pageGo,h,r,n,o)},{x:-m[0]/2,y:-m[1]/2,width:m[0],height:m[1]});l.name=t,f.add(l)}f.add(new _.a({name:"pageText",style:{text:"xx/xx",fill:S.getTextColor(),font:S.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),k("pageNext",1)},e.prototype.layoutInner=function(t,e,n,r,o,l){var c=this.getSelectorGroup(),h=t.getOrient().index,f=C[h],v=I[h],m=C[1-h],_=I[1-h];o&&d.b("horizontal",c,t.get("selectorItemGap",!0));var x=t.get("selectorButtonGap",!0),S=c.getBoundingRect(),k=[-S.x,-S.y],w=y.d(n);o&&(w[f]=n[f]-S[f]-x);var O=this._layoutContentAndController(t,r,w,h,f,m,_,v);if(o){if("end"===l)k[h]+=O[f]+x;else{var M=S[f]+x;k[h]-=M,O[v]-=M}O[f]+=S[f]+x,k[1-h]+=O[_]+O[m]/2-S[m]/2,O[m]=Math.max(O[m],S[m]),O[_]=Math.min(O[_],S[_]+k[1-h]),c.x=k[0],c.y=k[1],c.markRedraw()}return O},e.prototype._layoutContentAndController=function(t,e,n,r,o,l,c,h){var f=this.getContentGroup(),v=this._containerGroup,m=this._controllerGroup;d.b(t.get("orient"),f,t.get("itemGap"),r?n.width:null,r?null:n.height),d.b("horizontal",m,t.get("pageButtonItemGap",!0));var _=f.getBoundingRect(),x=m.getBoundingRect(),w=this._showController=_[o]>n[o],O=[-_.x,-_.y];e||(O[r]=f[h]);var C=[0,0],I=[-x.x,-x.y],M=y.P(t.get("pageButtonGap",!0),t.get("itemGap",!0));w&&("end"===t.get("pageButtonPosition",!0)?I[r]+=n[o]-x[o]:C[r]+=x[o]+M);I[1-r]+=_[l]/2-x[l]/2,f.setPosition(O),v.setPosition(C),m.setPosition(I);var j={x:0,y:0};if(j[o]=w?n[o]:_[o],j[l]=Math.max(_[l],x[l]),j[c]=Math.min(0,x[c]+I[1-r]),v.__rectSize=n[o],w){var A={x:0,y:0};A[o]=Math.max(n[o]-x[o]-M,0),A[l]=j[l],v.setClipPath(new S.a({shape:A})),v.__rectSize=A[o]}else m.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var T=this._getPageInfo(t);return null!=T.pageIndex&&k.g(f,{x:T.contentPosition[0],y:T.contentPosition[1]},w?t:null),this._updatePageInfoView(t,T),j},e.prototype._pageGo=function(t,e,n){var r=this._getPageInfo(e)[t];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:e.id})},e.prototype._updatePageInfoView=function(t,e){var n=this._controllerGroup;y.k(["pagePrev","pageNext"],function(r){var o=null!=e[r+"DataIndex"],l=n.childOfName(r);l&&(l.setStyle("fill",o?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),l.cursor=o?"pointer":"default")});var r=n.childOfName("pageText"),o=t.get("pageFormatter"),l=e.pageIndex,c=null!=l?l+1:0,d=e.pageCount;r&&o&&r.setStyle("text",y.C(o)?o.replace("{current}",null==c?"":c+"").replace("{total}",null==d?"":d+""):o({current:c,total:d}))},e.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),r=this._containerGroup.__rectSize,o=t.getOrient().index,l=C[o],c=I[o],d=this._findTargetItemIndex(e),h=n.children(),f=h[d],v=h.length,y=v?1:0,m={contentPosition:[n.x,n.y],pageCount:y,pageIndex:y-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return m;var _=w(f);m.contentPosition[o]=-_.s;for(var i=d+1,x=_,S=_,k=null;i<=v;++i)(!(k=w(h[i]))&&S.e>x.s+r||k&&!O(k,x.s))&&(x=S.i>x.i?S:k)&&(null==m.pageNextDataIndex&&(m.pageNextDataIndex=x.i),++m.pageCount),S=k;for(i=d-1,x=_,S=_,k=null;i>=-1;--i)(k=w(h[i]))&&O(S,k.s)||!(x.i<S.i)||(S=x,null==m.pagePrevDataIndex&&(m.pagePrevDataIndex=x.i),++m.pageCount,++m.pageIndex),x=k;return m;function w(t){if(t){var e=t.getBoundingRect(),n=e[c]+t[c];return{s:n,e:n+e[l],i:t.__legendDataIndex}}}function O(t,e){return t.e>=e&&t.s<=e+r}},e.prototype._findTargetItemIndex=function(t){return this._showController?(this.getContentGroup().eachChild(function(r,o){var l=r.__legendDataIndex;null==n&&null!=l&&(n=o),l===t&&(e=o)}),null!=e?e:n):0;var e,n},e.type="legend.scroll",e}(w.a),j=M;function A(t){Object(r.a)(o.a),t.registerComponentModel(v),t.registerComponentView(j),function(t){t.registerAction("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(n)})})}(t)}},592:function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return d});var r=n(433),o=n(463),l=n(647);function c(t,e,n){var o=e.getBoxLayoutParams(),l=e.get("padding"),c={width:n.getWidth(),height:n.getHeight()},rect=Object(r.g)(o,c,l);Object(r.b)(e.get("orient"),t,e.get("itemGap"),rect.width,rect.height),Object(r.i)(t,o,c,l)}function d(rect,t){var e=o.g(t.get("padding")),style=t.getItemStyle(["color","opacity"]);return style.fill=t.get("backgroundColor"),rect=new l.a({shape:{x:rect.x-e[3],y:rect.y-e[0],width:rect.width+e[1]+e[3],height:rect.height+e[0]+e[2],r:t.get("borderRadius")},style:style,silent:!0,z2:-1})}},593:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return h});var r=n(423),o=n(647),l=n(426),c=Object(l.n)();function d(t,e,n,l){var d=n.axis;if(!d.scale.isBlank()){var h=n.getModel("splitArea"),f=h.getModel("areaStyle"),v=f.get("color"),y=l.coordinateSystem.getRect(),m=d.getTicksCoords({tickModel:h,clamp:!0});if(m.length){var _=v.length,x=c(t).splitAreaColors,S=r.f(),k=0;if(x)for(var i=0;i<m.length;i++){var w=x.get(m[i].tickValue);if(null!=w){k=(w+(_-1)*i)%_;break}}var O=d.toGlobalCoord(m[0].coord),C=f.getAreaStyle();v=r.t(v)?v:[v];for(i=1;i<m.length;i++){var I=d.toGlobalCoord(m[i].coord),M=void 0,j=void 0,A=void 0,T=void 0;d.isHorizontal()?(M=O,j=y.y,A=I-M,T=y.height,O=M+A):(M=y.x,j=O,A=y.width,O=j+(T=I-j));var L=m[i-1].tickValue;null!=L&&S.set(L,k),e.add(new o.a({anid:null!=L?"area_"+L:null,shape:{x:M,y:j,width:A,height:T},style:r.i({fill:v[k]},C),autoBatch:!0,silent:!0})),k=(k+1)%_}c(t).splitAreaColors=S}}}function h(t){c(t).splitAreaColors=null}},594:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(462),o=n(541),l=n(542);function c(t){Object(r.a)(o.a),Object(r.a)(l.a)}},598:function(t,e,n){"use strict";n.r(e);n(45),n(68),n(60),n(39),n(30),n(64),n(74),n(65),n(23),n(44),n(86);var r=n(512),o=n(584),l=n(540),c=n(531),d={name:"strategy",components:{cumulativeReturnChart:r.default,monthlyReturnChart:o.default,RiskPanel:l.default,PositionPanel:c.default},props:{strategy:{default:null},position:{default:null},uid:{default:""},sid:{default:""},viewmode:{default:!0},isUploading:{default:!1}},watchQuery:["uid","sid"],data:function(){return{showCode:!1,displayStats:{"stats.cagr":{name:"年化報酬率",percentage:!0,description:"CAGR 複合年均成長率 <br /> 建議大於 18%"},"stats.daily_sharpe":{name:"年化夏普值",percentage:!1,description:"報酬率 / 風險之比率（年化） <br /> 建議大於 1.2"},"stats.max_drawdown":{name:"最大下跌",percentage:!0,description:"歷史上的最大虧損程度 <br /> 建議小於 20%"},"trade_indices.win_ratio":{name:"勝率",percentage:!0,description:"每一筆股票獲利的機率 <br /> 建議大於 55%"}},panel:"報酬分析"}},methods:{calcCagr:function(){if(!this.strategy||!this.strategy.returns)return null;var t=this.strategy.returns.value,e=this.strategy.returns.time;if(!t||!e||t.length<2)return null;var n=t[0],r=t[t.length-1];if(0===n)return null;var o=new Date(e[0]),l=(new Date(e[e.length-1])-o)/864e5;return l<=0?null:Math.pow(r/n,365.25/l)-1},getStrategyContent:function(t){if("stats.cagr"===t){var e=this.strategy&&this.strategy.stats?this.strategy.stats.cagr:null;return null!=e?e:this.calcCagr()}if("trade_indices.win_ratio"!==t)return t.split(".").reduce(function(a,t){return a&&t in a?a[t]:null},this.strategy);var n=t.split(".").reduce(function(a,t){return a&&t in a?a[t]:null},this.strategy);return null!=n?n:this.strategy&&this.strategy.stats?this.strategy.stats.win_ratio:null},switchTab:function(p){var t=this.permission(p);t[1]?this.panel=p:alert("不能查看".concat(p,"：").concat(t[0],"。"))},format_float:function(t){return Math.round(10*t)/10},addSign:function(t){return t>0?"+"+t.toString():t.toString()},addSignColor:function(t){return 0===t?"color:gray":t>0?"color:rgb(255, 82, 121)":"color:#18b89b"},permission:function(t){var e=null;if("選股清單"===t)e=this.strategy.public_position;else{if("程式碼"!==t)return["",!0];e=this.strategy.public_code}var n=null!==this.$store.state.user,r=this.$store.state.role.includes("vip"),o=n&&this.$store.state.user.uid===this.$props.uid;return 0===e?["(free)",!0]:1===e?["(需登入)",n]:2===e?["(vip)",n&&r]:["(未公開)",o]}},computed:{panels:function(){return this.viewmode,["報酬分析","風險分析","選股清單"]}}},h=(n(633),n(52)),component=Object(h.a)(d,function(){var t=this,e=t._self._c;return t.strategy?e("div",[t.$store.state.strategy&&!0===t.$store.state.strategy.isUploading?e("div",{staticClass:"loading"},[e("div",{staticStyle:{position:"relative",top:"30px",left:"calc(50% - 75px)"},attrs:{"uk-spinner":"ratio: 3"}})]):e("div",[e("div",{staticStyle:{"z-index":"2",position:"relative"}},[e("div",{staticClass:"uk-flex uk-flex-left uk-grid-small uk-width-4-5 uk-margin-large-top"},t._l(t.displayStats,function(n,r){return e("div",{key:r,staticClass:"uk-width",staticStyle:{"max-width":"160px","white-space":"nowrap"}},[t.getStrategyContent(r)?e("div",{staticClass:"uk-text-light uk-text-small",staticStyle:{"border-left":"1px solid #eee","padding-left":"10px"},attrs:{"uk-tooltip":n.description}},[t._v("\n            "+t._s(n.name)),e("br"),t._v(t._s(r.split(".").slice(-1)[0].replace("_"," "))),e("br"),t._v(" "),e("span",{staticClass:"uk-text-lead",style:n.percentage?t.addSignColor(t.getStrategyContent(r)):"color:gray"},[t._v(t._s(n.percentage?t.addSign(t.format_float(100*t.getStrategyContent(r))):t.format_float(t.getStrategyContent(r))))]),t._v("\n            "+t._s(n.percentage?"%":"")+"\n          ")]):t._e()])}),0),t._v(" "),t._m(0)]),t._v(" "),e("div",{staticStyle:{"z-index":"1","margin-top":"-200px",overflow:"hidden"}},[t.strategy.returns&&t.strategy.returns.value&&t.strategy.returns.time&&t.strategy.benchmark?e("cumulativeReturnChart",{attrs:{values:[t.strategy.returns.value],index:t.strategy.returns.time,benchmark:t.strategy.benchmark,benchmarkName:""}}):t._e()],1),t._v(" "),e("div",{staticStyle:{height:"24px"}}),t._v(" "),e("div",[e("ul",{staticClass:"uk-padding-remove-bottom",attrs:{"uk-tab":""}},t._l(t.panels,function(p){return e("li",{key:p,class:{"uk-active":t.panel===p,"uk-disabled":!t.permission(p)[1]},on:{click:function(e){return t.switchTab(p)}}},[e("a",{attrs:{href:"#"}},[e("div",[t._v("\n              "+t._s(p)+"\n            ")])])])}),0),t._v(" "),e("div",{staticClass:"uk-margin-large-top uk-margin-large-right",staticStyle:{"max-width":"960px"}},["風險分析"===t.panel?e("div",[this.strategy&&t.strategy.returns&&t.strategy.drawdown_details&&t.strategy.stats&&t.strategy.benchmark?e("RiskPanel",{attrs:{returns:t.strategy.returns,drawdown_details:t.strategy.drawdown_details,benchmark:t.strategy.benchmark,dailyMean:(void 0!==t.strategy.stats.cagr?t.strategy.stats.cagr:t.calcCagr())||t.strategy.stats.daily_mean,max_drawdown:t.strategy.stats.max_drawdown}}):t._e()],1):t._e(),t._v(" "),"選股清單"===t.panel?e("div",[this.strategy?e("PositionPanel",{attrs:{uid:this.uid,strategy_id:this.sid,position_id:this.strategy.position_id,positionPredefined:this.position}}):t._e()],1):t._e(),t._v(" "),"報酬分析"===t.panel?e("div",[t.strategy.return_table&&t.strategy.stats?e("monthlyReturnChart",{attrs:{values:t.strategy.return_table,stats:t.strategy.stats}}):t._e()],1):t._e()])])])]):t._e()},[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"60px"}},[e("span",{staticClass:"uk-text-small uk-text-primary"},[t._v("－ 策略")]),e("br"),t._v(" "),e("span",{staticClass:"uk-text-small uk-text-light"},[t._v("－ 大盤")])])}],!1,null,"72c8976f",null);e.default=component.exports;installComponents(component,{RiskPanel:n(540).default,PositionPanel:n(531).default})},633:function(t,e,n){"use strict";n(565)},634:function(t,e,n){"use strict";n.d(e,"a",function(){return r});n(53),n(23),n(44),n(40),n(56),n(38),n(717),n(718),n(282);function r(t){var e=t.sid,n=(t.uid,new URL("https://asia-east1-fdata-299302.cloudfunctions.net/social-image"));return Object.keys(t).forEach(function(e){t[e]&&n.searchParams.set(e,t[e])}),[{hid:"twitter:title",name:"twitter:title",content:e},{hid:"twitter:site",name:"twitter:site",content:"finlab"},{hid:"twitter:image",name:"twitter:image",content:n.toString()},{hid:"og:title",property:"og:title",content:e},{hid:"og:type",property:"og:type",content:"website"},{hid:"og:image",property:"og:image",content:n.toString()},{hid:"og:image:width",property:"og:image:width",content:"1200"},{hid:"og:image:height",property:"og:image:height",content:"630"}]}},656:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(462),o=n(547),l=n(588);function c(t){Object(r.a)(o.a),Object(r.a)(l.a)}},658:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(585),o=n(569),l=n(462);function c(t){Object(l.a)(r.a),Object(l.a)(o.a)}},668:function(t,e,n){"use strict";n.d(e,"a",function(){return $t});var r=n(473),o=n(442),l=n(438),c=n(481),d=n(558),h=Math.sin,f=Math.cos,v=Math.PI,y=2*Math.PI,m=180/v,_=function(){function t(){}return t.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},t.prototype.moveTo=function(t,e){this._add("M",t,e)},t.prototype.lineTo=function(t,e){this._add("L",t,e)},t.prototype.bezierCurveTo=function(t,e,n,r,o,l){this._add("C",t,e,n,r,o,l)},t.prototype.quadraticCurveTo=function(t,e,n,r){this._add("Q",t,e,n,r)},t.prototype.arc=function(t,e,n,r,o,l){this.ellipse(t,e,n,n,0,r,o,l)},t.prototype.ellipse=function(t,e,n,o,l,c,d,_){var x=d-c,S=!_,k=Math.abs(x),w=Object(r.j)(k-y)||(S?x>=y:-x>=y),O=x>0?x%y:x%y+y,C=!1;C=!!w||!Object(r.j)(k)&&O>=v==!!S;var I=t+n*f(c),M=e+o*h(c);this._start&&this._add("M",I,M);var j=Math.round(l*m);if(w){var p=1/this._p,A=(S?1:-1)*(y-p);this._add("A",n,o,j,1,+S,t+n*f(c+A),e+o*h(c+A)),p>.01&&this._add("A",n,o,j,0,+S,I,M)}else{var T=t+n*f(d),L=e+o*h(d);this._add("A",n,o,j,+C,+S,T,L)}},t.prototype.rect=function(t,e,n,r){this._add("M",t,e),this._add("l",n,0),this._add("l",0,r),this._add("l",-n,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(t,a,b,e,n,r,o,g,l){for(var c=[],p=this._p,i=1;i<arguments.length;i++){var d=arguments[i];if(isNaN(d))return void(this._invalid=!0);c.push(Math.round(d*p)/p)}this._d.push(t+c.join(" ")),this._start="Z"===t},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),x=_,S=n(591),k=n(423),w="none",O=Math.round;var C=["lineCap","miterLimit","lineJoin"],I=Object(k.H)(C,function(t){return"stroke-"+t.toLowerCase()});function M(t,style,e,n){var c=null==style.opacity?1:style.opacity;if(e instanceof l.a)t("opacity",c);else{if(function(style){var t=style.fill;return null!=t&&t!==w}(style)){var d=Object(r.p)(style.fill);t("fill",d.color);var h=null!=style.fillOpacity?style.fillOpacity*d.opacity*c:d.opacity*c;(n||h<1)&&t("fill-opacity",h)}else t("fill",w);if(function(style){var t=style.stroke;return null!=t&&t!==w}(style)){var f=Object(r.p)(style.stroke);t("stroke",f.color);var v=style.strokeNoScale?e.getLineScale():1,y=v?(style.lineWidth||0)/v:0,m=null!=style.strokeOpacity?style.strokeOpacity*f.opacity*c:f.opacity*c,_=style.strokeFirst;if((n||1!==y)&&t("stroke-width",y),(n||_)&&t("paint-order",_?"stroke":"fill"),(n||m<1)&&t("stroke-opacity",m),style.lineDash){var x=Object(S.a)(e),k=x[0],M=x[1];k&&(M=O(M||0),t("stroke-dasharray",k.join(",")),(M||n)&&t("stroke-dashoffset",M))}else n&&t("stroke-dasharray",w);for(var i=0;i<C.length;i++){var j=C[i];if(n||style[j]!==o.a[j]){var A=style[j]||o.a[j];A&&t(I[i],A)}}}else n&&t("stroke",w)}}var j=n(556),A="http://www.w3.org/2000/svg",T="http://www.w3.org/1999/xlink",L="ecmeta_";function D(t){return document.createElementNS(A,t)}function P(t,e,n,r,text){return{tag:t,attrs:n||{},children:r,text:text,key:e}}function z(t,e){var n=(e=e||{}).newline?"\n":"";return function t(e){var r=e.children,o=e.tag,l=e.attrs,text=e.text;return function(t,e){var n=[];if(e)for(var r in e){var o=e[r],l=r;!1!==o&&(!0!==o&&null!=o&&(l+='="'+o+'"'),n.push(l))}return"<"+t+" "+n.join(" ")+">"}(o,l)+("style"!==o?Object(j.a)(text):text||"")+(r?""+n+Object(k.H)(r,function(e){return t(e)}).join(n)+n:"")+("</"+o+">")}(t)}function N(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function R(t,e,n,r){return P("svg","root",{width:t,height:e,xmlns:A,"xmlns:xlink":T,version:"1.1",baseProfile:"full",viewBox:!!r&&"0 0 "+t+" "+e},n)}var V=n(575),E=n(543),H=n(487),G=n(576),B=n(572),$=0;function F(){return $++}var W={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},U="transform-origin";function Y(t,e,path){var n=Object(k.m)({},t.shape);Object(k.m)(n,e),t.buildPath(path,n);var o=new x;return o.reset(Object(r.f)(t)),path.rebuildPath(o,1),o.generateStr(),o.getStr()}function X(t,e){var n=e.originX,r=e.originY;(n||r)&&(t[U]=n+"px "+r+"px")}var J={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Z(t,e){var n=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[n]=t,n}function K(t){return Object(k.C)(t)?W[t]?"cubic-bezier("+W[t]+")":Object(B.a)(t)?t:"":""}function Q(t,e,n,o){var l=t.animators,c=l.length,d=[];if(t instanceof G.a){var h=function(t,e,n){var r,o,l=t.shape.paths,c={};if(Object(k.k)(l,function(path){var t=N(n.zrId);t.animation=!0,Q(path,{},t,!0);var e=t.cssAnims,l=t.cssNodes,d=Object(k.F)(e),h=d.length;if(h){var f=e[o=d[h-1]];for(var v in f){var y=f[v];c[v]=c[v]||{d:""},c[v].d+=y.d||""}for(var m in l){var _=l[m].animation;_.indexOf(o)>=0&&(r=_)}}}),r){e.d=!1;var d=Z(c,n);return r.replace(o,d)}}(t,e,n);if(h)d.push(h);else if(!c)return}else if(!c)return;for(var f={},i=0;i<c;i++){var v=l[i],y=[v.getMaxTime()/1e3+"s"],m=K(v.getClip().easing),_=v.getDelay();m?y.push(m):y.push("linear"),_&&y.push(_/1e3+"s"),v.getLoop()&&y.push("infinite");var x=y.join(" ");f[x]=f[x]||[x,[]],f[x][1].push(v)}function S(l){var path,c=l[1],d=c.length,h={},f={},v={},y="animation-timing-function";function m(t,e,n){for(var r=t.getTracks(),o=t.getMaxTime(),l=0;l<r.length;l++){var track=r[l];if(track.needsAnimate()){var c=track.keyframes,d=track.propName;if(n&&(d=n(d)),d)for(var i=0;i<c.length;i++){var h=c[i],f=Math.round(h.time/o*100)+"%",v=K(h.easing),m=h.rawValue;(Object(k.C)(m)||Object(k.z)(m))&&(e[f]=e[f]||{},e[f][d]=h.rawValue,v&&(e[f][y]=v))}}}}for(var i=0;i<d;i++){(A=(j=c[i]).targetName)?"shape"===A&&m(j,f):!o&&m(j,h)}for(var _ in h){var x={};Object(E.b)(x,t),Object(k.m)(x,h[_]);var S=Object(r.g)(x),w=h[_][y];v[_]=S?{transform:S}:{},X(v[_],x),w&&(v[_][y]=w)}var O=!0;for(var _ in f){v[_]=v[_]||{};var C=!path;w=f[_][y];C&&(path=new H.a);var I=path.len();path.reset(),v[_].d=Y(t,f[_],path);var M=path.len();if(!C&&I!==M){O=!1;break}w&&(v[_][y]=w)}if(!O)for(var _ in v)delete v[_].d;if(!o)for(i=0;i<d;i++){var j,A;"style"===(A=(j=c[i]).targetName)&&m(j,v,function(t){return J[t]})}var T,L=Object(k.F)(v),D=!0;for(i=1;i<L.length;i++){var P=L[i-1],z=L[i];if(v[P][U]!==v[z][U]){D=!1;break}T=v[P][U]}if(D&&T){for(var _ in v)v[_][U]&&delete v[_][U];e[U]=T}if(Object(k.n)(L,function(t){return Object(k.F)(v[t]).length>0}).length)return Z(v,n)+" "+l[0]+" both"}for(var w in f){(h=S(f[w]))&&d.push(h)}if(d.length){var O=n.zrId+"-cls-"+F();n.cssNodes["."+O]={animation:d.join(",")},e.class=O}}var tt=n(535),et=n(493),it=n(450);function nt(style,t,e,n){var r=JSON.stringify(style),o=e.cssStyleCache[r];o||(o=e.zrId+"-cls-"+F(),e.cssStyleCache[r]=o,e.cssNodes["."+o+(n?":hover":"")]=style),t.class=t.class?t.class+" "+o:o}var at=n(586),ot=Math.round;function st(t){return t&&Object(k.C)(t.src)}function lt(t){return t&&Object(k.w)(t.toDataURL)}function ct(t,style,e,n){M(function(o,l){var c="fill"===o||"stroke"===o;c&&Object(r.k)(l)?_t(style,t,o,n):c&&Object(r.n)(l)?xt(e,t,o,n):t[o]=l,c&&n.ssr&&"none"===l&&(t["pointer-events"]="visible")},style,e,!1),function(t,e,n){var style=t.style;if(Object(r.i)(style)){var o=Object(r.h)(t),l=n.shadowCache,c=l[o];if(!c){var d=t.getGlobalScale(),h=d[0],f=d[1];if(!h||!f)return;var v=style.shadowOffsetX||0,y=style.shadowOffsetY||0,m=style.shadowBlur,_=Object(r.p)(style.shadowColor),x=_.opacity,S=_.color,k=m/2/h+" "+m/2/f;c=n.zrId+"-s"+n.shadowIdx++,n.defs[c]=P("filter",c,{id:c,x:"-100%",y:"-100%",width:"300%",height:"300%"},[P("feDropShadow","",{dx:v/h,dy:y/f,stdDeviation:k,"flood-color":S,"flood-opacity":x})]),l[o]=c}e.filter=Object(r.d)(c)}}(e,t,n)}function ut(t,e){var n=Object(at.a)(e);n&&(n.each(function(e,n){null!=e&&(t[(L+n).toLowerCase()]=e+"")}),e.isSilent()&&(t[L+"silent"]="true"))}function ht(t){return Object(r.j)(t[0]-1)&&Object(r.j)(t[1])&&Object(r.j)(t[2])&&Object(r.j)(t[3]-1)}function pt(t,e,n){if(e&&(!function(t){return Object(r.j)(t[4])&&Object(r.j)(t[5])}(e)||!ht(e))){var o=n?10:1e4;t.transform=ht(e)?"translate("+ot(e[4]*o)/o+" "+ot(e[5]*o)/o+")":Object(r.e)(e)}}function ft(t,e,n){for(var r=t.points,o=[],i=0;i<r.length;i++)o.push(ot(r[i][0]*n)/n),o.push(ot(r[i][1]*n)/n);e.points=o.join(" ")}function gt(t){return!t.smooth}var desc,vt,yt={circle:[(desc=["cx","cy","r"],vt=Object(k.H)(desc,function(t){return"string"==typeof t?[t,t]:t}),function(t,e,n){for(var i=0;i<vt.length;i++){var r=vt[i],o=t[r[0]];null!=o&&(e[r[1]]=ot(o*n)/n)}})],polyline:[ft,gt],polygon:[ft,gt]};function mt(t,e){var style=t.style,n=t.shape,o=yt[t.type],l={},c=e.animation,d="path",h=t.style.strokePercent,f=e.compress&&Object(r.f)(t)||4;if(!o||e.willUpdate||o[1]&&!o[1](n)||c&&function(t){for(var e=t.animators,i=0;i<e.length;i++)if("shape"===e[i].targetName)return!0;return!1}(t)||h<1){var v=!t.path||t.shapeChanged();t.path||t.createPathProxy();var path=t.path;v&&(path.beginPath(),t.buildPath(path,t.shape),t.pathUpdated());var y=path.getVersion(),m=t,_=m.__svgPathBuilder;m.__svgPathVersion===y&&_&&h===m.__svgPathStrokePercent||(_||(_=m.__svgPathBuilder=new x),_.reset(f),path.rebuildPath(_,h),_.generateStr(),m.__svgPathVersion=y,m.__svgPathStrokePercent=h),l.d=_.getStr()}else{d=t.type;var S=Math.pow(10,f);o[0](n,l,S)}return pt(l,t.transform),ct(l,style,t,e),ut(l,t),e.animation&&Q(t,l,e),e.emphasis&&function(t,e,n){if(!t.ignore)if(t.isSilent())nt(style={"pointer-events":"none"},e,n,!0);else{var r=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},o=r.fill;if(!o){var l=t.style&&t.style.fill,c=t.states.select&&t.states.select.style&&t.states.select.style.fill,d=t.currentStates.indexOf("select")>=0&&c||l;d&&(o=Object(it.c)(d))}var h=r.lineWidth;h&&(h/=!r.strokeNoScale&&t.transform?t.transform[0]:1);var style={cursor:"pointer"};o&&(style.fill=o),r.stroke&&(style.stroke=r.stroke),h&&(style["stroke-width"]=h),nt(style,e,n,!0)}}(t,l,e),P(d,t.id+"",l)}function bt(t,e){return t instanceof o.b?mt(t,e):t instanceof l.a?function(t,e){var style=t.style,image=style.image;if(image&&!Object(k.C)(image)&&(st(image)?image=image.src:lt(image)&&(image=image.toDataURL())),image){var n=style.x||0,r=style.y||0,o={href:image,width:style.width,height:style.height};return n&&(o.x=n),r&&(o.y=r),pt(o,t.transform),ct(o,style,t,e),ut(o,t),e.animation&&Q(t,o,e),P("image",t.id+"",o)}}(t,e):t instanceof d.a?function(t,e){var style=t.style,text=style.text;if(null!=text&&(text+=""),text&&!isNaN(style.x)&&!isNaN(style.y)){var n=style.font||et.a,o=style.x||0,l=Object(r.b)(style.y||0,Object(c.e)(n),style.textBaseline),d={"dominant-baseline":"central","text-anchor":r.a[style.textAlign]||style.textAlign};if(Object(tt.b)(style)){var h="",f=style.fontStyle,v=Object(tt.c)(style.fontSize);if(!parseFloat(v))return;var y=style.fontFamily||et.b,m=style.fontWeight;h+="font-size:"+v+";font-family:"+y+";",f&&"normal"!==f&&(h+="font-style:"+f+";"),m&&"normal"!==m&&(h+="font-weight:"+m+";"),d.style=h}else d.style="font: "+n;return text.match(/\s/)&&(d["xml:space"]="preserve"),o&&(d.x=o),l&&(d.y=l),pt(d,t.transform),ct(d,style,t,e),ut(d,t),e.animation&&Q(t,d,e),P("text",t.id+"",d,void 0,text)}}(t,e):void 0}function _t(style,t,e,n){var o,l=style[e],c={gradientUnits:l.global?"userSpaceOnUse":"objectBoundingBox"};if(Object(r.m)(l))o="linearGradient",c.x1=l.x,c.y1=l.y,c.x2=l.x2,c.y2=l.y2;else{if(!Object(r.o)(l))return void 0;o="radialGradient",c.cx=Object(k.P)(l.x,.5),c.cy=Object(k.P)(l.y,.5),c.r=Object(k.P)(l.r,.5)}for(var d=l.colorStops,h=[],i=0,f=d.length;i<f;++i){var v=100*Object(r.q)(d[i].offset)+"%",y=d[i].color,m=Object(r.p)(y),_=m.color,x=m.opacity,S={offset:v};S["stop-color"]=_,x<1&&(S["stop-opacity"]=x),h.push(P("stop",i+"",S))}var w=z(P(o,"",c,h)),O=n.gradientCache,C=O[w];C||(C=n.zrId+"-g"+n.gradientIdx++,O[w]=C,c.id=C,n.defs[C]=P(o,C,c,h)),t[e]=Object(r.d)(C)}function xt(t,e,n,o){var l,c=t.style[n],d=t.getBoundingRect(),h={},f=c.repeat,v="no-repeat"===f,y="repeat-x"===f,m="repeat-y"===f;if(Object(r.l)(c)){var _=c.imageWidth,x=c.imageHeight,S=void 0,w=c.image;if(Object(k.C)(w)?S=w:st(w)?S=w.src:lt(w)&&(S=w.toDataURL()),"undefined"==typeof Image){var O="Image width/height must been given explictly in svg-ssr renderer.";Object(k.b)(_,O),Object(k.b)(x,O)}else if(null==_||null==x){var C=function(t,img){if(t){var e=t.elm,n=_||img.width,r=x||img.height;"pattern"===t.tag&&(y?(r=1,n/=d.width):m&&(n=1,r/=d.height)),t.attrs.width=n,t.attrs.height=r,e&&(e.setAttribute("width",n),e.setAttribute("height",r))}},I=Object(V.a)(S,null,t,function(img){v||C(T,img),C(l,img)});I&&I.width&&I.height&&(_=_||I.width,x=x||I.height)}l=P("image","img",{href:S,width:_,height:x}),h.width=_,h.height=x}else c.svgElement&&(l=Object(k.d)(c.svgElement),h.width=c.svgWidth,h.height=c.svgHeight);if(l){var M,j;v?M=j=1:y?(j=1,M=h.width/d.width):m?(M=1,j=h.height/d.height):h.patternUnits="userSpaceOnUse",null==M||isNaN(M)||(h.width=M),null==j||isNaN(j)||(h.height=j);var A=Object(r.g)(c);A&&(h.patternTransform=A);var T=P("pattern","",h,[l]),L=z(T),D=o.patternCache,N=D[L];N||(N=o.zrId+"-p"+o.patternIdx++,D[L]=N,h.id=N,T=o.defs[N]=P("pattern",N,h,[l])),e[n]=Object(r.d)(N)}}function St(t,e,n){var o=n.clipPathCache,defs=n.defs,l=o[t.id];if(!l){var c={id:l=n.zrId+"-c"+n.clipPathIdx++};o[t.id]=l,defs[l]=P("clipPath",l,c,[mt(t,n)])}e["clip-path"]=Object(r.d)(l)}function kt(text){return document.createTextNode(text)}function wt(t,e,n){t.insertBefore(e,n)}function Ot(t,e){t.removeChild(e)}function Ct(t,e){t.appendChild(e)}function It(t){return t.parentNode}function Mt(t){return t.nextSibling}function jt(t,text){t.textContent=text}var At=P("","");function Tt(s){return void 0===s}function Lt(s){return void 0!==s}function Dt(t,e,n){for(var map={},i=e;i<=n;++i){var r=t[i].key;void 0!==r&&(map[r]=i)}return map}function Pt(t,e){var n=t.key===e.key;return t.tag===e.tag&&n}function zt(t){var i,e=t.children,n=t.tag;if(Lt(n)){var r=t.elm=D(n);if(Vt(At,t),Object(k.t)(e))for(i=0;i<e.length;++i){var o=e[i];null!=o&&Ct(r,zt(o))}else Lt(t.text)&&!Object(k.A)(t.text)&&Ct(r,kt(t.text))}else t.elm=kt(t.text);return t.elm}function Nt(t,e,n,r,o){for(;r<=o;++r){var l=n[r];null!=l&&wt(t,zt(l),e)}}function Rt(t,e,n,r){for(;n<=r;++n){var o=e[n];if(null!=o)if(Lt(o.tag))Ot(It(o.elm),o.elm);else Ot(t,o.elm)}}function Vt(t,e){var n,r=e.elm,o=t&&t.attrs||{},l=e.attrs||{};if(o!==l){for(n in l){var c=l[n];o[n]!==c&&(!0===c?r.setAttribute(n,""):!1===c?r.removeAttribute(n):"style"===n?r.style.cssText=c:120!==n.charCodeAt(0)?r.setAttribute(n,c):"xmlns:xlink"===n||"xmlns"===n?r.setAttributeNS("http://www.w3.org/2000/xmlns/",n,c):58===n.charCodeAt(3)?r.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,c):58===n.charCodeAt(5)?r.setAttributeNS(T,n,c):r.setAttribute(n,c))}for(n in o)n in l||r.removeAttribute(n)}}function Et(t,e){var n=e.elm=t.elm,r=t.children,o=e.children;t!==e&&(Vt(t,e),Tt(e.text)?Lt(r)&&Lt(o)?r!==o&&function(t,e,n){for(var r,o,l,c=0,d=0,h=e.length-1,f=e[0],v=e[h],y=n.length-1,m=n[0],_=n[y];c<=h&&d<=y;)null==f?f=e[++c]:null==v?v=e[--h]:null==m?m=n[++d]:null==_?_=n[--y]:Pt(f,m)?(Et(f,m),f=e[++c],m=n[++d]):Pt(v,_)?(Et(v,_),v=e[--h],_=n[--y]):Pt(f,_)?(Et(f,_),wt(t,f.elm,Mt(v.elm)),f=e[++c],_=n[--y]):Pt(v,m)?(Et(v,m),wt(t,v.elm,f.elm),v=e[--h],m=n[++d]):(Tt(r)&&(r=Dt(e,c,h)),Tt(o=r[m.key])||(l=e[o]).tag!==m.tag?wt(t,zt(m),f.elm):(Et(l,m),e[o]=void 0,wt(t,l.elm,f.elm)),m=n[++d]);(c<=h||d<=y)&&(c>h?Nt(t,null==n[y+1]?null:n[y+1].elm,n,d,y):Rt(t,e,c,h))}(n,r,o):Lt(o)?(Lt(t.text)&&jt(n,""),Nt(n,null,o,0,o.length-1)):Lt(r)?Rt(n,r,0,r.length-1):Lt(t.text)&&jt(n,""):t.text!==e.text&&(Lt(r)&&Rt(n,r,0,r.length-1),jt(n,e.text)))}var Ht=n(561),Gt=0;var Bt=function(){function t(t,e,n){if(this.type="svg",this.refreshHover=function(){0},this.configLayer=function(){0},this.storage=e,this._opts=n=Object(k.m)({},n),this.root=t,this._id="zr"+Gt++,this._oldVNode=R(n.width,n.height),t&&!n.ssr){var r=this._viewport=document.createElement("div");r.style.cssText="position:relative;overflow:hidden";var o=this._svgDom=this._oldVNode.elm=D("svg");Vt(null,this._oldVNode),r.appendChild(o),t.appendChild(r)}this.resize(n.width,n.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",function(t,e){if(Pt(t,e))Et(t,e);else{var n=t.elm,r=It(n);zt(e),null!==r&&(wt(r,e.elm,Mt(n)),Rt(r,[t],0,0))}}(this._oldVNode,t),this._oldVNode=t}},t.prototype.renderOneToVNode=function(t){return bt(t,N(this._id))},t.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),n=this._width,o=this._height,l=N(this._id);l.animation=t.animation,l.willUpdate=t.willUpdate,l.compress=t.compress,l.emphasis=t.emphasis,l.ssr=this._opts.ssr;var c=[],d=this._bgVNode=function(t,e,n,o){var l;if(n&&"none"!==n)if(l=P("rect","bg",{width:t,height:e,x:"0",y:"0"}),Object(r.k)(n))_t({fill:n},l.attrs,"fill",o);else if(Object(r.n)(n))xt({style:{fill:n},dirty:k.L,getBoundingRect:function(){return{width:t,height:e}}},l.attrs,"fill",o);else{var c=Object(r.p)(n),d=c.color,h=c.opacity;l.attrs.fill=d,h<1&&(l.attrs["fill-opacity"]=h)}return l}(n,o,this._backgroundColor,l);d&&c.push(d);var h=t.compress?null:this._mainVNode=P("g","main",{},[]);this._paintList(e,l,h?h.children:c),h&&c.push(h);var defs=Object(k.H)(Object(k.F)(l.defs),function(t){return l.defs[t]});if(defs.length&&c.push(P("defs","defs",{},defs)),t.animation){var f=function(t,e,n){var r=(n=n||{}).newline?"\n":"",o=" {"+r,l=r+"}",c=Object(k.H)(Object(k.F)(t),function(e){return e+o+Object(k.H)(Object(k.F)(t[e]),function(n){return n+":"+t[e][n]+";"}).join(r)+l}).join(r),d=Object(k.H)(Object(k.F)(e),function(t){return"@keyframes "+t+o+Object(k.H)(Object(k.F)(e[t]),function(n){return n+o+Object(k.H)(Object(k.F)(e[t][n]),function(r){var o=e[t][n][r];return"d"===r&&(o='path("'+o+'")'),r+":"+o+";"}).join(r)+l}).join(r)+l}).join(r);return c||d?["<![CDATA[",c,d,"]]>"].join(r):""}(l.cssNodes,l.cssAnims,{newline:!0});if(f){var v=P("style","stl",{},[],f);c.push(v)}}return R(n,o,c,t.useViewBox)},t.prototype.renderToString=function(t){return t=t||{},z(this.renderToVNode({animation:Object(k.P)(t.cssAnimation,!0),emphasis:Object(k.P)(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Object(k.P)(t.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(t,e,n){for(var r,o,l=t.length,c=[],d=0,h=0,i=0;i<l;i++){var f=t[i];if(!f.invisible){var v=f.__clipPaths,y=v&&v.length||0,m=o&&o.length||0,_=void 0;for(_=Math.max(y-1,m-1);_>=0&&(!v||!o||v[_]!==o[_]);_--);for(var x=m-1;x>_;x--)r=c[--d-1];for(var S=_+1;S<y;S++){var k={};St(v[S],k,e);var g=P("g","clip-g-"+h++,k,[]);(r?r.children:n).push(g),c[d++]=g,r=g}o=v;var w=bt(f,e);w&&(r?r.children:n).push(w)}}},t.prototype.resize=function(t,e){var n=this._opts,o=this.root,l=this._viewport;if(null!=t&&(n.width=t),null!=e&&(n.height=e),o&&l&&(l.style.display="none",t=Object(Ht.b)(o,0,n),e=Object(Ht.b)(o,1,n),l.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,l){var c=l.style;c.width=t+"px",c.height=e+"px"}if(Object(r.n)(this._backgroundColor))this.refresh();else{var d=this._svgDom;d&&(d.setAttribute("width",t),d.setAttribute("height",e));var h=this._bgVNode&&this._bgVNode.elm;h&&(h.setAttribute("width",t),h.setAttribute("height",e))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(t){var e=this.renderToString(),n="data:image/svg+xml;";return t?(e=Object(r.c)(e))&&n+"base64,"+e:n+"charset=UTF-8,"+encodeURIComponent(e)},t}();function $t(t){t.registerPainter("svg",Bt)}},804:function(t,e,n){t.exports={}},920:function(t,e,n){"use strict";n(804)}}]);